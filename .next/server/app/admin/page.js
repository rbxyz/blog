(()=>{var e={};e.id=698,e.ids=[698],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},96716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=s(70260),r=s(28203),l=s(25155),d=s.n(l),i=s(67292),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let c=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17949)),"/home/rbxyz/dev/blog/src/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,96038)),"/home/rbxyz/dev/blog/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"/home/rbxyz/dev/blog/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],o=["/home/rbxyz/dev/blog/src/app/admin/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},56743:(e,t,s)=>{Promise.resolve().then(s.bind(s,17949))},87007:(e,t,s)=>{Promise.resolve().then(s.bind(s,79611))},96487:()=>{},78335:()=>{},79611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(45512),r=s(58009),l=s(9200),d=s(67682),i=s(43161),n=s(94825);let c=(0,n.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var o=s(82446),x=s(9472),m=s(25637);let h=(0,n.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=s(99274);let u=(0,n.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var g=s(1422);let j=(0,n.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var b=s(37058),v=s(28531),k=s.n(v);function N(){let[e,t]=(0,r.useState)("overview"),{data:s}=l.F.post.getAll.useQuery(),{data:n}=l.F.comment.getAll.useQuery(),{data:v}=l.F.newsletter.getStats.useQuery(),{data:N}=l.F.newsletter.getSmtpConfig.useQuery(),y=l.F.post.delete.useMutation({onSuccess:()=>{window.location.reload()}}),w=l.F.post.togglePublished.useMutation({onSuccess:()=>{window.location.reload()}}),f=l.F.comment.delete.useMutation({onSuccess:()=>{window.location.reload()}}),A=l.F.comment.restore.useMutation({onSuccess:()=>{window.location.reload()}}),P=e=>{confirm("Tem certeza que deseja deletar este post?")&&y.mutate({id:e})},M=(e,t)=>{w.mutate({id:e,published:!t})},C=e=>{confirm("Tem certeza que deseja deletar este coment\xe1rio?")&&f.mutate({id:e})},S=e=>{confirm("Tem certeza que deseja restaurar este coment\xe1rio?")&&A.mutate({id:e})},q=s?.length??0,T=s?.filter(e=>e.published).length??0,z=s?.reduce((e,t)=>e+(t.viewCount??0),0)??0,E=n?.length??0,D=n?.filter(e=>!e.isDeleted).length??0,V=[{id:"overview",label:"Vis\xe3o Geral",icon:d.A},{id:"posts",label:"Posts",icon:i.A},{id:"comments",label:"Coment\xe1rios",icon:c},{id:"analytics",label:"Analytics",icon:o.A},{id:"newsletter",label:"Newsletter",icon:x.A}];return(0,a.jsx)("div",{className:"min-h-screen pt-20 pb-12 px-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-4",children:"Painel Administrativo"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Gerencie seu blog, posts e coment\xe1rios"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"flex flex-wrap items-center space-x-1 glass-card rounded-xl p-1",children:V.map(s=>{let r=s.icon;return(0,a.jsxs)("button",{onClick:()=>t(s.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${e===s.id?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white shadow-lg":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[(0,a.jsx)(r,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:s.label})]},s.id)})})}),"overview"===e&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6 hover:shadow-glow transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Total"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:q}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Posts criados"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6 hover:shadow-glow transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Publicados"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:T}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Posts publicados"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6 hover:shadow-glow transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 text-secondary-600 dark:text-secondary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Visualiza\xe7\xf5es"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:z.toLocaleString()}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Total de views"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6 hover:shadow-glow transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(c,{className:"w-8 h-8 text-accent-600 dark:text-accent-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Coment\xe1rios"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:D}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Coment\xe1rios ativos"})]})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Atividade Recente"}),(0,a.jsx)("div",{className:"space-y-4",children:s?.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:e.title}),a.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Criado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${e.published?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400"}`,children:e.published?"Publicado":"Rascunho"}),a.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.viewCount??0," views"]})]})]},e.id))})]})]}),"posts"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Gerenciar Posts"}),(0,a.jsxs)(k(),{href:"/admin/posts/new",className:"group relative px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 shadow-lg group-hover:shadow-glow"}),(0,a.jsxs)("span",{className:"relative z-10 text-white flex items-center space-x-2",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Novo Post"})]})]})]}),(0,a.jsx)("div",{className:"glass-card rounded-2xl overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"border-b border-slate-200/20 dark:border-slate-700/20",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-4 font-semibold text-slate-700 dark:text-slate-300",children:"T\xedtulo"}),(0,a.jsx)("th",{className:"text-left p-4 font-semibold text-slate-700 dark:text-slate-300",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-4 font-semibold text-slate-700 dark:text-slate-300",children:"Views"}),(0,a.jsx)("th",{className:"text-left p-4 font-semibold text-slate-700 dark:text-slate-300",children:"Data"}),(0,a.jsx)("th",{className:"text-left p-4 font-semibold text-slate-700 dark:text-slate-300",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{children:s?.map(e=>a.jsxs("tr",{className:"border-b border-slate-200/10 dark:border-slate-700/10 hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:e.title}),a.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["/",e.slug]})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${e.published?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400"}`,children:e.published?"Publicado":"Rascunho"})}),a.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400",children:e.viewCount??0}),a.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(k(),{href:`/post/${e.slug}`,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(o.A,{className:"w-4 h-4"})}),a.jsx(k(),{href:`/admin/posts/edit/${e.id}`,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(p.A,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>M(e.id,e.published),className:`p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors ${e.published?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:e.published?a.jsx(u,{className:"w-4 h-4"}):a.jsx(m.A,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>P(e.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:a.jsx(g.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]}),"comments"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Gerenciar Coment\xe1rios"}),(0,a.jsxs)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Total: ",E," | Ativos: ",D]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[n?.map(e=>a.jsxs("div",{className:`glass-card rounded-xl p-6 transition-all duration-300 ${e.isDeleted?"opacity-50":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-accent-500 to-primary-500 flex items-center justify-center",children:a.jsx(j,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:e.author.name??e.author.email.split("@")[0]}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.author.email})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:e.isDeleted?a.jsx("span",{className:"px-2 py-1 rounded-lg text-xs font-medium bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:"Deletado"}):a.jsx("span",{className:"px-2 py-1 rounded-lg text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400",children:"Ativo"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:e.content})}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 dark:text-slate-400",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{children:["Post: ",a.jsx(k(),{href:`/post/${e.post.slug}`,className:"text-primary-600 dark:text-primary-400 hover:underline",children:e.post.title})]}),a.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"flex items-center space-x-2",children:e.isDeleted?a.jsx("button",{onClick:()=>S(e.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-green-600 dark:hover:text-green-400 transition-colors",title:"Restaurar coment\xe1rio",children:a.jsx(b.A,{className:"w-4 h-4"})}):a.jsx("button",{onClick:()=>C(e.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Deletar coment\xe1rio",children:a.jsx(g.A,{className:"w-4 h-4"})})})]})]},e.id)),n?.length===0&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(c,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Nenhum coment\xe1rio encontrado."})]})]})]}),"analytics"===e&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Estat\xedsticas de Visualiza\xe7\xf5es"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(o.A,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Total"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:z.toLocaleString()}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Visualiza\xe7\xf5es totais"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(j,{className:"w-6 h-6 text-secondary-600 dark:text-secondary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"\xdanicas"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:s?.reduce((e,t)=>e+(t.viewCount??0),0)?.toLocaleString()??0}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Visualiza\xe7\xf5es \xfanicas"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(i.A,{className:"w-6 h-6 text-accent-600 dark:text-accent-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Posts"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:T}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Posts publicados"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Posts Mais Visualizados"}),s?.sort((e,t)=>(t.viewCount??0)-(e.viewCount??0)).slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-slate-800 dark:text-slate-200",children:e.title}),a.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.viewCount??0," visualiza\xe7\xf5es"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"px-3 py-1 rounded-lg text-sm font-medium bg-primary-100 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400",children:[e.viewCount?.toLocaleString()??0," views"]}),a.jsx(k(),{href:`/api/posts/${e.slug}/stats`,target:"_blank",className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",title:"Ver estat\xedsticas detalhadas",children:a.jsx(o.A,{className:"w-4 h-4"})})]})]},e.id))]})]})}),"newsletter"===e&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Inscritos"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:v?.activeSubscribers?.toLocaleString()??0}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Inscritos ativos"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(c,{className:"w-8 h-8 text-secondary-600 dark:text-secondary-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Enviados"})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:v?.totalEmailsSent?.toLocaleString()??0}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Emails enviados"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 text-accent-600 dark:text-accent-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Taxa Abertura"})]}),(0,a.jsxs)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:[v?.openRate?.toFixed(1)??0,"%"]}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Taxa de abertura"})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Taxa Clique"})]}),(0,a.jsxs)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:[v?.clickRate?.toFixed(1)??0,"%"]}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Taxa de clique"})]})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Configura\xe7\xe3o SMTP"}),N?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Servidor SMTP"}),(0,a.jsx)("input",{type:"text",defaultValue:N.host,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",placeholder:"smtp.gmail.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Porta"}),(0,a.jsx)("input",{type:"number",defaultValue:N.port,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",placeholder:"587"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",defaultValue:N.fromEmail,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",placeholder:"seu@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nome do Remetente"}),(0,a.jsx)("input",{type:"text",defaultValue:N.fromName,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",placeholder:"Blog Ruan"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Senha/Token"}),(0,a.jsx)("input",{type:"password",defaultValue:N.password,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",placeholder:"Sua senha ou token de app"})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("button",{className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:"Salvar Configura\xe7\xe3o"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.A,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Nenhuma configura\xe7\xe3o SMTP encontrada. Configure para enviar newsletters."})]})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"A\xe7\xf5es da Newsletter"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Enviar Newsletter"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Selecione um post para enviar como newsletter para todos os inscritos."}),(0,a.jsxs)("select",{className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:[(0,a.jsx)("option",{value:"",children:"Selecione um post..."}),s?.map(e=>a.jsx("option",{value:e.id,children:e.title},e.id))]}),(0,a.jsx)("button",{className:"px-6 py-3 bg-secondary-600 hover:bg-secondary-700 text-white rounded-lg font-medium transition-colors",children:"Enviar Newsletter"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Gerar HTML"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Gere o HTML da newsletter para um post espec\xedfico."}),(0,a.jsxs)("select",{className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:[(0,a.jsx)("option",{value:"",children:"Selecione um post..."}),s?.map(e=>a.jsx("option",{value:e.id,children:e.title},e.id))]}),(0,a.jsx)("button",{className:"px-6 py-3 bg-accent-600 hover:bg-accent-700 text-white rounded-lg font-medium transition-colors",children:"Gerar HTML"})]})]})]})]})]})})}},96038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(62740),r=s(44512),l=s(37702),d=s(31831);async function i({children:e}){let t=await (0,r.UL)(),s=t.get("session")?.value;s||(0,d.redirect)("/auth/login?redirect=/admin");try{let e=await (0,l.dk)(s);e&&"ADMIN"===e.role||(0,d.redirect)("/")}catch{(0,d.redirect)("/auth/login?redirect=/admin")}return(0,a.jsx)(a.Fragment,{children:e})}},17949:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/rbxyz/dev/blog/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/rbxyz/dev/blog/src/app/admin/page.tsx","default")},37702:(e,t,s)=>{"use strict";s.d(t,{$u:()=>j,DY:()=>b,dk:()=>u,lx:()=>g});var a=s(34926),r=s(43008),l=s.n(r),d=s(95164),i=s(45997),n=s(80672),c=s(96330);let o=process.env.JWT_SECRET??"your-secret-key-change-in-production";async function x(e,t){return a.Ay.compare(e,t)}async function m(e){let t=new TextEncoder().encode(o);return await new d.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(t)}async function h(e){try{let t=new TextEncoder().encode(o),{payload:s}=await (0,i.V)(e,t);return s}catch{return null}}async function p(e,t,s){let a=await m({userId:e,email:t,role:s}),r=new Date(Date.now()+6048e5);return await n.prisma.session.create({data:{userId:e,token:a,expiresAt:r}}),a}async function u(e){try{let t=await h(e);if(!t?.userId)return null;let s=await n.prisma.session.findUnique({where:{token:e},include:{user:{select:{id:!0,email:!0,name:!0,role:!0,avatar:!0}}}});if(!s||s.expiresAt<new Date)return s&&await n.prisma.session.delete({where:{id:s.id}}),null;return{id:s.user.id,email:s.user.email,name:s.user.name,role:s.user.role,avatar:s.user.avatar}}catch(e){return console.error("Erro ao validar sess\xe3o:",e),null}}async function g(e){try{await n.prisma.session.delete({where:{token:e}})}catch(e){console.error("Erro ao encerrar sess\xe3o:",e)}}async function j(e,t){try{let s=await n.prisma.user.findUnique({where:{email:e.toLowerCase()}});if(!s||!await x(t,s.password))return null;let a=await p(s.id,s.email,s.role);return{user:{id:s.id,email:s.email,name:s.name,role:s.role,avatar:s.avatar},token:a}}catch(e){return console.error("Erro na autentica\xe7\xe3o:",e),null}}async function b(e,t,s,r=c.Role.USER){try{if(await n.prisma.user.findUnique({where:{email:e}}))return{error:"E-mail j\xe1 est\xe1 cadastrado"};let d=await a.Ay.hash(t,12),i=await n.prisma.user.create({data:{email:e,password:d,name:s,role:r,isVerified:!0}}),c=l().sign({id:i.id,email:i.email,role:i.role},o,{expiresIn:"7d"});return await n.prisma.session.create({data:{userId:i.id,token:c,expiresAt:new Date(Date.now()+6048e5)}}),{user:{id:i.id,email:i.email,name:i.name,role:i.role,avatar:i.avatar},token:c}}catch(e){return console.error("Erro no registro:",e),{error:"Erro interno do servidor"}}}},80672:(e,t,s)=>{"use strict";s.d(t,{prisma:()=>a});let a=new(s(96330)).PrismaClient},25637:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},82446:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},43161:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9472:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},37058:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},99274:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1422:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},67682:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(94825).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[994,882,315,828,848],()=>s(96716));module.exports=a})();