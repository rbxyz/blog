(()=>{var e={};e.id=841,e.ids=[841],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},8086:e=>{"use strict";e.exports=require("module")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},41204:e=>{"use strict";e.exports=require("string_decoder")},34631:e=>{"use strict";e.exports=require("tls")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},58929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>tX,routeModule:()=>tW,serverHooks:()=>tZ,workAsyncStorage:()=>tQ,workUnitAsyncStorage:()=>t$});var i,n,s,a={};r.r(a),r.d(a,{GET:()=>tJ,POST:()=>tJ});var o=r(42706),l=r(28203),c=r(45994);function u(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function p(e,t){let r=(function(e,t){let r=null,i=()=>{r?.unsubscribe(),r=null,t.removeEventListener("abort",i)};return new ReadableStream({start(n){r=e.subscribe({next(e){n.enqueue({ok:!0,value:e})},error(e){n.enqueue({ok:!1,error:e}),n.close()},complete(){n.close()}}),t.aborted?i():t.addEventListener("abort",i,{once:!0})},cancel(){i()}})})(e,t).getReader(),i={async next(){let e=await r.read();if(e.done)return{value:void 0,done:!0};let{value:t}=e;if(!t.ok)throw t.error;return{value:t.value,done:!1}},return:async()=>(await r.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>i}}let d={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},h={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"},f=Symbol();function m(e,...t){let r=Object.assign(Object.create(null),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function g(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function y(e){return"function"==typeof e}function v(e){return Object.assign(Object.create(null),e)}let b="function"==typeof Symbol&&!!Symbol.asyncIterator;function x(e){return b&&g(e)&&Symbol.asyncIterator in e}let w=e=>e();function k(e){return e}let S={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function E(e){let{path:t,error:r,config:i}=e,{code:n}=e.error,s={message:r.message,code:d[n],data:{code:n,httpStatus:S[r.code]??500}};return i.isDev&&"string"==typeof e.error.stack&&(s.data.stack=e.error.stack),"string"==typeof t&&(s.data.path=t),i.errorFormatter({...e,shape:s})}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T extends Error{}function A(e){if(e instanceof I||e instanceof Error&&"TRPCError"===e.name)return e;let t=new I({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}class I extends Error{constructor(e){let t=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if(g(e)){let t=new T;for(let r in e)t[r]=e[r];return t}}}(e.cause);super(e.message??t?.message??e.code,{cause:t}),_(this,"cause",void 0),_(this,"code",void 0),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=t)}}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let C=new WeakMap,j=()=>{};i=Symbol.toStringTag;class R{subscribe(){let e,t;let{settlement:r}=this;if(null===r){let r,i;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let n={promise:new Promise((e,t)=>{r=e,i=t}),resolve:r,reject:i};this.subscribers=[...this.subscribers,n],e=n.promise,t=()=>{null!==this.subscribers&&(this.subscribers=function(e,t){let r=e.indexOf(t);return -1!==r?[...e.slice(0,r),...e.slice(r+1)]:e}(this.subscribers,n))}}else{let{status:i}=r;e="fulfilled"===i?Promise.resolve(r.value):Promise.reject(r.reason),t=j}return Object.assign(e,{unsubscribe:t})}then(e,t){let r=this.subscribe(),{unsubscribe:i}=r;return Object.assign(r.then(e,t),{unsubscribe:i})}catch(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.catch(e),{unsubscribe:r})}finally(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.finally(e),{unsubscribe:r})}static proxy(e){let t=R.getSubscribablePromise(e);return void 0!==t?t:R.createSubscribablePromise(e)}static createSubscribablePromise(e){let t=new R(e);return C.set(e,t),C.set(t,t),t}static getSubscribablePromise(e){return C.get(e)}static resolve(e){let t="object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e);return R.proxy(t).subscribe()}static async any(e){let t=(Array.isArray(e)?e:[...e]).map(R.resolve);try{return await Promise.any(t)}finally{t.forEach(({unsubscribe:e})=>{e()})}}static async race(e){let t=(Array.isArray(e)?e:[...e]).map(R.resolve);try{return await Promise.race(t)}finally{t.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let t=e.map(N);try{return await Promise.race(t)}finally{for(let e of t)e.unsubscribe()}}constructor(e){O(this,"promise",void 0),O(this,"subscribers",[]),O(this,"settlement",null),O(this,i,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;let t=this.promise.then(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},t?.forEach(({resolve:t})=>{t(e)})});"catch"in t&&t.catch(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},t?.forEach(({reject:t})=>{t(e)})})}}function N(e){return R.proxy(e).then(()=>[e])}function M(e="AbortError"){throw new DOMException(e,"AbortError")}function D(e,t){let r=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await t(),await r?.()},e}(n=Symbol).dispose??(n.dispose=Symbol()),(s=Symbol).asyncDispose??(s.asyncDispose=Symbol());let L=Symbol();function P(e){let t=null;return function(e,t){let r=e[Symbol.dispose];return e[Symbol.dispose]=()=>{t(),r?.()},e}({start(){if(t)throw Error("Timer already started");return new Promise(r=>{t=setTimeout(()=>r(L),e)})}},()=>{t&&clearTimeout(t)})}function U(e,t,r){if(null!=t){var i,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}function z(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};return(z=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var i,n=0;return function t(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(t);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function B(e){let t=e[Symbol.asyncIterator]();return D(t,async()=>{await t.return?.()})}async function*K(e,t){let r={stack:[],error:void 0,hasError:!1};try{let i;let n=U(r,B(e),!0),s=U(r,P(t.maxDurationMs),!1).start();for(;;){if((i=await R.race([n.next(),s]))===L&&M(),i.done)return i;yield i.value,i=null}}catch(e){r.error=e,r.hasError=!0}finally{let e=z(r);e&&await e}}async function*F(e,t){let r={stack:[],error:void 0,hasError:!1};try{let i;let n=U(r,B(e),!0),s=U(r,P(t.gracePeriodMs),!1),a=t.count,o=new Promise(()=>{});for(;;){if((i=await R.race([n.next(),o]))===L&&M(),i.done)return i.value;yield i.value,0==--a&&(o=s.start()),i=null}}catch(e){r.error=e,r.hasError=!0}finally{let e=z(r);e&&await e}}function V(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function q(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};return(q=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var i,n=0;return function t(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(t);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function H(e){let t=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await t.return?.()},async pull(e){let r=await t.next();if(r.done){e.close();return}e.enqueue(r.value)}})}function G(e,t,r){if(null!=t){var i,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}function Y(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};return(Y=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var i,n=0;return function t(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(t);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}let J=Symbol("ping");async function*W(e,t){let r={stack:[],error:void 0,hasError:!1};try{let i;let n=G(r,B(e),!0),s=n.next();for(;;){let e={stack:[],error:void 0,hasError:!1};try{let r=G(e,P(t),!1);if((i=await R.race([s,r.start()]))===L){yield J;continue}if(i.done)return i.value;s=n.next(),yield i.value,i=null}catch(t){e.error=t,e.hasError=!0}finally{Y(e)}}}catch(e){r.error=e,r.hasError=!0}finally{let e=Y(r);e&&await e}}function Q(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};return(Q=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var i,n=0;return function t(){for(;i=e.stack.pop();)try{if(!i.async&&1===n)return n=0,e.stack.push(i),Promise.resolve().then(t);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function $(e){return(g(e)||y(e))&&"function"==typeof e?.then&&"function"==typeof e?.catch}class Z extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"path",void 0),this.path=e}}async function*X(e){let{data:t}=e,r=0,i=function(){let e="idle",t=V(),r=[],i=new Set,n=[];function s(r){if("pending"!==e)return;let s=function(e,t){let r=e[Symbol.asyncIterator](),i="idle";function n(){i="done",t=()=>{}}return{pull:function(){"idle"===i&&(i="pending",r.next().then(e=>{if(e.done){i="done",t({status:"return",value:e.value}),n();return}i="idle",t({status:"yield",value:e.value})}).catch(e=>{t({status:"error",error:e}),n()}))},destroy:async()=>{n(),await r.return?.()}}}(r,r=>{if("pending"===e){switch(r.status){case"yield":n.push([s,r]);break;case"return":i.delete(s);break;case"error":n.push([s,r]),i.delete(s)}t.resolve()}});i.add(s),s.pull()}return{add(t){switch(e){case"idle":r.push(t);break;case"pending":s(t)}},async *[Symbol.asyncIterator](){let a={stack:[],error:void 0,hasError:!1};try{if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",function(e,t,r){if(null!=t){var i,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");if(void 0===(i=t[Symbol.asyncDispose])){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=i=t[Symbol.dispose]}if("function"!=typeof i)throw TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else e.stack.push({async:!0})}(a,D({},async()=>{e="done";let r=[];if(await Promise.all(Array.from(i.values()).map(async e=>{try{await e.destroy()}catch(e){r.push(e)}})),n.length=0,i.clear(),t.resolve(),r.length>0)throw AggregateError(r)}),!0);r.length>0;)s(r.shift());for(;i.size>0;){for(await t.promise;n.length>0;){let[e,t]=n.shift();switch(t.status){case"yield":yield t.value,e.pull();break;case"error":throw t.error}}t=V()}}catch(e){a.error=e,a.hasError=!0}finally{let e=q(a);e&&await e}}}}();function n(e){let t=r++,n=e(t);return i.add(n),t}function s(t){return e.maxDepth&&t.length>e.maxDepth?new Z(t):null}function a(t,r){var i;if($(t))return[0,(i=t,n(async function*(t){let n=s(r);n&&(i.catch(t=>{e.onError?.({error:t,path:r})}),i=Promise.reject(n));try{let e=await i;yield[t,0,o(e,r)]}catch(i){e.onError?.({error:i,path:r}),yield[t,1,e.formatError?.({error:i,path:r})]}}))];if(x(t)){if(e.maxDepth&&r.length>=e.maxDepth)throw Error("Max depth reached");return[1,n(async function*(i){let n={stack:[],error:void 0,hasError:!1};try{let a=s(r);if(a)throw a;let l=function(e,t,r){if(null!=t){var i,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}(n,B(t),!0);try{for(;;){let e=await l.next();if(e.done){yield[i,0,o(e.value,r)];break}yield[i,1,o(e.value,r)]}}catch(t){e.onError?.({error:t,path:r}),yield[i,2,e.formatError?.({error:t,path:r})]}}catch(e){n.error=e,n.hasError=!0}finally{let e=Q(n);e&&await e}})]}return null}function o(e,t){if(void 0===e)return[[]];let r=a(e,t);if(r)return[[0],[null,...r]];if("[object Object]"!==Object.prototype.toString.call(e))return[[e]];let i={},n=[];for(let[r,s]of Object.entries(e)){let e=a(s,[...t,r]);if(!e){i[r]=s;continue}i[r]=0,n.push([r,...e])}return[[i],...n]}let l={};for(let[e,r]of Object.entries(t))l[e]=o(r,[e]);yield l;let c=i;for await(let t of(e.pingMs&&(c=W(i,e.pingMs)),c))yield t}let ee=Symbol(),et={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"},er={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function ei(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function en(e,t){return Array.isArray(t)?t.map(t=>ei(e,t)):ei(e,t)}let es=()=>{},ea=e=>{Object.freeze&&Object.freeze(e)},eo=e=>(function e(t,r,i){let n=r.join(".");return i[n]??(i[n]=new Proxy(es,{get(n,s){if("string"==typeof s&&"then"!==s)return e(t,[...r,s],i)},apply(e,i,n){let s=r[r.length-1],a={args:n,path:r};return"call"===s?a={args:n.length>=2?[n[1]]:[],path:r.slice(0,-1)}:"apply"===s&&(a={args:n.length>=2?n[1]:[],path:r.slice(0,-1)}),ea(a.args),ea(a.path),t(a)}})),i[n]})(e,[],Object.create(null)),el=({shape:e})=>e,ec=Symbol("lazy"),eu={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:el,transformer:er},ep=["then","call","apply"];function ed(e){return function(t){let r=new Set(Object.keys(t).filter(e=>ep.includes(e)));if(r.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(r).join(", "));let i=v({}),n=v({}),s=function e(t,r=[]){let s=v({});for(let[a,o]of Object.entries(t??{})){if("function"==typeof o&&ec in o){n[[...r,a].join(".")]=function t(r){return{ref:r.ref,load:function(e){let t=Symbol(),r=t;return()=>(r===t&&(r=e()),r)}(async()=>{let i=await r.ref(),s=[...r.path,r.key],a=s.join(".");for(let[o,l]of(r.aggregate[r.key]=e(i._def.record,s),delete n[a],Object.entries(i._def.lazy)))n[[...s,o].join(".")]=t({ref:l.ref,path:s,key:o,aggregate:r.aggregate[r.key]})})}}({path:r,ref:o,key:a,aggregate:s});continue}if(g(o)&&g(o._def)&&"router"in o._def){s[a]=e(o._def.record,[...r,a]);continue}if("function"!=typeof o){s[a]=e(o,[...r,a]);continue}let t=[...r,a].join(".");if(i[t])throw Error(`Duplicate key: ${t}`);i[t]=o,s[a]=o}return s}(t),a={_config:e,router:!0,procedures:i,lazy:n,...eu,record:s};return{...s,_def:a,createCaller:ef()({_def:a})}}}async function eh(e,t){let{_def:r}=e,i=r.procedures[t];for(;!i;){let e=Object.keys(r.lazy).find(e=>t.startsWith(e));if(!e)return null;let n=r.lazy[e];await n.load(),i=r.procedures[t]}return i}function ef(){return function(e){let{_def:t}=e;return function(r,i){return eo(async({path:n,args:s})=>{let a;let o=n.join(".");if(1===n.length&&"_def"===n[0])return t;let l=await eh(e,o);try{if(!l)throw new I({code:"NOT_FOUND",message:`No procedure found on path "${n}"`});return a=y(r)?await Promise.resolve(r()):r,await l({path:o,getRawInput:async()=>s[0],ctx:a,type:l._def.type,signal:i?.signal})}catch(e){throw i?.onError?.({ctx:a,error:A(e),input:s[0],path:o,type:l?._def.type??"unknown"}),e}})}}}function em(...e){let t=m({},...e.map(e=>e._def.record));return ed({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==el){if(e!==el&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},el),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==er){if(e!==er&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},er),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(t)}function eg(e){let t=null,r=f;return{read:async()=>(r!==f||(null===t&&(t=e().catch(e=>{if(e instanceof I)throw e;throw new I({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),r=await t,t=null),r),result:()=>r!==f?r:void 0}}let ey={isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/json"),async parse(e){let{req:t}=e,r="1"===e.searchParams.get("batch"),i=r?e.path.split(","):[e.path],n=eg(async()=>{let n;if("GET"===t.method){let t=e.searchParams.get("input");t&&(n=JSON.parse(t))}else n=await t.json();if(void 0===n)return{};if(!r)return{0:e.router._def._config.transformer.input.deserialize(n)};if(!g(n))throw new I({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let s={};for(let t of i.keys()){let r=n[t];void 0!==r&&(s[t]=e.router._def._config.transformer.input.deserialize(r))}return s}),s=await Promise.all(i.map(async(t,r)=>{let i=await eh(e.router,t);return{path:t,procedure:i,getRawInput:async()=>{let t=(await n.read())[r];if(i?._def.type==="subscription"){let r=e.headers.get("last-event-id")??e.searchParams.get("lastEventId")??e.searchParams.get("Last-Event-Id");r&&(g(t)?t={...t,lastEventId:r}:t??(t={lastEventId:r}))}return t},result:()=>n.result()?.[r]}})),a=new Set(s.map(e=>e.procedure?._def.type).filter(Boolean));if(a.size>1)throw new I({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(a).join(", ")}`});let o=a.values().next().value??"unknown",l=e.searchParams.get("connectionParams");return{isBatchCall:r,accept:t.headers.get("trpc-accept"),calls:s,type:o,connectionParams:null===l?null:function(e){let t;try{t=JSON.parse(e)}catch(e){throw new I({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}return function(e){try{if(null===e)return null;if(!g(e))throw Error("Expected object");let t=Object.entries(e).filter(([e,t])=>"string"!=typeof t);if(t.length>0)throw Error(`Expected connectionParams to be string values. Got ${t.map(([e,t])=>`${e}: ${typeof t}`).join(", ")}`);return e}catch(e){throw new I({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}(t)}(l),signal:t.signal,url:e.url}}},ev=[ey,{isMatch:e=>!!e.headers.get("content-type")?.startsWith("multipart/form-data"),async parse(e){let{req:t}=e;if("POST"!==t.method)throw new I({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let r=eg(async()=>await t.formData()),i=await eh(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:i}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}},{isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/octet-stream"),async parse(e){let{req:t}=e;if("POST"!==t.method)throw new I({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let r=eg(async()=>t.body);return{calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:await eh(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}}];async function eb(e){let t=function(e){let t=ev.find(t=>t.isMatch(e));if(t)return t;if(!t&&"GET"===e.method)return ey;throw new I({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await t.parse(e)}function ex(e){return w(async function*(){throw e})}let ew={mutation:["POST"],query:["GET"],subscription:["GET"]},ek={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function eS(e){let{ctx:t,info:r,responseMeta:i,untransformedJSON:n,errors:s=[],headers:a}=e,o=n?function(e){let t=new Set((Array.isArray(e)?e:[e]).map(e=>"error"in e&&g(e.error.data)?"number"==typeof e.error.data?.httpStatus?e.error.data.httpStatus:S[h[e.error.code]]??500:200));return 1!==t.size?207:t.values().next().value}(n):200,l=!n,c=l?[]:Array.isArray(n)?n:[n],u=i?.({ctx:t,info:r,paths:r?.calls.map(e=>e.path),data:c,errors:s,eagerGeneration:l,type:r?.calls.find(e=>e.procedure?._def.type)?.procedure?._def.type??"unknown"})??{};if(u.headers){if(u.headers instanceof Headers)for(let[e,t]of u.headers.entries())a.append(e,t);else for(let[e,t]of Object.entries(u.headers))if(Array.isArray(t))for(let r of t)a.append(e,r);else"string"==typeof t&&a.set(e,t)}return u.status&&(o=u.status),{status:o}}function eE(e){return!!g(e)&&(!!x(e)||Object.values(e).some($)||Object.values(e).some(x))}async function e_(e){let{router:t,req:r}=e,i=new Headers([["vary","trpc-accept"]]),n=t._def._config,s=new URL(r.url);if("HEAD"===r.method)return new Response(null,{status:204});let a=e.allowBatching??e.batching?.enabled??!0,o=(e.allowMethodOverride??!1)&&"POST"===r.method,l=await w(async()=>{try{return[void 0,await eb({req:r,path:decodeURIComponent(e.path),router:t,searchParams:s.searchParams,headers:e.req.headers,url:s})]}catch(e){return[A(e),void 0]}}),c=w(()=>{let t;return{valueOrUndefined:()=>{if(t)return t[1]},value:()=>{let[e,r]=t;if(e)throw e;return r},create:async r=>{if(t)throw Error("This should only be called once - report a bug in tRPC");try{let i=await e.createContext({info:r});t=[void 0,i]}catch(e){t=[A(e),void 0]}}}}),d=o?ek:ew,h="application/jsonl"===r.headers.get("trpc-accept"),f=n.sse?.enabled??!0;try{let[t,s]=l;if(t)throw t;if(s.isBatchCall&&!a)throw new I({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(h&&!s.isBatchCall)throw new I({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await c.create(s);let o=s.calls.map(async t=>{let i=t.procedure;try{if(e.error)throw e.error;if(!i)throw new I({code:"NOT_FOUND",message:`No procedure found on path "${t.path}"`});if(!d[i._def.type].includes(r.method))throw new I({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${r.method}-request to ${i._def.type} procedure at path "${t.path}"`});if("subscription"===i._def.type&&s.isBatchCall)throw new I({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});let n=await i({path:t.path,getRawInput:t.getRawInput,ctx:c.value(),type:i._def.type,signal:e.req.signal});return[void 0,{data:n}]}catch(n){let r=A(n),i=t.result();return e.onError?.({error:r,path:t.path,input:i,ctx:c.valueOrUndefined(),type:t.procedure?._def.type??"unknown",req:e.req}),[r,void 0]}});if(!s.isBatchCall){let[t]=s.calls,[r,a]=await o[0];switch(s.type){case"unknown":case"mutation":case"query":{if(i.set("content-type","application/json"),eE(a?.data))throw new I({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let o=r?{error:E({config:n,ctx:c.valueOrUndefined(),error:r,input:t.result(),path:t.path,type:s.type})}:{result:{data:a.data}},l=eS({ctx:c.valueOrUndefined(),info:s,responseMeta:e.responseMeta,errors:r?[r]:[],headers:i,untransformedJSON:[o]});return new Response(JSON.stringify(en(n,o)),{status:l.status,headers:i})}case"subscription":{let o=w(()=>r?ex(r):f?u(a.data)||x(a.data)?u(a.data)?p(a.data,e.req.signal):a.data:ex(new I({message:`Subscription ${t.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):ex(new I({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'}))),l=function(e){let{serialize:t=k}=e,r={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},i=e.client??{};if(r.enabled&&i.reconnectAfterInactivityMs&&r.intervalMs>i.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${r.intervalMs} client.reconnectAfterInactivityMs: ${i.reconnectAfterInactivityMs}`);async function*n(){let n,s;yield{event:"connected",data:JSON.stringify(i)};let a=e.data;for await(n of(e.emitAndEndImmediately&&(a=F(a,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(a=K(a,{maxDurationMs:e.maxDurationMs})),r.enabled&&r.intervalMs!==1/0&&r.intervalMs>0&&(a=W(a,r.intervalMs)),a)){var o;if(n===J){yield{event:"ping",data:""};continue}(s=Array.isArray(o=n)&&o[2]===ee?{id:n[0],data:n[1]}:{data:n}).data=JSON.stringify(t(s.data)),yield s,n=null,s=null}}return H(async function*(){try{yield*n(),yield{event:"return",data:""}}catch(n){if(g(n)&&"AbortError"===n.name)return;let r=A(n),i=e.formatError?.({error:r})??null;yield{event:"serialized-error",data:JSON.stringify(t(i))}}}()).pipeThrough(new TransformStream({transform(e,t){"event"in e&&t.enqueue(`event: ${e.event}
`),"data"in e&&t.enqueue(`data: ${e.data}
`),"id"in e&&t.enqueue(`id: ${e.id}
`),"comment"in e&&t.enqueue(`: ${e.comment}
`),t.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}({...n.sse,data:o,serialize:e=>n.transformer.output.serialize(e),formatError(r){let i=A(r.error),s=t?.result(),a=t?.path,o=t?.procedure?._def.type??"unknown";return e.onError?.({error:i,path:a,input:s,ctx:c.valueOrUndefined(),req:e.req,type:o}),E({config:n,ctx:c.valueOrUndefined(),error:i,input:s,path:a,type:o})}});for(let[e,t]of Object.entries(et))i.set(e,t);let d=eS({ctx:c.valueOrUndefined(),info:s,responseMeta:e.responseMeta,errors:[],headers:i,untransformedJSON:null});return new Response(l,{headers:i,status:d.status})}}}if("application/jsonl"===s.accept){i.set("content-type","application/json"),i.set("transfer-encoding","chunked");let t=eS({ctx:c.valueOrUndefined(),info:s,responseMeta:e.responseMeta,errors:[],headers:i,untransformedJSON:null}),r=function(e){let t=H(X(e)),{serialize:r}=e;return r&&(t=t.pipeThrough(new TransformStream({transform(e,t){e===J?t.enqueue(J):t.enqueue(r(e))}}))),t.pipeThrough(new TransformStream({transform(e,t){e===J?t.enqueue(" "):t.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}({...n.jsonl,maxDepth:1/0,data:o.map(async t=>{let[r,i]=await t,a=s.calls[0];if(r)return{error:E({config:n,ctx:c.valueOrUndefined(),error:r,input:a.result(),path:a.path,type:a.procedure?._def.type??"unknown"})};let o=u(i.data)?p(i.data,e.req.signal):Promise.resolve(i.data);return{result:Promise.resolve({data:o})}}),serialize:n.transformer.output.serialize,onError:t=>{e.onError?.({error:A(t),path:void 0,input:void 0,ctx:c.valueOrUndefined(),req:e.req,type:s?.type??"unknown"})},formatError(e){let t=s?.calls[e.path[0]],r=A(e.error),i=t?.result(),a=t?.path,o=t?.procedure?._def.type??"unknown";return E({config:n,ctx:c.valueOrUndefined(),error:r,input:i,path:a,type:o})}});return new Response(r,{headers:i,status:t.status})}i.set("content-type","application/json");let m=(await Promise.all(o)).map(e=>{let[t,r]=e;return t?e:eE(r.data)?[new I({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),y=m.map(([e,t],r)=>{let i=s.calls[r];return e?{error:E({config:n,ctx:c.valueOrUndefined(),error:e,input:i.result(),path:i.path,type:i.procedure?._def.type??"unknown"})}:{result:{data:t.data}}}),v=m.map(([e])=>e).filter(Boolean),b=eS({ctx:c.valueOrUndefined(),info:s,responseMeta:e.responseMeta,untransformedJSON:y,errors:v,headers:i});return new Response(JSON.stringify(en(n,y)),{status:b.status,headers:i})}catch(u){let[t,r]=l,n=c.valueOrUndefined(),{error:s,untransformedJSON:a,body:o}=function(e,t){let{router:r,req:i,onError:n}=t.opts,s=A(e);n?.({error:s,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:i});let a={error:E({config:r._def._config,error:s,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},o=JSON.stringify(en(r._def._config,a));return{error:s,untransformedJSON:a,body:o}}(u,{opts:e,ctx:c.valueOrUndefined(),type:r?.type??"unknown"});return new Response(o,{status:eS({ctx:n,info:r,responseMeta:e.responseMeta,untransformedJSON:a,errors:[s],headers:i}).status,headers:i})}}let eT="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID,eA=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function eI(e){let t=new Headers,r=async r=>e.createContext?.({req:e.req,resHeaders:t,...r}),i=eA(new URL(e.req.url).pathname),n=eA(e.endpoint),s=eA(i.slice(n.length));return await e_({...e,req:e.req,createContext:r,path:s,error:null,onError(t){e?.onError?.({...t,req:e.req})},responseMeta(r){let i=e.responseMeta?.(r);if(i?.headers){if(i.headers instanceof Headers)for(let[e,r]of i.headers.entries())t.append(e,r);else for(let[e,r]of Object.entries(i.headers))if(Array.isArray(r))for(let i of r)t.append(e,i);else"string"==typeof r&&t.set(e,r)}return{headers:t,status:i?.status}}})}let eO="middlewareMarker";class eC extends Error{constructor(e){super(e[0]?.message),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"issues",void 0),this.name="SchemaError",this.issues=e}}function ej(e){if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);if("~standard"in e)return async t=>{let r=await e["~standard"].validate(t);if(r.issues)throw new eC(r.issues);return r.value};throw Error("Could not find a validator fn")}function eR(e,t){let{middlewares:r=[],inputs:i,meta:n,...s}=t;return eN({...m(e,s),inputs:[...e.inputs,...i??[]],middlewares:[...e.middlewares,...r],meta:e.meta&&n?{...e.meta,...n}:n??e.meta})}function eN(e={}){let t={procedure:!0,inputs:[],middlewares:[],...e};return{_def:t,input(e){let r=ej(e);return eR(t,{inputs:[e],middlewares:[function(e){let t=async function(t){let r;let i=await t.getRawInput();try{r=await e(i)}catch(e){throw new I({code:"BAD_REQUEST",cause:e})}let n=g(t.input)&&g(r)?{...t.input,...r}:r;return t.next({input:n})};return t._type="input",t}(r)]})},output(e){let r=ej(e);return eR(t,{output:e,middlewares:[function(e){let t=async function({next:t}){let r=await t();if(!r.ok)return r;try{let t=await e(r.data);return{...r,data:t}}catch(e){throw new I({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return t._type="output",t}(r)]})},meta:e=>eR(t,{meta:e}),use:e=>eR(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>eR(t,e._def),query:e=>eM({...t,type:"query"},e),mutation:e=>eM({...t,type:"mutation"},e),subscription:e=>eM({...t,type:"subscription"},e),experimental_caller:e=>eR(t,{caller:e})}}function eM(e,t){let r=eR(e,{resolver:t,middlewares:[async function(e){return{marker:eO,ok:!0,data:await t(e),ctx:e.ctx}}]}),i={...r._def,type:e.type,experimental_caller:!!r._def.caller,meta:r._def.meta,$types:null},n=function(e){async function t(t){if(!t||!("getRawInput"in t))throw Error(eD);let r=await eL(0,e,t);if(!r)throw new I({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!r.ok)throw r.error;return r.data}return t._def=e,t.procedure=!0,t}(r._def),s=r._def.caller;if(!s)return n;let a=async(...e)=>await s({args:e,invoke:n,_def:i});return a._def=i,a}let eD=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function eL(e,t,r){try{let i=t.middlewares[e];return await i({...r,meta:t.meta,input:r.input,next:i=>eL(e+1,t,{...r,ctx:i?.ctx?{...r.ctx,...i.ctx}:r.ctx,input:i&&"input"in i?i.input:r.input,getRawInput:i?.getRawInput??r.getRawInput})})}catch(e){return{ok:!1,error:A(e),marker:eO}}}class eP{context(){return new eP}meta(){return new eP}create(e){var t;let r={...e,transformer:"input"in(t=e?.transformer??er)?t:{input:t,output:t},isDev:e?.isDev??globalThis.process?.env.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??el,isServer:e?.isServer??eT,$types:null};if(!(e?.isServer??eT)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:r,procedure:eN({meta:e?.defaultMeta}),middleware:function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])},router:ed(r),mergeRouters:em,createCallerFactory:ef()}}}let eU=new eP;class ez{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class eB{constructor(e){this.generateIdentifier=e,this.kv=new ez}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class eK extends eB{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function eF(e,t){Object.entries(e).forEach(([e,r])=>t(r,e))}function eV(e,t){return -1!==e.indexOf(t)}function eq(e,t){for(let r=0;r<e.length;r++){let i=e[r];if(t(i))return i}}class eH{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,t){let r=function(e){if("values"in Object)return Object.values(e);let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);for(let e=0;e<r.length;e++){let i=r[e];if(t(i))return i}}(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}}let eG=e=>Object.prototype.toString.call(e).slice(8,-1),eY=e=>void 0===e,eJ=e=>null===e,eW=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),eQ=e=>eW(e)&&0===Object.keys(e).length,e$=e=>Array.isArray(e),eZ=e=>"string"==typeof e,eX=e=>"number"==typeof e&&!isNaN(e),e0=e=>"boolean"==typeof e,e1=e=>e instanceof Map,e2=e=>e instanceof Set,e3=e=>"Symbol"===eG(e),e4=e=>"number"==typeof e&&isNaN(e),e6=e=>e0(e)||eJ(e)||eY(e)||eX(e)||eZ(e)||e3(e),e5=e=>e===1/0||e===-1/0,e8=e=>e.replace(/\./g,"\\."),e9=e=>e.map(String).map(e8).join("."),e7=e=>{let t=[],r="";for(let i=0;i<e.length;i++){let n=e.charAt(i);if("\\"===n&&"."===e.charAt(i+1)){r+=".",i++;continue}if("."===n){t.push(r),r="";continue}r+=n}let i=r;return t.push(i),t};function te(e,t,r,i){return{isApplicable:e,annotation:t,transform:r,untransform:i}}let tt=[te(eY,"undefined",()=>null,()=>void 0),te(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),te(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),te(e=>e instanceof Error,"Error",(e,t)=>{let r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r},(e,t)=>{let r=Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r}),te(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),te(e2,"set",e=>[...e.values()],e=>new Set(e)),te(e1,"map",e=>[...e.entries()],e=>new Map(e)),te(e=>e4(e)||e5(e),"number",e=>e4(e)?"NaN":e>0?"Infinity":"-Infinity",Number),te(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),te(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function tr(e,t,r,i){return{isApplicable:e,annotation:t,transform:r,untransform:i}}let ti=tr((e,t)=>!!e3(e)&&!!t.symbolRegistry.getIdentifier(e),(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{let i=r.symbolRegistry.getValue(t[1]);if(!i)throw Error("Trying to deserialize unknown symbol");return i}),tn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),ts=tr(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{let r=tn[t[1]];if(!r)throw Error("Trying to deserialize unknown typed array");return new r(e)});function ta(e,t){return!!e?.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}let to=tr(ta,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{let r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};let i={};return r.forEach(t=>{i[t]=e[t]}),i},(e,t,r)=>{let i=r.classRegistry.getValue(t[1]);if(!i)throw Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(i.prototype),e)}),tl=tr((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{let i=r.customTransformerRegistry.findByName(t[1]);if(!i)throw Error("Trying to deserialize unknown custom value");return i.deserialize(e)}),tc=[to,ti,tl,ts],tu=(e,t)=>{let r=eq(tc,r=>r.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};let i=eq(tt,r=>r.isApplicable(e,t));if(i)return{value:i.transform(e,t),type:i.annotation}},tp={};tt.forEach(e=>{tp[e.annotation]=e});let td=(e,t,r)=>{if(e$(t))switch(t[0]){case"symbol":return ti.untransform(e,t,r);case"class":return to.untransform(e,t,r);case"custom":return tl.untransform(e,t,r);case"typed-array":return ts.untransform(e,t,r);default:throw Error("Unknown transformation: "+t)}else{let i=tp[t];if(!i)throw Error("Unknown transformation: "+t);return i.untransform(e,r)}},th=(e,t)=>{if(t>e.size)throw Error("index out of bounds");let r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function tf(e){if(eV(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(eV(e,"prototype"))throw Error("prototype is not allowed as a property");if(eV(e,"constructor"))throw Error("constructor is not allowed as a property")}let tm=(e,t)=>{tf(t);for(let r=0;r<t.length;r++){let i=t[r];if(e2(e))e=th(e,+i);else if(e1(e)){let n=+i,s=0==+t[++r]?"key":"value",a=th(e,n);switch(s){case"key":e=a;break;case"value":e=e.get(a)}}else e=e[i]}return e},tg=(e,t,r)=>{if(tf(t),0===t.length)return r(e);let i=e;for(let e=0;e<t.length-1;e++){let r=t[e];if(e$(i))i=i[+r];else if(eW(i))i=i[r];else if(e2(i))i=th(i,+r);else if(e1(i)){if(e===t.length-2)break;let n=+r,s=0==+t[++e]?"key":"value",a=th(i,n);switch(s){case"key":i=a;break;case"value":i=i.get(a)}}}let n=t[t.length-1];if(e$(i)?i[+n]=r(i[+n]):eW(i)&&(i[n]=r(i[n])),e2(i)){let e=th(i,+n),t=r(e);e!==t&&(i.delete(e),i.add(t))}if(e1(i)){let e=th(i,+t[t.length-2]);switch(0==+n?"key":"value"){case"key":{let t=r(e);i.set(t,i.get(e)),t!==e&&i.delete(e);break}case"value":i.set(e,r(i.get(e)))}}return e},ty=(e,t)=>eW(e)||e$(e)||e1(e)||e2(e)||ta(e,t),tv=(e,t,r,i,n=[],s=[],a=new Map)=>{let o=e6(e);if(!o){!function(e,t,r){let i=r.get(e);i?i.push(t):r.set(e,[t])}(e,n,t);let r=a.get(e);if(r)return i?{transformedValue:null}:r}if(!ty(e,r)){let t=tu(e,r),i=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return o||a.set(e,i),i}if(eV(s,e))return{transformedValue:null};let l=tu(e,r),c=l?.value??e,u=e$(c)?[]:{},p={};eF(c,(o,l)=>{if("__proto__"===l||"constructor"===l||"prototype"===l)throw Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);let c=tv(o,t,r,i,[...n,l],[...s,e],a);u[l]=c.transformedValue,e$(c.annotations)?p[l]=c.annotations:eW(c.annotations)&&eF(c.annotations,(e,t)=>{p[e8(l)+"."+t]=e})});let d=eQ(p)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,p]:p};return o||a.set(e,d),d};function tb(e){return Object.prototype.toString.call(e).slice(8,-1)}function tx(e){return"Array"===tb(e)}class tw{constructor({dedupe:e=!1}={}){this.classRegistry=new eK,this.symbolRegistry=new eB(e=>e.description??""),this.customTransformerRegistry=new eH,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let t=new Map,r=tv(e,t,this,this.dedupe),i={json:r.transformedValue};r.annotations&&(i.meta={...i.meta,values:r.annotations});let n=function(e,t){let r;let i={};return(e.forEach(e=>{if(e.length<=1)return;t||(e=e.map(e=>e.map(String)).sort((e,t)=>e.length-t.length));let[n,...s]=e;0===n.length?r=s.map(e9):i[e9(n)]=s.map(e9)}),r)?eQ(i)?[r]:[r,i]:eQ(i)?void 0:i}(t,this.dedupe);return n&&(i.meta={...i.meta,referentialEqualities:n}),i}deserialize(e){let{json:t,meta:r}=e,i=function e(t,r={}){return tx(t)?t.map(t=>e(t,r)):!function(e){if("Object"!==tb(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t)?t:[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((i,n)=>{if(tx(r.props)&&!r.props.includes(n))return i;let s=e(t[n],r);return function(e,t,r,i,n){let s=({}).propertyIsEnumerable.call(i,t)?"enumerable":"nonenumerable";"enumerable"===s&&(e[t]=r),n&&"nonenumerable"===s&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}(i,n,s,t,r.nonenumerable),i},{})}(t);if(r?.values){var n,s,a;n=i,s=r.values,a=this,function e(t,r,i=[]){if(!t)return;if(!e$(t)){eF(t,(t,n)=>e(t,r,[...i,...e7(n)]));return}let[n,s]=t;s&&eF(s,(t,n)=>{e(t,r,[...i,...e7(n)])}),r(n,i)}(s,(e,t)=>{n=tg(n,t,t=>td(t,e,a))}),i=n}return r?.referentialEqualities&&(i=function(e,t){function r(t,r){let i=tm(e,e7(r));t.map(e7).forEach(t=>{e=tg(e,t,()=>i)})}if(e$(t)){let[i,n]=t;i.forEach(t=>{e=tg(e,e7(t),()=>e)}),n&&eF(n,r)}else eF(t,r);return e}(i,r.referentialEqualities)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}tw.defaultInstance=new tw,tw.serialize=tw.defaultInstance.serialize.bind(tw.defaultInstance),tw.deserialize=tw.defaultInstance.deserialize.bind(tw.defaultInstance),tw.stringify=tw.defaultInstance.stringify.bind(tw.defaultInstance),tw.parse=tw.defaultInstance.parse.bind(tw.defaultInstance),tw.registerClass=tw.defaultInstance.registerClass.bind(tw.defaultInstance),tw.registerSymbol=tw.defaultInstance.registerSymbol.bind(tw.defaultInstance),tw.registerCustom=tw.defaultInstance.registerCustom.bind(tw.defaultInstance),tw.allowErrorProps=tw.defaultInstance.allowErrorProps.bind(tw.defaultInstance),tw.serialize,tw.deserialize,tw.stringify,tw.parse,tw.registerClass,tw.registerCustom,tw.registerSymbol,tw.allowErrorProps;var tk=r(80672),tS=r(37702);let tE=async({req:e})=>{let t=null;e.headers instanceof Headers?t=e.headers.get("cookie"):e.headers&&"function"==typeof e.headers.get&&(t=e.headers.get("cookie"));let r=t?.split(";").find(e=>e.trim().startsWith("session="))?.split("=")[1],i=null;return r&&(i=await (0,tS.dk)(r)),{db:tk.prisma,session:i}},t_=eU.context().create({transformer:tw,errorFormatter:({shape:e})=>e}),tT=t_.router,tA=t_.procedure;t_.middleware;let tI=t_.middleware(({ctx:e,next:t})=>{if(!e.session)throw new I({code:"UNAUTHORIZED"});return t({ctx:{session:e.session}})}),tO=t_.procedure.use(tI);var tC=r(30379),tj=r(86763),tR=r.n(tj);let tN=tT({all:tA.query(async()=>{try{return console.log("\uD83D\uDCE1 Recebida requisi\xe7\xe3o para buscar posts..."),await tk.prisma.post.findMany({orderBy:{createdAt:"desc"},select:{id:!0,title:!0,content:!0,imageUrl:!0,slug:!0,viewCount:!0,published:!0,createdAt:!0}})}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar posts:",e),Error("Erro ao buscar posts")}}),getLatest:tA.query(async()=>{try{return await tk.prisma.post.findFirst({orderBy:{createdAt:"desc"}})}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar o post mais recente:",e),Error("Erro ao buscar post mais recente")}}),byId:tA.input(tC.z.string()).query(async({input:e})=>{try{let t=await tk.prisma.post.findUnique({where:{id:e}});if(!t)throw Error("Post n\xe3o encontrado");return t}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar post:",e),Error("Erro ao buscar post")}}),bySlug:tA.input(tC.z.string()).query(async({input:e})=>{try{let t=await tk.prisma.post.findUnique({where:{slug:e}});if(!t)throw Error("Post n\xe3o encontrado");return t}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar post:",e),Error("Erro ao buscar post")}}),create:tO.input(tC.z.object({title:tC.z.string().min(5),content:tC.z.string().min(10),imageUrl:tC.z.string().optional(),scheduledAt:tC.z.date().optional(),audioUrl:tC.z.string().optional(),audioDuration:tC.z.number().optional(),spotifyPlaylistUrl:tC.z.string().optional(),hasAudio:tC.z.boolean().optional()})).mutation(async({ctx:e,input:t})=>{if(console.log("\uD83D\uDD0D Dados recebidos para criar post:",{input:t,session:{id:e.session.id,email:e.session.email,role:e.session.role}}),"rbcr4z1@gmail.com"!==e.session.email&&"ADMIN"!==e.session.role)throw console.error(" Usu\xe1rio n\xe3o autorizado:",{email:e.session.email,role:e.session.role}),Error("Apenas o administrador pode criar posts");try{let r=tR()(t.title,{lower:!0,strict:!0});if(console.log("\uD83D\uDD17 Slug gerado:",r),await tk.prisma.post.findUnique({where:{slug:r}}))throw console.error(" Slug j\xe1 existe:",r),Error("T\xedtulo j\xe1 est\xe1 em uso.");let i={title:t.title,content:t.content,slug:r,imageUrl:t.imageUrl,authorId:e.session.id,published:!1,scheduledAt:t.scheduledAt,audioUrl:t.audioUrl,audioDuration:t.audioDuration,spotifyPlaylistUrl:t.spotifyPlaylistUrl,hasAudio:t.hasAudio??!1};console.log("\uD83D\uDCBE Criando post no banco:",i);let n=await tk.prisma.post.create({data:i});return console.log(" Post criado com sucesso:",n),n}catch(r){if(console.error("\uD83D\uDD25 Erro detalhado ao criar post:",{error:r instanceof Error?r.message:r,stack:r instanceof Error?r.stack:void 0,input:t,session:e.session}),r instanceof Error)throw r;throw Error("Erro desconhecido ao criar post")}}),update:tO.input(tC.z.object({id:tC.z.string(),title:tC.z.string().min(5),content:tC.z.string().min(5),imageUrl:tC.z.string().optional(),scheduledAt:tC.z.date().optional(),published:tC.z.boolean().optional(),audioUrl:tC.z.string().optional(),audioDuration:tC.z.number().optional(),spotifyPlaylistUrl:tC.z.string().optional(),hasAudio:tC.z.boolean().optional()})).mutation(async({ctx:e,input:t})=>{if("rbcr4z1@gmail.com"!==e.session.email)throw Error("Apenas o administrador pode editar posts");try{let e=tR()(t.title,{lower:!0,strict:!0}),r=await tk.prisma.post.update({where:{id:t.id},data:{title:t.title,content:t.content,imageUrl:t.imageUrl,slug:e}});return console.log("\uD83D\uDCDD Post atualizado:",r),r}catch(e){throw console.error("\uD83D\uDD25 Erro ao atualizar post:",e),Error("Erro ao atualizar post")}}),delete:tO.input(tC.z.object({id:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.delete({where:{id:t.id}})}),search:tA.input(tC.z.object({query:tC.z.string().min(3)})).query(async({input:e})=>{let t=e.query.trim(),r=t.split(/\s+/).filter(e=>e.length>2);return await tk.prisma.post.findMany({where:{AND:[{published:!0},{OR:[{title:{contains:t,mode:"insensitive"}},{content:{contains:t,mode:"insensitive"}},...r.map(e=>({title:{contains:e,mode:"insensitive"}})),...r.map(e=>({content:{contains:e,mode:"insensitive"}}))]}]},orderBy:[{createdAt:"desc"}],take:10})}),recent:tA.query(async()=>await tk.prisma.post.findMany({orderBy:{createdAt:"desc"},take:5})),mostRead:tA.query(async()=>await tk.prisma.post.findMany({orderBy:{viewCount:"desc"},take:5})),trending:tA.query(async()=>{let e=new Date;return e.setDate(e.getDate()-7),await tk.prisma.post.findMany({where:{createdAt:{gte:e}},orderBy:{viewCount:"desc"},take:5})}),getAll:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.findMany({orderBy:{createdAt:"desc"}})}),togglePublished:tO.input(tC.z.object({id:tC.z.string(),published:tC.z.boolean()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.update({where:{id:t.id},data:{published:t.published}})})}),tM=tT({getByPostId:tA.input(tC.z.object({postId:tC.z.string()})).query(async({ctx:e,input:t})=>e.db.comment.findMany({where:{postId:t.postId,isDeleted:!1},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}},orderBy:{createdAt:"desc"}})),create:tO.input(tC.z.object({content:tC.z.string().min(1,"Coment\xe1rio n\xe3o pode estar vazio").max(500,"Coment\xe1rio muito longo"),postId:tC.z.string()})).mutation(async({ctx:e,input:t})=>e.db.comment.create({data:{content:t.content,postId:t.postId,authorId:e.session.id},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}}})),update:tO.input(tC.z.object({id:tC.z.string(),content:tC.z.string().min(1,"Coment\xe1rio n\xe3o pode estar vazio").max(500,"Coment\xe1rio muito longo")})).mutation(async({ctx:e,input:t})=>{let r=await e.db.comment.findUnique({where:{id:t.id},select:{authorId:!0}});if(!r)throw Error("Coment\xe1rio n\xe3o encontrado");let i=r.authorId===e.session.id,n="ADMIN"===e.session.role;if(!i&&!n)throw Error("Voc\xea n\xe3o tem permiss\xe3o para editar este coment\xe1rio");return e.db.comment.update({where:{id:t.id},data:{content:t.content},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}}})}),delete:tO.input(tC.z.object({id:tC.z.string()})).mutation(async({ctx:e,input:t})=>{let r=await e.db.comment.findUnique({where:{id:t.id},select:{authorId:!0}});if(!r)throw Error("Coment\xe1rio n\xe3o encontrado");let i=r.authorId===e.session.id,n="ADMIN"===e.session.role;if(!i&&!n)throw Error("Voc\xea n\xe3o tem permiss\xe3o para deletar este coment\xe1rio");return e.db.comment.update({where:{id:t.id},data:{isDeleted:!0}})}),getAll:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.comment.findMany({include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}},post:{select:{id:!0,title:!0,slug:!0}}},orderBy:{createdAt:"desc"}})}),restore:tO.input(tC.z.object({id:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.comment.update({where:{id:t.id},data:{isDeleted:!1}})})});var tD=r(98721);class tL{async initialize(){try{let e=await tk.prisma.smtpConfig.findFirst({where:{isActive:!0}});if(!e)return console.log("Nenhuma configura\xe7\xe3o SMTP ativa encontrada"),!1;return this.config={host:e.host,port:e.port,secure:e.secure,username:e.username,password:e.password,fromEmail:e.fromEmail,fromName:e.fromName},this.transporter=tD.createTransport({host:this.config.host,port:this.config.port,secure:this.config.secure,auth:{user:this.config.username,pass:this.config.password}}),await this.transporter.verify(),console.log(" Servi\xe7o de email inicializado com sucesso"),!0}catch(e){return console.error(" Erro ao inicializar servi\xe7o de email:",e),!1}}async sendEmail(e){if(!this.transporter||!this.config)return console.error("Servi\xe7o de email n\xe3o inicializado"),!1;try{let t={from:`"${this.config.fromName}" <${this.config.fromEmail}>`,to:e.to,subject:e.subject,html:e.html,text:e.text},r=await this.transporter.sendMail(t);return console.log(" Email enviado:",r.messageId??"ID n\xe3o dispon\xedvel"),!0}catch(e){return console.error(" Erro ao enviar email:",e),!1}}generateNewsletterHTML(e){return`
      <!DOCTYPE html>
      <html lang="pt-BR">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${e.postTitle}</title>
        <style>
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
          }
          .container {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
          }
          .logo {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
          }
          .post-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
          }
          .post-title {
            font-size: 28px;
            font-weight: bold;
            color: #212529;
            margin-bottom: 20px;
            line-height: 1.3;
          }
          .post-content {
            font-size: 16px;
            line-height: 1.8;
            color: #495057;
            margin-bottom: 30px;
          }
          .read-more {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            margin-bottom: 30px;
          }
          .footer {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            font-size: 14px;
            color: #6c757d;
          }
          .unsubscribe {
            color: #6c757d;
            text-decoration: none;
            font-size: 12px;
          }
          .author {
            font-style: italic;
            color: #6c757d;
            margin-bottom: 20px;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo"> Tech & Marketing & Business</div>
            <p>Novo artigo publicado!</p>
          </div>

          ${e.postImageUrl?`<img src="${e.postImageUrl}" alt="${e.postTitle}" class="post-image">`:""}

          <h1 class="post-title">${e.postTitle}</h1>
          
          <div class="author">
            Por ${e.authorName}
          </div>

          <div class="post-content">
            ${this.truncateContent(e.postContent,300)}
          </div>

          <a href="${e.postUrl}" class="read-more">Ler artigo completo </a>

          <div class="footer">
            <p>Recebeu este email porque voc\xea est\xe1 inscrito na nossa newsletter.</p>
            <a href="${e.unsubscribeUrl}" class="unsubscribe">Cancelar inscri\xe7\xe3o</a>
          </div>
        </div>
      </body>
      </html>
    `}generateWelcomeHTML(e){return`
      <!DOCTYPE html>
      <html lang="pt-BR">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bem-vindo \xe0 Newsletter!</title>
        <style>
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
          }
          .container {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
          }
          .welcome-icon {
            font-size: 48px;
            margin-bottom: 20px;
          }
          .welcome-title {
            font-size: 28px;
            font-weight: bold;
            color: #212529;
            margin-bottom: 20px;
          }
          .welcome-text {
            font-size: 16px;
            line-height: 1.8;
            color: #495057;
            margin-bottom: 30px;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="welcome-icon"></div>
          <h1 class="welcome-title">Bem-vindo \xe0 Newsletter!</h1>
          <p class="welcome-text">
            ${e?`Ol\xe1 ${e},`:"Ol\xe1!"}<br><br>
            Obrigado por se inscrever na nossa newsletter! Voc\xea receber\xe1 atualiza\xe7\xf5es sobre novos artigos, 
            dicas de tecnologia e muito mais.<br><br>
            Fique atento ao seu email para n\xe3o perder nenhum conte\xfado interessante!
          </p>
        </div>
      </body>
      </html>
    `}truncateContent(e,t){let r=e.replace(/[#*`]/g,"").replace(/<[^>]*>/g,"").replace(/\n+/g," ").trim();return r.length<=t?r:r.substring(0,t)+"..."}async logEmail(e,t,r,i,n){try{return await tk.prisma.newsletterEmailLog.create({data:{subscriberId:e,postId:i,emailType:t,status:r,error:n}})}catch(e){return console.error("Erro ao registrar log de email:",e),null}}addTrackingToHTML(e,t,r){let i=`<img src="${r}/api/newsletter/track/${t}" width="1" height="1" style="display:none;" alt="" />`;return e.replace(/<a\s+href="([^"]+)"([^>]*)>/gi,(e,i,n)=>{if(i.startsWith("http")&&!i.includes("/api/newsletter/")){let e=`${r}/api/newsletter/click/${t}?url=${encodeURIComponent(i)}`;return`<a href="${e}"${n}>`}return e}).replace("</body>",`${i}</body>`)}constructor(){this.transporter=null,this.config=null}}let tP=new tL;var tU=r(51128),tz=r.n(tU);class tB{constructor(){let e={host:process.env.REDIS_HOST??"localhost",port:parseInt(process.env.REDIS_PORT??"6379"),password:process.env.REDIS_PASSWORD};this.newsletterQueue=new(tz())("newsletter",{redis:e}),this.trackingQueue=new(tz())("email-tracking",{redis:e}),this.setupQueueHandlers()}setupQueueHandlers(){this.newsletterQueue.on("completed",e=>{console.log(`Job de newsletter completado: ${e.id}`)}),this.newsletterQueue.on("failed",(e,t)=>{console.error(`Job de newsletter falhou: ${e.id}`,t)}),this.trackingQueue.on("completed",e=>{console.log(`Job de tracking completado: ${e.id}`)}),this.trackingQueue.on("failed",(e,t)=>{console.error(`Job de tracking falhou: ${e.id}`,t)}),this.newsletterQueue.process(async e=>{try{let{postId:t,queueId:r,subscriberIds:i,batchSize:n=10}=e.data;console.log(`Processando newsletter para post ${t}, fila ${r}`);for(let e=0;e<i.length;e+=n){let t=i.slice(e,e+n);await Promise.all(t.map(async e=>{try{console.log(`Processando inscrito: ${e}`)}catch(t){console.error(`Erro ao processar inscrito ${e}:`,t)}})),await new Promise(e=>setTimeout(e,100))}console.log(`Newsletter processada com sucesso: ${r}`)}catch(e){console.error("Erro ao processar newsletter:",e)}}),this.trackingQueue.process(async e=>{try{let{trackingId:t,emailLogId:r}=e.data;console.log(`Processando tracking: ${t}`),console.log(`Tracking processado: ${t}`)}catch(e){console.error("Erro ao processar tracking:",e)}})}async addNewsletterToQueue(e,t=0){try{let r=`queue-${Date.now()}`;return await this.newsletterQueue.add("send-newsletter",{postId:e,queueId:r,subscriberIds:[],batchSize:10},{priority:t,delay:0}),r}catch(e){throw console.error("Erro ao adicionar newsletter na fila:",e),e}}async getQueueStatus(e){return{id:e,status:"PENDING"}}async cancelQueue(e){try{for(let t of(await this.newsletterQueue.getJobs(["waiting","active"])).filter(t=>t.data.queueId===e))await t.remove();return!0}catch(e){return console.error("Erro ao cancelar fila:",e),!1}}async getQueueStats(){let[e,t,r,i]=await Promise.all([this.newsletterQueue.getWaiting(),this.newsletterQueue.getActive(),this.newsletterQueue.getCompleted(),this.newsletterQueue.getFailed()]);return{waiting:e.length,active:t.length,completed:r.length,failed:i.length}}async cleanup(){await this.newsletterQueue.close(),await this.trackingQueue.close()}}let tK=new tB;class tF{async createDefaultTemplate(){try{await tk.prisma.newsletterTemplate.findFirst({where:{name:"Template Padr\xe3o"}})||await tk.prisma.newsletterTemplate.create({data:{name:"Template Padr\xe3o",description:"Template padr\xe3o para newsletters",htmlContent:this.defaultTemplate,isDefault:!0,isActive:!0,variables:{postTitle:{type:"string",description:"T\xedtulo do post"},postContent:{type:"string",description:"Conte\xfado do post"},postImageUrl:{type:"string",description:"URL da imagem do post"},postUrl:{type:"string",description:"URL do post"},authorName:{type:"string",description:"Nome do autor"},unsubscribeUrl:{type:"string",description:"URL de cancelamento"},subscriberName:{type:"string",description:"Nome do inscrito"},subscriberEmail:{type:"string",description:"Email do inscrito"},currentDate:{type:"date",description:"Data atual"},siteName:{type:"string",description:"Nome do site"},siteUrl:{type:"string",description:"URL do site"}}}})}catch(e){console.error("Erro ao criar template padr\xe3o:",e)}}async getTemplates(){return await tk.prisma.newsletterTemplate.findMany({where:{isActive:!0},orderBy:{isDefault:"desc"}})}async getTemplate(e){return await tk.prisma.newsletterTemplate.findUnique({where:{id:e}})}async createTemplate(e){return console.log("Criando template:",e.name),{id:`template-${Date.now()}`,name:e.name,description:e.description,htmlContent:e.htmlContent,cssContent:e.cssContent,isActive:!0,isDefault:!1,createdAt:new Date,updatedAt:new Date}}async updateTemplate(e,t){return console.log("Atualizando template:",e),{id:e,name:t.name??"Template Atualizado",description:t.description,htmlContent:t.htmlContent??"",cssContent:t.cssContent,isActive:t.isActive??!0,isDefault:!1,createdAt:new Date,updatedAt:new Date}}processConditionals(e,t){return e.replace(/{{#if\s+(\w+)}}([\s\S]*?){{\/if}}/g,(e,r,i)=>{let n=t[r];return n&&""!==n&&0!==n?i:""})}async deleteTemplate(e){return console.log("Excluindo template:",e),{success:!0}}async setDefaultTemplate(e){return console.log("Definindo template padr\xe3o:",e),{id:e,name:"Template Padr\xe3o",isDefault:!0}}async renderTemplate(e,t){let r=await this.getTemplate(e);if(!r)throw Error("Template n\xe3o encontrado");let i=r.htmlContent,n={postTitle:t.postTitle,postContent:t.postContent,postImageUrl:t.postImageUrl??"",postUrl:t.postUrl,authorName:t.authorName,unsubscribeUrl:t.unsubscribeUrl,subscriberName:t.subscriberName??"",subscriberEmail:t.subscriberEmail,currentDate:t.currentDate,siteName:t.siteName,siteUrl:t.siteUrl,postExcerpt:this.truncateContent(t.postContent,300)};return Object.entries(n).forEach(([e,t])=>{let r=RegExp(`{{${e}}}`,"g");i=i.replace(r,t??"")}),i=this.processConditionals(i,n),r.cssContent&&(i=i.replace("</head>",`<style>${r.cssContent}</style></head>`)),i}truncateContent(e,t){let r=e.replace(/[#*`]/g,"").replace(/<[^>]*>/g,"").replace(/\n+/g," ").trim();return r.length<=t?r:r.substring(0,t)+"..."}getAvailableVariables(){return[{name:"postTitle",description:"T\xedtulo do post",type:"string"},{name:"postContent",description:"Conte\xfado completo do post",type:"string"},{name:"postExcerpt",description:"Resumo do post (300 caracteres)",type:"string"},{name:"postImageUrl",description:"URL da imagem do post",type:"string"},{name:"postUrl",description:"URL do post",type:"string"},{name:"authorName",description:"Nome do autor",type:"string"},{name:"unsubscribeUrl",description:"URL de cancelamento",type:"string"},{name:"subscriberName",description:"Nome do inscrito",type:"string"},{name:"subscriberEmail",description:"Email do inscrito",type:"string"},{name:"currentDate",description:"Data atual",type:"date"},{name:"siteName",description:"Nome do site",type:"string"},{name:"siteUrl",description:"URL do site",type:"string"}]}constructor(){this.defaultTemplate=`
    <!DOCTYPE html>
    <html lang="pt-BR">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>{{postTitle}}</title>
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          line-height: 1.6;
          color: #333;
          max-width: 600px;
          margin: 0 auto;
          padding: 20px;
          background-color: #f8f9fa;
        }
        .container {
          background-color: white;
          border-radius: 8px;
          padding: 30px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
          text-align: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e9ecef;
        }
        .logo {
          font-size: 24px;
          font-weight: bold;
          color: #007bff;
          margin-bottom: 10px;
        }
        .post-image {
          width: 100%;
          max-width: 500px;
          height: auto;
          border-radius: 8px;
          margin: 20px 0;
        }
        .post-title {
          font-size: 28px;
          font-weight: bold;
          color: #212529;
          margin-bottom: 20px;
          line-height: 1.3;
        }
        .post-content {
          font-size: 16px;
          line-height: 1.8;
          color: #495057;
          margin-bottom: 30px;
        }
        .read-more {
          display: inline-block;
          background-color: #007bff;
          color: white;
          padding: 12px 24px;
          text-decoration: none;
          border-radius: 6px;
          font-weight: 600;
          margin-bottom: 30px;
        }
        .footer {
          text-align: center;
          padding-top: 20px;
          border-top: 1px solid #e9ecef;
          font-size: 14px;
          color: #6c757d;
        }
        .unsubscribe {
          color: #6c757d;
          text-decoration: none;
          font-size: 12px;
        }
        .author {
          font-style: italic;
          color: #6c757d;
          margin-bottom: 20px;
        }
        .greeting {
          margin-bottom: 20px;
          font-size: 16px;
          color: #495057;
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <div class="logo">{{siteName}}</div>
          <p>Novo artigo publicado!</p>
        </div>

        {{#if subscriberName}}
        <div class="greeting">
          Ol\xe1 {{subscriberName}},
        </div>
        {{/if}}

        {{#if postImageUrl}}
        <img src="{{postImageUrl}}" alt="{{postTitle}}" class="post-image">
        {{/if}}

        <h1 class="post-title">{{postTitle}}</h1>
        
        <div class="author">
          Por {{authorName}}
        </div>

        <div class="post-content">
          {{postExcerpt}}
        </div>

        <a href="{{postUrl}}" class="read-more">Ler artigo completo </a>

        <div class="footer">
          <p>Recebeu este email porque voc\xea est\xe1 inscrito na nossa newsletter.</p>
          <a href="{{unsubscribeUrl}}" class="unsubscribe">Cancelar inscri\xe7\xe3o</a>
        </div>
      </div>
    </body>
    </html>
  `}}let tV=new tF;var tq=function(e){return e.WELCOME="WELCOME",e.NEWSLETTER="NEWSLETTER",e.CONFIRMATION="CONFIRMATION",e}(tq||{}),tH=function(e){return e.SENT="SENT",e.FAILED="FAILED",e.OPENED="OPENED",e.CLICKED="CLICKED",e}(tH||{});let tG=tT({subscribe:tA.input(tC.z.object({email:tC.z.string().email("E-mail inv\xe1lido"),name:tC.z.string().optional(),source:tC.z.string().optional()})).mutation(async({input:e})=>{try{let t=await tk.prisma.newsletterSubscriber.findUnique({where:{email:e.email}});if(t){if(t.isActive)return{success:!1,message:"E-mail j\xe1 est\xe1 inscrito na newsletter"};return await tk.prisma.newsletterSubscriber.update({where:{id:t.id},data:{isActive:!0,unsubscribedAt:null,name:e.name,source:e.source}}),{success:!0,message:"Inscri\xe7\xe3o reativada com sucesso"}}let r=await tk.prisma.newsletterSubscriber.create({data:{email:e.email,name:e.name,source:e.source}});try{await tP.initialize();let t=tP.generateWelcomeHTML(e.name);await tP.sendEmail({to:e.email,subject:"Bem-vindo \xe0 Newsletter do Tech & Marketing & Business!",html:t})&&await tP.logEmail(r.id,"WELCOME","SENT")}catch(e){console.error("Erro ao enviar email de boas-vindas:",e)}return{success:!0,message:"Inscrito na newsletter com sucesso"}}catch(e){return console.error("Erro ao inscrever na newsletter:",e),{success:!1,message:"Erro ao processar inscri\xe7\xe3o"}}}),unsubscribe:tA.input(tC.z.object({email:tC.z.string().email("E-mail inv\xe1lido")})).mutation(async({input:e})=>{try{let t=await tk.prisma.newsletterSubscriber.findUnique({where:{email:e.email}});if(!t)return{success:!1,message:"E-mail n\xe3o encontrado"};return await tk.prisma.newsletterSubscriber.update({where:{id:t.id},data:{isActive:!1,unsubscribedAt:new Date}}),{success:!0,message:"Inscri\xe7\xe3o cancelada com sucesso"}}catch(e){return console.error("Erro ao cancelar inscri\xe7\xe3o:",e),{success:!1,message:"Erro ao cancelar inscri\xe7\xe3o"}}}),getSubscribers:tO.input(tC.z.object({page:tC.z.number().min(1).default(1),limit:tC.z.number().min(1).max(100).default(20),search:tC.z.string().optional()})).query(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");let r=(t.page-1)*t.limit,i=t.search?{OR:[{email:{contains:t.search,mode:"insensitive"}},{name:{contains:t.search,mode:"insensitive"}}]}:{},[n,s]=await Promise.all([tk.prisma.newsletterSubscriber.findMany({where:i,orderBy:{subscribedAt:"desc"},skip:r,take:t.limit,include:{_count:{select:{emailLogs:!0}}}}),tk.prisma.newsletterSubscriber.count({where:i})]);return{subscribers:n,total:s,pages:Math.ceil(s/t.limit),currentPage:t.page}}),getStats:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");let[t,r,i,n,s,a]=await Promise.all([tk.prisma.newsletterSubscriber.count(),tk.prisma.newsletterSubscriber.count({where:{isActive:!0}}),tk.prisma.newsletterSubscriber.count({where:{isActive:!1}}),tk.prisma.newsletterEmailLog.count({where:{status:"SENT"}}),tk.prisma.newsletterEmailLog.count({where:{status:"OPENED"}}),tk.prisma.newsletterEmailLog.count({where:{status:"CLICKED"}})]),o=new Date;o.setDate(o.getDate()-30);let[l,c,u]=await Promise.all([tk.prisma.newsletterSubscriber.count({where:{subscribedAt:{gte:o}}}),tk.prisma.newsletterEmailLog.count({where:{status:"SENT",sentAt:{gte:o}}}),tk.prisma.newsletterEmailLog.count({where:{status:"OPENED",openedAt:{gte:o}}})]);return{totalSubscribers:t,activeSubscribers:r,unsubscribedCount:i,totalEmailsSent:n,emailsOpened:s,emailsClicked:a,openRate:n>0?s/n*100:0,clickRate:n>0?a/n*100:0,last30Days:{newSubscribers:l,emailsSent:c,emailsOpened:u}}}),getSmtpConfig:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return await tk.prisma.smtpConfig.findFirst({orderBy:{updatedAt:"desc"}})}),updateSmtpConfig:tO.input(tC.z.object({host:tC.z.string().min(1),port:tC.z.number().min(1).max(65535),secure:tC.z.boolean(),username:tC.z.string().min(1),password:tC.z.string().min(1),fromEmail:tC.z.string().email(),fromName:tC.z.string().min(1),isActive:tC.z.boolean()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{t.isActive&&await tk.prisma.smtpConfig.updateMany({where:{isActive:!0},data:{isActive:!1}});let e=await tk.prisma.smtpConfig.upsert({where:{id:"default"},update:t,create:{id:"default",...t}});return{success:!0,config:e}}catch(e){return console.error("Erro ao atualizar configura\xe7\xe3o SMTP:",e),{success:!1,message:"Erro ao atualizar configura\xe7\xe3o"}}}),sendNewsletter:tO.input(tC.z.object({postId:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tk.prisma.post.findUnique({where:{id:t.postId},include:{author:!0}});if(!e)throw Error("Post n\xe3o encontrado");let r=await tk.prisma.newsletterSubscriber.findMany({where:{isActive:!0}});if(0===r.length)return{success:!1,message:"Nenhum inscrito ativo encontrado"};await tP.initialize();let i=process.env.NEXTAUTH_URL??"http://localhost:3000",n=`${i}/post/${e.slug}`,s=0,a=0;for(let t of r)try{let r={postTitle:e.title,postContent:e.content,postImageUrl:e.imageUrl??void 0,postUrl:n,authorName:e.author.name??e.author.email,unsubscribeUrl:`${i}/newsletter/unsubscribe?email=${encodeURIComponent(t.email)}`},o=tP.generateNewsletterHTML(r);await tP.sendEmail({to:t.email,subject:` ${e.title} - Tech & Marketing & Business`,html:o})?(await tP.logEmail(t.id,"NEWSLETTER","SENT",e.id),s++):(await tP.logEmail(t.id,"NEWSLETTER","FAILED",e.id,"Falha no envio"),a++)}catch(r){console.error(`Erro ao enviar email para ${t.email}:`,r),await tP.logEmail(t.id,"NEWSLETTER","FAILED",e.id,r instanceof Error?r.message:"Erro desconhecido"),a++}return{success:!0,message:`Newsletter enviada: ${s} sucessos, ${a} erros`,stats:{successCount:s,errorCount:a,total:r.length}}}catch(e){return console.error("Erro ao enviar newsletter:",e),{success:!1,message:"Erro ao enviar newsletter"}}}),generateNewsletterHTML:tO.input(tC.z.object({postId:tC.z.string()})).query(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tk.prisma.post.findUnique({where:{id:t.postId},include:{author:!0}});if(!e)throw Error("Post n\xe3o encontrado");let r=process.env.NEXTAUTH_URL??"http://localhost:3000",i=`${r}/post/${e.slug}`,n={postTitle:e.title,postContent:e.content,postImageUrl:e.imageUrl??void 0,postUrl:i,authorName:e.author.name??e.author.email,unsubscribeUrl:`${r}/newsletter/unsubscribe?email=example@email.com`},s=tP.generateNewsletterHTML(n);return{success:!0,html:s}}catch(e){return console.error("Erro ao gerar HTML da newsletter:",e),{success:!1,message:"Erro ao gerar HTML"}}}),addToQueue:tO.input(tC.z.object({postId:tC.z.string(),priority:tC.z.number().min(0).max(10).default(0)})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tK.addNewsletterToQueue(t.postId,t.priority);return{success:!0,queueId:e}}catch(e){return console.error("Erro ao adicionar na fila:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),getQueueStatus:tO.input(tC.z.object({queueId:tC.z.string()})).query(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return await tK.getQueueStatus(t.queueId)}),cancelQueue:tO.input(tC.z.object({queueId:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return{success:await tK.cancelQueue(t.queueId)}}),getQueueStats:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return await tK.getQueueStats()}),getTemplates:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return await tV.getTemplates()}),getTemplate:tO.input(tC.z.object({templateId:tC.z.string()})).query(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return await tV.getTemplate(t.templateId)}),createTemplate:tO.input(tC.z.object({name:tC.z.string().min(1),description:tC.z.string().optional(),htmlContent:tC.z.string().min(1),cssContent:tC.z.string().optional(),variables:tC.z.record(tC.z.any()).optional()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tV.createTemplate(t);return{success:!0,template:e}}catch(e){return console.error("Erro ao criar template:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),updateTemplate:tO.input(tC.z.object({templateId:tC.z.string(),name:tC.z.string().min(1).optional(),description:tC.z.string().optional(),htmlContent:tC.z.string().min(1).optional(),cssContent:tC.z.string().optional(),variables:tC.z.record(tC.z.any()).optional(),isActive:tC.z.boolean().optional()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let{templateId:e,...r}=t,i=await tV.updateTemplate(e,r);return{success:!0,template:i}}catch(e){return console.error("Erro ao atualizar template:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),deleteTemplate:tO.input(tC.z.object({templateId:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{return await tV.deleteTemplate(t.templateId),{success:!0}}catch(e){return console.error("Erro ao excluir template:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),setDefaultTemplate:tO.input(tC.z.object({templateId:tC.z.string()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tV.setDefaultTemplate(t.templateId);return{success:!0,template:e}}catch(e){return console.error("Erro ao definir template padr\xe3o:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),renderTemplate:tO.input(tC.z.object({templateId:tC.z.string(),postId:tC.z.string()})).query(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");try{let e=await tk.prisma.post.findUnique({where:{id:t.postId},include:{author:!0}});if(!e)throw Error("Post n\xe3o encontrado");let r=process.env.NEXTAUTH_URL??"http://localhost:3000",i=`${r}/post/${e.slug}`,n={postTitle:e.title,postContent:e.content,postImageUrl:e.imageUrl??void 0,postUrl:i,authorName:e.author.name??e.author.email,unsubscribeUrl:`${r}/newsletter/unsubscribe?email=example@email.com`,subscriberName:"Exemplo",subscriberEmail:"exemplo@email.com",currentDate:new Date().toLocaleDateString("pt-BR"),siteName:"Tech & Marketing & Business",siteUrl:r},s=await tV.renderTemplate(t.templateId,n);return{success:!0,html:s}}catch(e){return console.error("Erro ao renderizar template:",e),{success:!1,message:e instanceof Error?e.message:"Erro desconhecido"}}}),getAvailableVariables:tO.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return tV.getAvailableVariables()}),setAutoSend:tO.input(tC.z.object({enabled:tC.z.boolean()})).mutation(async({ctx:e,input:t})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return console.log("Automa\xe7\xe3o de envio:",t.enabled?"ativada":"desativada"),{success:!0}})}),tY=tT({post:tN,comment:tM,newsletter:tG}),tJ=e=>eI({endpoint:"/api/trpc",req:e,router:tY,createContext:()=>tE({req:{headers:e.headers}})}),tW=new o.AppRouteRouteModule({definition:{kind:l.RouteKind.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:"app/api/trpc/[trpc]/route"},resolvedPagePath:"/home/rbxyz/dev/blog/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:tQ,workUnitAsyncStorage:t$,serverHooks:tZ}=tW;function tX(){return(0,c.patchFetch)({workAsyncStorage:tQ,workUnitAsyncStorage:t$})}},96487:()=>{},78335:()=>{},60670:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyIndexes=t.hasFlag=t.exists=t.list=void 0;let n=i(r(48957));t.list=Object.keys(n.default);let s={};function a(e){"string"!=typeof e&&(e=String(e));let t=e.indexOf("->");return -1===t?e.length:t}t.list.forEach(e=>{s[e]=n.default[e].flags.reduce(function(e,t){return e[t]=!0,e},{})}),t.exists=function(e){return!!n.default[e]},t.hasFlag=function(e,t){if(!s[e])throw Error("Unknown command "+e);return!!s[e][t]},t.getKeyIndexes=function(e,t,r){let i=n.default[e];if(!i)throw Error("Unknown command "+e);if(!Array.isArray(t))throw Error("Expect args to be an array");let s=[],o=!!(r&&r.parseExternalKey),l=(e,t)=>{let r=[],i=Number(e[t]);for(let e=0;e<i;e++)r.push(e+t+1);return r},c=(e,t,r)=>{for(let i=t;i<e.length-1;i+=1)if(String(e[i]).toLowerCase()===r.toLowerCase())return i+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":s.push(0,...l(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":s.push(...l(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":s.push(...l(t,0));break;case"georadius":{s.push(0);let e=c(t,5,"STORE");e&&s.push(e);let r=c(t,5,"STOREDIST");r&&s.push(r);break}case"georadiusbymember":{s.push(0);let e=c(t,4,"STORE");e&&s.push(e);let r=c(t,4,"STOREDIST");r&&s.push(r);break}case"sort":case"sort_ro":s.push(0);for(let e=1;e<t.length-1;e++){let r=t[e];if("string"!=typeof r)continue;let i=r.toUpperCase();"GET"===i?(e+=1,"#"!==(r=t[e])&&(o?s.push([e,a(r)]):s.push(e))):"BY"===i?(e+=1,o?s.push([e,a(t[e])]):s.push(e)):"STORE"===i&&(e+=1,s.push(e))}break;case"migrate":if(""===t[2])for(let e=5;e<t.length-1;e++){let r=t[e];if("string"==typeof r&&"KEYS"===r.toUpperCase()){for(let r=e+1;r<t.length;r++)s.push(r);break}}else s.push(2);break;case"xreadgroup":case"xread":for(let r="xread"===e?0:3;r<t.length-1;r++)if("STREAMS"===String(t[r]).toUpperCase()){for(let e=r+1;e<=r+(t.length-1-r)/2;e++)s.push(e);break}break;default:if(i.step>0){let e=i.keyStart-1,r=i.keyStop>0?i.keyStop:t.length+i.keyStop+1;for(let t=e;t<r;t+=i.step)s.push(t)}}return s}},51128:(e,t,r)=>{"use strict";e.exports=r(83575),e.exports.Job=r(63867),e.exports.utils=r(99997)},46019:(e,t,r)=>{"use strict";let i=r(31307),n={fixed:e=>function(){return e},exponential:e=>function(t){return Math.round((Math.pow(2,t)-1)*e)}};e.exports={normalize:e=>i.isFinite(e)?{type:"fixed",delay:e}:e||void 0,calculate(e,t,r,i,s){if(e)return(function(e,t){if(e.type in t)return t[e.type];if(e.type in n)return n[e.type](e.delay);throw Error("Unknown backoff strategy "+e.type+". If a custom backoff strategy is used, specify it when the queue is created.")})(e,r,s)(t,i,s)}}},61778:e=>{"use strict";e.exports.Messages={RETRY_JOB_NOT_EXIST:"Couldn't retry job: The job doesn't exist",RETRY_JOB_IS_LOCKED:"Couldn't retry job: The job is locked",RETRY_JOB_NOT_FAILED:"Couldn't retry job: The job has been already retried or has not failed",MISSING_REDIS_OPTS:`Using a redis instance with enableReadyCheck or maxRetriesPerRequest for bclient/subscriber is not permitted.
  see https://github.com/OptimalBits/bull/issues/1873
  `}},46148:(e,t,r)=>{"use strict";let i=r(31307),n=r(63867),s=r(38700);function a(e){let t=i.chain([]).concat(e).join(",").split(/\s*,\s*/g).compact().value();return t.length?t:["waiting","active","completed","failed","delayed","paused"]}e.exports=function(e){e.prototype.getJob=async function(e){return await this.isReady(),n.fromId(this,e)},e.prototype.getCountsPerPriority=async function(e){let t=[...new Set(e)],r=await s.getCountsPerPriority(this,t),i={};return r.forEach((e,r)=>{i[`${t[r]}`]=e||0}),i},e.prototype._commandByType=function(e,t,r){return i.map(e,e=>{e="waiting"===e?"wait":e;let i=this.toKey(e);switch(e){case"completed":case"failed":case"delayed":case"repeat":return r(i,t?"zcard":"zrange");case"active":case"wait":case"paused":return r(i,t?"llen":"lrange")}})},e.prototype.count=function(){return this.getJobCountByTypes("wait","paused","delayed")},e.prototype.getJobCountByTypes=function(){return this.getJobCounts.apply(this,arguments).then(e=>i.chain(e).values().sum().value())},e.prototype.getJobCounts=function(){let e=a(arguments),t=this.multi();return this._commandByType(e,!0,(e,r)=>{t[r](e)}),t.exec().then(t=>{let r={};return t.forEach((t,i)=>{r[e[i]]=t[1]||0}),r})},e.prototype.getCompletedCount=function(){return this.getJobCountByTypes("completed")},e.prototype.getFailedCount=function(){return this.getJobCountByTypes("failed")},e.prototype.getDelayedCount=function(){return this.getJobCountByTypes("delayed")},e.prototype.getActiveCount=function(){return this.getJobCountByTypes("active")},e.prototype.getWaitingCount=function(){return this.getJobCountByTypes("wait","paused")},e.prototype.getStalledCount=function(){let e=this.toKey("stalled");return this.client.scard(e)},e.prototype.getPausedCount=function(){return this.getJobCountByTypes("paused")},e.prototype.getWaiting=function(e,t,r){return this.getJobs(["wait","paused"],e,t,!0,r)},e.prototype.getActive=function(e,t,r){return this.getJobs("active",e,t,!0,r)},e.prototype.getDelayed=function(e,t,r){return this.getJobs("delayed",e,t,!0,r)},e.prototype.getCompleted=function(e,t,r){return this.getJobs("completed",e,t,!1,r)},e.prototype.getFailed=function(e,t,r){return this.getJobs("failed",e,t,!1,r)},e.prototype.getRanges=function(e,t,r,n){t=i.isUndefined(t)?0:t,r=i.isUndefined(r)?-1:r;let s=this.multi(),o=[];return this._commandByType(a(e),!1,(e,i)=>{switch(i){case"lrange":n?(o.push("lrange"),s.lrange(e,-(r+1),-(t+1))):s.lrange(e,t,r);break;case"zrange":o.push("zrange"),n?s.zrange(e,t,r):s.zrevrange(e,t,r)}}),s.exec().then(e=>{let t=[];return e.forEach((e,r)=>{let i=e[1]||[];t=n&&"lrange"===o[r]?t.concat(i.reverse()):t.concat(i)}),t})},e.prototype.getJobs=function(e,t,r,i,n){return this.getRanges(e,t,r,i).then(e=>Promise.all(e.map(e=>this.getJobFromId(e,n))))},e.prototype.getJobLogs=function(e,t,r,n=!0){t=i.isUndefined(t)?0:t,r=i.isUndefined(r)?-1:r;let s=this.multi(),a=this.toKey(e+":logs");return n?s.lrange(a,t,r):s.lrange(a,-(r+1),-(t+1)),s.llen(a),s.exec().then(e=>(n||e[0][1].reverse(),{logs:e[0][1],count:e[1][1]}))},e.prototype.getMetrics=async function(e,t=0,r=-1){let i=this.toKey(`metrics:${e}`),n=`${i}:data`,s=this.multi();s.hmget(i,"count","prevTS","prevCount"),s.lrange(n,t,r),s.llen(n);let[a,o,l]=await s.exec(),[c,[u,p,d]]=a,[h,f]=o,[m,g]=l;if(c||h)throw c||h||m;return{meta:{count:parseInt(u||"0",10),prevTS:parseInt(p||"0",10),prevCount:parseInt(d||"0",10)},data:f,count:g}}}},63867:(e,t,r)=>{"use strict";let i=r(31307),n=r(99997),s=r(38700),a=r(28354).debuglog("bull"),o=r(61778),l=r(46019),c="__default__",u=["opts","name","id","progress","delay","timestamp","finishedOn","processedOn","retriedOn","failedReason","attemptsMade","stacktrace","returnvalue"],p=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=c),this.opts=function(e){let t=Object.assign({},e);return t.attempts=void 0===t.attempts?1:t.attempts,t.delay=void 0===t.delay?0:Number(t.delay),t.timestamp=void 0===t.timestamp?Date.now():t.timestamp,t.attempts=parseInt(t.attempts),t.backoff=l.normalize(t.backoff),t}(n),this.name=t,this.queue=e,this.data=r,this._progress=0,this.delay=this.opts.delay<0?0:this.opts.delay,this.timestamp=this.opts.timestamp,this.stacktrace=[],this.returnvalue=null,this.attemptsMade=0,this.toKey=i.bind(e.toKey,e),this.debounceId=this.opts.debounce?this.opts.debounce.id:void 0};function d(e,t,r){let i=r.opts,n=r.toData();return s.addJob(t,e,n,{lifo:i.lifo,customJobId:i.jobId,priority:i.priority,debounce:i.debounce})}p.DEFAULT_JOB_NAME=c,p.create=function(e,t,r,i){let n=new p(e,t,r,i);return e.isReady().then(()=>d(e,e.client,n)).then(e=>(n.id=e,a("Job added",e),n))},p.createBulk=function(e,t){return t=t.map(t=>new p(e,t.name,t.data,t.opts)),e.isReady().then(()=>{let r=e.client.multi();for(let i of t)d(e,r,i);return r.exec()}).then(e=>(e.forEach((e,r)=>{t[r].id=e[1],a("Job added",e[1])}),t))},p.fromId=async function(e,t,r){let n;if(!t)return Promise.resolve();let s=e.toKey(t);return n=r&&r.excludeData?i.zipObject(u,await e.client.hmget(s,u)):await e.client.hgetall(s),i.isEmpty(n)?null:p.fromJSON(e,n,t)},p.remove=async function(e,t){await e.isReady(),(await s.removeWithPattern(e,t)).forEach(t=>e.emit("removed",t))},p.prototype.progress=function(e){return i.isUndefined(e)?this._progress:(this._progress=e,s.updateProgress(this,e))},p.prototype.update=async function(e){this.data=e;let t=await s.updateData(this,e);if(t<0)throw s.finishedErrors(t,this.id,"updateData")},p.prototype.toJSON=function(){let e=Object.assign({},this.opts);return{id:this.id,name:this.name,data:this.data||{},opts:e,progress:this._progress,delay:this.delay,timestamp:this.timestamp,attemptsMade:this.attemptsMade,failedReason:this.failedReason,stacktrace:this.stacktrace||null,returnvalue:this.returnvalue||null,debounceId:this.debounceId||null,finishedOn:this.finishedOn||null,processedOn:this.processedOn||null}},p.prototype.toData=function(){let e=this.toJSON();return e.data=JSON.stringify(e.data),e.opts=JSON.stringify(e.opts),e.stacktrace=JSON.stringify(e.stacktrace),e.failedReason=JSON.stringify(e.failedReason),e.returnvalue=JSON.stringify(e.returnvalue),e},p.prototype.lockKey=function(){return this.toKey(this.id)+":lock"},p.prototype.takeLock=function(){return s.takeLock(this.queue,this).then(e=>e||!1)},p.prototype.releaseLock=function(){return s.releaseLock(this.queue,this.id).then(e=>{if(1!=e)throw Error("Could not release lock for job "+this.id)})},p.prototype.extendLock=function(e){return s.extendLock(this.queue,this.id,e)},p.prototype.moveToCompleted=function(e,t,r=!1){return this.queue.isReady().then(()=>(this.returnvalue=e||0,(e=n.tryCatch(JSON.stringify,JSON,[e]))===n.errorObject)?Promise.reject(n.errorObject.value):(this.finishedOn=Date.now(),s.moveToCompleted(this,e,this.opts.removeOnComplete,t,r)))},p.prototype.discard=function(){this._discarded=!0},p.prototype.moveToFailed=async function(e,t){let r;e=e||{message:"Unknown reason"},this.failedReason=e.message,await this.queue.isReady();let n=this.queue.client.multi();this._saveAttempt(n,e);let a=!1;if(this.attemptsMade<this.opts.attempts&&!this._discarded){let o=await l.calculate(this.opts.backoff,this.attemptsMade,this.queue.settings.backoffStrategies,e,i.get(this,"opts.backoff.options",null));if(-1===o)a=!0;else if(o){let e=s.moveToDelayedArgs(this.queue,this.id,Date.now()+o,t);n.moveToDelayed(e),r="delayed"}else n.retryJob(s.retryJobArgs(this,t)),r="retry"}else a=!0;if(a){this.finishedOn=Date.now();let i=s.moveToFailedArgs(this,e.message,this.opts.removeOnFail,t);n.moveToFinished(i),r="failed"}let o=await n.exec(),c=i.last(o)[1];if(c<0)throw s.finishedErrors(c,this.id,r,"active")},p.prototype.moveToDelayed=function(e,t){return s.moveToDelayed(this.queue,this.id,e,t)},p.prototype.promote=function(){let e=this.queue,t=this.id;return e.isReady().then(()=>s.promote(e,t).then(e=>{if(-1===e)throw Error("Job "+t+" is not in a delayed state")}))},p.prototype.retry=function(){return this.queue.isReady().then(()=>(this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.retriedOn=Date.now(),s.reprocessJob(this,{state:"failed"}).then(e=>{if(1!==e){if(0===e)throw Error(o.Messages.RETRY_JOB_NOT_EXIST);if(-1===e)throw Error(o.Messages.RETRY_JOB_IS_LOCKED);if(-2===e)throw Error(o.Messages.RETRY_JOB_NOT_FAILED)}})))},p.prototype.log=function(e){return s.addLog(this.queue,this.id,e)},p.prototype.isCompleted=function(){return this._isDone("completed")},p.prototype.isFailed=function(){return this._isDone("failed")},p.prototype.isDelayed=function(){return this._isDone("delayed")},p.prototype.isActive=function(){return this._isInList("active")},p.prototype.isWaiting=function(){return this._isInList("wait")},p.prototype.isPaused=function(){return this._isInList("paused")},p.prototype.isStuck=function(){return this.getState().then(e=>"stuck"===e)},p.prototype.isDiscarded=function(){return this._discarded},p.prototype.getState=function(){return[{fn:"isCompleted",state:"completed"},{fn:"isFailed",state:"failed"},{fn:"isDelayed",state:"delayed"},{fn:"isActive",state:"active"},{fn:"isWaiting",state:"waiting"},{fn:"isPaused",state:"paused"}].reduce((e,t)=>e.then(e=>e||this[t.fn]().then(e=>e?t.state:null)),Promise.resolve()).then(e=>e||"stuck")},p.prototype.remove=function(){let e=this.queue,t=this;return e.isReady().then(()=>s.remove(e,t.id).then(r=>{if(r)e.emit("removed",t);else throw Error("Could not remove job "+t.id)}))},p.prototype.finished=async function(){await Promise.all([this.queue._registerEvent("global:completed"),this.queue._registerEvent("global:failed")]),await this.queue.isReady();let e=await s.isFinished(this);if(!(e>0))return new Promise((e,t)=>{let r=(t,r)=>{if(String(t)===String(this.id)){let t;try{"string"==typeof r&&(t=JSON.parse(r))}catch(e){a("corrupted resultValue: "+r,e)}e(t),n()}},i=(e,r)=>{String(e)===String(this.id)&&(t(Error(r)),n())};this.queue.on("global:completed",r),this.queue.on("global:failed",i);let n=()=>{clearInterval(o),this.queue.removeListener("global:completed",r),this.queue.removeListener("global:failed",i)},o=setInterval(()=>{this._isQueueClosing()?(n(),t(Error("cannot check if job is finished in a closing queue."))):s.isFinished(this).then(r=>{r>0&&p.fromId(this.queue,this.id).then(i=>{n(),2==r?t(Error(i.failedReason)):e(i.returnvalue)})})},5e3)});{let t=await p.fromId(this.queue,this.id);if(2!=e)return t.returnvalue;throw Error(t.failedReason)}},p.prototype._isQueueClosing=function(){return this.queue.closing},p.prototype._isDone=function(e){return this.queue.client.zscore(this.queue.toKey(e),this.id).then(e=>null!==e)},p.prototype._isInList=function(e){return s.isJobInList(this.queue.client,this.queue.toKey(e),this.id)},p.prototype._saveAttempt=function(e,t){this.attemptsMade++,this.stacktrace=this.stacktrace||[],t&&t.stack&&(this.stacktrace.push(t.stack),this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(-this.opts.stackTraceLimit)));let r=s.saveStacktraceArgs(this,JSON.stringify(this.stacktrace),t&&t.message);e.saveStacktrace(r)},p.fromJSON=function(e,t,r){let i=JSON.parse(t.opts||"{}"),s=i.preventParsingData?t.data:JSON.parse(t.data||"{}"),o=new p(e,t.name||p.DEFAULT_JOB_NAME,s,i);o.id=t.id||r;try{o._progress=JSON.parse(t.progress||0)}catch(e){console.error(`Error parsing progress ${t.progress} with ${e.message}`)}return o.delay=parseInt(t.delay),o.timestamp=parseInt(t.timestamp),t.finishedOn&&(o.finishedOn=parseInt(t.finishedOn)),t.processedOn&&(o.processedOn=parseInt(t.processedOn)),t.retriedOn&&(o.retriedOn=parseInt(t.retriedOn)),o.failedReason=t.failedReason,o.attemptsMade=parseInt(t.attemptsMade||0),o.stacktrace=function(e){let t=n.tryCatch(JSON.parse,JSON,[e]);return t!==n.errorObject&&t instanceof Array?t:[]}(t.stacktrace),"string"==typeof t.returnvalue&&(o.returnvalue=function(e){let t=n.tryCatch(JSON.parse,JSON,[e]);if(t!==n.errorObject)return t;a("corrupted returnvalue: "+e,t)}(t.returnvalue)),t.deid&&(o.debounceId=t.deid),o},e.exports=p},48410:e=>{"use strict";class t extends Error{constructor(e){super(e),this.name="TimeoutError"}}e.exports.TimeoutError=t,e.exports.pTimeout=function(e,r,i,n){let s;let a=new Promise((a,o)=>{if("number"!=typeof r||1!==Math.sign(r))throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY){a(e);return}s=(n={customTimers:{setTimeout,clearTimeout},...n}).customTimers.setTimeout.call(void 0,()=>{if("function"==typeof i){try{a(i())}catch(e){o(e)}return}let n="string"==typeof i?i:`Promise timed out after ${r} milliseconds`,s=i instanceof Error?i:new t(n);"function"==typeof e.cancel&&e.cancel(),o(s)},r),(async()=>{try{a(await e)}catch(e){o(e)}finally{n.customTimers.clearTimeout.call(void 0,s)}})()});return a.clear=()=>{clearTimeout(s),s=void 0},a}},98843:(e,t,r)=>{"use strict";let i=r(79646).fork,n=r(33873),s=r(31307),a=r(79113),{killAsync:o}=r(35175),l=function e(){if(!(this instanceof e))return new e;this.retained={},this.free={}},c=function(e){let t=[],r=[];return s.forEach(e,e=>{if(-1===e.indexOf("--inspect"))t.push(e);else{let t=e.split("=")[0];r.push(a().then(e=>`${t}=${e}`))}}),Promise.all(r).then(e=>t.concat(e))};async function u(e,t){let r=new Promise((t,r)=>{let i=n=>{"init-complete"===n.cmd?t():"error"===n.cmd&&r(n.error),e.off("message",i)};e.on("message",i)});await new Promise(r=>e.send({cmd:"init",value:t},r)),await r}l.prototype.retain=function(e){let t=this,r=t.getFree(e).pop();return r?(t.retained[r.pid]=r,Promise.resolve(r)):c(process.execArgv).then(s=>((r=i(n.join(__dirname,"./master.js"),{execArgv:s})).processFile=e,t.retained[r.pid]=r,r.on("exit",t.remove.bind(t,r)),u(r,r.processFile).then(()=>r).catch(e=>{throw this.remove(r),e})))},l.prototype.release=function(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)},l.prototype.remove=function(e){delete this.retained[e.pid];let t=this.getFree(e.processFile),r=t.indexOf(e);r>-1&&t.splice(r,1)},l.prototype.kill=function(e,t){return this.remove(e),o(e,t||"SIGKILL",3e4)},l.prototype.clean=function(){let e=s.values(this.retained).concat(this.getAllFree());this.retained={},this.free={};let t=[];return e.forEach(e=>{t.push(this.kill(e,"SIGTERM"))}),Promise.all(t).then(()=>{})},l.prototype.getFree=function(e){return this.free[e]=this.free[e]||[]},l.prototype.getAllFree=function(){return s.flatten(s.values(this.free))},e.exports=function e(t=!1){return!1===t?new l:(this instanceof l||void 0!==e.instance||(e.instance=new l),e.instance)}},15969:(e,t,r)=>{"use strict";let{asyncSend:i}=r(35175);e.exports=function(e,t){return function(r){return t.retain(e).then(async e=>{let n,s;return await i(e,{cmd:"start",job:r}),new Promise((t,i)=>{n=function(e){switch(e.cmd){case"completed":t(e.value);break;case"failed":case"error":{let t=Error();Object.assign(t,e.value),i(t);break}case"progress":r.progress(e.value);break;case"update":r.update(e.value);break;case"discard":r.discard();break;case"log":r.log(e.value)}},s=(e,t)=>{i(Error("Unexpected exit code: "+e+" signal: "+t))},e.on("message",n),e.on("exit",s)}).finally(()=>{e.removeListener("message",n),e.removeListener("exit",s),null!==e.exitCode||/SIG.*/.test(e.signalCode)?t.remove(e):t.release(e)})})}}},35175:e=>{"use strict";function t(e){return!!(null!==e.exitCode||e.signalCode)}e.exports={killAsync:function(e,r,i){if(t(e))return Promise.resolve(e);let n=new Promise(t=>{e.once("exit",()=>t())});if(e.kill(r||"SIGKILL"),0===i||isFinite(i)){let r=setTimeout(()=>{t(e)||e.kill("SIGKILL")},i);n=n.then(()=>{clearTimeout(r)})}return n},asyncSend:(e,t)=>new Promise((r,i)=>{e.send(t,e=>{e?i(e):r()})})}},83575:function(e,t,r){"use strict";let i=r(50547),n=r(94735),s=r(31307),a=r(29021),o=r(33873),l=r(28354),c=r(79551),u=r(63867),p=r(38700),d=r(61778),h=r(99997),f=r(50931),{promisify:m}=r(28354),{pTimeout:g}=r(48410),y=r(46205),v=r(28354).debuglog("bull"),b=r(27782),x=r(70887),w="2.8.18",k=function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(s.isString(r)){let e=s.cloneDeep(n||{});n={...e,redis:{...S(r),...e.redis}}}else n=s.cloneDeep(r||{});if(!s.isObject(n))throw TypeError("Options must be a valid object");if(n.limiter){if(n.limiter.max&&n.limiter.duration)this.limiter=n.limiter;else throw TypeError("Limiter requires `max` and `duration` options")}n.defaultJobOptions&&(this.defaultJobOptions=n.defaultJobOptions),this.name=t,this.token=b.v4(),n.redis={enableReadyCheck:!1,...s.isString(n.redis)?{...S(n.redis)}:n.redis},s.defaults(n.redis,{port:6379,host:"127.0.0.1",db:n.redis.db||n.redis.DB,retryStrategy:function(e){return Math.min(Math.exp(e),2e4)}}),this.keyPrefix=n.redis.keyPrefix||n.prefix||"bull",delete n.redis.keyPrefix,this.clients=[];let a=(e,t)=>{let r=e||p;for(let e in r)t[r[e].name]||t.defineCommand(r[e].name,{numberOfKeys:r[e].keys,lua:r[e].content})},o=function(e,t,r){let n=s.isFunction(t.createClient)?t.createClient:function(e,t){return new i(["bclient","subscriber"].includes(e)?{...t,maxRetriesPerRequest:null}:t)},a={};return function(i){return function(){if(null!=a[i])return a[i];let o=s.assign({},t.redis),l=a[i]=n(i,o),c=l.options.redisOptions||l.options;if(["bclient","subscriber"].includes(i)&&(c.enableReadyCheck||c.maxRetriesPerRequest))throw Error(d.Messages.MISSING_REDIS_OPTS);return e[i+"Initialized"]=!0,t.createClient||e.clients.push(l),r(i,l),l}}}(this,n,(e,r)=>{let i=this.emit.bind(this,"error");r.on("error",i),this.once("close",()=>r.removeListener("error",i)),"client"===e&&(this._initializing=(async()=>a(x,r))().then(()=>{v(t+" queue ready")},e=>{throw this.emit("error",Error("Error initializing Lua scripts")),e}),this._initializing.catch(()=>{}))});Object.defineProperties(this,{client:{get:o("client")},eclient:{get:o("subscriber")},bclient:{get:o("bclient")}}),!0!==n.skipVersionCheck&&this.client.info().then(e=>{let t="redis_version:",r=e.split("\r\n");for(let e=0;e<r.length;e++)if(0===r[e].indexOf(t))return r[e].substr(t.length)}).then(e=>{y.lt(e,w)&&this.emit("error",Error("Redis version needs to be greater than "+w+". Current: "+e))}).catch(()=>{}),this.handlers={},this.delayTimer,this.processing=[],this.retrieving=0,this.drained=!0,this.settings=s.defaults(n.settings,{lockDuration:3e4,stalledInterval:3e4,maxStalledCount:1,guardInterval:5e3,retryProcessDelay:5e3,drainDelay:5,backoffStrategies:{},isSharedChildPool:!1}),this.metrics=n.metrics,this.settings.lockRenewTime=this.settings.lockRenewTime||this.settings.lockDuration/2,this.on("error",()=>{}),this.timers=new f,this.moveUnlockedJobsToWait=this.moveUnlockedJobsToWait.bind(this),this.processJob=this.processJob.bind(this),this.getJobFromId=u.fromId.bind(null,this);let l={};s.each(["","active","wait","waiting","paused","resumed","meta-paused","active","id","delayed","priority","stalled-check","completed","failed","stalled","repeat","limiter","drained","duplicated","progress","de"],e=>{l[e]=this.toKey(e)}),this.keys=l};function S(e){let t={};try{let r=c.parse(e,!0,!0);if(t.port=parseInt(r.port||"6379",10),t.host=r.hostname,t.db=r.pathname?r.pathname.split("/")[1]:0,r.auth){let e=r.auth.indexOf(":");t.password=r.auth.slice(e+1),e>0&&(t.username=r.auth.slice(0,e))}r.query&&(t={...t,...r.query})}catch(e){throw Error(e.message)}return t}l.inherits(k,n),r(46148)(k),r(74856)(k),r(94909)(k),k.prototype.off=k.prototype.removeListener;let E=k.prototype.on;k.prototype.on=function(e){return this._registerEvent(e),E.apply(this,arguments)};let _=k.prototype.once;async function T(e){if("end"!==e.status){let t,r;return new Promise((i,n)=>{t=i,r=n,e.once("end",t),g(e.quit().catch(e=>{if("Connection is closed."!==e.message)throw e}),500).catch(()=>{}).finally(()=>{e.once("error",r),e.disconnect(),["connecting","reconnecting"].includes(e.status)&&i()})}).finally(()=>{e.removeListener("end",t),e.removeListener("error",r)})}}function A(e,t,r){let i=t&&t.jobId,n=s.get(e,"groupKey");return n?`${i||b.v4()}:${s.get(r,n)}`:i}k.prototype.once=function(e){return this._registerEvent(e),_.apply(this,arguments)},k.prototype._initProcess=function(){return this._initializingProcess||(this.delayedTimestamp=Number.MAX_VALUE,this._initializingProcess=this.isReady().then(()=>this._registerEvent("delayed")).then(()=>this.updateDelayTimer()),this.errorRetryTimer={}),this._initializingProcess},k.prototype._setupQueueEventListeners=function(){let e=this.keys.active,t=this.keys.stalled,r=this.keys.progress,i=this.keys.delayed,n=this.keys.paused,a=this.keys.resumed,o=this.keys.waiting,l=this.keys.completed,c=this.keys.failed,u=this.keys.drained,p=this.keys.duplicated,d=this.keys.de+"bounced",f=(r,i,n)=>{let s=i.split("@"),a=s[0],l=s[1];switch(a){case e:h.emitSafe(this,"global:active",n,"waiting");break;case o:this.token===l&&h.emitSafe(this,"waiting",n,null),l&&h.emitSafe(this,"global:waiting",n,null);break;case t:this.token===l&&h.emitSafe(this,"stalled",n),h.emitSafe(this,"global:stalled",n);break;case p:this.token===l&&h.emitSafe(this,"duplicated",n),h.emitSafe(this,"global:duplicated",n);break;case d:this.token===l&&h.emitSafe(this,"debounced",n),h.emitSafe(this,"global:debounced",n)}},m=(e,t)=>{switch(e.split("@")[0]){case r:try{let{progress:e,jobId:r}=JSON.parse(t);h.emitSafe(this,"global:progress",r,e)}catch(n){let e=t.indexOf(","),r=t.substring(0,e),i=t.substring(e+1);h.emitSafe(this,"global:progress",r,JSON.parse(i))}break;case i:{let e=s.ceil(t);e<this.delayedTimestamp&&(this.delayedTimestamp=e,this.updateDelayTimer());break}case n:case a:h.emitSafe(this,"global:"+t);break;case l:{let e=JSON.parse(t);h.emitSafe(this,"global:completed",e.jobId,e.val,"active");break}case c:{let e=JSON.parse(t);h.emitSafe(this,"global:failed",e.jobId,e.val,"active");break}case u:h.emitSafe(this,"global:drained")}};this.eclient.on("pmessage",f),this.eclient.on("message",m),this.once("close",()=>{this.eclient.removeListener("pmessage",f),this.eclient.removeListener("message",m)})},k.prototype._registerEvent=function(e){if(e.startsWith("global:")||-1!==["waiting","delayed","duplicated","debounced"].indexOf(e)){this.registeredEvents||(this._setupQueueEventListeners(),this.registeredEvents=this.registeredEvents||{});let t=e.replace("global:","");return this.registeredEvents[t]?this.registeredEvents[t]:h.isRedisReady(this.eclient).then(()=>{let e=this.toKey(t);return -1!==["active","waiting","stalled","duplicated","debounced"].indexOf(t)?this.registeredEvents[t]=this.eclient.psubscribe(e+"*"):this.registeredEvents[t]=this.eclient.subscribe(e)}).then(()=>{h.emitSafe(this,"registered:"+e)})}return Promise.resolve()},k.ErrorMessages=d.Messages,k.prototype.isReady=async function(){return await this._initializing,this},k.prototype.disconnect=async function(){await Promise.all(this.clients.map(e=>e.blocked?e.disconnect():T(e)))},k.prototype.removeJobs=function(e){return u.remove(this,e)},k.prototype.close=function(e){let t=!0;return this.closing?this.closing:this.closing=this.isReady().then(this._initializingProcess).catch(()=>{t=!1}).then(()=>t&&this.pause(!0,e)).catch(()=>void 0).finally(()=>this._clearTimers()).then(()=>{if(!this.childPool)return;let t=this.childPool.clean().catch(()=>{});if(!e)return t}).then(async()=>this.disconnect(),e=>console.error(e)).finally(()=>{this.closed=!0,h.emitSafe(this,"close")})},k.prototype._clearTimers=function(){return s.each(this.errorRetryTimer,e=>{clearTimeout(e)}),clearTimeout(this.delayTimer),clearInterval(this.guardianTimer),clearInterval(this.moveUnlockedJobsToWaitInterval),this.timers.clearAll(),this.timers.whenIdle()},k.prototype.process=function(e,t,r){switch(arguments.length){case 1:r=e,t=1,e=u.DEFAULT_JOB_NAME;break;case 2:r=t,"string"==typeof e?t=1:(t=e,e=u.DEFAULT_JOB_NAME)}return this.setHandler(e,r),this._initProcess().then(()=>this.start(t,e))},k.prototype.start=function(e,t){return this.run(e,t).catch(e=>{throw h.emitSafe(this,"error",e,"error running queue"),e})},k.prototype.setHandler=function(e,t){if(!t)throw Error("Cannot set an undefined handler");if(this.handlers[e])throw Error("Cannot define the same handler twice "+e);if(this.setWorkerName(),"string"==typeof t){let i=t+([".js",".ts",".flow",".cjs"].includes(o.extname(t))?"":".js");if(!a.existsSync(i))throw Error("File "+i+" does not exist");let n=this.settings.isSharedChildPool;this.childPool=this.childPool||r(98843)(n);let s=r(15969);this.handlers[e]=s(t,this.childPool).bind(this)}else(t=t.bind(this)).length>1?this.handlers[e]=m(t):this.handlers[e]=function(){try{return Promise.resolve(t.apply(null,arguments))}catch(e){return Promise.reject(e)}}},k.prototype.add=function(e,t,r){return("string"!=typeof e&&(r=t,t=e,e=u.DEFAULT_JOB_NAME),(r=s.cloneDeep({...this.defaultJobOptions,...r})).jobId=A(this.limiter,r,t),r.repeat)?this.isReady().then(()=>this.nextRepeatableJob(e,t,r,!0)):u.create(this,e,t,r)},k.prototype.retryJobs=async function(e={}){let t=0;do t=await p.retryJobs(this,e.count);while(t)},k.prototype.removeDebounceKey=e=>this.client.del(`${this.keys.de}:${e}`),k.prototype.addBulk=function(e){let t=e.map(e=>{let t=A(this.limiter,e.opts,e.data);return{...e,name:"string"!=typeof e.name?u.DEFAULT_JOB_NAME:e.name,opts:{...this.defaultJobOptions,...e.opts,jobId:t}}});return u.createBulk(this,t)},k.prototype.empty=function(){let e=this.keys,t=this.multi();return t.lrange(e.wait,0,-1),t.lrange(e.paused,0,-1),t.keys(this.toKey("*:limited")),t.del(e.wait,e.paused,e["meta-paused"],e.delayed,e.priority,e.limiter,`${e.limiter}:index`),t.exec().then(e=>{let[r,i,n]=e;r=r[1],i=i[1],n=n[1];let s=i.concat(r).map(this.toKey,this);if(s.length||n.length){t=this.multi();for(let e=0;e<s.length;e+=1e4)t.del.apply(t,s.slice(e,e+1e4));for(let e=0;e<n.length;e+=1e4)t.del.apply(t,n.slice(e,e+1e4));return t.exec()}})},k.prototype.pause=function(e,t){return this.isReady().then(()=>e?(this.paused||(this.paused=new Promise(e=>{this.resumeLocal=function(){this.paused=null,e()}})),this.bclientInitialized)?t?T(this.bclient).then(()=>this.bclient.connect()):this.whenCurrentJobsFinished():void 0:p.pause(this,!0)).then(()=>h.emitSafe(this,"paused"))},k.prototype.resume=function(e){return this.isReady().then(()=>{if(!e)return p.pause(this,!1);this.resumeLocal&&this.resumeLocal()}).then(()=>{h.emitSafe(this,"resumed")})},k.prototype.isPaused=async function(e){if(e)return!!this.paused;{await this.isReady();let e=this.multi();e.exists(this.keys["meta-paused"]),e.hexists(this.toKey("meta"),"paused");let[[,t],[,r]]=await e.exec();return!!(t||r)}},k.prototype.run=function(e,t){if(!Number.isInteger(e))throw Error("Cannot set Float as concurrency");let r=[];return this.isReady().then(()=>this.moveUnlockedJobsToWait()).then(()=>h.isRedisReady(this.bclient)).then(()=>{for(;e--;)r.push(new Promise(r=>{this.processJobs(`${t}:${e}`,r)}));return this.startMoveUnlockedJobsToWait(),Promise.all(r)})},k.prototype.updateDelayTimer=function(){return this.closing?Promise.resolve():p.updateDelaySet(this,Date.now()).then(e=>{this.delayedTimestamp=e?e/4096:Number.MAX_VALUE,this.delayTimer&&clearTimeout(this.delayTimer);let t=s.min([this.delayedTimestamp-Date.now(),this.settings.guardInterval]);return t<=0?this.updateDelayTimer():this.delayTimer=setTimeout(()=>this.updateDelayTimer(),t),null}).catch(e=>{h.emitSafe(this,"error",e,"Error updating the delay timer"),this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(()=>this.updateDelayTimer(),this.settings.guardInterval)})},k.prototype.moveUnlockedJobsToWait=function(){return this.closing?Promise.resolve():p.moveUnlockedJobsToWait(this).then(([e,t])=>{let r=e.map(e=>this.getJobFromId(e).then(e=>(h.emitSafe(this,"failed",e,Error("job stalled more than allowable limit"),"active"),null))),i=t.map(e=>this.getJobFromId(e).then(e=>(null!==e&&h.emitSafe(this,"stalled",e),null)));return Promise.all(r.concat(i))}).catch(e=>{h.emitSafe(this,"error",e,"Failed to handle unlocked job in active")})},k.prototype.startMoveUnlockedJobsToWait=function(){clearInterval(this.moveUnlockedJobsToWaitInterval),this.settings.stalledInterval>0&&!this.closing&&(this.moveUnlockedJobsToWaitInterval=setInterval(this.moveUnlockedJobsToWait,this.settings.stalledInterval))},k.prototype.processJobs=function(e,t,r){let i=this.processJobs.bind(this,e,t);process.nextTick(()=>{this._processJobOnNextTick(i,e,t,r)})},k.prototype._processJobOnNextTick=function(e,t,r,i){this.closing?r(this.closing):(this.paused||Promise.resolve()).then(()=>{let r=i?Promise.resolve(i):this.getNextJob();return this.processing[t]=r.then(this.processJob).then(e,r=>(this.closing&&"Connection is closed."===r.message||(h.emitSafe(this,"error",r,"Error processing job"),clearTimeout(this.errorRetryTimer[t]),this.errorRetryTimer[t]=setTimeout(()=>{e()},this.settings.retryProcessDelay)),null))}).catch(e=>{h.emitSafe(this,"error",e,"Error processing job")})},k.prototype.processJob=function(e,t=!1){let r;let i=!1;if(!e)return Promise.resolve();let n=()=>{r=this.timers.set("lockExtender",this.settings.lockRenewTime,()=>{p.extendLock(this,e.id,this.settings.lockDuration).then(e=>{e&&!i&&n()}).catch(t=>{h.emitSafe(this,"lock-extension-failed",e,t)})})},s=e.opts.timeout,a=()=>{i=!0,this.timers.clear(r)},o=t=>e.moveToFailed(t).then(r=>(h.emitSafe(this,"failed",e,t,"active"),r?this.nextJobFromJobData(r[0],r[1]):null));n();let l=this.handlers[e.name]||this.handlers["*"];if(!l)return o(Error("Missing process handler for job type "+e.name));{let r=l(e);return s&&(r=g(r,s)),h.emitSafe(this,"active",e,r,"waiting"),r.then(r=>e.moveToCompleted(r,void 0,t).then(t=>(h.emitSafe(this,"completed",e,r,"active"),t?this.nextJobFromJobData(t[0],t[1]):null))).catch(o).finally(()=>{a()})}},k.prototype.multi=function(){return this.client.multi()},k.prototype.getNextJob=async function(){if(this.closing)return Promise.resolve();if(!this.drained)return this.moveToActive();try{this.bclient.blocked=!0;let e=await this.bclient.brpoplpush(this.keys.wait,this.keys.active,this.settings.drainDelay);if(this.bclient.blocked=!1,e)return this.moveToActive(e)}catch(e){if(!(this.paused&&"Connection is closed."===e.message))throw e}},k.prototype.moveToActive=async function(e){return await this.isReady(),p.moveToActive(this,e).then(([e,t])=>this.nextJobFromJobData(e,t))},k.prototype.nextJobFromJobData=function(e,t){if(!e)return this.drained=!0,h.emitSafe(this,"drained"),null;{this.drained=!1;let r=u.fromJSON(this,e,t);return r.opts.repeat?this.nextRepeatableJob(r.name,r.data,r.opts).then(()=>r):r}},k.prototype.retryJob=function(e){return e.retry()},k.prototype.toKey=function(e){return[this.keyPrefix,this.name,e].join(":")},k.prototype.clean=function(e,t,r){return this.isReady().then(()=>{if(null==e)throw Error("You must define a grace period.");if(t||(t="completed"),-1===s.indexOf(["completed","wait","active","paused","delayed","failed"],t))throw Error("Cannot clean unknown queue type "+t);return p.cleanJobsInSet(this,t,Date.now()-e,r).then(e=>(h.emitSafe(this,"cleaned",e,t),e)).catch(e=>{throw h.emitSafe(this,"error",e),e})})},k.prototype.obliterate=async function(e){await this.pause();let t=0;do t=await p.obliterate(this,{force:!1,count:1e3,...e});while(t)},k.prototype.whenCurrentJobsFinished=function(){if(!this.bclientInitialized)return Promise.resolve();let e=T(this.bclient).then(()=>this.bclient.connect());return Promise.all(Object.values(this.processing)).then(()=>e)},e.exports=k},94909:(e,t,r)=>{"use strict";let i=r(31307),n=r(43328),s=r(55511),a=r(63867);e.exports=function(e){function t(e,t,r,i){return"repeat:"+o(e+t+i)+":"+r}function r(e,t,r){let i=t.endDate?new Date(t.endDate).getTime()+":":":",n=t.tz?t.tz+":":":";return e+":"+r+i+(t.cron?n+t.cron:String(t.every))}function o(e){return s.createHash("md5").update(e).digest("hex")}e.prototype.nextRepeatableJob=function(e,s,l,c){let u=this.client,p=l.repeat,d=l.prevMillis||0;!d&&l.jobId&&(p.jobId=l.jobId);let h=p.count?p.count+1:1;if(!i.isUndefined(p.limit)&&h>p.limit)return Promise.resolve();let f=Date.now();if(!i.isUndefined(p.endDate)&&f>new Date(p.endDate))return Promise.resolve();let m=function(e,t){if(t.cron&&t.every)throw Error("Both .cron and .every options are defined for this repeatable job");if(t.every)return Math.floor(e/t.every)*t.every+t.every;let r=new Date(t.startDate&&new Date(t.startDate)>new Date(e)?t.startDate:e),s=n.parseExpression(t.cron,i.defaults({currentDate:r},t));try{return s.next().getTime()}catch(e){}}(f=d<f?f:d,p);if(!m)return Promise.resolve();{let n=p.jobId?p.jobId+":":":",d=r(e,p,n),g=()=>u.zadd(this.keys.repeat,m,d).then(()=>{let r=t(e,n,m,o(d)),c=m-(f=Date.now());return a.create(this,e,s,i.defaultsDeep({repeat:{count:h,key:d},jobId:r,delay:c<0?0:c,timestamp:f,prevMillis:m},l))});return c?g():u.zscore(this.keys.repeat,d).then(e=>e?g():Promise.resolve())}},e.prototype.removeRepeatable=function(e,i){return"string"!=typeof e&&(i=e,e=a.DEFAULT_JOB_NAME),this.isReady().then(()=>{let n=i.jobId?i.jobId+":":":",s=r(e,i,n),a=t(e,n,"",o(s)),l=this.keys[""];return this.client.removeRepeatable(this.keys.repeat,this.keys.delayed,a,s,l)})},e.prototype.removeRepeatableByKey=function(e){let r=this._keyToData(e),i=this.keys[""],n=r.id?r.id+":":":",s=t(r.name||a.DEFAULT_JOB_NAME,n,"",o(e));return this.isReady().then(()=>this.client.removeRepeatable(this.keys.repeat,this.keys.delayed,s,e,i))},e.prototype._keyToData=function(e){let t=e.split(":");return{key:e,name:t[0],id:t[1]||null,endDate:parseInt(t[2])||null,tz:t[3]||null,cron:t[4]}},e.prototype.getRepeatableJobs=function(e,t,r){let i=this.keys.repeat;return e=e||0,t=t||-1,(r?this.client.zrange(i,e,t,"WITHSCORES"):this.client.zrevrange(i,e,t,"WITHSCORES")).then(e=>{let t=[];for(let r=0;r<e.length;r+=2){let i=this._keyToData(e[r]);t.push({key:i.key,name:i.name,id:i.id,endDate:i.endDate,tz:i.cron?i.tz:null,cron:i.cron||null,every:i.cron?null:parseInt(i.tz),next:parseInt(e[r+1])})}return t})},e.prototype.getRepeatableCount=function(){return this.client.zcard(this.toKey("repeat"))}}},38700:(e,t,r)=>{"use strict";let i=r(31307),n=new(r(38675)).Packr({useRecords:!1,encodeUndefinedAsNil:!0}).pack,s={isJobInList:(e,t,r)=>e.isJobInList([t,r]).then(e=>1===e),addJob(e,t,r,s){let a=t.keys,o=[a.wait,a.paused,a["meta-paused"],a.id,a.delayed,a.priority],l=[a[""],i.isUndefined(s.customJobId)?"":s.customJobId,r.name,r.data,n(r.opts),r.timestamp,r.delay,r.delay?r.timestamp+r.delay:0,s.priority||0,s.lifo?"RPUSH":"LPUSH",t.token,r.debounceId?`${a.de}:${r.debounceId}`:null,s.debounce?s.debounce.id:null,s.debounce?s.debounce.ttl:null];return o=o.concat(l),e.addJob(o)},pause(e,t){let r="wait",n="paused";t||(r="paused",n="wait");let s=i.map([r,n,"meta-paused",t?"paused":"resumed","meta"],t=>e.toKey(t));return e.client.pause(s.concat([t?"paused":"resumed"]))},async addLog(e,t,r,i){let n=await e.client,a=[e.toKey(t),e.toKey(t)+":logs"],o=await n.addLog(a.concat([t,r,i||""]));if(o<0)throw s.finishedErrors(o,t,"addLog");return o},getCountsPerPriorityArgs:(e,t)=>[e.keys.wait,e.keys.paused,e.keys["meta-paused"],e.keys.priority].concat(t),async getCountsPerPriority(e,t){let r=await e.client,i=this.getCountsPerPriorityArgs(e,t);return r.getCountsPerPriority(i)},moveToActive(e,t){let r=e.keys,i=[r.wait,r.active,r.priority];i[3]=i[1]+"@"+e.token,i[4]=r.stalled,i[5]=r.limiter,i[6]=r.delayed,i[7]=r.drained;let n=[r[""],e.token,e.settings.lockDuration,Date.now(),t];return e.limiter&&(n.push(e.limiter.max,e.limiter.duration,!!e.limiter.bounceBack),e.limiter.groupKey&&n.push(!0)),e.client.moveToActive(i.concat(n)).then(a)},updateProgress(e,t){let r=e.queue,i=[e.id,"progress"].map(e=>r.toKey(e)),n=JSON.stringify(t);return r.client.updateProgress(i,[n,JSON.stringify({jobId:e.id,progress:t})]).then(i=>{if(i<0)throw s.finishedErrors(i,e.id,"updateProgress");r.emit("progress",e,t)})},updateData(e,t){let r=e.queue,i=[e.id].map(e=>r.toKey(e)),n=JSON.stringify(t);return r.client.updateData(i,[n])},saveStacktraceArgs:(e,t,r)=>[e.queue.toKey(e.id)].concat([t,r,e.attemptsMade]),retryJobsArgs:(e,t)=>[e.toKey(""),e.toKey("failed"),e.toKey("wait"),e.toKey("meta-paused"),e.toKey("paused")].concat([t]),async retryJobs(e,t=1e3){let r=await e.client,i=this.retryJobsArgs(e,t);return r.retryJobs(i)},moveToFinishedArgs(e,t,r,s,a,o,l){let c=e.queue,u=c.keys,p=c.toKey(`metrics:${a}`),d=[u.active,u[a],c.toKey(e.id),u.wait,u.priority,u.active+"@"+c.token,u.delayed,u.stalled,p],h=n("object"==typeof s?s:"number"==typeof s?{count:s}:{count:s?0:-1});return d.concat([e.id,e.finishedOn,r,i.isUndefined(t)?"null":t,o?"0":c.token,h,JSON.stringify({jobId:e.id,val:t}),l||c.paused||c.closing||c.limiter?0:1,u[""],c.settings.lockDuration,c.token,c.metrics&&c.metrics.maxDataPoints])},moveToFinished(e,t,r,i,n,o,l=!1){let c=s.moveToFinishedArgs(e,t,r,i,n,o,l,e.queue.toKey(""));return e.queue.client.moveToFinished(c).then(t=>{if(t<0)throw s.finishedErrors(t,e.id,"finished","active");return t?a(t):0})},finishedErrors(e,t,r,i){switch(e){case -1:return Error("Missing key for job "+t+" "+r);case -2:return Error("Missing lock for job "+t+" "+r);case -3:return Error(`Job ${t} is not in the ${i} state. ${r}`);case -6:return Error(`Lock mismatch for job ${t}. Cmd ${r} from ${i}`)}},moveToCompleted:(e,t,r,i,n=!1)=>s.moveToFinished(e,t,"returnvalue",r,"completed",i,n),moveToFailedArgs:(e,t,r,i)=>s.moveToFinishedArgs(e,t,"failedReason",r,"failed",i,!0),moveToFailed(e,t,r,i){let n=s.moveToFailedArgs(e,t,r,i);return s.moveToFinished(n)},isFinished(e){let t=i.map(["completed","failed"],t=>e.queue.toKey(t));return e.queue.client.isFinished(t.concat([e.id]))},moveToDelayedArgs:(e,t,r,n)=>((r=(r=+(r=i.isUndefined(r)?0:r)||0)<0?0:r)>0&&(r=4096*r+(4095&t)),i.map(["active","delayed",t,"stalled"],t=>e.toKey(t)).concat([JSON.stringify(r),t,n?"0":e.token])),moveToDelayed(e,t,r,i){let n=s.moveToDelayedArgs(e,t,r,i);return e.client.moveToDelayed(n).then(e=>{switch(e){case -1:throw Error("Missing Job "+t+" when trying to move from active to delayed");case -2:throw Error("Job "+t+" was locked when trying to move from active to delayed")}})},remove(e,t){let r=[e.keys.active,e.keys.wait,e.keys.delayed,e.keys.paused,e.keys.completed,e.keys.failed,e.keys.priority,e.toKey(t),e.toKey(`${t}:logs`),e.keys.limiter,e.toKey("")];return e.client.removeJob(r.concat([t,e.token]))},async removeWithPattern(e,t){let r=[e.keys.active,e.keys.wait,e.keys.delayed,e.keys.paused,e.keys.completed,e.keys.failed,e.keys.priority,e.keys.limiter],i=[],n="0",s;do[n,s]=await e.client.removeJobs(r.concat([e.toKey(""),t,n])),i.push.apply(i,s);while("0"!==n);return i},extendLock:(e,t,r)=>e.client.extendLock([e.toKey(t)+":lock",e.keys.stalled,e.token,r,t]),releaseLock:(e,t)=>e.client.releaseLock([e.toKey(t)+":lock",e.token]),takeLock:(e,t)=>e.client.takeLock([t.lockKey(),e.token,e.settings.lockDuration]),updateDelaySet(e,t){let r=[e.keys.delayed,e.keys.active,e.keys.wait,e.keys.priority,e.keys.paused,e.keys["meta-paused"]],i=[e.toKey(""),t,e.token];return e.client.updateDelaySet(r.concat(i))},promote(e,t){let r=[e.keys.delayed,e.keys.wait,e.keys.paused,e.keys["meta-paused"],e.keys.priority],i=[e.toKey(""),t,e.token];return e.client.promote(r.concat(i))},moveUnlockedJobsToWait(e){let t=[e.keys.stalled,e.keys.wait,e.keys.active,e.keys.failed,e.keys["stalled-check"],e.keys["meta-paused"],e.keys.paused],r=[e.settings.maxStalledCount,e.toKey(""),Date.now(),e.settings.stalledInterval];return e.client.moveStalledJobsToWait(t.concat(r))},cleanJobsInSet:(e,t,r,i)=>e.client.cleanJobsInSet([e.toKey(t),e.toKey("priority"),e.keys.limiter,e.toKey(""),r,i||0,t]),retryJobArgs(e,t){let r=e.queue,n=e.id,s=i.map(["active","wait",n,"meta-paused","paused","stalled","priority"],e=>r.toKey(e)),a=(e.opts.lifo?"R":"L")+"PUSH";return s.concat([a,n,t?"0":e.queue.token])},reprocessJob(e,t){let r=e.queue,i=[r.toKey(e.id),r.toKey(e.id)+":lock",r.toKey(t.state),r.toKey("wait"),r.toKey("meta-paused"),r.toKey("paused")],n=[e.id,(e.opts.lifo?"R":"L")+"PUSH",r.token,Date.now()];return r.client.reprocessJob(i.concat(n))},obliterate(e,t){let r=e.client,i=[e.keys["meta-paused"],e.toKey("")],n=[t.count,t.force?"force":null];return r.obliterate(i.concat(n)).then(e=>{if(e<0)switch(e){case -1:throw Error("Cannot obliterate non-paused queue");case -2:throw Error("Cannot obliterate queue with active jobs")}return e})}};function a(e){if(e){let t=e[0];if(t.length)return[function(e){let t={};for(let r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return t}(t),e[1]]}return[]}e.exports=s},67542:e=>{"use strict";let t=`--[[
  Adds a job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - if delayed:
      - computes timestamp.
      - adds to delayed zset.
      - Emits a global event 'delayed' if the job is delayed.
    - if not delayed
      - Adds the jobId to the wait/paused list in one of three ways:
         - LIFO
         - FIFO
         - prioritized.
      - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'wait',
      KEYS[2] 'paused'
      KEYS[3] 'meta-paused'
      KEYS[4] 'id'
      KEYS[5] 'delayed'
      KEYS[6] 'priority'
      ARGV[1]  key prefix,
      ARGV[2]  custom id (will not generate one automatically)
      ARGV[3]  name
      ARGV[4]  data (json stringified job data)
      ARGV[5]  opts (json stringified job opts)
      ARGV[6]  timestamp
      ARGV[7]  delay
      ARGV[8]  delayedTimestamp
      ARGV[9]  priority
      ARGV[10] LIFO
      ARGV[11] token
      ARGV[12] debounce key
      ARGV[13] debounceId
      ARGV[14] debounceTtl
]]
local jobId
local jobIdKey
local rcall = redis.call
-- Includes
--[[
  Function to add job considering priority.
]]
local function addJobWithPriority(priorityKey, priority, jobId, targetKey)
  rcall("ZADD", priorityKey, priority, jobId)
  local count = rcall("ZCOUNT", priorityKey, 0, priority)
  local len = rcall("LLEN", targetKey)
  local id = rcall("LINDEX", targetKey, len - (count - 1))
  if id then
    rcall("LINSERT", targetKey, "BEFORE", id, jobId)
  else
    rcall("RPUSH", targetKey, jobId)
  end
end
--[[
  Function to debounce a job.
]]
local function debounceJob(prefixKey, debounceId, ttl, jobId, debounceKey, token)
  if debounceId ~= "" then
    local debounceKeyExists
    if ttl ~= "" then
      debounceKeyExists = not rcall('SET', debounceKey, jobId, 'PX', ttl, 'NX')
    else
      debounceKeyExists = not rcall('SET', debounceKey, jobId, 'NX')
    end
    if debounceKeyExists then
      local currentDebounceJobId = rcall('GET', debounceKey)
      rcall("PUBLISH", prefixKey .. "debounced@" .. token, currentDebounceJobId)
      return currentDebounceJobId
    end
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local jobCounter = rcall("INCR", KEYS[4])
if ARGV[2] == "" then
  jobId = jobCounter
  jobIdKey = ARGV[1] .. jobId
else
  jobId = ARGV[2]
  jobIdKey = ARGV[1] .. jobId
  if rcall("EXISTS", jobIdKey) == 1 then
    rcall("PUBLISH", ARGV[1] .. "duplicated@" .. ARGV[11], jobId)
    return jobId .. "" -- convert to string
  end
end
local debounceKey = ARGV[12]
local opts = cmsgpack.unpack(ARGV[5])
local debouncedJobId = debounceJob(ARGV[1], ARGV[13], ARGV[14],
  jobId, debounceKey, ARGV[11])
if debouncedJobId then
  return debouncedJobId
end
local debounceId = ARGV[13]
local optionalValues = {}
if debounceId ~= "" then
  table.insert(optionalValues, "deid")
  table.insert(optionalValues, debounceId)
end
    -- Store the job.
rcall("HMSET", jobIdKey, "name", ARGV[3], "data", ARGV[4], "opts", opts, "timestamp",
  ARGV[6], "delay", ARGV[7], "priority", ARGV[9], unpack(optionalValues))
-- Check if job is delayed
local delayedTimestamp = tonumber(ARGV[8])
if(delayedTimestamp ~= 0) then
  local timestamp = delayedTimestamp * 0x1000 + bit.band(jobCounter, 0xfff)
  rcall("ZADD", KEYS[5], timestamp, jobId)
  rcall("PUBLISH", KEYS[5], delayedTimestamp)
else
  local target
  -- Whe check for the meta-paused key to decide if we are paused or not
  -- (since an empty list and !EXISTS are not really the same)
  local target, paused = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])
  -- Standard or priority add
  local priority = tonumber(ARGV[9])
  if priority == 0 then
      -- LIFO or FIFO
    rcall(ARGV[10], target, jobId)
  else
    addJobWithPriority(KEYS[6], priority, jobId, target)
  end
  -- Emit waiting event (wait..ing@token)
  rcall("PUBLISH", KEYS[1] .. "ing@" .. ARGV[11], jobId)
end
return jobId .. "" -- convert to string
`;e.exports={name:"addJob",content:t,keys:6}},38099:e=>{"use strict";let t=`--[[
  Add job log
  Input:
    KEYS[1] job id key
    KEYS[2] job logs key
    ARGV[1] id
    ARGV[2] log
    ARGV[3] keepLogs
  Output:
    -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
  local logCount = rcall("RPUSH", KEYS[2], ARGV[2])
  if ARGV[3] ~= '' then
    local keepLogs = tonumber(ARGV[3])
    rcall("LTRIM", KEYS[2], -keepLogs, -1)
    return math.min(keepLogs, logCount)
  end
  return logCount
else
  return -1
end
`;e.exports={name:"addLog",content:t,keys:2}},59197:e=>{"use strict";let t=`--[[
  Remove jobs from the specific set.
  Input:
    KEYS[1]  set key,
    KEYS[2]  priority key
    KEYS[3]  rate limiter key
    ARGV[1]  prefix key
    ARGV[2]  maxTimestamp
    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited
    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'
]]
local setKey = KEYS[1]
local priorityKey = KEYS[2]
local rateLimiterKey = KEYS[3]
local prefixKey = ARGV[1]
local maxTimestamp = ARGV[2]
local limitStr = ARGV[3]
local setName = ARGV[4]
local isList = false
local rcall = redis.call
-- Includes
--[[
  Function to remove debounce key.
]]
local function removeDebounceKey(prefixKey, jobKey)
  local debounceId = rcall("HGET", jobKey, "deid")
  if debounceId then
    local debounceKey = prefixKey .. "de:" .. debounceId
    rcall("DEL", debounceKey)
  end
end
if setName == "wait" or setName == "active" or setName == "paused" then
  isList = true
end
-- We use ZRANGEBYSCORE to make the case where we're deleting a limited number
-- of items in a sorted set only run a single iteration. If we simply used
-- ZRANGE, we may take a long time traversing through jobs that are within the
-- grace period.
local function shouldUseZRangeByScore(isList, limit)
  return not isList and limit > 0
end
local function getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)
  if isList then
    return rcall("LRANGE", setKey, rangeStart, rangeEnd)
  elseif shouldUseZRangeByScore(isList, limit) then
    return rcall("ZRANGEBYSCORE", setKey, 0, maxTimestamp, "LIMIT", 0, limit)
  else
    return rcall("ZRANGE", setKey, rangeStart, rangeEnd)
  end
end
local limit = tonumber(limitStr)
local rangeStart = 0
local rangeEnd = -1
-- If we're only deleting _n_ items, avoid retrieving all items
-- for faster performance
--
-- Start from the tail of the list, since that's where oldest elements
-- are generally added for FIFO lists
if limit > 0 then
  rangeStart = -1 - limit + 1
  rangeEnd = -1
end
local jobIds = getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)
local deleted = {}
local deletedCount = 0
local jobTS
-- Run this loop:
-- - Once, if limit is -1 or 0
-- - As many times as needed if limit is positive
while ((limit <= 0 or deletedCount < limit) and next(jobIds, nil) ~= nil) do
  local jobIdsLen = #jobIds
  for i, jobId in ipairs(jobIds) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = prefixKey .. jobId
    if (rcall("EXISTS", jobKey .. ":lock") == 0) then
      -- Find the right timestamp of the job to compare to maxTimestamp:
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      -- * processedOn represents when the job was last attempted, but it doesn't get populated until the job is first tried
      -- * timestamp is the original job submission time
      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs that have been active within the grace period:
      for _, ts in ipairs(rcall("HMGET", jobKey, "finishedOn", "processedOn", "timestamp")) do
        if (ts) then
          jobTS = ts
          break
        end
      end
      if (not jobTS or jobTS < maxTimestamp) then
        if isList then
          -- Job ids can't be the empty string. Use the empty string as a
          -- deletion marker. The actual deletion will occur at the end of the
          -- script.
          rcall("LSET", setKey, rangeEnd - jobIdsLen + i, "")
        else
          rcall("ZREM", setKey, jobId)
        end
        rcall("ZREM", priorityKey, jobId)
        if setName ~= "completed" and setName ~= "failed" then
          removeDebounceKey(prefixKey, jobKey)
        end
        rcall("DEL", jobKey)
        rcall("DEL", jobKey .. ":logs")
        -- delete keys related to rate limiter
        -- NOTE: this code is unncessary for other sets than wait, paused and delayed.
        local limiterIndexTable = rateLimiterKey .. ":index"
        local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)
        if limitedSetKey then
          rcall("SREM", limitedSetKey, jobId)
          rcall("HDEL", limiterIndexTable, jobId)
        end
        deletedCount = deletedCount + 1
        table.insert(deleted, jobId)
      end
    end
  end
  -- If we didn't have a limit or used the single-iteration ZRANGEBYSCORE
  -- function, return immediately. We should have deleted all the jobs we can
  if limit <= 0 or shouldUseZRangeByScore(isList, limit) then
    break
  end
  if deletedCount < limit then
    -- We didn't delete enough. Look for more to delete
    rangeStart = rangeStart - limit
    rangeEnd = rangeEnd - limit
    jobIds = getJobs(setKey, isList, rangeStart, rangeEnd, maxTimestamp, limit)
  end
end
if isList then
  rcall("LREM", setKey, 0, "")
end
return deleted
`;e.exports={name:"cleanJobsInSet",content:t,keys:3}},55167:e=>{"use strict";let t=`--[[
  Extend lock and removes the job from the stalled set.
  Input:
    KEYS[1] 'lock',
    KEYS[2] 'stalled'
    ARGV[1]  token
    ARGV[2]  lock duration in milliseconds
    ARGV[3]  jobid
  Output:
    "1" if lock extended succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then
    rcall("SREM", KEYS[2], ARGV[3])
    return 1
  end
end
return 0
`;e.exports={name:"extendLock",content:t,keys:2}},62993:e=>{"use strict";let t=`--[[
  Get counts per provided states
    Input:
      KEYS[1] wait key
      KEYS[2] paused key
      KEYS[3] meta-paused key
      KEYS[4] priority key
      ARGV[1...] priorities
]]
local rcall = redis.call
local results = {}
local prioritizedKey = KEYS[4]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
for i = 1, #ARGV do
  local priority = tonumber(ARGV[i])
  if priority == 0 then
    local target = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])
    local count = rcall("LLEN", target) - rcall("ZCARD", prioritizedKey)
    if count < 0 then
      -- considering when last waiting job is moved to active before
      -- removing priority reference
      results[#results+1] = 0
    else
      results[#results+1] = count
    end
  else
    results[#results+1] = rcall("ZCOUNT", prioritizedKey,
      priority, priority)
  end
end
return results
`;e.exports={name:"getCountsPerPriority",content:t,keys:4}},70887:(e,t,r)=>{"use strict";e.exports={"addJob-6":r(67542),"addLog-2":r(38099),"cleanJobsInSet-3":r(59197),"extendLock-2":r(55167),"getCountsPerPriority-4":r(62993),"isFinished-2":r(95542),"isJobInList-1":r(4797),"moveStalledJobsToWait-7":r(23855),"moveToActive-8":r(5488),"moveToDelayed-4":r(48768),"moveToFinished-9":r(60292),"obliterate-2":r(49739),"pause-5":r(28107),"promote-5":r(12389),"releaseLock-1":r(43927),"removeJob-11":r(48763),"removeJobs-8":r(48786),"removeRepeatable-2":r(51291),"reprocessJob-6":r(49113),"retryJob-7":r(21882),"retryJobs-5":r(10515),"saveStacktrace-1":r(27529),"takeLock-1":r(82281),"updateData-1":r(62839),"updateDelaySet-6":r(89108),"updateProgress-2":r(25450)}},95542:e=>{"use strict";let t=`--[[
  Checks if a job is finished (.i.e. is in the completed or failed set)
  Input: 
    KEYS[1] completed key
    KEYS[2] failed key
    ARGV[1] job id
  Output:
    0 - not finished.
    1 - completed.
    2 - failed.
]]
if redis.call("ZSCORE", KEYS[1], ARGV[1]) ~= false then
  return 1
end
if redis.call("ZSCORE", KEYS[2], ARGV[1]) ~= false then
  return 2
end
return redis.call("ZSCORE", KEYS[2], ARGV[1])
`;e.exports={name:"isFinished",content:t,keys:2}},4797:e=>{"use strict";let t=`--[[
      Checks if job is in a given list.
      Input:
        KEYS[1]
        ARGV[1]
      Output:
        1 if element found in the list.
]]
local function item_in_list (list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local items = redis.call("LRANGE", KEYS[1] , 0, -1)
return item_in_list(items, ARGV[1])
`;e.exports={name:"isJobInList",content:t,keys:1}},23855:e=>{"use strict";let t=`--[[
  Move stalled jobs to wait.
    Input:
      KEYS[1] 'stalled' (SET)
      KEYS[2] 'wait',   (LIST)
      KEYS[3] 'active', (LIST)
      KEYS[4] 'failed', (ZSET)
      KEYS[5] 'stalled-check', (KEY)
      KEYS[6] 'meta-paused', (KEY)
      KEYS[7] 'paused', (LIST)
      ARGV[1]  Max stalled job count
      ARGV[2]  queue.toKey('')
      ARGV[3]  timestamp
      ARGV[4]  max check time
    Events:
      'stalled' with stalled job id.
]]
local rcall = redis.call
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Function to remove debounce key if needed.
]]
local function removeDebounceKeyIfNeeded(prefixKey, debounceId)
  if debounceId then
    local debounceKey = prefixKey .. "de:" .. debounceId
    local pttl = rcall("PTTL", debounceKey)
    if pttl == 0 or pttl == -1 then
      rcall("DEL", debounceKey)
    end
  end
end
local function removeJob(jobId, baseKey)
  local jobKey = baseKey .. jobId
  rcall("DEL", jobKey, jobKey .. ':logs')
end
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, prefix)
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, prefix)
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
-- Check if we need to check for stalled jobs now.
if rcall("EXISTS", KEYS[5]) == 1 then
  return {{}, {}}
end
rcall("SET", KEYS[5], ARGV[3], "PX", ARGV[4])
-- Move all stalled jobs to wait
local stalling = rcall('SMEMBERS', KEYS[1])
local stalled = {}
local failed = {}
if(#stalling > 0) then
  rcall('DEL', KEYS[1])
  local MAX_STALLED_JOB_COUNT = tonumber(ARGV[1])
  -- Remove from active list
  for i, jobId in ipairs(stalling) do
    local jobKey = ARGV[2] .. jobId
    -- Check that the lock is also missing, then we can handle this job as really stalled.
    if(rcall("EXISTS", jobKey .. ":lock") == 0) then
      --  Remove from the active queue.
      local removed = rcall("LREM", KEYS[3], 1, jobId)
      if(removed > 0) then
        -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.
        local stalledCount = rcall("HINCRBY", jobKey, "stalledCounter", 1)
        if(stalledCount > MAX_STALLED_JOB_COUNT) then
          local jobAttributes = rcall("HMGET", jobKey, "opts", "deid")
          local opts = cjson.decode(jobAttributes[1])
          local removeOnFailType = type(opts["removeOnFail"])
          rcall("ZADD", KEYS[4], ARGV[3], jobId)
          rcall("HMSET", jobKey, "failedReason", "job stalled more than allowable limit",
            "finishedOn", ARGV[3])
          removeDebounceKeyIfNeeded(ARGV[2], jobAttributes[2])
          rcall("PUBLISH", KEYS[4],  '{"jobId":"' .. jobId .. '", "val": "job stalled more than maxStalledCount"}')
          if removeOnFailType == "number" then
            removeJobsByMaxCount(opts["removeOnFail"],
                KEYS[4], ARGV[2])
          elseif removeOnFailType == "boolean" then
            if opts["removeOnFail"] then
              removeJob(jobId, ARGV[2])
              rcall("ZREM", KEYS[4], jobId)
            end
          elseif removeOnFailType ~= "nil" then
            local maxAge = opts["removeOnFail"]["age"]
            local maxCount = opts["removeOnFail"]["count"]
            if maxAge ~= nil then
              removeJobsByMaxAge(ARGV[3], maxAge,
                KEYS[4], ARGV[2])
            end
            if maxCount ~= nil and maxCount > 0 then
              removeJobsByMaxCount(maxCount, KEYS[4],
                ARGV[2])
            end
          end
          table.insert(failed, jobId)
        else
          local target = getTargetQueueList(KEYS[6], KEYS[2], KEYS[7])
          -- Move the job back to the wait queue, to immediately be picked up by a waiting worker.
          rcall("RPUSH", target, jobId)
          rcall('PUBLISH', KEYS[1] .. '@', jobId)
          table.insert(stalled, jobId)
        end
      end
    end
  end
end
-- Mark potentially stalled jobs
local active = rcall('LRANGE', KEYS[3], 0, -1)
if (#active > 0) then
  for from, to in batches(#active, 7000) do
    rcall('SADD', KEYS[1], unpack(active, from, to))
  end
end
return {failed, stalled}
`;e.exports={name:"moveStalledJobsToWait",content:t,keys:7}},5488:e=>{"use strict";let t=`--[[
  Move next job to be processed to active, lock it and fetch its data. The job
  may be delayed, in that case we need to move it to the delayed set instead.
  This operation guarantees that the worker owns the job during the locks
  expiration time. The worker is responsible of keeping the lock fresh
  so that no other worker picks this job again.
  Input:
      KEYS[1] wait key
      KEYS[2] active key
      KEYS[3] priority key
      KEYS[4] active event key
      KEYS[5] stalled key
      -- Rate limiting
      KEYS[6] rate limiter key
      KEYS[7] delayed key
      --
      KEYS[8] drained key
      ARGV[1] key prefix
      ARGV[2] lock token
      ARGV[3] lock duration in milliseconds
      ARGV[4] timestamp
      ARGV[5] optional jobid
      ARGV[6] optional jobs per time unit (rate limiter)
      ARGV[7] optional time unit (rate limiter)
      ARGV[8] optional do not do anything with job if rate limit hit
      ARGV[9] optional rate limit by key
]]
local rcall = redis.call
local rateLimit = function(jobId, maxJobs)
  local rateLimiterKey = KEYS[6];
  local limiterIndexTable = rateLimiterKey .. ":index"
  -- Rate limit by group?
  if(ARGV[9]) then
    local group = string.match(jobId, "[^:]+$")
    if group ~= nil then
      rateLimiterKey = rateLimiterKey .. ":" .. group
    end
  end
  -- -- key for storing rate limited jobs
  -- When a job has been previously rate limited it should be part of this set
  -- if the job is back here means that the delay time for this job has passed and now we should
  -- be able to process it again.
  local limitedSetKey = rateLimiterKey .. ":limited"
  local delay = 0
  -- -- Check if job was already limited
  local isLimited = rcall("SISMEMBER", limitedSetKey, jobId);
  if isLimited == 1 then
     -- Remove from limited zset since we are going to try to process it
     rcall("SREM", limitedSetKey, jobId)
     rcall("HDEL", limiterIndexTable, jobId)
  else
    -- If not, check if there are any limited jobs
    -- If the job has not been rate limited, we should check if there are any other rate limited jobs, because if that
    -- is the case we do not want to process this job, just calculate a delay for it and put it to "sleep".
    local numLimitedJobs = rcall("SCARD", limitedSetKey)
    if numLimitedJobs > 0 then
      -- Note, add some slack to compensate for drift.
      delay = ((numLimitedJobs * ARGV[7] * 1.1) /  maxJobs) + tonumber(rcall("PTTL", rateLimiterKey))
    end
  end
  local jobCounter = tonumber(rcall("GET", rateLimiterKey))
  if(jobCounter == nil) then
    jobCounter = 0
  end
  -- check if rate limit hit
  if (delay == 0) and (jobCounter >= maxJobs) then
    -- Seems like there are no current rated limited jobs, but the jobCounter has exceeded the number of jobs for this unit of time so we need to rate limit this job.
    local exceedingJobs = jobCounter - maxJobs
    delay = tonumber(rcall("PTTL", rateLimiterKey)) + ((exceedingJobs) * ARGV[7]) / maxJobs
  end
  if delay > 0 then
    local bounceBack = ARGV[8]
    if bounceBack == 'false' then
      local timestamp = delay + tonumber(ARGV[4])
      -- put job into delayed queue
      rcall("ZADD", KEYS[7], timestamp * 0x1000 + bit.band(jobCounter, 0xfff), jobId)
      rcall("PUBLISH", KEYS[7], timestamp)
      rcall("SADD", limitedSetKey, jobId)
      -- store index so that we can delete rate limited data
      rcall("HSET", limiterIndexTable, jobId, limitedSetKey)
    end
    -- remove from active queue
    rcall("LREM", KEYS[2], 1, jobId)
    return true
  else
    -- false indicates not rate limited
    -- increment jobCounter only when a job is not rate limited
    if (jobCounter == 0) then
      rcall("PSETEX", rateLimiterKey, ARGV[7], 1)
    else
      rcall("INCR", rateLimiterKey)
    end
    return false
  end
end
local jobId = ARGV[5]
if jobId ~= '' then
  -- clean stalled key
  rcall("SREM", KEYS[5], jobId)
else
  -- move from wait to active
  jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])
end
if jobId then
  -- Check if we need to perform rate limiting.
  local maxJobs = tonumber(ARGV[6])
  if maxJobs then
    if rateLimit(jobId, maxJobs) then
       return
    end
  end
  -- get a lock
  local jobKey = ARGV[1] .. jobId
  local lockKey = jobKey .. ':lock'
  rcall("SET", lockKey, ARGV[2], "PX", ARGV[3])
  -- remove from priority
  rcall("ZREM", KEYS[3], jobId)
  rcall("PUBLISH", KEYS[4], jobId)
  rcall("HSET", jobKey, "processedOn", ARGV[4])
  return {rcall("HGETALL", jobKey), jobId} -- get job data
else
  rcall("PUBLISH", KEYS[8], "")
end
`;e.exports={name:"moveToActive",content:t,keys:8}},48768:e=>{"use strict";let t=`--[[
  Moves job from active to delayed set.
  Input:
    KEYS[1] active key
    KEYS[2] delayed key
    KEYS[3] job key
    KEYS[4] stalled key
    ARGV[1] delayedTimestamp
    ARGV[2] the id of the job
    ARGV[3] queue token
  Output:
    0 - OK
   -1 - Missing job.
   -2 - Job is locked.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
if rcall("EXISTS", KEYS[3]) == 1 then
  local errorCode = removeLock(KEYS[3], KEYS[4], ARGV[3], ARGV[2])
  if errorCode < 0 then
    return errorCode
  end
  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[2])
  if numRemovedElements < 1 then return -3 end
  local score = tonumber(ARGV[1])
  rcall("ZADD", KEYS[2], score, ARGV[2])
  rcall("PUBLISH", KEYS[2], (score / 0x1000))
  return 0
else
  return -1
end
`;e.exports={name:"moveToDelayed",content:t,keys:4}},60292:e=>{"use strict";let t=`--[[
  Move job from active to a finished status (completed or failed)
  A job can only be moved to completed if it was active.
  The job must be locked before it can be moved to a finished status,
  and the lock must be released in this script.
     Input:
      KEYS[1] active key
      KEYS[2] completed/failed key
      KEYS[3] jobId key
      KEYS[4] wait key
      KEYS[5] priority key
      KEYS[6] active event key
      KEYS[7] delayed key
      KEYS[8] stalled key
      KEYS[9] metrics key
      ARGV[1]  jobId
      ARGV[2]  timestamp
      ARGV[3]  msg property
      ARGV[4]  return value / failed reason
      ARGV[5]  token
      ARGV[6]  shouldRemove
      ARGV[7]  event data (? maybe just send jobid).
      ARGV[8]  should fetch next job
      ARGV[9]  base key
      ARGV[10] lock token
      ARGV[11] lock duration in milliseconds
      ARGV[12] maxMetricsSize
     Output:
      0 OK
      -1 Missing key.
      -2 Missing lock.
      -3 - Job not in active set.
     Events:
      'completed/failed'
]]
local rcall = redis.call
-- Includes
--[[
  Functions to collect metrics based on a current and previous count of jobs.
  Granualarity is fixed at 1 minute.
]]
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function collectMetrics(metaKey, dataPointsList, maxDataPoints, timestamp)
    -- Increment current count
    local count = rcall("HINCRBY", metaKey, "count", 1) - 1
    -- Compute how many data points we need to add to the list, N.
    local prevTS = rcall("HGET", metaKey, "prevTS")
    if not prevTS then
        -- If prevTS is nil, set it to the current timestamp
        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)
        return
    end
    local N = math.min(math.floor(timestamp / 60000) - math.floor(prevTS / 60000), tonumber(maxDataPoints))
    if N > 0 then
        local delta = count - rcall("HGET", metaKey, "prevCount")
        -- If N > 1, add N-1 zeros to the list
        if N > 1 then
            local points = {}
            points[1] = delta
            for i = 2, N do points[i] = 0 end
            for from, to in batches(#points, 7000) do
                rcall("LPUSH", dataPointsList, unpack(points, from, to))
            end
        else
            -- LPUSH delta to the list
            rcall("LPUSH", dataPointsList, delta)
        end
        -- LTRIM to keep list to its max size
        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)
        -- update prev count with current count
        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)
    end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to remove debounce key if needed.
]]
local function removeDebounceKeyIfNeeded(prefixKey, debounceId)
  if debounceId then
    local debounceKey = prefixKey .. "de:" .. debounceId
    local pttl = rcall("PTTL", debounceKey)
    if pttl == 0 or pttl == -1 then
      rcall("DEL", debounceKey)
    end
  end
end
if rcall("EXISTS", KEYS[3]) == 1 then -- // Make sure job exists
    local errorCode = removeLock(KEYS[3], KEYS[8], ARGV[5], ARGV[1])
    if errorCode < 0 then
        return errorCode
    end
    -- Remove from active list (if not active we shall return error)
    local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[1])
    if numRemovedElements < 1 then return -3 end
    local debounceId = rcall("HGET", KEYS[3], "deid")
    removeDebounceKeyIfNeeded(ARGV[9], debounceId)
    -- Remove job?
    local keepJobs = cmsgpack.unpack(ARGV[6])
    local maxCount = keepJobs['count']
    local maxAge = keepJobs['age']
    local targetSet = KEYS[2]
    local timestamp = ARGV[2]
    if maxCount ~= 0 then
        -- Add to complete/failed set
        rcall("ZADD", targetSet, timestamp, ARGV[1])
        rcall("HMSET", KEYS[3], ARGV[3], ARGV[4], "finishedOn", timestamp) -- "returnvalue" / "failedReason" and "finishedOn"
        local function removeJobs(jobIds)
            for i, jobId in ipairs(jobIds) do
                local jobKey = ARGV[9] .. jobId
                local jobLogKey = jobKey .. ':logs'
                rcall("DEL", jobKey, jobLogKey)
            end
        end
        -- Remove old jobs?
        if maxAge ~= nil then
            local start = timestamp - maxAge * 1000
            local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
            removeJobs(jobIds)
            rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
        end
        if maxCount ~= nil and maxCount > 0 then
            local start = maxCount
            local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
            removeJobs(jobIds)
            rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1));
        end
    else
        local jobLogKey = KEYS[3] .. ':logs'
        rcall("DEL", KEYS[3], jobLogKey)
    end
    -- Collect metrics
    if ARGV[12] ~= "" then
      collectMetrics(KEYS[9], KEYS[9]..':data', ARGV[12], timestamp)
    end
    rcall("PUBLISH", targetSet, ARGV[7])
    -- Try to get next job to avoid an extra roundtrip if the queue is not closing, 
    -- and not rate limited.
    if (ARGV[8] == "1") then
        -- move from wait to active 
        local jobId = rcall("RPOPLPUSH", KEYS[4], KEYS[1])
        if jobId then
            local jobKey = ARGV[9] .. jobId
            local lockKey = jobKey .. ':lock'
            -- get a lock
            rcall("SET", lockKey, ARGV[11], "PX", ARGV[10])
            rcall("ZREM", KEYS[5], jobId) -- remove from priority
            rcall("PUBLISH", KEYS[6], jobId)
            rcall("HSET", jobKey, "processedOn", ARGV[2])
            return {rcall("HGETALL", jobKey), jobId} -- get job data
        end
    end
    return 0
else
    return -1
end
`;e.exports={name:"moveToFinished",content:t,keys:9}},49739:e=>{"use strict";let t=`--[[
    Completely obliterates a queue and all of its contents
     Input:
        KEYS[1] meta-paused
        KEYS[2] base
        ARGV[1]  count
        ARGV[2]  force
]] 
-- This command completely destroys a queue including all of its jobs, current or past 
-- leaving no trace of its existence. Since this script needs to iterate to find all the job
-- keys, consider that this call may be slow for very large queues.
-- The queue needs to be "paused" or it will return an error
-- If the queue has currently active jobs then the script by default will return error,
-- however this behaviour can be overrided using the 'force' option.
local maxCount = tonumber(ARGV[1])
local baseKey = KEYS[2]
local rcall = redis.call
-- Includes
--[[
  Function to remove debounce key.
]]
local function removeDebounceKey(prefixKey, jobKey)
  local debounceId = rcall("HGET", jobKey, "deid")
  if debounceId then
    local debounceKey = prefixKey .. "de:" .. debounceId
    rcall("DEL", debounceKey)
  end
end
local function getListItems(keyName, max)
    return rcall('LRANGE', keyName, 0, max - 1)
end
local function getZSetItems(keyName, max)
    return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeJobs(baseKey, keys)
    for i, key in ipairs(keys) do
        local jobKey = baseKey .. key
        rcall("DEL", jobKey, jobKey .. ':logs')
        removeDebounceKey(baseKey, jobKey)
    end
    maxCount = maxCount - #keys
end
local function removeListJobs(keyName, max)
    local jobs = getListItems(keyName, max)
    removeJobs(baseKey, jobs)
    rcall("LTRIM", keyName, #jobs, -1)
end
local function removeZSetJobs(keyName, max)
    local jobs = getZSetItems(keyName, max)
    removeJobs(baseKey, jobs)
    if (#jobs > 0) then rcall("ZREM", keyName, unpack(jobs)) end
end
local function removeLockKeys(keys)
    for i, key in ipairs(keys) do rcall("DEL", baseKey .. key .. ':lock') end
end
-- 1) Check if paused, if not return with error.
if rcall("EXISTS", KEYS[1]) ~= 1 then
    return -1 -- Error, NotPaused
end
-- 2) Check if there are active jobs, if there are and not "force" return error.
local activeKey = baseKey .. 'active'
local activeJobs = getListItems(activeKey, maxCount)
if (#activeJobs > 0) then
    if (ARGV[2] == "") then
        return -2 -- Error, ExistsActiveJobs
    end
end
removeLockKeys(activeJobs)
removeJobs(baseKey, activeJobs)
rcall("LTRIM", activeKey, #activeJobs, -1)
if (maxCount <= 0) then return 1 end
local waitKey = baseKey .. 'paused'
removeListJobs(waitKey, maxCount)
if (maxCount <= 0) then return 1 end
local delayedKey = baseKey .. 'delayed'
removeZSetJobs(delayedKey, maxCount)
if (maxCount <= 0) then return 1 end
local completedKey = baseKey .. 'completed'
removeZSetJobs(completedKey, maxCount)
if (maxCount <= 0) then return 1 end
local failedKey = baseKey .. 'failed'
removeZSetJobs(failedKey, maxCount)
if (maxCount <= 0) then return 1 end
if (maxCount > 0) then
    rcall("DEL", baseKey .. 'priority')
    rcall("DEL", baseKey .. 'stalled-check')
    rcall("DEL", baseKey .. 'stalled')
    rcall("DEL", baseKey .. 'meta-paused')
    rcall("DEL", baseKey .. 'meta')
    rcall("DEL", baseKey .. 'id')
    rcall("DEL", baseKey .. 'repeat')
    rcall("DEL", baseKey .. 'metrics:completed')
    rcall("DEL", baseKey .. 'metrics:completed:data')
    rcall("DEL", baseKey .. 'metrics:failed')
    rcall("DEL", baseKey .. 'metrics:failed:data')
    return 0
else
    return 1
end
`;e.exports={name:"obliterate",content:t,keys:2}},28107:e=>{"use strict";let t=`--[[
  Pauses or resumes a queue globably.
   Input:
      KEYS[1] 'wait' or 'paused''
      KEYS[2] 'paused' or 'wait'
      KEYS[3] 'meta-paused'
      KEYS[4] 'paused' o 'resumed' event.
      KEYS[5] 'meta' this key is only used in BullMQ and above.
      ARGV[1] 'paused' or 'resumed'
    Event:
      publish paused or resumed event.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("RENAME", KEYS[1], KEYS[2])
end
if ARGV[1] == "paused" then
  rcall("SET", KEYS[3], 1)
  -- for forwards compatibility
  rcall("HSET", KEYS[5], "paused", 1)
else
  rcall("DEL", KEYS[3])
  -- for forwards compatibility
  rcall("HDEL", KEYS[5], "paused")
end
rcall("PUBLISH", KEYS[4], ARGV[1])
`;e.exports={name:"pause",content:t,keys:5}},12389:e=>{"use strict";let t=`--[[
  Promotes a job that is currently "delayed" to the "waiting" state
     Input:
      KEYS[1] 'delayed'
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] 'meta-paused'
      KEYS[5] 'priority'
      ARGV[1]  queue.toKey('')
      ARGV[2]  jobId
      ARGV[3]  queue token
     Events:
      'waiting'
]]
local rcall = redis.call;
local jobId = ARGV[2]
-- Includes
--[[
  Function to add job considering priority.
]]
local function addJobWithPriority(priorityKey, priority, jobId, targetKey)
  rcall("ZADD", priorityKey, priority, jobId)
  local count = rcall("ZCOUNT", priorityKey, 0, priority)
  local len = rcall("LLEN", targetKey)
  local id = rcall("LINDEX", targetKey, len - (count - 1))
  if id then
    rcall("LINSERT", targetKey, "BEFORE", id, jobId)
  else
    rcall("RPUSH", targetKey, jobId)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
if rcall("ZREM", KEYS[1], jobId) == 1 then
  local priority = tonumber(rcall("HGET", ARGV[1] .. jobId, "priority")) or 0
  local target = getTargetQueueList(KEYS[4], KEYS[2], KEYS[3])
  if priority == 0 then
    -- LIFO or FIFO
    rcall("LPUSH", target, jobId)
  else
    addJobWithPriority(KEYS[5], priority, jobId, target)
  end
  -- Emit waiting event (wait..ing@token)
  rcall("PUBLISH", KEYS[2] .. "ing@" .. ARGV[3], jobId)
  rcall("HSET", ARGV[1] .. jobId, "delay", 0)
  return 0
else
  return -1
end
`;e.exports={name:"promote",content:t,keys:5}},43927:e=>{"use strict";let t=`--[[
  Release lock
     Input:
        KEYS[1] 'lock',
        ARGV[1]  token
        ARGV[2]  lock duration in milliseconds
      Output:
        "OK" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  return rcall("DEL", KEYS[1])
else
  return 0
end
`;e.exports={name:"releaseLock",content:t,keys:1}},48763:e=>{"use strict";let t=`--[[
    Remove a job from all the queues it may be in as well as all its data.
    In order to be able to remove a job, it must be unlocked.
     Input:
      KEYS[1]  'active',
      KEYS[2]  'wait',
      KEYS[3]  'delayed',
      KEYS[4]  'paused',
      KEYS[5]  'completed',
      KEYS[6]  'failed',
      KEYS[7]  'priority',
      KEYS[8]  jobId key
      KEYS[9]  job logs
      KEYS[10] rate limiter index table
      KEYS[11] prefix key
      ARGV[1]  jobId
      ARGV[2]  lock token
     Events:
      'removed'
]]
-- TODO PUBLISH global event 'removed'
local rcall = redis.call
-- Includes
--[[
  Function to remove debounce key.
]]
local function removeDebounceKey(prefixKey, jobKey)
  local debounceId = rcall("HGET", jobKey, "deid")
  if debounceId then
    local debounceKey = prefixKey .. "de:" .. debounceId
    rcall("DEL", debounceKey)
  end
end
local lockKey = KEYS[8] .. ':lock'
local lock = rcall("GET", lockKey)
if not lock then             -- or (lock == ARGV[2])) then
  local jobId = ARGV[1]
  rcall("LREM", KEYS[1], 0, jobId)
  rcall("LREM", KEYS[2], 0, jobId)
  rcall("ZREM", KEYS[3], jobId)
  rcall("LREM", KEYS[4], 0, jobId)
  rcall("ZREM", KEYS[5], jobId)
  rcall("ZREM", KEYS[6], jobId)
  rcall("ZREM", KEYS[7], jobId)
  removeDebounceKey(KEYS[11], KEYS[8])
  rcall("DEL", KEYS[8])
  rcall("DEL", KEYS[9])
  -- delete keys related to rate limiter
  local limiterIndexTable = KEYS[10] .. ":index"
  local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)
  if limitedSetKey then
    rcall("SREM", limitedSetKey, jobId)
    rcall("HDEL", limiterIndexTable, jobId)
  end
  return 1
else
  return 0
end
`;e.exports={name:"removeJob",content:t,keys:11}},48786:e=>{"use strict";let t=`--[[
    Remove all jobs matching a given pattern from all the queues they may be in as well as all its data.
    In order to be able to remove any job, they must be unlocked.
     Input:
      KEYS[1] 'active',
      KEYS[2] 'wait',
      KEYS[3] 'delayed',
      KEYS[4] 'paused',
      KEYS[5] 'completed',
      KEYS[6] 'failed',
      KEYS[7] 'priority',
      KEYS[8] 'rate-limiter'
      ARGV[1]  prefix
      ARGV[2]  pattern
      ARGV[3]  cursor
     Events:
      'removed'
]]
-- TODO PUBLISH global events 'removed'
local rcall = redis.call
local result = rcall("SCAN", ARGV[3], "MATCH", ARGV[1] .. ARGV[2])
local cursor = result[1];
local jobKeys = result[2];
local removed = {}
local prefixLen = string.len(ARGV[1]) + 1
for i, jobKey in ipairs(jobKeys) do
    local keyTypeResp = rcall("TYPE", jobKey)
    if keyTypeResp["ok"] == "hash" then
        local jobId = string.sub(jobKey, prefixLen)
        local lockKey = jobKey .. ':lock'
        local lock = redis.call("GET", lockKey)
        if not lock then
            rcall("LREM", KEYS[1], 0, jobId)
            rcall("LREM", KEYS[2], 0, jobId)
            rcall("ZREM", KEYS[3], jobId)
            rcall("LREM", KEYS[4], 0, jobId)
            rcall("ZREM", KEYS[5], jobId)
            rcall("ZREM", KEYS[6], jobId)
            rcall("ZREM", KEYS[7], jobId)
            rcall("DEL", jobKey)
            rcall("DEL", jobKey .. ':logs')
            -- delete keys related to rate limiter
            local limiterIndexTable = KEYS[8] .. ":index"
            local limitedSetKey = rcall("HGET", limiterIndexTable, jobId)
            if limitedSetKey then
                rcall("SREM", limitedSetKey, jobId)
                rcall("HDEL", limiterIndexTable, jobId)
            end
            table.insert(removed, jobId)
        end
    end
end
return {cursor, removed}
`;e.exports={name:"removeJobs",content:t,keys:8}},51291:e=>{"use strict";let t=`--[[
  Removes a repeatable job
  Input:
    KEYS[1] repeat jobs key
    KEYS[2] delayed jobs key
    ARGV[1] repeat job id
    ARGV[2] repeat job key
    ARGV[3] queue key
]]
local millis = redis.call("ZSCORE", KEYS[1], ARGV[2])
if(millis) then
  -- Delete next programmed job.
  local repeatJobId = ARGV[1] .. millis
  if(redis.call("ZREM", KEYS[2], repeatJobId) == 1) then
    redis.call("DEL", ARGV[3] .. repeatJobId)
  end
end
redis.call("ZREM", KEYS[1], ARGV[2]);
`;e.exports={name:"removeRepeatable",content:t,keys:2}},49113:e=>{"use strict";let t=`--[[
  Attempts to reprocess a job
  Input:
    KEYS[1] job key
    KEYS[2] job lock key
    KEYS[3] job state
    KEYS[4] wait key
    KEYS[5] meta-pause
    KEYS[6] paused key
    ARGV[1] job.id,
    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'
    ARGV[3] token
    ARGV[4] timestamp
  Output:
    1 means the operation was a success
    0 means the job does not exist
    -1 means the job is currently locked and can't be retried.
    -2 means the job was not found in the expected set.
]]
local rcall = redis.call;
if (rcall("EXISTS", KEYS[1]) == 1) then
    if (rcall("EXISTS", KEYS[2]) == 0) then
        rcall("HDEL", KEYS[1], "finishedOn", "processedOn", "failedReason")
        rcall("HSET", KEYS[1], "retriedOn", ARGV[4])
        if (rcall("ZREM", KEYS[3], ARGV[1]) == 1) then
            local target
            if rcall("EXISTS", KEYS[5]) ~= 1 then
                target = KEYS[4]
            else
                target = KEYS[6]
            end
            rcall(ARGV[2], target, ARGV[1])
            -- Emit waiting event (wait..ing@token)
            rcall("PUBLISH", KEYS[4] .. "ing@" .. ARGV[3], ARGV[1])
            return 1
        else
            return -2
        end
    else
        return -1
    end
else
    return 0
end
`;e.exports={name:"reprocessJob",content:t,keys:6}},21882:e=>{"use strict";let t=`--[[
  Retries a failed job by moving it back to the wait queue.
    Input:
      KEYS[1] 'active',
      KEYS[2] 'wait'
      KEYS[3] jobId key
      KEYS[4] 'meta-paused'
      KEYS[5] 'paused'
      KEYS[6] stalled key
      KEYS[7] 'priority'
      ARGV[1]  pushCmd
      ARGV[2]  jobId
      ARGV[3]  token
    Events:
      'prefix:added'
    Output:
     0  - OK
     -1 - Missing key
     -2 - Job Not locked
     -3 - Job not in active set
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job considering priority.
]]
local function addJobWithPriority(priorityKey, priority, jobId, targetKey)
  rcall("ZADD", priorityKey, priority, jobId)
  local count = rcall("ZCOUNT", priorityKey, 0, priority)
  local len = rcall("LLEN", targetKey)
  local id = rcall("LINDEX", targetKey, len - (count - 1))
  if id then
    rcall("LINSERT", targetKey, "BEFORE", id, jobId)
  else
    rcall("RPUSH", targetKey, jobId)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
if rcall("EXISTS", KEYS[3]) == 1 then
  local errorCode = removeLock(KEYS[3], KEYS[6], ARGV[3], ARGV[2])
  if errorCode < 0 then
    return errorCode
  end
  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[2])
  if numRemovedElements < 1 then return -3 end
  local target = getTargetQueueList(KEYS[4], KEYS[2], KEYS[5])
  local priority = tonumber(rcall("HGET", KEYS[3], "priority")) or 0
  if priority == 0 then
    -- LIFO or FIFO
    rcall(ARGV[1], target, ARGV[2])
  else
    addJobWithPriority(KEYS[7], priority, ARGV[2], target)
  end
  return 0
else
  return -1
end
`;e.exports={name:"retryJob",content:t,keys:7}},10515:e=>{"use strict";let t=`--[[
  Attempts to retry all failed jobs
  Input:
    KEYS[1] base key
    KEYS[2] failed state key
    KEYS[3] wait state key
    KEYS[4] 'meta-paused'
    KEYS[5] 'paused'
    ARGV[1]  count
  Output:
    1  means the operation is not completed
    0  means the operation is completed
]]
local baseKey = KEYS[1]
local maxCount = tonumber(ARGV[1])
local rcall = redis.call;
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function getZSetItems(keyName, max)
    return rcall('ZRANGE', keyName, 0, max - 1)
end
local jobs = getZSetItems(KEYS[2], maxCount)
if (#jobs > 0) then
    for i, key in ipairs(jobs) do
        local jobKey = baseKey .. key
        rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")
    end
    local target
    if rcall("EXISTS", KEYS[4]) ~= 1 then
        target = KEYS[3]
    else
        target = KEYS[5]
    end
    for from, to in batches(#jobs, 7000) do
        rcall("ZREM", KEYS[2], unpack(jobs, from, to))
        rcall("LPUSH", target, unpack(jobs, from, to))
    end
end
maxCount = maxCount - #jobs
if (maxCount <= 0) then return 1 end
return 0
`;e.exports={name:"retryJobs",content:t,keys:5}},27529:e=>{"use strict";let t=`--[[
  Save stacktrace and failedReason.
  Input:
    KEYS[1] job key
    ARGV[1]  stacktrace
    ARGV[2]  failedReason
    ARGV[3]  attemptsMade
  Output:
     0 - OK
    -1 - Missing key
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2],
    "attemptsMade", ARGV[3])
  return 0
else
  return -1
end
`;e.exports={name:"saveStacktrace",content:t,keys:1}},82281:e=>{"use strict";let t=`--[[
  Takes a lock
     Input:
        KEYS[1] 'lock',
        ARGV[1]  token
        ARGV[2]  lock duration in milliseconds
      Output:
        "OK" if lock taken successfully.
]]
if redis.call("SET", KEYS[1], ARGV[1], "NX", "PX", ARGV[2]) then
  return 1
else
  return 0
end
`;e.exports={name:"takeLock",content:t,keys:1}},62839:e=>{"use strict";let t=`--[[
  Update job data
  Input:
    KEYS[1] Job id key
    ARGV[1] data
  Output:
    0 - OK
   -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "data", ARGV[1])
  return 0
else
  return -1
end
`;e.exports={name:"updateData",content:t,keys:1}},89108:e=>{"use strict";let t=`--[[
  Updates the delay set, by picking a delayed job that should
  be processed now.
     Input:
      KEYS[1] 'delayed'
      KEYS[2] 'active'
      KEYS[3] 'wait'
      KEYS[4] 'priority'
      KEYS[5] 'paused'
      KEYS[6] 'meta-paused'
      ARGV[1]  queue.toKey('')
      ARGV[2]  delayed timestamp
      ARGV[3]  queue token
     Events:
      'removed'
]]
local rcall = redis.call;
-- Includes
--[[
  Function to add job considering priority.
]]
local function addJobWithPriority(priorityKey, priority, jobId, targetKey)
  rcall("ZADD", priorityKey, priority, jobId)
  local count = rcall("ZCOUNT", priorityKey, 0, priority)
  local len = rcall("LLEN", targetKey)
  local id = rcall("LINDEX", targetKey, len - (count - 1))
  if id then
    rcall("LINSERT", targetKey, "BEFORE", id, jobId)
  else
    rcall("RPUSH", targetKey, jobId)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("EXISTS", queueMetaKey) ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
-- Try to get as much as 1000 jobs at once
local jobs = rcall("ZRANGEBYSCORE", KEYS[1], 0, tonumber(ARGV[2]) * 0x1000, "LIMIT", 0, 1000)
if(#jobs > 0) then
  rcall("ZREM", KEYS[1], unpack(jobs))
  -- check if we need to use push in paused instead of waiting
  local target = getTargetQueueList(KEYS[6], KEYS[3], KEYS[5])
  for _, jobId in ipairs(jobs) do
    -- Is this really needed?
    rcall("LREM", KEYS[2], 0, jobId)
    local priority = tonumber(rcall("HGET", ARGV[1] .. jobId, "priority")) or 0
    if priority == 0 then
      -- LIFO or FIFO
      rcall("LPUSH", target, jobId)
    else
      addJobWithPriority(KEYS[4], priority, jobId, target)
    end
    -- Emit waiting event (wait..ing@token)
    rcall("PUBLISH", KEYS[3] .. "ing@" .. ARGV[3], jobId)
    rcall("HSET", ARGV[1] .. jobId, "delay", 0)
  end
end
local nextTimestamp = rcall("ZRANGE", KEYS[1], 0, 0, "WITHSCORES")[2]
if(nextTimestamp ~= nil) then
  rcall("PUBLISH", KEYS[1], nextTimestamp / 0x1000)
end
return nextTimestamp
`;e.exports={name:"updateDelaySet",content:t,keys:6}},25450:e=>{"use strict";let t=`--[[
  Update job progress
     Input:
        KEYS[1] Job id key
        KEYS[2] progress event key
        ARGV[1] progress
        ARGV[2] event data
      Event:
        progress(jobId, progress)
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "progress", ARGV[1])
  rcall("PUBLISH", KEYS[2], ARGV[2])
  return 0
else
  return -1
end
`;e.exports={name:"updateProgress",content:t,keys:2}},50931:(e,t,r)=>{"use strict";let i=r(31307),n=r(27782);function s(){this.idle=!0,this.listeners=[],this.timers={}}s.prototype.set=function(e,t,r){let i=n.v4(),s=setTimeout((e,t)=>{e.clear(t);try{r()}catch(e){console.error(e)}},t,this,i);return this.timers[i]={name:e,timer:s},this.idle=!1,i},s.prototype.clear=function(e){let t=this.timers,r=t[e];if(r&&(clearTimeout(r.timer),delete t[e],!this.idle&&0===i.size(t))){for(;this.listeners.length;)this.listeners.pop()();this.idle=!0}},s.prototype.clearAll=function(){i.each(this.timers,(e,t)=>{this.clear(t)})},s.prototype.whenIdle=function(){return new Promise(e=>{this.idle?e():this.listeners.unshift(e)})},e.exports=s},99997:e=>{"use strict";let t={value:null};e.exports.errorObject=t,e.exports.tryCatch=function(e,r,i){try{return e.apply(r,i)}catch(e){return t.value=e,t}},e.exports.isRedisReady=function(e){return new Promise((t,r)=>{if("ready"===e.status)t();else{let a;function i(){e.removeListener("end",s),e.removeListener("error",n),t()}function n(e){a=e}function s(){e.removeListener("ready",i),e.removeListener("error",n),r(a)}e.once("ready",i),e.on("error",n),e.once("end",s)}})},e.exports.emitSafe=function(e,t,...r){try{return e.emit(t,...r)}catch(t){try{return e.emit("error",t)}catch(e){console.error(e)}}},e.exports.MetricsTime={ONE_MINUTE:1,FIVE_MINUTES:5,FIFTEEN_MINUTES:15,THIRTY_MINUTES:30,ONE_HOUR:60,ONE_WEEK:10080,TWO_WEEKS:20160,ONE_MONTH:80640}},74856:(e,t,r)=>{"use strict";let i=r(99997),n=/ERR unknown command ['`]\s*client\s*['`]/;e.exports=function(e){e.prototype.setWorkerName=function(){return i.isRedisReady(this.client).then(()=>{let e=this.clientName();return this.bclient.options.connectionName=e,this.bclient.client("setname",e)}).catch(e=>{if(!n.test(e.message))throw e})},e.prototype.getWorkers=function(){return i.isRedisReady(this.client).then(()=>this.client.client("list")).then(e=>this.parseClientList(e)).catch(e=>{if(!n.test(e.message))throw e})},e.prototype.base64Name=function(){return Buffer.from(this.name).toString("base64")},e.prototype.clientName=function(){return this.keyPrefix+":"+this.base64Name()},e.prototype.parseClientList=function(e){let t=e.split("\n"),r=[];return t.forEach(e=>{let t={};e.split(" ").forEach(e=>{let r=e.indexOf("="),i=e.substring(0,r),n=e.substring(r+1);t[i]=n});let i=t.name;i&&i.startsWith(this.clientName())&&(t.name=this.name,r.push(t))}),r}}},27782:(e,t,r)=>{"use strict";let i,n;r.r(t),r.d(t,{NIL:()=>k,parse:()=>y,stringify:()=>h,v1:()=>g,v3:()=>b,v4:()=>x,v5:()=>w,validate:()=>p,version:()=>S});var s=r(55511),a=r.n(s);let o=new Uint8Array(256),l=o.length;function c(){return l>o.length-16&&(a().randomFillSync(o),l=0),o.slice(l,l+=16)}let u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,p=function(e){return"string"==typeof e&&u.test(e)},d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).substr(1));let h=function(e,t=0){let r=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!p(r))throw TypeError("Stringified UUID is invalid");return r},f=0,m=0,g=function(e,t,r){let s=t&&r||0,a=t||Array(16),o=(e=e||{}).node||i,l=void 0!==e.clockseq?e.clockseq:n;if(null==o||null==l){let t=e.random||(e.rng||c)();null==o&&(o=i=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=n=(t[6]<<8|t[7])&16383)}let u=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:m+1,d=u-f+(p-m)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||u>f)&&void 0===e.nsecs&&(p=0),p>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,m=p,n=l;let g=((0xfffffff&(u+=122192928e5))*1e4+p)%0x100000000;a[s++]=g>>>24&255,a[s++]=g>>>16&255,a[s++]=g>>>8&255,a[s++]=255&g;let y=u/0x100000000*1e4&0xfffffff;a[s++]=y>>>8&255,a[s++]=255&y,a[s++]=y>>>24&15|16,a[s++]=y>>>16&255,a[s++]=l>>>8|128,a[s++]=255&l;for(let e=0;e<6;++e)a[s+e]=o[e];return t||h(a)},y=function(e){let t;if(!p(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function v(e,t,r){function i(e,i,n,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof i&&(i=y(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(i),a.set(e,i.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,n){s=s||0;for(let e=0;e<16;++e)n[s+e]=a[e];return n}return h(a)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}let b=v("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("md5").update(e).digest()}),x=function(e,t,r){let i=(e=e||{}).random||(e.rng||c)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return h(i)},w=v("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("sha1").update(e).digest()}),k="00000000-0000-0000-0000-000000000000",S=function(e){if(!p(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},90438:e=>{var t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],r=function(e){for(var t,r=0,i=0,n=[],s=e.length;r<s;r++)(t=e.charCodeAt(r))<128?n[i++]=t:(t<2048?n[i++]=t>>6|192:((64512&t)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++r)),n[i++]=t>>18|240,n[i++]=t>>12&63|128):n[i++]=t>>12|224,n[i++]=t>>6&63|128),n[i++]=63&t|128);return n},i=e.exports=function(e){for(var i,n=0,s=-1,a=0,o=0,l="string"==typeof e?r(e):e,c=l.length;n<c;){if(i=l[n++],-1===s)123===i&&(s=n);else if(125!==i)o=t[(i^o>>8)&255]^o<<8;else if(n-1!==s)return 16383&o;a=t[(i^a>>8)&255]^a<<8}return 16383&a};e.exports.generateMulti=function(e){for(var t=1,r=e.length,n=i(e[0]);t<r;)if(i(e[t++])!==n)return -1;return n}},47483:(e,t,r)=>{"use strict";var i=r(81105);function n(e,t){var r={zone:t};if(e?e instanceof n?this._date=e._date:e instanceof Date?this._date=i.DateTime.fromJSDate(e,r):"number"==typeof e?this._date=i.DateTime.fromMillis(e,r):"string"==typeof e&&(this._date=i.DateTime.fromISO(e,r),this._date.isValid||(this._date=i.DateTime.fromRFC2822(e,r)),this._date.isValid||(this._date=i.DateTime.fromSQL(e,r)),this._date.isValid||(this._date=i.DateTime.fromFormat(e,"EEE, d MMM yyyy HH:mm:ss",r))):this._date=i.DateTime.local(),!this._date||!this._date.isValid)throw Error("CronDate: unhandled timestamp: "+JSON.stringify(e));t&&t!==this._date.zoneName&&(this._date=this._date.setZone(t))}n.prototype.addYear=function(){this._date=this._date.plus({years:1})},n.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},n.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},n.prototype.addHour=function(){var e=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=e&&(this._date=this._date.plus({hours:1}))},n.prototype.addMinute=function(){var e=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<e&&(this._date=this._date.plus({hours:1}))},n.prototype.addSecond=function(){var e=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<e&&(this._date=this._date.plus({hours:1}))},n.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},n.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},n.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},n.prototype.subtractHour=function(){var e=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=e&&(this._date=this._date.minus({hours:1}))},n.prototype.subtractMinute=function(){var e=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},n.prototype.subtractSecond=function(){var e=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>e&&(this._date=this._date.minus({hours:1}))},n.prototype.getDate=function(){return this._date.day},n.prototype.getFullYear=function(){return this._date.year},n.prototype.getDay=function(){var e=this._date.weekday;return 7==e?0:e},n.prototype.getMonth=function(){return this._date.month-1},n.prototype.getHours=function(){return this._date.hour},n.prototype.getMinutes=function(){return this._date.minute},n.prototype.getSeconds=function(){return this._date.second},n.prototype.getMilliseconds=function(){return this._date.millisecond},n.prototype.getTime=function(){return this._date.valueOf()},n.prototype.getUTCDate=function(){return this._getUTC().day},n.prototype.getUTCFullYear=function(){return this._getUTC().year},n.prototype.getUTCDay=function(){var e=this._getUTC().weekday;return 7==e?0:e},n.prototype.getUTCMonth=function(){return this._getUTC().month-1},n.prototype.getUTCHours=function(){return this._getUTC().hour},n.prototype.getUTCMinutes=function(){return this._getUTC().minute},n.prototype.getUTCSeconds=function(){return this._getUTC().second},n.prototype.toISOString=function(){return this._date.toUTC().toISO()},n.prototype.toJSON=function(){return this._date.toJSON()},n.prototype.setDate=function(e){this._date=this._date.set({day:e})},n.prototype.setFullYear=function(e){this._date=this._date.set({year:e})},n.prototype.setDay=function(e){this._date=this._date.set({weekday:e})},n.prototype.setMonth=function(e){this._date=this._date.set({month:e+1})},n.prototype.setHours=function(e){this._date=this._date.set({hour:e})},n.prototype.setMinutes=function(e){this._date=this._date.set({minute:e})},n.prototype.setSeconds=function(e){this._date=this._date.set({second:e})},n.prototype.setMilliseconds=function(e){this._date=this._date.set({millisecond:e})},n.prototype._getUTC=function(){return this._date.toUTC()},n.prototype.toString=function(){return this.toDate().toString()},n.prototype.toDate=function(){return this._date.toJSDate()},n.prototype.isLastDayOfMonth=function(){var e=this._date.plus({days:1}).startOf("day");return this._date.month!==e.month},n.prototype.isLastWeekdayOfMonth=function(){var e=this._date.plus({days:7}).startOf("day");return this._date.month!==e.month},e.exports=n},68201:(e,t,r)=>{"use strict";var i=r(47483),n=r(27317);function s(e,t){this._options=t,this._utc=t.utc||!1,this._tz=this._utc?"UTC":t.tz,this._currentDate=new i(t.currentDate,this._tz),this._startDate=t.startDate?new i(t.startDate,this._tz):null,this._endDate=t.endDate?new i(t.endDate,this._tz):null,this._isIterator=t.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=t.nthDayOfWeek||0,this.fields=s._freezeFields(e)}s.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],s.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},s.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],s.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],s.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},s.parseDefaults=["0","*","*","*","*","*"],s.standardValidCharacters=/^[,*\d/-]+$/,s.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/,s.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/,s.validCharacters={second:s.standardValidCharacters,minute:s.standardValidCharacters,hour:s.standardValidCharacters,dayOfMonth:s.dayOfMonthValidCharacters,month:s.standardValidCharacters,dayOfWeek:s.dayOfWeekValidCharacters},s._isValidConstraintChar=function(e,t){return"string"==typeof t&&e.chars.some(function(e){return t.indexOf(e)>-1})},s._parseField=function(e,t,r){switch(e){case"month":case"dayOfWeek":var i=s.aliases[e];t=t.replace(/[a-z]{3}/gi,function(e){if(void 0!==i[e=e.toLowerCase()])return i[e];throw Error('Validation error, cannot resolve alias "'+e+'"')})}if(!s.validCharacters[e].test(t))throw Error("Invalid characters, got value: "+t);function n(e){var t=e.split("/");if(t.length>2)throw Error("Invalid repeat: "+e);return t.length>1?(t[0]==+t[0]&&(t=[t[0]+"-"+r.max,t[1]]),a(t[0],t[t.length-1])):a(e,1)}function a(t,i){var n=[],s=t.split("-");if(s.length>1){if(s.length<2)return+t;if(!s[0].length){if(!s[1].length)throw Error("Invalid range: "+t);return+t}var a=+s[0],o=+s[1];if(Number.isNaN(a)||Number.isNaN(o)||a<r.min||o>r.max)throw Error("Constraint error, got range "+a+"-"+o+" expected range "+r.min+"-"+r.max);if(a>o)throw Error("Invalid range: "+t);var l=+i;if(Number.isNaN(l)||l<=0)throw Error("Constraint error, cannot repeat at every "+l+" time.");"dayOfWeek"===e&&o%7==0&&n.push(0);for(var c=a;c<=o;c++)!(-1!==n.indexOf(c))&&l>0&&l%i==0?(l=1,n.push(c)):l++;return n}return Number.isNaN(+t)?t:+t}return -1!==t.indexOf("*")?t=t.replace(/\*/g,r.min+"-"+r.max):-1!==t.indexOf("?")&&(t=t.replace(/\?/g,r.min+"-"+r.max)),function(t){var i=[];function a(t){if(t instanceof Array)for(var n=0,a=t.length;n<a;n++){var o=t[n];if(s._isValidConstraintChar(r,o)){i.push(o);continue}if("number"!=typeof o||Number.isNaN(o)||o<r.min||o>r.max)throw Error("Constraint error, got value "+o+" expected range "+r.min+"-"+r.max);i.push(o)}else{if(s._isValidConstraintChar(r,t)){i.push(t);return}var l=+t;if(Number.isNaN(l)||l<r.min||l>r.max)throw Error("Constraint error, got value "+t+" expected range "+r.min+"-"+r.max);"dayOfWeek"===e&&(l%=7),i.push(l)}}var o=t.split(",");if(!o.every(function(e){return e.length>0}))throw Error("Invalid list value format");if(o.length>1)for(var l=0,c=o.length;l<c;l++)a(n(o[l]));else a(n(t));return i.sort(s._sortCompareFn),i}(t)},s._sortCompareFn=function(e,t){var r="number"==typeof e,i="number"==typeof t;return r&&i?e-t:!r&&i?1:r&&!i?-1:e.localeCompare(t)},s._handleMaxDaysInMonth=function(e){if(1===e.month.length){var t=s.daysInMonth[e.month[0]-1];if(e.dayOfMonth[0]>t)throw Error("Invalid explicit day of month definition");return e.dayOfMonth.filter(function(e){return"L"===e||e<=t}).sort(s._sortCompareFn)}},s._freezeFields=function(e){for(var t=0,r=s.map.length;t<r;++t){var i=s.map[t],n=e[i];e[i]=Object.freeze(n)}return Object.freeze(e)},s.prototype._applyTimezoneShift=function(e,t,r){if("Month"===r||"Day"===r){var i=e.getTime();e[t+r](),i===e.getTime()&&(0===e.getMinutes()&&0===e.getSeconds()?e.addHour():59===e.getMinutes()&&59===e.getSeconds()&&e.subtractHour())}else{var n=e.getHours();e[t+r]();var s=e.getHours(),a=s-n;2===a?24!==this.fields.hour.length&&(this._dstStart=s):0===a&&0===e.getMinutes()&&0===e.getSeconds()&&24!==this.fields.hour.length&&(this._dstEnd=s)}},s.prototype._findSchedule=function(e){function t(e,t){for(var r=0,i=t.length;r<i;r++)if(t[r]>=e)return t[r]===e;return t[0]===e}function r(e){return e.length>0&&e.some(function(e){return"string"==typeof e&&e.indexOf("L")>=0})}for(var n=(e=e||!1)?"subtract":"add",a=new i(this._currentDate,this._tz),o=this._startDate,l=this._endDate,c=a.getTime(),u=0;u<1e4;){if(u++,e){if(o&&a.getTime()-o.getTime()<0)throw Error("Out of the timespan range")}else if(l&&l.getTime()-a.getTime()<0)throw Error("Out of the timespan range");var p=t(a.getDate(),this.fields.dayOfMonth);r(this.fields.dayOfMonth)&&(p=p||a.isLastDayOfMonth());var d=t(a.getDay(),this.fields.dayOfWeek);r(this.fields.dayOfWeek)&&(d=d||this.fields.dayOfWeek.some(function(e){if(!r([e]))return!1;var t=Number.parseInt(e[0])%7;if(Number.isNaN(t))throw Error("Invalid last weekday of the month expression: "+e);return a.getDay()===t&&a.isLastWeekdayOfMonth()}));var h=this.fields.dayOfMonth.length>=s.daysInMonth[a.getMonth()],f=this.fields.dayOfWeek.length===s.constraints[5].max-s.constraints[5].min+1,m=a.getHours();if(!p&&(!d||f)||!h&&f&&!p||h&&!f&&!d||this._nthDayOfWeek>0&&!function(e,t){if(t<6){if(8>e.getDate()&&1===t)return!0;var r=e.getDate()%7?1:0;return Math.floor((e.getDate()-e.getDate()%7)/7)+r===t}return!1}(a,this._nthDayOfWeek)){this._applyTimezoneShift(a,n,"Day");continue}if(!t(a.getMonth()+1,this.fields.month)){this._applyTimezoneShift(a,n,"Month");continue}if(t(m,this.fields.hour)){if(this._dstEnd===m&&!e){this._dstEnd=null,this._applyTimezoneShift(a,"add","Hour");continue}}else{if(this._dstStart!==m){this._dstStart=null,this._applyTimezoneShift(a,n,"Hour");continue}if(!t(m-1,this.fields.hour)){a[n+"Hour"]();continue}}if(!t(a.getMinutes(),this.fields.minute)){this._applyTimezoneShift(a,n,"Minute");continue}if(!t(a.getSeconds(),this.fields.second)){this._applyTimezoneShift(a,n,"Second");continue}if(c===a.getTime()){"add"===n||0===a.getMilliseconds()?this._applyTimezoneShift(a,n,"Second"):a.setMilliseconds(0);continue}break}if(u>=1e4)throw Error("Invalid expression, loop limit exceeded");return this._currentDate=new i(a,this._tz),this._hasIterated=!0,a},s.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e},s.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e},s.prototype.hasNext=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},s.prototype.hasPrev=function(){var e=this._currentDate,t=this._hasIterated;try{return this._findSchedule(!0),!0}catch(e){return!1}finally{this._currentDate=e,this._hasIterated=t}},s.prototype.iterate=function(e,t){var r=[];if(e>=0)for(var i=0,n=e;i<n;i++)try{var s=this.next();r.push(s),t&&t(s,i)}catch(e){break}else for(var i=0,n=e;i>n;i--)try{var s=this.prev();r.push(s),t&&t(s,i)}catch(e){break}return r},s.prototype.reset=function(e){this._currentDate=new i(e||this._options.currentDate)},s.prototype.stringify=function(e){for(var t=[],r=e?0:1,i=s.map.length;r<i;++r){var a=s.map[r],o=this.fields[a],l=s.constraints[r];"dayOfMonth"===a&&1===this.fields.month.length?l={min:1,max:s.daysInMonth[this.fields.month[0]-1]}:"dayOfWeek"===a&&(l={min:0,max:6},o=7===o[o.length-1]?o.slice(0,-1):o),t.push(n(o,l.min,l.max))}return t.join(" ")},s.parse=function(e,t){var r=this;return"function"==typeof t&&(t={}),function(e,t){t||(t={}),void 0===t.currentDate&&(t.currentDate=new i(void 0,r._tz)),s.predefined[e]&&(e=s.predefined[e]);var n=[],a=(e+"").trim().split(/\s+/);if(a.length>6)throw Error("Invalid cron expression");for(var o=s.map.length-a.length,l=0,c=s.map.length;l<c;++l){var u=s.map[l],p=a[a.length>c?l:l-o];if(l<o||!p)n.push(s._parseField(u,s.parseDefaults[l],s.constraints[l]));else{var d="dayOfWeek"===u?function(e){var r=e.split("#");if(r.length>1){var i=+r[r.length-1];if(/,/.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(e))throw Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(r.length>2||Number.isNaN(i)||i<1||i>5)throw Error("Constraint error, invalid dayOfWeek occurrence number (#)");return t.nthDayOfWeek=i,r[0]}return e}(p):p;n.push(s._parseField(u,d,s.constraints[l]))}}for(var h={},l=0,c=s.map.length;l<c;l++)h[s.map[l]]=n[l];var f=s._handleMaxDaysInMonth(h);return h.dayOfMonth=f||h.dayOfMonth,new s(h,t)}(e,t)},s.fieldsToExpression=function(e,t){for(var r={},i=0,n=s.map.length;i<n;++i){var a=s.map[i],o=e[a];!function(e,t,r){if(!t)throw Error("Validation error, Field "+e+" is missing");if(0===t.length)throw Error("Validation error, Field "+e+" contains no values");for(var i=0,n=t.length;i<n;i++){var a=t[i];if(!s._isValidConstraintChar(r,a)&&("number"!=typeof a||Number.isNaN(a)||a<r.min||a>r.max))throw Error("Constraint error, got value "+a+" expected range "+r.min+"-"+r.max)}}(a,o,s.constraints[i]);for(var l=[],c=-1;++c<o.length;)l[c]=o[c];if((o=l.sort(s._sortCompareFn).filter(function(e,t,r){return!t||e!==r[t-1]})).length!==l.length)throw Error("Validation error, Field "+a+" contains duplicate values");r[a]=o}var u=s._handleMaxDaysInMonth(r);return r.dayOfMonth=u||r.dayOfMonth,new s(r,t||{})},e.exports=s},35760:e=>{"use strict";function t(e){return{start:e,count:1}}function r(e,t){e.end=t,e.step=t-e.start,e.count=2}function i(e,r,i){r&&(2===r.count?(e.push(t(r.start)),e.push(t(r.end))):e.push(r)),i&&e.push(i)}e.exports=function(e){for(var n=[],s=void 0,a=0;a<e.length;a++){var o=e[a];"number"!=typeof o?(i(n,s,t(o)),s=void 0):s?1===s.count?r(s,o):s.step===o-s.end?(s.count++,s.end=o):2===s.count?(n.push(t(s.start)),r(s=t(s.end),o)):(i(n,s),s=t(o)):s=t(o)}return i(n,s),n}},27317:(e,t,r)=>{"use strict";var i=r(35760);e.exports=function(e,t,r){var n=i(e);if(1===n.length){var s=n[0],a=s.step;if(1===a&&s.start===t&&s.end===r)return"*";if(1!==a&&s.start===t&&s.end===r-a+1)return"*/"+a}for(var o=[],l=0,c=n.length;l<c;++l){var u=n[l];if(1===u.count){o.push(u.start);continue}var a=u.step;if(1===u.step){o.push(u.start+"-"+u.end);continue}var p=0==u.start?u.count-1:u.count;u.step*p>u.end?o=o.concat(Array.from({length:u.end-u.start+1}).map(function(e,t){var r=u.start+t;return(r-u.start)%u.step==0?r:null}).filter(function(e){return null!=e})):u.end===r-u.step+1?o.push(u.start+"/"+u.step):o.push(u.start+"-"+u.end+"/"+u.step)}return o.join(",")}},43328:(e,t,r)=>{"use strict";var i=r(68201);function n(){}n._parseEntry=function(e){var t=e.split(" ");if(6===t.length)return{interval:i.parse(e)};if(t.length>6)return{interval:i.parse(t.slice(0,6).join(" ")),command:t.slice(6,t.length)};throw Error("Invalid entry: "+e)},n.parseExpression=function(e,t){return i.parse(e,t)},n.fieldsToExpression=function(e,t){return i.fieldsToExpression(e,t)},n.parseString=function(e){for(var t=e.split("\n"),r={variables:{},expressions:[],errors:{}},i=0,s=t.length;i<s;i++){var a=t[i],o=null,l=a.trim();if(l.length>0){if(l.match(/^#/))continue;if(o=l.match(/^(.*)=(.*)$/))r.variables[o[1]]=o[2];else{var c=null;try{c=n._parseEntry("0 "+l),r.expressions.push(c.interval)}catch(e){r.errors[l]=e}}}}return r},n.parseFile=function(e,t){r(29021).readFile(e,function(e,r){if(e){t(e);return}return t(null,n.parseString(r.toString()))})},e.exports=n},15401:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(8824)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},8824:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,s;let a=null;function o(...e){if(!o.enabled)return;let i=Number(new Date),n=i-(r||i);o.diff=n,o.prev=r,o.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";s++;let n=t.formatters[i];if("function"==typeof n){let t=e[s];r=n.call(o,t),e.splice(s,1),s--}return r}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=i,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function i(e,r){let i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e,t){let r=0,i=0,n=-1,s=0;for(;r<e.length;)if(i<t.length&&(t[i]===e[r]||"*"===t[i]))"*"===t[i]?(n=i,s=r):r++,i++;else{if(-1===n)return!1;i=n+1,r=++s}for(;i<t.length&&"*"===t[i];)i++;return i===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let r of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(let r of t.skips)if(n(e,r))return!1;for(let r of t.names)if(n(e,r))return!0;return!1},t.humanize=r(83337),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},23481:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(15401):e.exports=r(54897)},54897:(e,t,r)=>{let i=r(83997),n=r(28354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let i=0;i<r.length;i++)e.inspectOpts[r[i]]=t.inspectOpts[r[i]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:i,useColors:n}=this;if(n){let t=this.color,n="\x1b[3"+(t<8?t:"8;5;"+t),s=`  ${n};1m${i} \u001B[0m`;r[0]=s+r[0].split("\n").join("\n"+s),r.push(n+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+i+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:i.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(23203);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[r]=i,e},{}),e.exports=r(8824)(t);let{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},60537:e=>{"use strict";function t(e,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=[,,,,])}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r)&&!(t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(0==arguments.length)return this.size();var t=this._list.length;return(this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(0==arguments.length)return this.size();var t=this._tail;return(this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t,r=e;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i)&&!(r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r];if(e<i/2){for(t=e;t>0;t--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(t=i-1-e;t>0;t--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}},t.prototype.remove=function(e,t){var r,i,n=e,s=t;if(n===(0|n)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(n>=a)&&!(n<-a)&&!(t<1)){if(n<0&&(n+=a),1===t||!t)return(r=[,])[0]=this.removeOne(n),r;if(0===n&&n+t>=a)return r=this.toArray(),this.clear(),r;for(n+t>a&&(t=a-n),r=Array(t),i=0;i<t;i++)r[i]=this._list[this._head+n+i&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===a){for(this._tail=this._tail-t+o&this._capacityMask,i=t;i>0;i--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,i=t-1;i>0;i--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<a/2){for(this._head=this._head+e+t+o&this._capacityMask,i=e;i>0;i--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;s>0;)this._list[n=n-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,i=a-(t+e);i>0;i--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var i=this.size();if(r<0&&(r+=i),!(r>i)){if(!(arguments.length>2))return this.remove(r,t);var n,s,a,o=arguments.length,l=this._list.length,c=2;if(!i||r<i/2){for(n=0,s=Array(r);n<r;n++)s[n]=this._list[this._head+n&this._capacityMask];for(0===t?(a=[],r>0&&(this._head=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._head=this._head+r+l&this._capacityMask);o>c;)this.unshift(arguments[--o]);for(n=r;n>0;n--)this.unshift(s[n-1])}else{var u=(s=Array(i-(r+t))).length;for(n=0;n<u;n++)s[n]=this._list[this._head+r+t+n&this._capacityMask];for(0===t?(a=[],r!=i&&(this._tail=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._tail=this._tail-u+l&this._capacityMask);c<o;)this.push(arguments[c++]);for(n=0;n<u;n++)this.push(s[n])}return a}}},t.prototype.clear=function(){this._list=Array(this._list.length),this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){var t=e.length,r=this._nextPowerOf2(t);this._list=Array(r),this._capacityMask=r-1,this._tail=t;for(var i=0;i<t;i++)this._list[i]=e[i]},t.prototype._copyArray=function(e,t){var r,i=this._list,n=i.length,s=this.length;if((t|=s)==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=Array(t),o=0;if(e||this._head>this._tail){for(r=this._head;r<n;r++)a[o++]=i[r];for(r=0;r<this._tail;r++)a[o++]=i[r]}else for(r=this._head;r<this._tail;r++)a[o++]=i[r];return a},t.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.prototype._nextPowerOf2=function(e){return Math.max(1<<Math.log(e)/Math.log(2)+1,4)},e.exports=t},2787:(e,t,r)=>{"use strict";let i,n;let s=r(79646),{isLinux:a,getReport:o}=r(65352),{LDD_PATH:l,readFile:c,readFileSync:u}=r(75278),p="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",d="",h=()=>d||new Promise(e=>{s.exec(p,(t,r)=>{e(d=t?" ":r)})}),f=()=>{if(!d)try{d=s.execSync(p,{encoding:"utf8"})}catch(e){d=" "}return d},m="glibc",g=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,y="musl",v=e=>e.includes("libc.musl-")||e.includes("ld-musl-"),b=()=>{let e=o();return e.header&&e.header.glibcVersionRuntime?m:Array.isArray(e.sharedObjects)&&e.sharedObjects.some(v)?y:null},x=e=>{let[t,r]=e.split(/[\r\n]+/);return t&&t.includes(m)?m:r&&r.includes(y)?y:null},w=e=>e.includes("musl")?y:e.includes("GNU C Library")?m:null,k=async()=>{if(void 0!==i)return i;i=null;try{let e=await c(l);i=w(e)}catch(e){}return i},S=()=>{if(void 0!==i)return i;i=null;try{let e=u(l);i=w(e)}catch(e){}return i},E=async()=>{let e=null;return a()&&((e=await k())||(e=b()),e||(e=x(await h()))),e},_=()=>{let e=null;return a()&&((e=S())||(e=b()),e||(e=x(f()))),e},T=async()=>a()&&await E()!==m,A=async()=>{if(void 0!==n)return n;n=null;try{let e=(await c(l)).match(g);e&&(n=e[1])}catch(e){}return n},I=()=>{if(void 0!==n)return n;n=null;try{let e=u(l).match(g);e&&(n=e[1])}catch(e){}return n},O=()=>{let e=o();return e.header&&e.header.glibcVersionRuntime?e.header.glibcVersionRuntime:null},C=e=>e.trim().split(/\s+/)[1],j=e=>{let[t,r,i]=e.split(/[\r\n]+/);return t&&t.includes(m)?C(t):r&&i&&r.includes(y)?C(i):null},R=async()=>{let e=null;return a()&&((e=await A())||(e=O()),e||(e=j(await h()))),e};e.exports={GLIBC:m,MUSL:y,family:E,familySync:_,isNonGlibcLinux:T,isNonGlibcLinuxSync:()=>a()&&_()!==m,version:R,versionSync:()=>{let e=null;return a()&&((e=I())||(e=O()),e||(e=j(f()))),e}}},75278:(e,t,r)=>{"use strict";let i=r(29021);e.exports={LDD_PATH:"/usr/bin/ldd",readFileSync:e=>i.readFileSync(e,"utf-8"),readFile:e=>new Promise((t,r)=>{i.readFile(e,"utf-8",(e,i)=>{e?r(e):t(i)})})}},65352:e=>{"use strict";let t=()=>"linux"===process.platform,r=null;e.exports={isLinux:t,getReport:()=>{if(!r){if(t()&&process.report){let e=process.report.excludeNetwork;process.report.excludeNetwork=!0,r=process.report.getReport(),process.report.excludeNetwork=e}else r={}}return r}}},79113:(e,t,r)=>{"use strict";let i;let n=r(91645);class s extends Error{constructor(e){super(`${e} is locked`)}}let a={old:new Set,young:new Set},o=e=>new Promise((t,r)=>{let i=n.createServer();i.unref(),i.on("error",r),i.listen(e,()=>{let{port:e}=i.address();i.close(()=>{t(e)})})}),l=function*(e){e&&(yield*e),yield 0};e.exports=async e=>{let t;for(let r of(e&&(t="number"==typeof e.port?[e.port]:e.port),void 0===i&&(i=setInterval(()=>{a.old=a.young,a.young=new Set},15e3)).unref&&i.unref(),l(t)))try{let t=await o({...e,port:r});for(;a.old.has(t)||a.young.has(t);){if(0!==r)throw new s(r);t=await o({...e,port:r})}return a.young.add(t),t}catch(e){if(!["EADDRINUSE","EACCES"].includes(e.code)&&!(e instanceof s))throw e}throw Error("No available ports found")},e.exports.makeRange=(e,t)=>{if(!Number.isInteger(e)||!Number.isInteger(t))throw TypeError("`from` and `to` must be integer numbers");if(e<1024||e>65535)throw RangeError("`from` must be between 1024 and 65535");if(t<1024||t>65536)throw RangeError("`to` must be between 1024 and 65536");if(t<e)throw RangeError("`to` must be greater than or equal to `from`");return function*(e,t){for(let r=e;r<=t;r++)yield r}(e,t)}},58684:e=>{"use strict";e.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return -1!==i&&(-1===n||i<n)}},68058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(60670),n=r(90438),s=r(84542),a=r(44945);class o{constructor(e,t=[],r={},i){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=r.replyEncoding,this.errorStack=r.errorStack,this.args=t.flat(),this.callback=i,this.initPromise(),r.keyPrefix){let e=r.keyPrefix instanceof Buffer,t=e?r.keyPrefix:null;this._iterateKeys(i=>i instanceof Buffer?(null===t&&(t=Buffer.from(r.keyPrefix)),Buffer.concat([t,i])):e?Buffer.concat([r.keyPrefix,Buffer.from(String(i))]):r.keyPrefix+i)}r.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(o.FLAGS).reduce((e,t)=>(e[t]={},o.FLAGS[t].forEach(r=>{e[t][r]=!0}),e),{})),this.flagMap}getSlot(){if(void 0===this.slot){let e=this.getKeys()[0];this.slot=null==e?null:n(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t;let r="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){let e=new u;e.push(r);for(let t=0;t<this.args.length;++t){let r=this.args[t];r instanceof Buffer?0===r.length?e.push("$0\r\n\r\n"):(e.push("$"+r.length+"\r\n"),e.push(r),e.push("\r\n")):e.push("$"+Buffer.byteLength(r)+"\r\n"+r+"\r\n")}t=e.toBuffer()}else{t=r;for(let e=0;e<this.args.length;++e){let r=this.args[e];t+="$"+Buffer.byteLength(r)+"\r\n"+r+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){let t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,a.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,a.convertBufferToString)(e,this.replyEncoding));let t=o._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(Error("Command timed out"))},e))}initPromise(){let e=new Promise((e,t)=>{if(!this.transformed){this.transformed=!0;let e=o._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.errorStack?this.reject=e=>{t((0,a.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}:this.reject=t});this.promise=(0,s.default)(e,this.callback)}_iterateKeys(e=e=>e){if(void 0===this.keys&&(this.keys=[],(0,i.exists)(this.name)))for(let t of(0,i.getKeyIndexes)(this.name,this.args))this.args[t]=e(this.args[t]),this.keys.push(this.args[t]);return this.keys}_convertValue(e){return t=>{try{let r=this._commandTimeoutTimer;r&&(clearTimeout(r),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}t.default=o,o.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]},o._transformer={argument:{},reply:{}};let l=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,a.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,a.convertObjectToArray)(e[0])}return e},c=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,a.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,a.convertObjectToArray)(e[1]))}return e};o.setArgumentTransformer("mset",l),o.setArgumentTransformer("msetnx",l),o.setArgumentTransformer("hset",c),o.setArgumentTransformer("hmset",c),o.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];i in t?Object.defineProperty(t,i,{value:n,configurable:!0,enumerable:!0,writable:!0}):t[i]=n}return t}return e});class u{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),t=0;for(let r of this.items){let i=Buffer.byteLength(r);Buffer.isBuffer(r)?r.copy(e,t):e.write(r,t,i),t+=i}return e}}},30059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(68058),n=r(44945),s=r(79244),a=r(81416),o=(0,n.Debug)("dataHandler");class l{constructor(e,t){this.redis=e;let r=new s({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.prependListener("data",e=>{r.execute(e)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let t=this.shiftCommand(e);t&&(i.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new a.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),u(t.command,e[2])||this.redis.commandQueue.unshift(t)):i.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?p(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let t=Array.isArray(e)?e[0].toString():null;switch(o('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let t=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{let r=e[1].toString();this.redis.condition.subscriber.add(t,r);let i=this.shiftCommand(e);if(!i)return;u(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let r=e[1]?e[1].toString():null;r&&this.redis.condition.subscriber.del(t,r);let i=e[2];0===Number(i)&&(this.redis.condition.subscriber=!1);let n=this.shiftCommand(e);if(!n)return;p(n.command,i)||this.redis.commandQueue.unshift(n);break}default:{let t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;let t=e.toString();if("OK"===t)return!1;let r=t.indexOf(" "),i=t.slice(0,r),n=t.indexOf('"'),s=t.slice(n+1,-1).split('" "').map(e=>e.replace(/\\"/g,'"')),a=t.slice(r+2,n-2).split(" ");return this.redis.emit("monitor",i,s,a[1],a[0]),!0}shiftCommand(e){let t=this.redis.commandQueue.shift();if(!t){let t=Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",t),null}return t}}t.default=l;let c=new WeakMap;function u(e,t){let r=c.has(e)?c.get(e):e.args.length;return(r-=1)<=0?(e.resolve(t),c.delete(e),!0):(c.set(e,r),!1)}function p(e,t){let r=c.has(e)?c.get(e):e.args.length;return 0===r?0===Number(t)&&(c.delete(e),e.resolve(t),!0):(r-=1)<=0?(e.resolve(t),!0):(c.set(e,r),!1)}},41221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(90438),n=r(60670),s=r(84542),a=r(28354),o=r(68058),l=r(44945),c=r(31459);class u extends c.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(t=>{let r=e.scriptsSet[t];this._shaToScript[r.sha]=r,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),e.addedBuiltinSet.forEach(t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t});let t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){let r=e[1].length;for(let i=0;i<r;i++){if(e[1][i]instanceof Error)continue;let n=this._queue[t-(r-i)];try{e[1][i]=n.transformReply(e[1][i])}catch(t){e[1][i]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let r=0;r<this._result.length;++r){let i=this._result[r][0],s=this._queue[r];if(i){if("exec"===s.name&&"EXECABORT Transaction discarded because of previous errors."===i.message)continue;if(e){if(e.name!==i.name||e.message!==i.message){t=!1;break}}else e={name:i.name,message:i.message}}else if(!s.inTransaction&&!((0,n.exists)(s.name)&&(0,n.hasFlag)(s.name,"readonly"))){t=!1;break}}if(e&&t){let t=this,r=e.message.split(" "),i=this._queue,n=!1;this._queue=[];for(let e=0;e<i.length;++e){if("ASK"===r[0]&&!n&&"asking"!==i[e].name&&(!i[e-1]||"asking"!==i[e-1].name)){let e=new o.default("asking");e.ignore=!0,this.sendCommand(e)}i[e].initPromise(),this.sendCommand(i[e]),n=i[e].inTransaction}let s=!0;void 0===this.leftRedirections&&(this.leftRedirections={});let a=function(){t.exec()},l=this.redis;if(l.handleError(e,this.leftRedirections,{moved:function(e,i){t.preferKey=i,l.slots[r[1]]=[i],l._groupsBySlot[r[1]]=l._groupsIds[l.slots[r[1]].join(";")],l.refreshSlotsCache(),t.exec()},ask:function(e,r){t.preferKey=r,t.exec()},tryagain:a,clusterDown:a,connectionClosed:a,maxRedirections:()=>{s=!1},defaults:()=>{s=!1}}),s)return}}let r=0;for(let e=0;e<this._queue.length-r;++e)this._queue[e+r].ignore&&(r+=1),this._result[e]=this._result[e+r];this.resolve(this._result.slice(0,this._result.length-r))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let t=this._queue.length;return e.pipelineIndex=t,e.promise.then(e=>{this.fillResult([null,e],t)}).catch(e=>{this.fillResult([e],t)}),this._queue.push(e),this}addBatch(e){let t,r,i;for(let n=0;n<e.length;++n)r=(t=e[n])[0],i=t.slice(1),this[r].apply(this,i);return this}}t.default=u;let p=u.prototype.multi;u.prototype.multi=function(){return this._transactions+=1,p.apply(this,arguments)};let d=u.prototype.execBuffer;u.prototype.execBuffer=(0,a.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),d.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead"),u.prototype.exec=function(e){let t;if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(l.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,s.default)(this.promise,e)),this.redis.delayUntilReady(t=>{if(t){this.reject(t);return}this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,d.apply(this,arguments);if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,s.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){let e=[];for(let t=0;t<this._queue.length;t++){let r=this._queue[t].getKeys();if(r.length&&e.push(r[0]),r.length&&0>i.generateMulti(r))return this.reject(Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if((t=function(e,t){let r=i(t[0]),n=e._groupsBySlot[r];for(let r=1;r<t.length;r++)if(e._groupsBySlot[i(t[r])]!==n)return -1;return r}(this.redis,e))<0)return this.reject(Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}let r=this;return function(){let e,i,n=r.replyPending=r._queue.length;r.isCluster&&(e={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let s="",a={isPipeline:!0,destination:r.isCluster?e:{redis:r.redis},write(e){"string"!=typeof e?(i||(i=[]),s&&(i.push(Buffer.from(s,"utf8")),s=""),i.push(e)):s+=e,--n||(i?(s&&i.push(Buffer.from(s,"utf8")),a.destination.redis.stream.write(Buffer.concat(i))):a.destination.redis.stream.write(s),n=r._queue.length,s="",i=void 0)}};for(let t=0;t<r._queue.length;++t)r.redis.sendCommand(r._queue[t],a,e);r.promise}(),this.promise}},14276:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(60670),n=r(94735),s=r(84542),a=r(3198),o=r(68058),l=r(34980),c=r(90564),u=r(5632),p=r(85220),d=r(34498),h=r(45455),f=r(44945),m=r(26992),g=r(31459),y=r(39704),v=r(60537),b=(0,f.Debug)("redis");class x extends g.default{constructor(e,t,r){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,t,r),n.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let e=new c.default(this.options);e.emitter=this,this.connector=e}else this.connector=new l.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(y.noop)}static createClient(...e){return new x(...e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}connect(e){let t=new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status){t(Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:r}=this;this.condition={select:r.db,auth:r.username?[r.username,r.password]:r.password,subscriber:!1};let i=this;(0,s.default)(this.connector.connect(function(e,t){i.silentEmit(e,t)}),function(n,s){if(n){i.flushQueue(n),i.silentEmit("error",n),t(n),i.setStatus("end");return}let a=r.tls?"secureConnect":"connect";if("sentinels"in r&&r.sentinels&&!r.enableTLSForSentinelMode&&(a="connect"),i.stream=s,r.noDelay&&s.setNoDelay(!0),"number"==typeof r.keepAlive&&(s.connecting?s.once(a,()=>{s.setKeepAlive(!0,r.keepAlive)}):s.setKeepAlive(!0,r.keepAlive)),s.connecting){if(s.once(a,u.connectHandler(i)),r.connectTimeout){let e=!1;s.setTimeout(r.connectTimeout,function(){if(e)return;s.setTimeout(0),s.destroy();let t=Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",u.errorHandler(i)(t)}),s.once(a,function(){e=!0,s.setTimeout(0)})}}else if(s.destroyed){let e=i.connector.firstError;e&&process.nextTick(()=>{u.errorHandler(i)(e)}),process.nextTick(u.closeHandler(i))}else process.nextTick(u.connectHandler(i));s.destroyed||(s.once("error",u.errorHandler(i)),s.once("close",u.closeHandler(i)));let o=function(){i.removeListener("close",l),e()};var l=function(){i.removeListener("ready",o),t(Error(f.CONNECTION_CLOSED_ERROR_MSG))};i.once("ready",o),i.once("close",l)})});return(0,s.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?u.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new x({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null===(e=this.condition)||void 0===e?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){let t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,s.default)(new Promise(function(e,r){t.once("error",r),t.once("monitoring",function(){e(t)})}),e)}sendCommand(e,t){var r,n;if("wait"===this.status&&this.connect().catch(y.noop),"end"===this.status)return e.reject(Error(f.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if((null===(r=this.condition)||void 0===r?void 0:r.subscriber)&&!o.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;"number"==typeof this.options.commandTimeout&&e.setTimeout(this.options.commandTimeout);let s="ready"===this.status||!t&&"connect"===this.status&&(0,i.exists)(e.name)&&(0,i.hasFlag)(e.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)b.enabled&&b("write command[%s]: %d -> %s(%o)",this._getDescription(),null===(n=this.condition)||void 0===n?void 0:n.select,e.name,e.args),t?"isPipeline"in t&&t.isPipeline?t.write(e.toWritable(t.destination.redis.stream)):t.write(e.toWritable(t)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:t,select:this.condition.select}),o.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if("quit"===e.name&&0===this.offlineQueue.length)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;b.enabled&&b("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:t,select:this.condition.select})}if("select"===e.name&&(0,f.isInt)(e.args[0])){let t=parseInt(e.args[0],10);this.condition.select!==t&&(this.condition.select=t,this.emit("select",t),b("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let r;return"error"===e&&(r=t,"end"===this.status||this.manuallyClosing&&r instanceof Error&&(r.message===f.CONNECTION_CLOSED_ERROR_MSG||"connect"===r.syscall||"read"===r.syscall))?void 0:this.listeners(e).length>0?this.emit.apply(this,arguments):(r&&r instanceof Error&&console.error("[ioredis] Unhandled error event:",r.stack),!1)}recoverFromFatalError(e,t,r){this.flushQueue(t,r),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var r;let i=!1;switch(this.options.reconnectOnError&&(i=this.options.reconnectOnError(e)),i){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null===(r=this.condition)||void 0===r?void 0:r.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new v}resetOfflineQueue(){this.offlineQueue=new v}parseOptions(...e){let t={},r=!1;for(let i=0;i<e.length;++i){let n=e[i];if(null!=n){if("object"==typeof n)(0,y.defaults)(t,n);else if("string"==typeof n)(0,y.defaults)(t,(0,f.parseURL)(n)),n.startsWith("rediss://")&&(r=!0);else if("number"==typeof n)t.port=n;else throw Error("Invalid argument "+n)}}r&&(0,y.defaults)(t,{tls:!0}),(0,y.defaults)(t,x.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,f.resolveTLSProfile)(t)}setStatus(e,t){b.enabled&&b("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:r={}}){return new d.default({objectMode:!0,key:t,redis:this,command:e,...r})}flushQueue(e,t){let r;if((t=(0,y.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;r=this.offlineQueue.shift();)r.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");r=this.commandQueue.shift();)r.command.reject(e)}_readyCheck(e){let t=this;this.info(function(r,i){if(r)return r.message&&r.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${r.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(r);if("string"!=typeof i)return e(null,i);let n={},s=i.split("\r\n");for(let e=0;e<s.length;++e){let[t,...r]=s[e].split(":"),i=r.join(":");i&&(n[t]=i)}if(n.loading&&"0"!==n.loading){let r=1e3*(n.loading_eta_seconds||1),i=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<r?t.options.maxLoadingRetryTime:r;b("Redis server still loading, trying again in "+i+"ms"),setTimeout(function(){t._readyCheck(e)},i)}else e(null,n)}).catch(y.noop)}}x.Cluster=a.default,x.Command=o.default,x.defaultOptions=p.DEFAULT_REDIS_OPTIONS,(0,m.default)(x,n.EventEmitter),(0,h.addTransactionSupport)(x.prototype),t.default=x},34498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(27910);class n extends i.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(e,t)=>{if(e){this.emit("error",e);return}this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1])})}close(){this._redisDrained=!0}}t.default=n},54924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(55511),n=r(68058),s=r(84542);class a{constructor(e,t=null,r="",s=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=r,this.readOnly=s,this.sha=(0,i.createHash)("sha1").update(e).digest("hex");let a=this.sha,o=new WeakSet;this.Command=class extends n.default{toWritable(t){let r=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&o.delete(t),r.call(this,e)},o.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=a):(o.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,r,i){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(r.keyPrefix=this.keyPrefix),this.readOnly&&(r.readOnly=!0);let n=new this.Command("evalsha",[this.sha,...t],r);return n.promise=n.promise.catch(i=>{if(-1===i.message.indexOf("NOSCRIPT"))throw i;let n=new this.Command("evalsha",[this.sha,...t],r);return(e.isPipeline?e.redis:e).sendCommand(n)}),(0,s.default)(n.promise,i),e.sendCommand(n)}}t.default=a},81416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[i(e)][t]=!0}del(e,t){delete this.set[i(e)][t]}channels(e){return Object.keys(this.set[i(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}}function i(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}t.default=r},41497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeWithAutoPipelining=t.getFirstValueInFlattenedArray=t.shouldUseAutoPipelining=t.notAllowedAutoPipelineCommands=t.kCallbacks=t.kExec=void 0;let i=r(39704),n=r(90438),s=r(84542);function a(e){for(let t=0;t<e.length;t++){let r=e[t];if("string"==typeof r)return r;if(Array.isArray(r)||(0,i.isArguments)(r)){if(0===r.length)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}t.kExec=Symbol("exec"),t.kCallbacks=Symbol("callbacks"),t.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"],t.shouldUseAutoPipelining=function(e,r,i){return r&&e.options.enableAutoPipelining&&!e.isPipeline&&!t.notAllowedAutoPipelineCommands.includes(i)&&!e.options.autoPipeliningIgnoredCommands.includes(i)},t.getFirstValueInFlattenedArray=a,t.executeWithAutoPipelining=function e(r,o,l,c,u){if(r.isCluster&&!r.slots.length)return"wait"===r.status&&r.connect().catch(i.noop),(0,s.default)(new Promise(function(t,i){r.delayUntilReady(n=>{if(n){i(n);return}e(r,o,l,c,null).then(t,i)})}),u);let p=r.options.keyPrefix||"",d=r.isCluster?r.slots[n(`${p}${a(c)}`)].join(","):"main";if(!r._autoPipelines.has(d)){let e=r.pipeline();e[t.kExec]=!1,e[t.kCallbacks]=[],r._autoPipelines.set(d,e)}let h=r._autoPipelines.get(d);h[t.kExec]||(h[t.kExec]=!0,setImmediate(function e(r,i){if(r._runningAutoPipelines.has(i)||!r._autoPipelines.has(i))return;r._runningAutoPipelines.add(i);let n=r._autoPipelines.get(i);r._autoPipelines.delete(i);let s=n[t.kCallbacks];n[t.kCallbacks]=null,n.exec(function(t,n){if(r._runningAutoPipelines.delete(i),t)for(let e=0;e<s.length;e++)process.nextTick(s[e],t);else for(let e=0;e<s.length;e++)process.nextTick(s[e],...n[e]);r._autoPipelines.has(i)&&e(r,i)})},r,d));let f=new Promise(function(e,r){h[t.kCallbacks].push(function(t,i){if(t){r(t);return}e(i)}),"call"===o&&c.unshift(l),h[o](...c)});return(0,s.default)(f,u)}},15004:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLUSTER_OPTIONS=void 0;let i=r(14985);t.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:i.resolveSrv,dnsLookup:i.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}},80354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(99228),n=r(44945),s=r(14276),a=(0,n.Debug)("cluster:subscriber");class o{constructor(e,t,r=!1){this.connectionPool=e,this.emitter=t,this.isSharded=r,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){a("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}a("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(e,t)=>{this.started&&this.subscriber&&(0,i.getNodeKey)(this.subscriber.options)===t&&(a("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{this.started&&!this.subscriber&&(a("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),a("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let t=(0,n.sample)(this.connectionPool.getNodes());if(!t){a("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:r}=t;a("selected a subscriber %s:%s",r.host,r.port);let o="subscriber";this.isSharded&&(o="ssubscriber"),this.subscriber=new s.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!0,connectionName:(0,i.getConnectionName)(o,r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.subscriber.on("error",n.noop),this.subscriber.once("end",this.onSubscriberEnd);let l={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let t=e.condition||e.prevCondition;t&&t.subscriber&&(l.subscribe=t.subscriber.channels("subscribe"),l.psubscribe=t.subscriber.channels("psubscribe"),l.ssubscribe=t.subscriber.channels("ssubscribe"))}if(l.subscribe.length||l.psubscribe.length||l.ssubscribe.length){let e=0;for(let t of["subscribe","psubscribe","ssubscribe"]){let r=l[t];r.length&&(e+=1,a("%s %d channels",t,r.length),this.subscriber[t](r).then(()=>{--e||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{a("failed to %s %d channels",t,r.length)}))}}else this.lastActiveSubscriber=this.subscriber;for(let e of["message","messageBuffer"])this.subscriber.on(e,(t,r)=>{this.emitter.emit(e,t,r)});for(let e of["pmessage","pmessageBuffer"])this.subscriber.on(e,(t,r,i)=>{this.emitter.emit(e,t,r,i)});if(!0==this.isSharded)for(let e of["smessage","smessageBuffer"])this.subscriber.on(e,(t,r)=>{this.emitter.emit(e,t,r)})}}t.default=o},57231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(44945),n=r(80354),s=r(51638),a=r(99228),o=r(90438),l=(0,i.Debug)("cluster:subscriberGroup");class c{constructor(e){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",e=>{this._addSubscriber(e)}),e.on("-node",e=>{this._removeSubscriber(e)}),e.on("refresh",()=>{this._refreshSlots(e)})}getResponsibleSubscriber(e){let t=this.clusterSlots[e][0];return this.shardedSubscribers.get(t)}addChannels(e){let t=o(e[0]);e.forEach(e=>{if(o(e)!=t)return -1});let r=this.channels.get(t);return r?this.channels.set(t,r.concat(e)):this.channels.set(t,e),[...this.channels.values()].flatMap(e=>e).length}removeChannels(e){let t=o(e[0]);e.forEach(e=>{if(o(e)!=t)return -1});let r=this.channels.get(t);if(r){let i=r.filter(t=>!e.includes(t));this.channels.set(t,i)}return[...this.channels.values()].flatMap(e=>e).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let t=new s.default(e.options);if(t.addMasterNode(e)){let r=new n.default(t,this.cluster,!0),i=(0,a.getNodeKey)(e.options);return this.shardedSubscribers.set(i,r),r.start(),this._resubscribe(),this.cluster.emit("+subscriber"),r}return null}_removeSubscriber(e){let t=(0,a.getNodeKey)(e.options),r=this.shardedSubscribers.get(t);return r&&(r.stop(),this.shardedSubscribers.delete(t),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))l("Nothing to refresh because the new cluster map is equal to the previous one.");else{l("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let t=0;t<e.slots.length;t++){let r=e.slots[t][0];this.subscriberToSlotsIndex.has(r)||this.subscriberToSlotsIndex.set(r,[]),this.subscriberToSlotsIndex.get(r).push(Number(t))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,t)=>{let r=this.subscriberToSlotsIndex.get(t);r&&(e.associateSlotRange(r),r.forEach(t=>{let r=e.getInstance(),i=this.channels.get(t);i&&i.length>0&&r&&(r.ssubscribe(i),r.on("ready",()=>{r.ssubscribe(i)}))}))})}_slotsAreEqual(e){return void 0!==this.clusterSlots&&JSON.stringify(this.clusterSlots)===JSON.stringify(e)}}t.default=c},51638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(94735),n=r(44945),s=r(99228),a=r(14276),o=(0,n.Debug)("cluster:connectionPool");class l extends i.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let t=this.nodes[e];return Object.keys(t).map(e=>t[e])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let t=Object.keys(this.nodes[e]),r=(0,n.sample)(t);return this.nodes[e][r]}addMasterNode(e){let t=(0,s.getNodeKey)(e.options),r=this.createRedisFromOptions(e,e.options.readOnly);return!e.options.readOnly&&(this.nodes.all[t]=r,this.nodes.master[t]=r,!0)}createRedisFromOptions(e,t){return new a.default((0,n.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,t=!1){let r;let i=(0,s.getNodeKey)(e);return t=!!t,this.specifiedOptions[i]?Object.assign(e,this.specifiedOptions[i]):this.specifiedOptions[i]=e,this.nodes.all[i]?(r=this.nodes.all[i]).options.readOnly!==t&&(r.options.readOnly=t,o("Change role of %s to %s",i,t?"slave":"master"),r[t?"readonly":"readwrite"]().catch(n.noop),t?(delete this.nodes.master[i],this.nodes.slave[i]=r):(delete this.nodes.slave[i],this.nodes.master[i]=r)):(o("Connecting to %s as %s",i,t?"slave":"master"),r=this.createRedisFromOptions(e,t),this.nodes.all[i]=r,this.nodes[t?"slave":"master"][i]=r,r.once("end",()=>{this.removeNode(i),this.emit("-node",r,i),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",r,i),r.on("error",function(e){this.emit("nodeError",e,i)})),r}reset(e){o("Reset with %O",e);let t={};e.forEach(e=>{let r=(0,s.getNodeKey)(e);e.readOnly&&t[r]||(t[r]=e)}),Object.keys(this.nodes.all).forEach(e=>{t[e]||(o("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))}),Object.keys(t).forEach(e=>{let r=t[e];this.findOrCreate(r,r.readOnly)})}removeNode(e){let{nodes:t}=this;t.all[e]&&(o("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}}t.default=l},77762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(44945),n=r(60537),s=(0,i.Debug)("delayqueue");class a{constructor(){this.queues={},this.timeouts={}}push(e,t,r){let i=r.callback||process.nextTick;this.queues[e]||(this.queues[e]=new n),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},r.timeout))}execute(e){let t=this.queues[e];if(!t)return;let{length:r}=t;if(r)for(s("send %d commands in %s queue",r,e),this.queues[e]=null;t.length>0;)t.shift()()}}t.default=a},3198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(60670),n=r(94735),s=r(90560),a=r(84542),o=r(68058),l=r(78149),c=r(14276),u=r(34498),p=r(45455),d=r(44945),h=r(26992),f=r(31459),m=r(15004),g=r(80354),y=r(51638),v=r(77762),b=r(99228),x=r(60537),w=r(57231),k=(0,d.Debug)("cluster"),S=new WeakSet;class E extends f.default{constructor(e,t={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new v.default,this.offlineQueue=new x,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,n.EventEmitter.call(this),this.startupNodes=e,this.options=(0,d.defaults)({},t,m.DEFAULT_CLUSTER_OPTIONS,this.options),!0==this.options.shardedSubscribers&&(this.shardedSubscribers=new w.default(this)),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new y.default(this.options.redisOptions),this.connectionPool.on("-node",(e,t)=>{this.emit("-node",e)}),this.connectionPool.on("+node",e=>{this.emit("+node",e)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(e,t)=>{this.emit("node error",e,t)}),this.subscriber=new g.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(e=>{k("connecting failed: %s",e)})}connect(){return new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status){t(Error("Redis is already connecting/connected"));return}let r=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(i=>{let n;if(this.connectionEpoch!==r){k("discard connecting after resolving startup nodes because epoch not match: %d != %d",r,this.connectionEpoch),t(new s.RedisError("Connection is discarded because a new connection is made"));return}if("connecting"!==this.status){k("discard connecting after resolving startup nodes because the status changed to %s",this.status),t(new s.RedisError("Connection is aborted"));return}this.connectionPool.reset(i);let a=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",n),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((e,t)=>{e||t?(k("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):a()}):a()};n=()=>{let e=Error("None of startup nodes is available");this.removeListener("refresh",o),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",o),this.once("close",n),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(e=>{e&&e.message===l.default.defaultMessage&&(c.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)})})}disconnect(e=!1){let t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,k("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t){let t=(0,a.default)(Promise.resolve("OK"),e);return setImmediate((function(){this.setStatus("close"),this.handleCloseEvent()}).bind(this)),t}return(0,a.default)(Promise.all(this.nodes().map(e=>e.quit().catch(e=>{if(e.message===d.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))).then(()=>"OK"),e)}duplicate(e=[],t={}){return new E(e.length>0?e:this.startupNodes.slice(0),Object.assign({},this.options,t))}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let t=this,r=e=>{for(let t of(this.isRefreshing=!1,this._refreshSlotsCacheCallbacks))t(e);this._refreshSlotsCacheCallbacks=[]},i=(0,d.shuffle)(this.connectionPool.getNodes()),n=null;!function e(s){if(s===i.length)return r(new l.default(l.default.defaultMessage,n));let a=i[s],o=`${a.options.host}:${a.options.port}`;k("getting slot cache from %s",o),t.getInfoFromNode(a,function(i){switch(t.status){case"close":case"end":return r(Error("Cluster is disconnected."));case"disconnecting":return r(Error("Cluster is disconnecting."))}i?(t.emit("node error",i,o),n=i,e(s+1)):(t.emit("refresh"),r())})}(0)}sendCommand(e,t,r){if("wait"===this.status&&this.connect().catch(d.noop),"end"===this.status)return e.reject(Error(d.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let n=this.options.scaleReads;"master"===n||e.isReadOnly||(0,i.exists)(e.name)&&(0,i.hasFlag)(e.name,"readonly")||(n="master");let a=r?r.slot:e.getSlot(),l={},c=this;if(!r&&!S.has(e)){S.add(e);let t=e.reject;e.reject=function(r){let i=u.bind(null,!0);c.handleError(r,l,{moved:function(t,r){k("command %s is moved to %s",e.name,r),a=Number(t),c.slots[t]?c.slots[t][0]=r:c.slots[t]=[r],c._groupsBySlot[t]=c._groupsIds[c.slots[t].join(";")],c.connectionPool.findOrCreate(c.natMapper(r)),u(),k("refreshing slot caches... (triggered by MOVED error)"),c.refreshSlotsCache()},ask:function(t,r){k("command %s is required to ask %s:%s",e.name,r);let i=c.natMapper(r);c.connectionPool.findOrCreate(i),u(!1,`${i.host}:${i.port}`)},tryagain:i,clusterDown:i,connectionClosed:i,maxRedirections:function(r){t.call(e,r)},defaults:function(){t.call(e,r)}})}}function u(i,l){let u;if("end"===c.status){e.reject(new s.AbortError("Cluster is ended."));return}if("ready"===c.status||"cluster"===e.name){if(r&&r.redis)u=r.redis;else if(o.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||o.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(!0==c.options.shardedSubscribers&&("ssubscribe"==e.name||"sunsubscribe"==e.name)){let t=c.shardedSubscribers.getResponsibleSubscriber(a),r=-1;"ssubscribe"==e.name&&(r=c.shardedSubscribers.addChannels(e.getKeys())),"sunsubscribe"==e.name&&(r=c.shardedSubscribers.removeChannels(e.getKeys())),-1!==r?u=t.getInstance():e.reject(new s.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else u=c.subscriber.getInstance();if(!u){e.reject(new s.AbortError("No subscriber for the cluster"));return}}else{if(!i){if("number"==typeof a&&c.slots[a]){let t=c.slots[a];if("function"==typeof n){let r=t.map(function(e){return c.connectionPool.getInstanceByKey(e)});Array.isArray(u=n(r,e))&&(u=(0,d.sample)(u)),u||(u=r[0])}else{let e;e="all"===n?(0,d.sample)(t):"slave"===n&&t.length>1?(0,d.sample)(t,1):t[0],u=c.connectionPool.getInstanceByKey(e)}}l&&(u=c.connectionPool.getInstanceByKey(l)).asking()}u||(u=("function"==typeof n?null:c.connectionPool.getSampleInstance(n))||c.connectionPool.getSampleInstance("all"))}r&&!r.redis&&(r.redis=u)}u?u.sendCommand(e,t):c.options.enableOfflineQueue?c.offlineQueue.push({command:e,stream:t,node:r}):e.reject(Error("Cluster isn't ready and enableOfflineQueue options is false"))}return u(),e.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,r){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,t.value<=0){r.maxRedirections(Error("Too many Cluster redirections. Last error: "+e));return}let i=e.message.split(" ");if("MOVED"===i[0]){let e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",r.moved.bind(null,i[1],i[2]),{timeout:e}):r.moved(i[1],i[2])}else"ASK"===i[0]?r.ask(i[1],i[2]):"TRYAGAIN"===i[0]?this.delayQueue.push("tryagain",r.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===i[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",r.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===d.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",r.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):r.defaults()}resetOfflineQueue(){this.offlineQueue=new x}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{k('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){k("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){let t;e&&k("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,k("Cluster is disconnected. Retrying after %dms",t),this.connect().catch(function(e){k("Got error %s when reconnecting. Ignoring...",e)})},t)):(this.setStatus("end"),this.flushQueue(Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){let e;k("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;for(this.resetOfflineQueue();e=t.shift();)this.sendCommand(e.command,e.stream,e.node)}}natMapper(e){let t="string"==typeof e?e:`${e.host}:${e.port}`,r=null;return(this.options.natMap&&"function"==typeof this.options.natMap?r=this.options.natMap(t):this.options.natMap&&"object"==typeof this.options.natMap&&(r=this.options.natMap[t]),r)?(k("NAT mapping %s -> %O",t,r),Object.assign({},r)):"string"==typeof e?(0,b.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(Error("Node is disconnected"));let r=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,b.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});r.on("error",d.noop),r.cluster("SLOTS",(0,d.timeout)((e,i)=>{if(r.disconnect(),e)return k("error encountered running CLUSTER.SLOTS: %s",e),t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status){k("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",i.length,this.status),t();return}let n=[];k("cluster slots result count: %d",i.length);for(let e=0;e<i.length;++e){let t=i[e],r=t[0],s=t[1],a=[];for(let e=2;e<t.length;e++){if(!t[e][0])continue;let r=this.natMapper({host:t[e][0],port:t[e][1]});r.readOnly=2!==e,n.push(r),a.push(r.host+":"+r.port)}k("cluster slots result [%d]: slots %d~%d served by %s",e,r,s,a);for(let e=r;e<=s;e++)this.slots[e]=a}this._groupsIds=Object.create(null);let s=0;for(let e=0;e<16384;e++){let t=(this.slots[e]||[]).join(";");if(!t.length){this._groupsBySlot[e]=void 0;continue}this._groupsIds[t]||(this._groupsIds[t]=++s),this._groupsBySlot[e]=this._groupsIds[t]}this.connectionPool.reset(n),t()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(t,r)=>{let i;if(t)return e(t);if("string"!=typeof r)return e();let n=r.split("\r\n");for(let e=0;e<n.length;++e){let t=n[e].split(":");if("cluster_state"===t[0]){i=t[1];break}}"fail"===i?(k("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((t,r)=>{this.options.resolveSrv(e,(e,i)=>{if(e)return r(e);let n=this,s=(0,b.groupSrvRecords)(i),a=Object.keys(s).sort((e,t)=>parseInt(e)-parseInt(t));!function e(i){if(!a.length)return r(i);let o=s[a[0]],l=(0,b.weightSrvRecords)(o);o.records.length||a.shift(),n.dnsLookup(l.name).then(e=>t({host:e,port:l.port}),e)}()})})}dnsLookup(e){return new Promise((t,r)=>{this.options.dnsLookup(e,(i,n)=>{i?(k("failed to resolve hostname %s to IP: %s",e,i.message),r(i)):(k("resolved hostname %s to IP %s",e,n),t(n))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw Error("`startupNodes` should contain at least one node.");let e=(0,b.normalizeNodeOptions)(this.startupNodes),t=(0,b.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;let r=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),i=(0,d.zipMap)(t,r);return e.map(e=>{let t=i.get(e.host);return t?this.options.useSRVRecords?Object.assign({},e,t):Object.assign({},e,{host:t}):e})}createScanStream(e,{key:t,options:r={}}){return new u.default({objectMode:!0,key:t,redis:this,command:e,...r})}}(0,h.default)(E,n.EventEmitter),(0,p.addTransactionSupport)(E.prototype),t.default=E},99228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionName=t.weightSrvRecords=t.groupSrvRecords=t.getUniqueHostnamesFromOptions=t.normalizeNodeOptions=t.nodeKeyToRedisOptions=t.getNodeKey=void 0;let i=r(44945),n=r(91645);t.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},t.nodeKeyToRedisOptions=function(e){let t=e.lastIndexOf(":");if(-1===t)throw Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}},t.normalizeNodeOptions=function(e){return e.map(e=>{let t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,i.parseURL)(e));else if("number"==typeof e)t.port=e;else throw Error("Invalid argument "+e);return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,i.resolveTLSProfile)(t)})},t.getUniqueHostnamesFromOptions=function(e){let t={};return e.forEach(e=>{t[e.host]=!0}),Object.keys(t).filter(e=>!(0,n.isIP)(e))},t.groupSrvRecords=function(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t},t.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[i,n]of e.records.entries())if((r+=1+n.weight)>t)return e.totalWeight-=n.weight,e.records.splice(i,1),n},t.getConnectionName=function(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}},49893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=(0,r(44945).Debug)("AbstractConnector");class n{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,t=setTimeout(()=>{i("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(t)),e.end()}}}t.default=n},31518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailoverDetector=void 0;let i=(0,r(44945).Debug)("FailoverDetector"),n="+switch-master";class s{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){for(let e of(this.isDisconnected=!0,this.sentinels))e.client.disconnect()}async subscribe(){i("Starting FailoverDetector");let e=[];for(let t of this.sentinels){let r=t.client.subscribe(n).catch(e=>{i("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)});e.push(r),t.client.on("message",e=>{this.isDisconnected||e!==n||this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,i("Failover detected, disconnecting"),this.connector.disconnect()}}t.FailoverDetector=s},70896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++){var t;if(t=this.sentinels[r],(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379))return!1}return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}}t.default=r},90564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SentinelIterator=void 0;let i=r(91645),n=r(44945),s=r(34631),a=r(70896);t.SentinelIterator=a.default;let o=r(49893),l=r(14276),c=r(31518),u=(0,n.Debug)("SentinelConnector");class p extends o.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw Error("Requires the name of master.");this.sentinelIterator=new a.default(this.options.sentinels)}check(e){let t=!e.role||this.options.role===e.role;return t||(u("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){let t;this.connecting=!0,this.retryAttempts=0;let r=async()=>{let a=this.sentinelIterator.next();if(a.done){this.sentinelIterator.reset(!1);let i="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null,n="number"!=typeof i?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${i}ms.`;t&&(n+=` Last error: ${t.message}`),u(n);let s=Error(n);if("number"==typeof i)return e("error",s),await new Promise(e=>setTimeout(e,i)),r();throw s}let o=null,l=null;try{o=await this.resolve(a.value)}catch(e){l=e}if(!this.connecting)throw Error(n.CONNECTION_CLOSED_ERROR_MSG);let c=a.value.host+":"+a.value.port;if(o)return u("resolved: %s:%s from sentinel %s",o.host,o.port,c),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(o,this.options.tls),this.stream=(0,s.connect)(o),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,i.createConnection)(o),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",e=>{this.firstError=e}),this.stream;{let i=l?"failed to connect to sentinel "+c+" because "+l.message:"connected to sentinel "+c+" successfully, but got an invalid reply: "+o;return u(i),e("sentinelError",Error(i)),l&&(t=l),r()}};return r()}async updateSentinels(e){if(!this.options.updateSentinels)return;let t=await e.sentinel("sentinels",this.options.name);Array.isArray(t)&&(t.map(n.packObject).forEach(e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){let t=this.sentinelNatResolve(d(e));this.sentinelIterator.add(t)&&u("adding sentinel %s:%s",t.host,t.port)}}),u("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){let t=await e.sentinel("slaves",this.options.name);if(!Array.isArray(t))return null;let r=t.map(n.packObject).filter(e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(function(e,t){let r;if(0===e.length)return null;if("function"==typeof t)r=t(e);else if(null!==t&&"object"==typeof t){let i=Array.isArray(t)?t:[t];i.sort((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),e.prio<t.prio)?-1:e.prio>t.prio?1:0);for(let t=0;t<i.length;t++){for(let n=0;n<e.length;n++){let s=e[n];if(s.ip===i[t].ip&&s.port===i[t].port){r=s;break}}if(r)break}}return r||(r=(0,n.sample)(e)),d(r)}(r,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let t=`${e.host}:${e.port}`,r=e;return"function"==typeof this.options.natMap?r=this.options.natMap(t)||e:"object"==typeof this.options.natMap&&(r=this.options.natMap[t]||e),r}connectToSentinel(e,t){return new l.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){let t=this.connectToSentinel(e);t.on("error",h);try{if("slave"===this.options.role)return await this.resolveSlave(t);return await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let t=[];for(;t.length<this.options.sentinelMaxConnections;){let{done:e,value:r}=this.sentinelIterator.next();if(e)break;let i=this.connectToSentinel(r,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});i.on("reconnecting",()=>{var e;null===(e=this.emitter)||void 0===e||e.emit("sentinelReconnecting")}),t.push({address:r,client:i})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new c.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null===(e=this.emitter)||void 0===e||e.emit("failoverSubscribed")}}function d(e){return{host:e.ip,port:Number(e.port)}}function h(){}t.default=p},33610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(91645),n=r(34631),s=r(44945),a=r(49893);class o extends a.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let t;let{options:r}=this;return this.connecting=!0,"path"in r&&r.path?t={path:r.path}:(t={},"port"in r&&null!=r.port&&(t.port=r.port),"host"in r&&null!=r.host&&(t.host=r.host),"family"in r&&null!=r.family&&(t.family=r.family)),r.tls&&Object.assign(t,r.tls),new Promise((e,a)=>{process.nextTick(()=>{if(!this.connecting){a(Error(s.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,n.connect)(t):this.stream=(0,i.createConnection)(t)}catch(e){a(e);return}this.stream.once("error",e=>{this.firstError=e}),e(this.stream)})})}}t.default=o},34980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SentinelConnector=t.StandaloneConnector=void 0;let i=r(33610);t.StandaloneConnector=i.default;let n=r(90564);t.SentinelConnector=n.default},47050:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`;t.default={RedisCloudFixed:{ca:r},RedisCloudFlexible:{ca:r}}},78149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(90560);class n extends i.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t.default=n,n.defaultMessage="Failed to refresh slots cache."},88229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(90560);class n extends i.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t.default=n},6195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxRetriesPerRequestError=void 0;let i=r(88229);t.MaxRetriesPerRequestError=i.default},50547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t.Redis=t.default=void 0,t=e.exports=r(14276).default;var i=r(14276);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var n=r(14276);Object.defineProperty(t,"Redis",{enumerable:!0,get:function(){return n.default}});var s=r(3198);Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return s.default}});var a=r(68058);Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return a.default}});var o=r(34498);Object.defineProperty(t,"ScanStream",{enumerable:!0,get:function(){return o.default}});var l=r(41221);Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return l.default}});var c=r(49893);Object.defineProperty(t,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var u=r(90564);Object.defineProperty(t,"SentinelConnector",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"SentinelIterator",{enumerable:!0,get:function(){return u.SentinelIterator}}),t.ReplyError=r(90560).ReplyError,Object.defineProperty(t,"Promise",{get:()=>(console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise),set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}}),t.print=function(e,t){e?console.log("Error: "+e):console.log("Reply: "+t)}},85220:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REDIS_OPTIONS=void 0,t.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}},5632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readyHandler=t.errorHandler=t.closeHandler=t.connectHandler=void 0;let i=r(90560),n=r(68058),s=r(6195),a=r(44945),o=r(30059),l=(0,a.Debug)("connection");function c(e){let t=new i.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}t.connectHandler=function(e){return function(){e.setStatus("connect"),e.resetCommandQueue();let r=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(t){i===e.connectionEpoch&&t&&(-1!==t.message.indexOf("no password is set")?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):-1!==t.message.indexOf("without any password configured for the default user")?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):-1!==t.message.indexOf("wrong number of arguments for 'auth' command")?console.warn("[ERROR] The server returned \"wrong number of arguments for 'auth' command\". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under."):(r=!0,e.recoverFromFatalError(t,t)))}),e.condition.select&&e.select(e.condition.select).catch(t=>{e.silentEmit("error",t)}),e.options.enableReadyCheck||t.readyHandler(e)(),new o.default(e,{stringNumbers:e.options.stringNumbers}),e.options.enableReadyCheck&&e._readyCheck(function(n,s){i===e.connectionEpoch&&(n?r||e.recoverFromFatalError(Error("Ready check failed: "+n.message),n):e.connector.check(s)?t.readyHandler(e)():e.disconnect(!0))})}},t.closeHandler=function(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let r=0;for(let i=0;i<e.length;){let n=null===(t=e.peekAt(i))||void 0===t?void 0:t.command,s=n.pipelineIndex;if((void 0===s||0===s)&&(r=0),void 0!==s&&s!==r++){e.remove(i,1),n.reject(c(n));continue}i++}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let r=0;r<e.length;){let i=null===(t=e.peekAt(r))||void 0===t?void 0:t.command;if("multi"===i.name)break;if("exec"===i.name){e.remove(r,1),i.reject(c(i));break}i.inTransaction?(e.remove(r,1),i.reject(c(i))):r++}}(e.offlineQueue),"ready"===r&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,l("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return l("skip reconnecting because `retryStrategy` is not a function"),t();let i=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof i)return l("skip reconnecting because `retryStrategy` doesn't return a number"),t();l("reconnect in %sms",i),e.setStatus("reconnecting",i),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(a.noop)},i);let{maxRetriesPerRequest:n}=e.options;"number"==typeof n&&(n<0?l("maxRetriesPerRequest is negative, ignoring..."):0==e.retryAttempts%(n+1)&&(l("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new s.MaxRetriesPerRequestError(n))))};function t(){e.setStatus("end"),e.flushQueue(Error(a.CONNECTION_CLOSED_ERROR_MSG))}},t.errorHandler=function(e){return function(t){l("error: %s",t),e.silentEmit("error",t)}},t.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),t=>e.emit("error",t));let{sendCommand:t}=e;e.sendCommand=function(r){return n.default.checkFlag("VALID_IN_MONITOR_MODE",r.name)?t.call(e,r):(r.reject(Error("Connection is in monitoring mode, can't process commands.")),r.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName&&(l("set the connection name [%s]",e.options.connectionName),e.client("setname",e.options.connectionName).catch(a.noop)),e.options.readOnly&&(l("set the connection to readonly mode"),e.readonly().catch(a.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t));let i=r.subscriber.channels("subscribe");i.length&&(l("subscribe %d channels",i.length),e.subscribe(i));let n=r.subscriber.channels("psubscribe");n.length&&(l("psubscribe %d channels",n.length),e.psubscribe(n));let s=r.subscriber.channels("ssubscribe");s.length&&(l("ssubscribe %d channels",s.length),e.ssubscribe(s))}}if(e.prevCommandQueue){if(e.options.autoResendUnfulfilledCommands)for(l("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null}if(e.offlineQueue.length){l("send %d commands in offline queue",e.offlineQueue.length);let t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){let r=t.shift();r.select!==e.condition.select&&"select"!==r.command.name&&e.select(r.select),e.sendCommand(r.command,r.stream)}}e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t))}}},45455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTransactionSupport=void 0;let i=r(44945),n=r(84542),s=r(41221);t.addTransactionSupport=function(e){e.pipeline=function(e){let t=new s.default(this);return Array.isArray(e)&&t.addBatch(e),t};let{multi:t}=e;e.multi=function(e,r){if(void 0!==r||Array.isArray(e)||(r=e,e=null),r&&!1===r.pipeline)return t.call(this);let a=new s.default(this);a.multi(),Array.isArray(e)&&a.addBatch(e);let o=a.exec;a.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(i.noop),(0,n.default)(new Promise((e,t)=>{this.redis.delayUntilReady(r=>{if(r){t(r);return}this.exec(a).then(e,t)})}),e);if(this._transactions>0&&o.call(a),this.nodeifiedPromise)return o.call(a);let t=o.call(a);return(0,n.default)(t.then(function(e){let t=e[e.length-1];if(void 0===t)throw Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let r=0;r<e.length-1;++r)e[r][0]&&t[0].previousErrors.push(e[r][0]);throw t[0]}return(0,i.wrapMultiResult)(t[1])}),e)};let{execBuffer:l}=a;return a.execBuffer=function(e){return this._transactions>0&&l.call(a),a.exec(e)},a};let{exec:r}=e;e.exec=function(e){return(0,n.default)(r.call(this).then(function(e){return Array.isArray(e)&&(e=(0,i.wrapMultiResult)(e)),e}),e)}}},31459:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(60670),n=r(41497),s=r(68058),a=r(54924);class o{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return l.slice(0)}createBuiltinCommand(e){return{string:c(null,e,"utf8"),buffer:c(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=c(e,e,"utf8"),this[e+"Buffer"]=c(e+"Buffer",e,null)}defineCommand(e,t){let r=new a.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=r,this[e]=u(e,e,r,"utf8"),this[e+"Buffer"]=u(e+"Buffer",e,r,null)}sendCommand(e,t,r){throw Error('"sendCommand" is not implemented')}}let l=i.list.filter(e=>"monitor"!==e);function c(e,t,r){return void 0===r&&(r=t,t=null),function(...i){let a=t||i.shift(),o=i[i.length-1];"function"==typeof o?i.pop():o=void 0;let l={errorStack:this.options.showFriendlyErrorStack?Error():void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,n.shouldUseAutoPipelining)(this,e,a)?(0,n.executeWithAutoPipelining)(this,e,a,i,o):this.sendCommand(new s.default(a,i,l,o))}}function u(e,t,r,i){return function(...s){let a="function"==typeof s[s.length-1]?s.pop():void 0,o={replyEncoding:i};return(this.options.showFriendlyErrorStack&&(o.errorStack=Error()),(0,n.shouldUseAutoPipelining)(this,e,t))?(0,n.executeWithAutoPipelining)(this,e,t,s,a):r.execute(this,s,o,a)}}l.push("sentinel"),l.forEach(function(e){o.prototype[e]=c(e,e,"utf8"),o.prototype[e+"Buffer"]=c(e+"Buffer",e,null)}),o.prototype.call=c("call","utf8"),o.prototype.callBuffer=c("callBuffer",null),o.prototype.send_command=o.prototype.call,t.default=o},26992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}},55666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genRedactedString=t.getStringValue=t.MAX_ARGUMENT_LENGTH=void 0;let i=r(23481);function n(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function s(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}t.MAX_ARGUMENT_LENGTH=200,t.getStringValue=n,t.genRedactedString=s,t.default=function(e){let t=(0,i.default)(`ioredis:${e}`);function r(...e){if(t.enabled){for(let t=1;t<e.length;t++){let r=n(e[t]);"string"==typeof r&&r.length>200&&(e[t]=s(r,200))}return t.apply(null,e)}}return Object.defineProperties(r,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),r}},44945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.defaults=t.Debug=t.zipMap=t.CONNECTION_CLOSED_ERROR_MSG=t.shuffle=t.sample=t.resolveTLSProfile=t.parseURL=t.optimizeErrorStack=t.toArg=t.convertMapToArray=t.convertObjectToArray=t.timeout=t.packObject=t.isInt=t.wrapMultiResult=t.convertBufferToString=void 0;let i=r(79551),n=r(39704);Object.defineProperty(t,"defaults",{enumerable:!0,get:function(){return n.defaults}}),Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.noop}});let s=r(55666);t.Debug=s.default;let a=r(47050);function o(e){let t=parseFloat(e);return!isNaN(e)&&(0|t)===t}t.convertBufferToString=function e(t,r){if(t instanceof Buffer)return t.toString(r);if(Array.isArray(t)){let i=t.length,n=Array(i);for(let s=0;s<i;++s)n[s]=t[s]instanceof Buffer&&"utf8"===r?t[s].toString():e(t[s],r);return n}return t},t.wrapMultiResult=function(e){if(!e)return null;let t=[],r=e.length;for(let i=0;i<r;++i){let r=e[i];r instanceof Error?t.push([r]):t.push([null,r])}return t},t.isInt=o,t.packObject=function(e){let t={},r=e.length;for(let i=1;i<r;i+=2)t[e[i-1]]=e[i];return t},t.timeout=function(e,t){let r=null,i=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(i,t,Error("timeout")),i},t.convertObjectToArray=function(e){let t=[],r=Object.keys(e);for(let i=0,n=r.length;i<n;i++)t.push(r[i],e[r[i]]);return t},t.convertMapToArray=function(e){let t=[],r=0;return e.forEach(function(e,i){t[r]=i,t[r+1]=e,r+=2}),t},t.toArg=function(e){return null==e?"":String(e)},t.optimizeErrorStack=function(e,t,r){let i;let n=t.split("\n"),s="";for(i=1;i<n.length&&-1!==n[i].indexOf(r);++i);for(let e=i;e<n.length;++e)s+="\n"+n[e];if(e.stack){let t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+s}return e},t.parseURL=function(e){if(o(e))return{port:e};let t=(0,i.parse)(e,!0,!0);t.slashes||"/"===e[0]||(e="//"+e,t=(0,i.parse)(e,!0,!0));let r=t.query||{},s={};if(t.auth){let e=t.auth.indexOf(":");s.username=-1===e?t.auth:t.auth.slice(0,e),s.password=-1===e?"":t.auth.slice(e+1)}if(t.pathname&&("redis:"===t.protocol||"rediss:"===t.protocol?t.pathname.length>1&&(s.db=t.pathname.slice(1)):s.path=t.pathname),t.host&&(s.host=t.hostname),t.port&&(s.port=t.port),"string"==typeof r.family){let e=Number.parseInt(r.family,10);Number.isNaN(e)||(s.family=e)}return(0,n.defaults)(s,r),s},t.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});let r=a.default[null==t?void 0:t.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},t.sample=function(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]},t.shuffle=function(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e},t.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",t.zipMap=function(e,t){let r=new Map;return e.forEach((e,i)=>{r.set(e,t[i])}),r}},39704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArguments=t.defaults=t.noop=void 0;let i=r(7020);t.defaults=i;let n=r(16022);t.isArguments=n,t.noop=function(){}},7020:e=>{var t=/^(?:0|[1-9]\d*)$/;function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var i=Object.prototype,n=i.hasOwnProperty,s=i.toString,a=i.propertyIsEnumerable,o=Math.max;function l(e,t,r,s){return void 0===e||p(e,i[r])&&!n.call(s,r)?t:e}function c(e,t){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=o(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var l=Array(t+1);++n<t;)l[n]=i[n];return l[t]=a,r(e,this,l)}}function u(e,r){return!!(r=null==r?0x1fffffffffffff:r)&&("number"==typeof e||t.test(e))&&e>-1&&e%1==0&&e<r}function p(e,t){return e===t||e!=e&&t!=t}var d=Array.isArray;function h(e){var t,r;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&!("[object Function]"==(r=f(e)?s.call(e):"")||"[object GeneratorFunction]"==r)}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var m=function(e){return c(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(n--,s):void 0,a&&function(e,t,r){if(!f(r))return!1;var i=typeof t;return("number"==i?!!(h(r)&&u(t,r.length)):"string"==i&&t in r)&&p(r[t],e)}(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}(function(e,t,r,o){!function(e,t,r,i){r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=i?i(r[o],e[o],o,r,e):void 0;!function(e,t,r){var i=e[t];n.call(e,t)&&p(i,r)&&(void 0!==r||t in e)||(e[t]=r)}(r,o,void 0===l?e[o]:l)}}(t,h(t)?function(e,t){var r=d(e)||e&&"object"==typeof e&&h(e)&&n.call(e,"callee")&&(!a.call(e,"callee")||"[object Arguments]"==s.call(e))?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],i=r.length,o=!!i;for(var l in e)(t||n.call(e,l))&&!(o&&("length"==l||u(l,i)))&&r.push(l);return r}(t,!0):function(e){if(!f(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r=(t=e&&e.constructor,e===("function"==typeof t&&t.prototype||i)),s=[];for(var a in e)"constructor"==a&&(r||!n.call(e,a))||s.push(a);return s}(t),e,o)}),g=c(function(e){return e.push(void 0,l),r(m,void 0,e)});e.exports=g},16022:e=>{var t=Object.prototype,r=t.hasOwnProperty,i=t.toString,n=t.propertyIsEnumerable;e.exports=function(e){var t,s,a,o,l,c;return!!e&&"object"==typeof e&&null!=(t=e)&&"number"==typeof(s=t.length)&&s>-1&&s%1==0&&s<=0x1fffffffffffff&&!("[object Function]"==(l=typeof(o=a=t),c=o&&("object"==l||"function"==l)?i.call(a):"")||"[object GeneratorFunction]"==c)&&r.call(e,"callee")&&(!n.call(e,"callee")||"[object Arguments]"==i.call(e))}},31307:function(e,t,r){var i;e=r.nmd(e),(function(){var n,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=1/0,c=0/0,u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],p="[object Arguments]",d="[object Array]",h="[object Boolean]",f="[object Date]",m="[object Error]",g="[object Function]",y="[object GeneratorFunction]",v="[object Map]",b="[object Number]",x="[object Object]",w="[object Promise]",k="[object RegExp]",S="[object Set]",E="[object String]",_="[object Symbol]",T="[object WeakMap]",A="[object ArrayBuffer]",I="[object DataView]",O="[object Float32Array]",C="[object Float64Array]",j="[object Int8Array]",R="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",D="[object Uint8ClampedArray]",L="[object Uint16Array]",P="[object Uint32Array]",U=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,V=RegExp(K.source),q=RegExp(F.source),H=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,Z=RegExp($.source),X=/^\s+/,ee=/\s/,et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,en=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,es=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,eo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,el=/\w*$/,ec=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ep=/^\[object .+?Constructor\]$/,ed=/^0o[0-7]+$/i,eh=/^(?:0|[1-9]\d*)$/,ef=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,em=/($^)/,eg=/['\n\r\u2028\u2029\\]/g,ey="\ud800-\udfff",ev="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",eb="\\u2700-\\u27bf",ex="a-z\\xdf-\\xf6\\xf8-\\xff",ew="A-Z\\xc0-\\xd6\\xd8-\\xde",ek="\\ufe0e\\ufe0f",eS="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eE="[']",e_="["+eS+"]",eT="["+ev+"]",eA="["+ex+"]",eI="[^"+ey+eS+"\\d+"+eb+ex+ew+"]",eO="\ud83c[\udffb-\udfff]",eC="[^"+ey+"]",ej="(?:\ud83c[\udde6-\uddff]){2}",eR="[\ud800-\udbff][\udc00-\udfff]",eN="["+ew+"]",eM="\\u200d",eD="(?:"+eA+"|"+eI+")",eL="(?:"+eN+"|"+eI+")",eP="(?:"+eE+"(?:d|ll|m|re|s|t|ve))?",eU="(?:"+eE+"(?:D|LL|M|RE|S|T|VE))?",ez="(?:"+eT+"|"+eO+")?",eB="["+ek+"]?",eK="(?:"+eM+"(?:"+[eC,ej,eR].join("|")+")"+eB+ez+")*",eF=eB+ez+eK,eV="(?:"+["["+eb+"]",ej,eR].join("|")+")"+eF,eq="(?:"+[eC+eT+"?",eT,ej,eR,"["+ey+"]"].join("|")+")",eH=RegExp(eE,"g"),eG=RegExp(eT,"g"),eY=RegExp(eO+"(?="+eO+")|"+eq+eF,"g"),eJ=RegExp([eN+"?"+eA+"+"+eP+"(?="+[e_,eN,"$"].join("|")+")",eL+"+"+eU+"(?="+[e_,eN+eD,"$"].join("|")+")",eN+"?"+eD+"+"+eP,eN+"+"+eU,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eV].join("|"),"g"),eW=RegExp("["+eM+ey+ev+ek+"]"),eQ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,e$=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eZ=-1,eX={};eX[O]=eX[C]=eX[j]=eX[R]=eX[N]=eX[M]=eX[D]=eX[L]=eX[P]=!0,eX[p]=eX[d]=eX[A]=eX[h]=eX[I]=eX[f]=eX[m]=eX[g]=eX[v]=eX[b]=eX[x]=eX[k]=eX[S]=eX[E]=eX[T]=!1;var e0={};e0[p]=e0[d]=e0[A]=e0[I]=e0[h]=e0[f]=e0[O]=e0[C]=e0[j]=e0[R]=e0[N]=e0[v]=e0[b]=e0[x]=e0[k]=e0[S]=e0[E]=e0[_]=e0[M]=e0[D]=e0[L]=e0[P]=!0,e0[m]=e0[g]=e0[T]=!1;var e1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e2=parseFloat,e3=parseInt,e4="object"==typeof global&&global&&global.Object===Object&&global,e6="object"==typeof self&&self&&self.Object===Object&&self,e5=e4||e6||Function("return this")(),e8=t&&!t.nodeType&&t,e9=e8&&e&&!e.nodeType&&e,e7=e9&&e9.exports===e8,te=e7&&e4.process,tt=function(){try{var e=e9&&e9.require&&e9.require("util").types;if(e)return e;return te&&te.binding&&te.binding("util")}catch(e){}}(),tr=tt&&tt.isArrayBuffer,ti=tt&&tt.isDate,tn=tt&&tt.isMap,ts=tt&&tt.isRegExp,ta=tt&&tt.isSet,to=tt&&tt.isTypedArray;function tl(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function tc(e,t,r,i){for(var n=-1,s=null==e?0:e.length;++n<s;){var a=e[n];t(i,a,r(a),e)}return i}function tu(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););return e}function tp(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}function td(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}function th(e,t){return!!(null==e?0:e.length)&&tS(e,t,0)>-1}function tf(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1}function tm(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function tg(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}function ty(e,t,r,i){var n=-1,s=null==e?0:e.length;for(i&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}function tv(e,t,r,i){var n=null==e?0:e.length;for(i&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function tb(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var tx=tA("length");function tw(e,t,r){var i;return r(e,function(e,r,n){if(t(e,r,n))return i=r,!1}),i}function tk(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return -1}function tS(e,t,r){return t==t?function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return -1}(e,t,r):tk(e,t_,r)}function tE(e,t,r,i){for(var n=r-1,s=e.length;++n<s;)if(i(e[n],t))return n;return -1}function t_(e){return e!=e}function tT(e,t){var r=null==e?0:e.length;return r?tC(e,t)/r:c}function tA(e){return function(t){return null==t?n:t[e]}}function tI(e){return function(t){return null==e?n:e[t]}}function tO(e,t,r,i,n){return n(e,function(e,n,s){r=i?(i=!1,e):t(r,e,n,s)}),r}function tC(e,t){for(var r,i=-1,s=e.length;++i<s;){var a=t(e[i]);n!==a&&(r=n===r?a:r+a)}return r}function tj(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function tR(e){return e?e.slice(0,tJ(e)+1).replace(X,""):e}function tN(e){return function(t){return e(t)}}function tM(e,t){return tm(t,function(t){return e[t]})}function tD(e,t){return e.has(t)}function tL(e,t){for(var r=-1,i=e.length;++r<i&&tS(t,e[r],0)>-1;);return r}function tP(e,t){for(var r=e.length;r--&&tS(t,e[r],0)>-1;);return r}var tU=tI({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tz=tI({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tB(e){return"\\"+e1[e]}function tK(e){return eW.test(e)}function tF(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function tV(e,t){return function(r){return e(t(r))}}function tq(e,t){for(var r=-1,i=e.length,n=0,s=[];++r<i;){var a=e[r];(a===t||a===o)&&(e[r]=o,s[n++]=r)}return s}function tH(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function tG(e){return tK(e)?function(e){for(var t=eY.lastIndex=0;eY.test(e);)++t;return t}(e):tx(e)}function tY(e){return tK(e)?e.match(eY)||[]:e.split("")}function tJ(e){for(var t=e.length;t--&&ee.test(e.charAt(t)););return t}var tW=tI({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tQ=function e(t){var r,i,ee,ey,ev=(t=null==t?e5:tQ.defaults(e5.Object(),t,tQ.pick(e5,e$))).Array,eb=t.Date,ex=t.Error,ew=t.Function,ek=t.Math,eS=t.Object,eE=t.RegExp,e_=t.String,eT=t.TypeError,eA=ev.prototype,eI=ew.prototype,eO=eS.prototype,eC=t["__core-js_shared__"],ej=eI.toString,eR=eO.hasOwnProperty,eN=0,eM=(r=/[^.]+$/.exec(eC&&eC.keys&&eC.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",eD=eO.toString,eL=ej.call(eS),eP=e5._,eU=eE("^"+ej.call(eR).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ez=e7?t.Buffer:n,eB=t.Symbol,eK=t.Uint8Array,eF=ez?ez.allocUnsafe:n,eV=tV(eS.getPrototypeOf,eS),eq=eS.create,eY=eO.propertyIsEnumerable,eW=eA.splice,e1=eB?eB.isConcatSpreadable:n,e4=eB?eB.iterator:n,e6=eB?eB.toStringTag:n,e8=function(){try{var e=nf(eS,"defineProperty");return e({},"",{}),e}catch(e){}}(),e9=t.clearTimeout!==e5.clearTimeout&&t.clearTimeout,te=eb&&eb.now!==e5.Date.now&&eb.now,tt=t.setTimeout!==e5.setTimeout&&t.setTimeout,tx=ek.ceil,tI=ek.floor,t$=eS.getOwnPropertySymbols,tZ=ez?ez.isBuffer:n,tX=t.isFinite,t0=eA.join,t1=tV(eS.keys,eS),t2=ek.max,t3=ek.min,t4=eb.now,t6=t.parseInt,t5=ek.random,t8=eA.reverse,t9=nf(t,"DataView"),t7=nf(t,"Map"),re=nf(t,"Promise"),rt=nf(t,"Set"),rr=nf(t,"WeakMap"),ri=nf(eS,"create"),rn=rr&&new rr,rs={},ra=nz(t9),ro=nz(t7),rl=nz(re),rc=nz(rt),ru=nz(rr),rp=eB?eB.prototype:n,rd=rp?rp.valueOf:n,rh=rp?rp.toString:n;function rf(e){if(sG(e)&&!sD(e)&&!(e instanceof rv)){if(e instanceof ry)return e;if(eR.call(e,"__wrapped__"))return nB(e)}return new ry(e)}var rm=function(){function e(){}return function(t){if(!sH(t))return{};if(eq)return eq(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function rg(){}function ry(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function rv(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function rb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rx(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rw(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function rk(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new rw;++t<r;)this.add(e[t])}function rS(e){var t=this.__data__=new rx(e);this.size=t.size}function rE(e,t){var r=sD(e),i=!r&&sM(e),n=!r&&!i&&sz(e),s=!r&&!i&&!n&&s0(e),a=r||i||n||s,o=a?tj(e.length,e_):[],l=o.length;for(var c in e)(t||eR.call(e,c))&&!(a&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||nw(c,l)))&&o.push(c);return o}function r_(e){var t=e.length;return t?e[iu(0,t-1)]:n}function rT(e,t,r){(n===r||sj(e[t],r))&&(n!==r||t in e)||rj(e,t,r)}function rA(e,t,r){var i=e[t];eR.call(e,t)&&sj(i,r)&&(n!==r||t in e)||rj(e,t,r)}function rI(e,t){for(var r=e.length;r--;)if(sj(e[r][0],t))return r;return -1}function rO(e,t,r,i){return rU(e,function(e,n,s){t(i,e,r(e),s)}),i}function rC(e,t){return e&&iV(t,ad(t),e)}function rj(e,t,r){"__proto__"==t&&e8?e8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rR(e,t){for(var r=-1,i=t.length,s=ev(i),a=null==e;++r<i;)s[r]=a?n:ao(e,t[r]);return s}function rN(e,t,r){return e==e&&(n!==r&&(e=e<=r?e:r),n!==t&&(e=e>=t?e:t)),e}function rM(e,t,r,i,s,a){var o,l=1&t,c=2&t,u=4&t;if(r&&(o=s?r(e,i,s,a):r(e)),n!==o)return o;if(!sH(e))return e;var d=sD(e);if(d){if(m=e.length,w=new e.constructor(m),m&&"string"==typeof e[0]&&eR.call(e,"index")&&(w.index=e.index,w.input=e.input),o=w,!l)return iF(e,o)}else{var m,w,T,U,z,B=ny(e),K=B==g||B==y;if(sz(e))return iL(e,l);if(B==x||B==p||K&&!s){if(o=c||K?{}:nb(e),!l)return c?(T=(z=o)&&iV(e,ah(e),z),iV(e,ng(e),T)):(U=rC(o,e),iV(e,nm(e),U))}else{if(!e0[B])return s?e:{};o=function(e,t,r){var i,n,s=e.constructor;switch(t){case A:return iP(e);case h:case f:return new s(+e);case I:return i=r?iP(e.buffer):e.buffer,new e.constructor(i,e.byteOffset,e.byteLength);case O:case C:case j:case R:case N:case M:case D:case L:case P:return iU(e,r);case v:return new s;case b:case E:return new s(e);case k:return(n=new e.constructor(e.source,el.exec(e))).lastIndex=e.lastIndex,n;case S:return new s;case _:return rd?eS(rd.call(e)):{}}}(e,B,l)}}a||(a=new rS);var F=a.get(e);if(F)return F;a.set(e,o),s$(e)?e.forEach(function(i){o.add(rM(i,t,r,i,e,a))}):sY(e)&&e.forEach(function(i,n){o.set(n,rM(i,t,r,n,e,a))});var V=u?c?no:na:c?ah:ad,q=d?n:V(e);return tu(q||e,function(i,n){q&&(i=e[n=i]),rA(o,n,rM(i,t,r,n,e,a))}),o}function rD(e,t,r){var i=r.length;if(null==e)return!i;for(e=eS(e);i--;){var s=r[i],a=t[s],o=e[s];if(n===o&&!(s in e)||!a(o))return!1}return!0}function rL(e,t,r){if("function"!=typeof e)throw new eT(s);return nR(function(){e.apply(n,r)},t)}function rP(e,t,r,i){var n=-1,s=th,a=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=tm(t,tN(r))),i?(s=tf,a=!1):t.length>=200&&(s=tD,a=!1,t=new rk(t));e:for(;++n<o;){var u=e[n],p=null==r?u:r(u);if(u=i||0!==u?u:0,a&&p==p){for(var d=c;d--;)if(t[d]===p)continue e;l.push(u)}else s(t,p,i)||l.push(u)}return l}rf.templateSettings={escape:H,evaluate:G,interpolate:Y,variable:"",imports:{_:rf}},rf.prototype=rg.prototype,rf.prototype.constructor=rf,ry.prototype=rm(rg.prototype),ry.prototype.constructor=ry,rv.prototype=rm(rg.prototype),rv.prototype.constructor=rv,rb.prototype.clear=function(){this.__data__=ri?ri(null):{},this.size=0},rb.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rb.prototype.get=function(e){var t=this.__data__;if(ri){var r=t[e];return r===a?n:r}return eR.call(t,e)?t[e]:n},rb.prototype.has=function(e){var t=this.__data__;return ri?t[e]!==n:eR.call(t,e)},rb.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ri&&n===t?a:t,this},rx.prototype.clear=function(){this.__data__=[],this.size=0},rx.prototype.delete=function(e){var t=this.__data__,r=rI(t,e);return!(r<0)&&(r==t.length-1?t.pop():eW.call(t,r,1),--this.size,!0)},rx.prototype.get=function(e){var t=this.__data__,r=rI(t,e);return r<0?n:t[r][1]},rx.prototype.has=function(e){return rI(this.__data__,e)>-1},rx.prototype.set=function(e,t){var r=this.__data__,i=rI(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},rw.prototype.clear=function(){this.size=0,this.__data__={hash:new rb,map:new(t7||rx),string:new rb}},rw.prototype.delete=function(e){var t=nd(this,e).delete(e);return this.size-=t?1:0,t},rw.prototype.get=function(e){return nd(this,e).get(e)},rw.prototype.has=function(e){return nd(this,e).has(e)},rw.prototype.set=function(e,t){var r=nd(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},rk.prototype.add=rk.prototype.push=function(e){return this.__data__.set(e,a),this},rk.prototype.has=function(e){return this.__data__.has(e)},rS.prototype.clear=function(){this.__data__=new rx,this.size=0},rS.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rS.prototype.get=function(e){return this.__data__.get(e)},rS.prototype.has=function(e){return this.__data__.has(e)},rS.prototype.set=function(e,t){var r=this.__data__;if(r instanceof rx){var i=r.__data__;if(!t7||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new rw(i)}return r.set(e,t),this.size=r.size,this};var rU=iG(rG),rz=iG(rY,!0);function rB(e,t){var r=!0;return rU(e,function(e,i,n){return r=!!t(e,i,n)}),r}function rK(e,t,r){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(n===l?o==o&&!sX(o):r(o,l)))var l=o,c=a}return c}function rF(e,t){var r=[];return rU(e,function(e,i,n){t(e,i,n)&&r.push(e)}),r}function rV(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=nx),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?rV(o,t-1,r,i,n):tg(n,o):i||(n[n.length]=o)}return n}var rq=iY(),rH=iY(!0);function rG(e,t){return e&&rq(e,t,ad)}function rY(e,t){return e&&rH(e,t,ad)}function rJ(e,t){return td(t,function(t){return sF(e[t])})}function rW(e,t){t=iN(t,e);for(var r=0,i=t.length;null!=e&&r<i;)e=e[nU(t[r++])];return r&&r==i?e:n}function rQ(e,t,r){var i=t(e);return sD(e)?i:tg(i,r(e))}function r$(e){return null==e?n===e?"[object Undefined]":"[object Null]":e6&&e6 in eS(e)?function(e){var t=eR.call(e,e6),r=e[e6];try{e[e6]=n;var i=!0}catch(e){}var s=eD.call(e);return i&&(t?e[e6]=r:delete e[e6]),s}(e):eD.call(e)}function rZ(e,t){return e>t}function rX(e,t){return null!=e&&eR.call(e,t)}function r0(e,t){return null!=e&&t in eS(e)}function r1(e,t,r){for(var i=r?tf:th,s=e[0].length,a=e.length,o=a,l=ev(a),c=1/0,u=[];o--;){var p=e[o];o&&t&&(p=tm(p,tN(t))),c=t3(p.length,c),l[o]=!r&&(t||s>=120&&p.length>=120)?new rk(o&&p):n}p=e[0];var d=-1,h=l[0];e:for(;++d<s&&u.length<c;){var f=p[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?tD(h,m):i(u,m,r))){for(o=a;--o;){var g=l[o];if(!(g?tD(g,m):i(e[o],m,r)))continue e}h&&h.push(m),u.push(f)}}return u}function r2(e,t,r){t=iN(t,e);var i=null==(e=nO(e,t))?e:e[nU(n$(t))];return null==i?n:tl(i,e,r)}function r3(e){return sG(e)&&r$(e)==p}function r4(e,t,r,i,s){return e===t||(null!=e&&null!=t&&(sG(e)||sG(t))?function(e,t,r,i,s,a){var o=sD(e),l=sD(t),c=o?d:ny(e),u=l?d:ny(t);c=c==p?x:c,u=u==p?x:u;var g=c==x,y=u==x,w=c==u;if(w&&sz(e)){if(!sz(t))return!1;o=!0,g=!1}if(w&&!g)return a||(a=new rS),o||s0(e)?nn(e,t,r,i,s,a):function(e,t,r,i,n,s,a){switch(r){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case A:if(e.byteLength!=t.byteLength||!s(new eK(e),new eK(t)))break;return!0;case h:case f:case b:return sj(+e,+t);case m:return e.name==t.name&&e.message==t.message;case k:case E:return e==t+"";case v:var o=tF;case S:var l=1&i;if(o||(o=tH),e.size!=t.size&&!l)break;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var u=nn(o(e),o(t),i,n,s,a);return a.delete(e),u;case _:if(rd)return rd.call(e)==rd.call(t)}return!1}(e,t,c,r,i,s,a);if(!(1&r)){var T=g&&eR.call(e,"__wrapped__"),O=y&&eR.call(t,"__wrapped__");if(T||O){var C=T?e.value():e,j=O?t.value():t;return a||(a=new rS),s(C,j,r,i,a)}}return!!w&&(a||(a=new rS),function(e,t,r,i,s,a){var o=1&r,l=na(e),c=l.length;if(c!=na(t).length&&!o)return!1;for(var u=c;u--;){var p=l[u];if(!(o?p in t:eR.call(t,p)))return!1}var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var f=!0;a.set(e,t),a.set(t,e);for(var m=o;++u<c;){var g=e[p=l[u]],y=t[p];if(i)var v=o?i(y,g,p,t,e,a):i(g,y,p,e,t,a);if(!(n===v?g===y||s(g,y,r,i,a):v)){f=!1;break}m||(m="constructor"==p)}if(f&&!m){var b=e.constructor,x=t.constructor;b!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(f=!1)}return a.delete(e),a.delete(t),f}(e,t,r,i,s,a))}(e,t,r,i,r4,s):e!=e&&t!=t)}function r6(e,t,r,i){var s=r.length,a=s,o=!i;if(null==e)return!a;for(e=eS(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var c=(l=r[s])[0],u=e[c],p=l[1];if(o&&l[2]){if(n===u&&!(c in e))return!1}else{var d=new rS;if(i)var h=i(u,p,c,e,t,d);if(!(n===h?r4(p,u,3,i,d):h))return!1}}return!0}function r5(e){return!(!sH(e)||eM&&eM in e)&&(sF(e)?eU:ep).test(nz(e))}function r8(e){return"function"==typeof e?e:null==e?aU:"object"==typeof e?sD(e)?ir(e[0],e[1]):it(e):aY(e)}function r9(e){if(!nT(e))return t1(e);var t=[];for(var r in eS(e))eR.call(e,r)&&"constructor"!=r&&t.push(r);return t}function r7(e,t){return e<t}function ie(e,t){var r=-1,i=sP(e)?ev(e.length):[];return rU(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function it(e){var t=nh(e);return 1==t.length&&t[0][2]?nA(t[0][0],t[0][1]):function(r){return r===e||r6(r,e,t)}}function ir(e,t){var r;return nS(e)&&(r=t)==r&&!sH(r)?nA(nU(e),t):function(r){var i=ao(r,e);return n===i&&i===t?al(r,e):r4(t,i,3)}}function ii(e,t,r,i,s){e!==t&&rq(t,function(a,o){if(s||(s=new rS),sH(a))(function(e,t,r,i,s,a,o){var l=nC(e,r),c=nC(t,r),u=o.get(c);if(u){rT(e,r,u);return}var p=a?a(l,c,r+"",e,t,o):n,d=n===p;if(d){var h=sD(c),f=!h&&sz(c),m=!h&&!f&&s0(c);p=c,h||f||m?sD(l)?p=l:sU(l)?p=iF(l):f?(d=!1,p=iL(c,!0)):m?(d=!1,p=iU(c,!0)):p=[]:sW(c)||sM(c)?(p=l,sM(l)?p=s9(l):(!sH(l)||sF(l))&&(p=nb(c))):d=!1}d&&(o.set(c,p),s(p,c,i,a,o),o.delete(c)),rT(e,r,p)})(e,t,o,r,ii,i,s);else{var l=i?i(nC(e,o),a,o+"",e,t,s):n;n===l&&(l=a),rT(e,o,l)}},ah)}function is(e,t){var r=e.length;if(r)return nw(t+=t<0?r:0,r)?e[t]:n}function ia(e,t,r){t=t.length?tm(t,function(e){return sD(e)?function(t){return rW(t,1===e.length?e[0]:e)}:e}):[aU];var i=-1;return t=tm(t,tN(np())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(ie(e,function(e,r,n){return{criteria:tm(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return function(e,t,r){for(var i=-1,n=e.criteria,s=t.criteria,a=n.length,o=r.length;++i<a;){var l=iz(n[i],s[i]);if(l){if(i>=o)return l;return l*("desc"==r[i]?-1:1)}}return e.index-t.index}(e,t,r)})}function io(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var a=t[i],o=rW(e,a);r(o,a)&&ih(s,iN(a,e),o)}return s}function il(e,t,r,i){var n=i?tE:tS,s=-1,a=t.length,o=e;for(e===t&&(t=iF(t)),r&&(o=tm(e,tN(r)));++s<a;)for(var l=0,c=t[s],u=r?r(c):c;(l=n(o,u,l,i))>-1;)o!==e&&eW.call(o,l,1),eW.call(e,l,1);return e}function ic(e,t){for(var r=e?t.length:0,i=r-1;r--;){var n=t[r];if(r==i||n!==s){var s=n;nw(n)?eW.call(e,n,1):i_(e,n)}}return e}function iu(e,t){return e+tI(t5()*(t-e+1))}function ip(e,t){var r="";if(!e||t<1||t>0x1fffffffffffff)return r;do t%2&&(r+=e),(t=tI(t/2))&&(e+=e);while(t);return r}function id(e,t){return nN(nI(e,t,aU),e+"")}function ih(e,t,r,i){if(!sH(e))return e;t=iN(t,e);for(var s=-1,a=t.length,o=a-1,l=e;null!=l&&++s<a;){var c=nU(t[s]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)break;if(s!=o){var p=l[c];u=i?i(p,c,l):n,n===u&&(u=sH(p)?p:nw(t[s+1])?[]:{})}rA(l,c,u),l=l[c]}return e}var im=rn?function(e,t){return rn.set(e,t),e}:aU,ig=e8?function(e,t){return e8(e,"toString",{configurable:!0,enumerable:!1,value:aD(t),writable:!0})}:aU;function iy(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=ev(n);++i<n;)s[i]=e[i+t];return s}function iv(e,t){var r;return rU(e,function(e,i,n){return!(r=t(e,i,n))}),!!r}function ib(e,t,r){var i=0,n=null==e?i:e.length;if("number"==typeof t&&t==t&&n<=0x7fffffff){for(;i<n;){var s=i+n>>>1,a=e[s];null!==a&&!sX(a)&&(r?a<=t:a<t)?i=s+1:n=s}return n}return ix(e,t,aU,r)}function ix(e,t,r,i){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=r(t))!=t,l=null===t,c=sX(t),u=n===t;s<a;){var p=tI((s+a)/2),d=r(e[p]),h=n!==d,f=null===d,m=d==d,g=sX(d);if(o)var y=i||m;else y=u?m&&(i||h):l?m&&h&&(i||!f):c?m&&h&&!f&&(i||!g):!f&&!g&&(i?d<=t:d<t);y?s=p+1:a=p}return t3(a,0xfffffffe)}function iw(e,t){for(var r=-1,i=e.length,n=0,s=[];++r<i;){var a=e[r],o=t?t(a):a;if(!r||!sj(o,l)){var l=o;s[n++]=0===a?0:a}}return s}function ik(e){return"number"==typeof e?e:sX(e)?c:+e}function iS(e){if("string"==typeof e)return e;if(sD(e))return tm(e,iS)+"";if(sX(e))return rh?rh.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}function iE(e,t,r){var i=-1,n=th,s=e.length,a=!0,o=[],l=o;if(r)a=!1,n=tf;else if(s>=200){var c=t?null:i9(e);if(c)return tH(c);a=!1,n=tD,l=new rk}else l=t?[]:o;e:for(;++i<s;){var u=e[i],p=t?t(u):u;if(u=r||0!==u?u:0,a&&p==p){for(var d=l.length;d--;)if(l[d]===p)continue e;t&&l.push(p),o.push(u)}else n(l,p,r)||(l!==o&&l.push(p),o.push(u))}return o}function i_(e,t){return t=iN(t,e),null==(e=nO(e,t))||delete e[nU(n$(t))]}function iT(e,t,r,i){return ih(e,t,r(rW(e,t)),i)}function iA(e,t,r,i){for(var n=e.length,s=i?n:-1;(i?s--:++s<n)&&t(e[s],s,e););return r?iy(e,i?0:s,i?s+1:n):iy(e,i?s+1:0,i?n:s)}function iI(e,t){var r=e;return r instanceof rv&&(r=r.value()),ty(t,function(e,t){return t.func.apply(t.thisArg,tg([e],t.args))},r)}function iO(e,t,r){var i=e.length;if(i<2)return i?iE(e[0]):[];for(var n=-1,s=ev(i);++n<i;)for(var a=e[n],o=-1;++o<i;)o!=n&&(s[n]=rP(s[n]||a,e[o],t,r));return iE(rV(s,1),t,r)}function iC(e,t,r){for(var i=-1,s=e.length,a=t.length,o={};++i<s;){var l=i<a?t[i]:n;r(o,e[i],l)}return o}function ij(e){return sU(e)?e:[]}function iR(e){return"function"==typeof e?e:aU}function iN(e,t){return sD(e)?e:nS(e,t)?[e]:nP(s7(e))}function iM(e,t,r){var i=e.length;return r=n===r?i:r,!t&&r>=i?e:iy(e,t,r)}var iD=e9||function(e){return e5.clearTimeout(e)};function iL(e,t){if(t)return e.slice();var r=e.length,i=eF?eF(r):new e.constructor(r);return e.copy(i),i}function iP(e){var t=new e.constructor(e.byteLength);return new eK(t).set(new eK(e)),t}function iU(e,t){var r=t?iP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function iz(e,t){if(e!==t){var r=n!==e,i=null===e,s=e==e,a=sX(e),o=n!==t,l=null===t,c=t==t,u=sX(t);if(!l&&!u&&!a&&e>t||a&&o&&c&&!l&&!u||i&&o&&c||!r&&c||!s)return 1;if(!i&&!a&&!u&&e<t||u&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!c)return -1}return 0}function iB(e,t,r,i){for(var n=-1,s=e.length,a=r.length,o=-1,l=t.length,c=t2(s-a,0),u=ev(l+c),p=!i;++o<l;)u[o]=t[o];for(;++n<a;)(p||n<s)&&(u[r[n]]=e[n]);for(;c--;)u[o++]=e[n++];return u}function iK(e,t,r,i){for(var n=-1,s=e.length,a=-1,o=r.length,l=-1,c=t.length,u=t2(s-o,0),p=ev(u+c),d=!i;++n<u;)p[n]=e[n];for(var h=n;++l<c;)p[h+l]=t[l];for(;++a<o;)(d||n<s)&&(p[h+r[a]]=e[n++]);return p}function iF(e,t){var r=-1,i=e.length;for(t||(t=ev(i));++r<i;)t[r]=e[r];return t}function iV(e,t,r,i){var s=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var l=t[a],c=i?i(r[l],e[l],l,r,e):n;n===c&&(c=e[l]),s?rj(r,l,c):rA(r,l,c)}return r}function iq(e,t){return function(r,i){var n=sD(r)?tc:rO,s=t?t():{};return n(r,e,np(i,2),s)}}function iH(e){return id(function(t,r){var i=-1,s=r.length,a=s>1?r[s-1]:n,o=s>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(s--,a):n,o&&nk(r[0],r[1],o)&&(a=s<3?n:a,s=1),t=eS(t);++i<s;){var l=r[i];l&&e(t,l,i,a)}return t})}function iG(e,t){return function(r,i){if(null==r)return r;if(!sP(r))return e(r,i);for(var n=r.length,s=t?n:-1,a=eS(r);(t?s--:++s<n)&&!1!==i(a[s],s,a););return r}}function iY(e){return function(t,r,i){for(var n=-1,s=eS(t),a=i(t),o=a.length;o--;){var l=a[e?o:++n];if(!1===r(s[l],l,s))break}return t}}function iJ(e){return function(t){var r=tK(t=s7(t))?tY(t):n,i=r?r[0]:t.charAt(0),s=r?iM(r,1).join(""):t.slice(1);return i[e]()+s}}function iW(e){return function(t){return ty(aR(aE(t).replace(eH,"")),e,"")}}function iQ(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=rm(e.prototype),i=e.apply(r,t);return sH(i)?i:r}}function i$(e){return function(t,r,i){var s=eS(t);if(!sP(t)){var a=np(r,3);t=ad(t),r=function(e){return a(s[e],e,s)}}var o=e(t,r,i);return o>-1?s[a?t[o]:o]:n}}function iZ(e){return ns(function(t){var r=t.length,i=r,a=ry.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new eT(s);if(a&&!l&&"wrapper"==nc(o))var l=new ry([],!0)}for(i=l?i:r;++i<r;){var c=nc(o=t[i]),u="wrapper"==c?nl(o):n;l=u&&nE(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[nc(u[0])].apply(l,u[3]):1==o.length&&nE(o)?l[c]():l.thru(o)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&sD(i))return l.plant(i).value();for(var n=0,s=r?t[n].apply(this,e):i;++n<r;)s=t[n].call(this,s);return s}})}function iX(e,t,r,i,s,a,o,l,c,u){var p=128&t,d=1&t,h=2&t,f=24&t,m=512&t,g=h?n:iQ(e);return function y(){for(var v=arguments.length,b=ev(v),x=v;x--;)b[x]=arguments[x];if(f)var w=nu(y),k=function(e,t){for(var r=e.length,i=0;r--;)e[r]===t&&++i;return i}(b,w);if(i&&(b=iB(b,i,s,f)),a&&(b=iK(b,a,o,f)),v-=k,f&&v<u){var S=tq(b,w);return i5(e,t,iX,y.placeholder,r,b,S,l,c,u-v)}var E=d?r:this,_=h?E[e]:e;return v=b.length,l?b=function(e,t){for(var r=e.length,i=t3(t.length,r),s=iF(e);i--;){var a=t[i];e[i]=nw(a,r)?s[a]:n}return e}(b,l):m&&v>1&&b.reverse(),p&&c<v&&(b.length=c),this&&this!==e5&&this instanceof y&&(_=g||iQ(_)),_.apply(E,b)}}function i0(e,t){return function(r,i){var n,s;return n=t(i),s={},rG(r,function(t,r,i){e(s,n(t),r,i)}),s}}function i1(e,t){return function(r,i){var s;if(n===r&&n===i)return t;if(n!==r&&(s=r),n!==i){if(n===s)return i;"string"==typeof r||"string"==typeof i?(r=iS(r),i=iS(i)):(r=ik(r),i=ik(i)),s=e(r,i)}return s}}function i2(e){return ns(function(t){return t=tm(t,tN(np())),id(function(r){var i=this;return e(t,function(e){return tl(e,i,r)})})})}function i3(e,t){var r=(t=n===t?" ":iS(t)).length;if(r<2)return r?ip(t,e):t;var i=ip(t,tx(e/tG(t)));return tK(t)?iM(tY(i),0,e).join(""):i.slice(0,e)}function i4(e){return function(t,r,i){return i&&"number"!=typeof i&&nk(t,r,i)&&(r=i=n),t=s4(t),n===r?(r=t,t=0):r=s4(r),i=n===i?t<r?1:-1:s4(i),function(e,t,r,i){for(var n=-1,s=t2(tx((t-e)/(r||1)),0),a=ev(s);s--;)a[i?s:++n]=e,e+=r;return a}(t,r,i,e)}}function i6(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=s8(t),r=s8(r)),e(t,r)}}function i5(e,t,r,i,s,a,o,l,c,u){var p=8&t,d=p?o:n,h=p?n:o,f=p?a:n,m=p?n:a;t|=p?32:64,4&(t&=~(p?64:32))||(t&=-4);var g=[e,t,s,f,d,m,h,l,c,u],y=r.apply(n,g);return nE(e)&&nj(y,g),y.placeholder=i,nM(y,e,t)}function i8(e){var t=ek[e];return function(e,r){if(e=s8(e),(r=null==r?0:t3(s6(r),292))&&tX(e)){var i=(s7(e)+"e").split("e");return+((i=(s7(t(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(+i[1]-r))}return t(e)}}var i9=rt&&1/tH(new rt([,-0]))[1]==l?function(e){return new rt(e)}:aV;function i7(e){return function(t){var r,i,n=ny(t);return n==v?tF(t):n==S?(r=-1,i=Array(t.size),t.forEach(function(e){i[++r]=[e,e]}),i):tm(e(t),function(e){return[e,t[e]]})}}function ne(e,t,r,i,a,l,c,u){var p=2&t;if(!p&&"function"!=typeof e)throw new eT(s);var d=i?i.length:0;if(d||(t&=-97,i=a=n),c=n===c?c:t2(s6(c),0),u=n===u?u:s6(u),d-=a?a.length:0,64&t){var h=i,f=a;i=a=n}var m=p?n:nl(e),g=[e,t,r,i,a,h,f,l,c,u];if(m&&function(e,t){var r=e[1],i=t[1],n=r|i,s=n<131,a=128==i&&8==r||128==i&&256==r&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==r;if(s||a){1&i&&(e[2]=t[2],n|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?iB(c,l,t[4]):l,e[4]=c?tq(e[3],o):t[4]}(l=t[5])&&(c=e[5],e[5]=c?iK(c,l,t[6]):l,e[6]=c?tq(e[5],o):t[6]),(l=t[7])&&(e[7]=l),128&i&&(e[8]=null==e[8]?t[8]:t3(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}}(g,m),e=g[0],t=g[1],r=g[2],i=g[3],a=g[4],(u=g[9]=g[9]===n?p?0:e.length:t2(g[9]-d,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(y=e,v=t,b=u,x=iQ(y),R=function e(){for(var t=arguments.length,r=ev(t),i=t,s=nu(e);i--;)r[i]=arguments[i];var a=t<3&&r[0]!==s&&r[t-1]!==s?[]:tq(r,s);return(t-=a.length)<b?i5(y,v,iX,e.placeholder,n,r,a,n,n,b-t):tl(this&&this!==e5&&this instanceof e?x:y,this,r)}):32!=t&&33!=t||a.length?R=iX.apply(n,g):(w=e,k=t,S=r,E=i,_=1&k,T=iQ(w),R=function e(){for(var t=-1,r=arguments.length,i=-1,n=E.length,s=ev(n+r),a=this&&this!==e5&&this instanceof e?T:w;++i<n;)s[i]=E[i];for(;r--;)s[i++]=arguments[++t];return tl(a,_?S:this,s)});else var y,v,b,x,w,k,S,E,_,T,A,I,O,C,j,R=(A=e,I=t,O=r,C=1&I,j=iQ(A),function e(){return(this&&this!==e5&&this instanceof e?j:A).apply(C?O:this,arguments)});return nM((m?im:nj)(R,g),e,t)}function nt(e,t,r,i){return n===e||sj(e,eO[r])&&!eR.call(i,r)?t:e}function nr(e,t,r,i,s,a){return sH(e)&&sH(t)&&(a.set(t,e),ii(e,t,n,nr,a),a.delete(t)),e}function ni(e){return sW(e)?n:e}function nn(e,t,r,i,s,a){var o=1&r,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(e),p=a.get(t);if(u&&p)return u==t&&p==e;var d=-1,h=!0,f=2&r?new rk:n;for(a.set(e,t),a.set(t,e);++d<l;){var m=e[d],g=t[d];if(i)var y=o?i(g,m,d,t,e,a):i(m,g,d,e,t,a);if(n!==y){if(y)continue;h=!1;break}if(f){if(!tb(t,function(e,t){if(!tD(f,t)&&(m===e||s(m,e,r,i,a)))return f.push(t)})){h=!1;break}}else if(!(m===g||s(m,g,r,i,a))){h=!1;break}}return a.delete(e),a.delete(t),h}function ns(e){return nN(nI(e,n,nG),e+"")}function na(e){return rQ(e,ad,nm)}function no(e){return rQ(e,ah,ng)}var nl=rn?function(e){return rn.get(e)}:aV;function nc(e){for(var t=e.name+"",r=rs[t],i=eR.call(rs,t)?r.length:0;i--;){var n=r[i],s=n.func;if(null==s||s==e)return n.name}return t}function nu(e){return(eR.call(rf,"placeholder")?rf:e).placeholder}function np(){var e=rf.iteratee||az;return e=e===az?r8:e,arguments.length?e(arguments[0],arguments[1]):e}function nd(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function nh(e){for(var t=ad(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,n==n&&!sH(n)]}return t}function nf(e,t){var r=null==e?n:e[t];return r5(r)?r:n}var nm=t$?function(e){return null==e?[]:td(t$(e=eS(e)),function(t){return eY.call(e,t)})}:aQ,ng=t$?function(e){for(var t=[];e;)tg(t,nm(e)),e=eV(e);return t}:aQ,ny=r$;function nv(e,t,r){t=iN(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var a=nU(t[i]);if(!(s=null!=e&&r(e,a)))break;e=e[a]}return s||++i!=n?s:!!(n=null==e?0:e.length)&&sq(n)&&nw(a,n)&&(sD(e)||sM(e))}function nb(e){return"function"!=typeof e.constructor||nT(e)?{}:rm(eV(e))}function nx(e){return sD(e)||sM(e)||!!(e1&&e&&e[e1])}function nw(e,t){var r=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==r||"symbol"!=r&&eh.test(e))&&e>-1&&e%1==0&&e<t}function nk(e,t,r){if(!sH(r))return!1;var i=typeof t;return("number"==i?!!(sP(r)&&nw(t,r.length)):"string"==i&&t in r)&&sj(r[t],e)}function nS(e,t){if(sD(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||sX(e))||W.test(e)||!J.test(e)||null!=t&&e in eS(t)}function nE(e){var t=nc(e),r=rf[t];if("function"!=typeof r||!(t in rv.prototype))return!1;if(e===r)return!0;var i=nl(r);return!!i&&e===i[0]}(t9&&ny(new t9(new ArrayBuffer(1)))!=I||t7&&ny(new t7)!=v||re&&ny(re.resolve())!=w||rt&&ny(new rt)!=S||rr&&ny(new rr)!=T)&&(ny=function(e){var t=r$(e),r=t==x?e.constructor:n,i=r?nz(r):"";if(i)switch(i){case ra:return I;case ro:return v;case rl:return w;case rc:return S;case ru:return T}return t});var n_=eC?sF:a$;function nT(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eO)}function nA(e,t){return function(r){return null!=r&&r[e]===t&&(n!==t||e in eS(r))}}function nI(e,t,r){return t=t2(n===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=t2(i.length-t,0),a=ev(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=ev(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),tl(e,this,o)}}function nO(e,t){return t.length<2?e:rW(e,iy(t,0,-1))}function nC(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var nj=nD(im),nR=tt||function(e,t){return e5.setTimeout(e,t)},nN=nD(ig);function nM(e,t,r){var i,n,s=t+"";return nN(e,function(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(et,"{\n/* [wrapped with "+t+"] */\n")}(s,(i=(n=s.match(er))?n[1].split(ei):[],tu(u,function(e){var t="_."+e[0];r&e[1]&&!th(i,t)&&i.push(t)}),i.sort())))}function nD(e){var t=0,r=0;return function(){var i=t4(),s=16-(i-r);if(r=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function nL(e,t){var r=-1,i=e.length,s=i-1;for(t=n===t?i:t;++r<t;){var a=iu(r,s),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}var nP=(ee=(i=s_(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,function(e,r,i,n){t.push(i?n.replace(ea,"$1"):r||e)}),t},function(e){return 500===ee.size&&ee.clear(),e})).cache,i);function nU(e){if("string"==typeof e||sX(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function nz(e){if(null!=e){try{return ej.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function nB(e){if(e instanceof rv)return e.clone();var t=new ry(e.__wrapped__,e.__chain__);return t.__actions__=iF(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var nK=id(function(e,t){return sU(e)?rP(e,rV(t,1,sU,!0)):[]}),nF=id(function(e,t){var r=n$(t);return sU(r)&&(r=n),sU(e)?rP(e,rV(t,1,sU,!0),np(r,2)):[]}),nV=id(function(e,t){var r=n$(t);return sU(r)&&(r=n),sU(e)?rP(e,rV(t,1,sU,!0),n,r):[]});function nq(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var n=null==r?0:s6(r);return n<0&&(n=t2(i+n,0)),tk(e,np(t,3),n)}function nH(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var s=i-1;return n!==r&&(s=s6(r),s=r<0?t2(i+s,0):t3(s,i-1)),tk(e,np(t,3),s,!0)}function nG(e){return(null==e?0:e.length)?rV(e,1):[]}function nY(e){return e&&e.length?e[0]:n}var nJ=id(function(e){var t=tm(e,ij);return t.length&&t[0]===e[0]?r1(t):[]}),nW=id(function(e){var t=n$(e),r=tm(e,ij);return t===n$(r)?t=n:r.pop(),r.length&&r[0]===e[0]?r1(r,np(t,2)):[]}),nQ=id(function(e){var t=n$(e),r=tm(e,ij);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?r1(r,n,t):[]});function n$(e){var t=null==e?0:e.length;return t?e[t-1]:n}var nZ=id(nX);function nX(e,t){return e&&e.length&&t&&t.length?il(e,t):e}var n0=ns(function(e,t){var r=null==e?0:e.length,i=rR(e,t);return ic(e,tm(t,function(e){return nw(e,r)?+e:e}).sort(iz)),i});function n1(e){return null==e?e:t8.call(e)}var n2=id(function(e){return iE(rV(e,1,sU,!0))}),n3=id(function(e){var t=n$(e);return sU(t)&&(t=n),iE(rV(e,1,sU,!0),np(t,2))}),n4=id(function(e){var t=n$(e);return t="function"==typeof t?t:n,iE(rV(e,1,sU,!0),n,t)});function n6(e){if(!(e&&e.length))return[];var t=0;return e=td(e,function(e){if(sU(e))return t=t2(e.length,t),!0}),tj(t,function(t){return tm(e,tA(t))})}function n5(e,t){if(!(e&&e.length))return[];var r=n6(e);return null==t?r:tm(r,function(e){return tl(t,n,e)})}var n8=id(function(e,t){return sU(e)?rP(e,t):[]}),n9=id(function(e){return iO(td(e,sU))}),n7=id(function(e){var t=n$(e);return sU(t)&&(t=n),iO(td(e,sU),np(t,2))}),se=id(function(e){var t=n$(e);return t="function"==typeof t?t:n,iO(td(e,sU),n,t)}),st=id(n6),sr=id(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,n5(e,r)});function si(e){var t=rf(e);return t.__chain__=!0,t}function sn(e,t){return t(e)}var ss=ns(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,s=function(t){return rR(t,e)};return!(t>1)&&!this.__actions__.length&&i instanceof rv&&nw(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:sn,args:[s],thisArg:n}),new ry(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(s)}),sa=iq(function(e,t,r){eR.call(e,r)?++e[r]:rj(e,r,1)}),so=i$(nq),sl=i$(nH);function sc(e,t){return(sD(e)?tu:rU)(e,np(t,3))}function su(e,t){return(sD(e)?function(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}:rz)(e,np(t,3))}var sp=iq(function(e,t,r){eR.call(e,r)?e[r].push(t):rj(e,r,[t])}),sd=id(function(e,t,r){var i=-1,n="function"==typeof t,s=sP(e)?ev(e.length):[];return rU(e,function(e){s[++i]=n?tl(t,e,r):r2(e,t,r)}),s}),sh=iq(function(e,t,r){rj(e,r,t)});function sf(e,t){return(sD(e)?tm:ie)(e,np(t,3))}var sm=iq(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),sg=id(function(e,t){if(null==e)return[];var r=t.length;return r>1&&nk(e,t[0],t[1])?t=[]:r>2&&nk(t[0],t[1],t[2])&&(t=[t[0]]),ia(e,rV(t,1),[])}),sy=te||function(){return e5.Date.now()};function sv(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,ne(e,128,n,n,n,n,t)}function sb(e,t){var r;if("function"!=typeof t)throw new eT(s);return e=s6(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var sx=id(function(e,t,r){var i=1;if(r.length){var n=tq(r,nu(sx));i|=32}return ne(e,i,t,r,n)}),sw=id(function(e,t,r){var i=3;if(r.length){var n=tq(r,nu(sw));i|=32}return ne(t,i,e,r,n)});function sk(e,t,r){var i,a,o,l,c,u,p=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new eT(s);function m(t){var r=i,s=a;return i=a=n,p=t,l=e.apply(s,r)}function g(e){var r=e-u,i=e-p;return n===u||r>=t||r<0||h&&i>=o}function y(){var e,r,i,n=sy();if(g(n))return v(n);c=nR(y,(e=n-u,r=n-p,i=t-e,h?t3(i,o-r):i))}function v(e){return(c=n,f&&i)?m(e):(i=a=n,l)}function b(){var e,r=sy(),s=g(r);if(i=arguments,a=this,u=r,s){if(n===c)return p=e=u,c=nR(y,t),d?m(e):l;if(h)return iD(c),c=nR(y,t),m(u)}return n===c&&(c=nR(y,t)),l}return t=s8(t)||0,sH(r)&&(d=!!r.leading,o=(h="maxWait"in r)?t2(s8(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),b.cancel=function(){n!==c&&iD(c),p=0,i=u=a=c=n},b.flush=function(){return n===c?l:v(sy())},b}var sS=id(function(e,t){return rL(e,1,t)}),sE=id(function(e,t,r){return rL(e,s8(t)||0,r)});function s_(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eT(s);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(s_.Cache||rw),r}function sT(e){if("function"!=typeof e)throw new eT(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}s_.Cache=rw;var sA=id(function(e,t){var r=(t=1==t.length&&sD(t[0])?tm(t[0],tN(np())):tm(rV(t,1),tN(np()))).length;return id(function(i){for(var n=-1,s=t3(i.length,r);++n<s;)i[n]=t[n].call(this,i[n]);return tl(e,this,i)})}),sI=id(function(e,t){var r=tq(t,nu(sI));return ne(e,32,n,t,r)}),sO=id(function(e,t){var r=tq(t,nu(sO));return ne(e,64,n,t,r)}),sC=ns(function(e,t){return ne(e,256,n,n,n,t)});function sj(e,t){return e===t||e!=e&&t!=t}var sR=i6(rZ),sN=i6(function(e,t){return e>=t}),sM=r3(function(){return arguments}())?r3:function(e){return sG(e)&&eR.call(e,"callee")&&!eY.call(e,"callee")},sD=ev.isArray,sL=tr?tN(tr):function(e){return sG(e)&&r$(e)==A};function sP(e){return null!=e&&sq(e.length)&&!sF(e)}function sU(e){return sG(e)&&sP(e)}var sz=tZ||a$,sB=ti?tN(ti):function(e){return sG(e)&&r$(e)==f};function sK(e){if(!sG(e))return!1;var t=r$(e);return t==m||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sW(e)}function sF(e){if(!sH(e))return!1;var t=r$(e);return t==g||t==y||"[object AsyncFunction]"==t||"[object Proxy]"==t}function sV(e){return"number"==typeof e&&e==s6(e)}function sq(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function sH(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function sG(e){return null!=e&&"object"==typeof e}var sY=tn?tN(tn):function(e){return sG(e)&&ny(e)==v};function sJ(e){return"number"==typeof e||sG(e)&&r$(e)==b}function sW(e){if(!sG(e)||r$(e)!=x)return!1;var t=eV(e);if(null===t)return!0;var r=eR.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ej.call(r)==eL}var sQ=ts?tN(ts):function(e){return sG(e)&&r$(e)==k},s$=ta?tN(ta):function(e){return sG(e)&&ny(e)==S};function sZ(e){return"string"==typeof e||!sD(e)&&sG(e)&&r$(e)==E}function sX(e){return"symbol"==typeof e||sG(e)&&r$(e)==_}var s0=to?tN(to):function(e){return sG(e)&&sq(e.length)&&!!eX[r$(e)]},s1=i6(r7),s2=i6(function(e,t){return e<=t});function s3(e){if(!e)return[];if(sP(e))return sZ(e)?tY(e):iF(e);if(e4&&e[e4])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[e4]());var t=ny(e);return(t==v?tF:t==S?tH:aw)(e)}function s4(e){return e?(e=s8(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function s6(e){var t=s4(e),r=t%1;return t==t?r?t-r:t:0}function s5(e){return e?rN(s6(e),0,0xffffffff):0}function s8(e){if("number"==typeof e)return e;if(sX(e))return c;if(sH(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=sH(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tR(e);var r=eu.test(e);return r||ed.test(e)?e3(e.slice(2),r?2:8):ec.test(e)?c:+e}function s9(e){return iV(e,ah(e))}function s7(e){return null==e?"":iS(e)}var ae=iH(function(e,t){if(nT(t)||sP(t)){iV(t,ad(t),e);return}for(var r in t)eR.call(t,r)&&rA(e,r,t[r])}),at=iH(function(e,t){iV(t,ah(t),e)}),ar=iH(function(e,t,r,i){iV(t,ah(t),e,i)}),ai=iH(function(e,t,r,i){iV(t,ad(t),e,i)}),an=ns(rR),as=id(function(e,t){e=eS(e);var r=-1,i=t.length,s=i>2?t[2]:n;for(s&&nk(t[0],t[1],s)&&(i=1);++r<i;)for(var a=t[r],o=ah(a),l=-1,c=o.length;++l<c;){var u=o[l],p=e[u];(n===p||sj(p,eO[u])&&!eR.call(e,u))&&(e[u]=a[u])}return e}),aa=id(function(e){return e.push(n,nr),tl(am,n,e)});function ao(e,t,r){var i=null==e?n:rW(e,t);return n===i?r:i}function al(e,t){return null!=e&&nv(e,t,r0)}var ac=i0(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eD.call(t)),e[t]=r},aD(aU)),au=i0(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eD.call(t)),eR.call(e,t)?e[t].push(r):e[t]=[r]},np),ap=id(r2);function ad(e){return sP(e)?rE(e):r9(e)}function ah(e){return sP(e)?rE(e,!0):function(e){if(!sH(e))return function(e){var t=[];if(null!=e)for(var r in eS(e))t.push(r);return t}(e);var t=nT(e),r=[];for(var i in e)"constructor"==i&&(t||!eR.call(e,i))||r.push(i);return r}(e)}var af=iH(function(e,t,r){ii(e,t,r)}),am=iH(function(e,t,r,i){ii(e,t,r,i)}),ag=ns(function(e,t){var r={};if(null==e)return r;var i=!1;t=tm(t,function(t){return t=iN(t,e),i||(i=t.length>1),t}),iV(e,no(e),r),i&&(r=rM(r,7,ni));for(var n=t.length;n--;)i_(r,t[n]);return r}),ay=ns(function(e,t){return null==e?{}:io(e,t,function(t,r){return al(e,r)})});function av(e,t){if(null==e)return{};var r=tm(no(e),function(e){return[e]});return t=np(t),io(e,r,function(e,r){return t(e,r[0])})}var ab=i7(ad),ax=i7(ah);function aw(e){return null==e?[]:tM(e,ad(e))}var ak=iW(function(e,t,r){return t=t.toLowerCase(),e+(r?aS(t):t)});function aS(e){return aj(s7(e).toLowerCase())}function aE(e){return(e=s7(e))&&e.replace(ef,tU).replace(eG,"")}var a_=iW(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),aT=iW(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),aA=iJ("toLowerCase"),aI=iW(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),aO=iW(function(e,t,r){return e+(r?" ":"")+aj(t)}),aC=iW(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),aj=iJ("toUpperCase");function aR(e,t,r){if(e=s7(e),t=r?n:t,n===t){var i;return(i=e,eQ.test(i))?e.match(eJ)||[]:e.match(en)||[]}return e.match(t)||[]}var aN=id(function(e,t){try{return tl(e,n,t)}catch(e){return sK(e)?e:new ex(e)}}),aM=ns(function(e,t){return tu(t,function(t){rj(e,t=nU(t),sx(e[t],e))}),e});function aD(e){return function(){return e}}var aL=iZ(),aP=iZ(!0);function aU(e){return e}function az(e){return r8("function"==typeof e?e:rM(e,1))}var aB=id(function(e,t){return function(r){return r2(r,e,t)}}),aK=id(function(e,t){return function(r){return r2(e,r,t)}});function aF(e,t,r){var i=ad(t),n=rJ(t,i);null!=r||sH(t)&&(n.length||!i.length)||(r=t,t=e,e=this,n=rJ(t,ad(t)));var s=!(sH(r)&&"chain"in r)||!!r.chain,a=sF(e);return tu(n,function(r){var i=t[r];e[r]=i,a&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=iF(this.__actions__)).push({func:i,args:arguments,thisArg:e}),r.__chain__=t,r}return i.apply(e,tg([this.value()],arguments))})}),e}function aV(){}var aq=i2(tm),aH=i2(tp),aG=i2(tb);function aY(e){return nS(e)?tA(nU(e)):function(t){return rW(t,e)}}var aJ=i4(),aW=i4(!0);function aQ(){return[]}function a$(){return!1}var aZ=i1(function(e,t){return e+t},0),aX=i8("ceil"),a0=i1(function(e,t){return e/t},1),a1=i8("floor"),a2=i1(function(e,t){return e*t},1),a3=i8("round"),a4=i1(function(e,t){return e-t},0);return rf.after=function(e,t){if("function"!=typeof t)throw new eT(s);return e=s6(e),function(){if(--e<1)return t.apply(this,arguments)}},rf.ary=sv,rf.assign=ae,rf.assignIn=at,rf.assignInWith=ar,rf.assignWith=ai,rf.at=an,rf.before=sb,rf.bind=sx,rf.bindAll=aM,rf.bindKey=sw,rf.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return sD(e)?e:[e]},rf.chain=si,rf.chunk=function(e,t,r){t=(r?nk(e,t,r):n===t)?1:t2(s6(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,a=0,o=ev(tx(i/t));s<i;)o[a++]=iy(e,s,s+=t);return o},rf.compact=function(e){for(var t=-1,r=null==e?0:e.length,i=0,n=[];++t<r;){var s=e[t];s&&(n[i++]=s)}return n},rf.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ev(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return tg(sD(r)?iF(r):[r],rV(t,1))},rf.cond=function(e){var t=null==e?0:e.length,r=np();return e=t?tm(e,function(e){if("function"!=typeof e[1])throw new eT(s);return[r(e[0]),e[1]]}):[],id(function(r){for(var i=-1;++i<t;){var n=e[i];if(tl(n[0],this,r))return tl(n[1],this,r)}})},rf.conforms=function(e){var t,r;return r=ad(t=rM(e,1)),function(e){return rD(e,t,r)}},rf.constant=aD,rf.countBy=sa,rf.create=function(e,t){var r=rm(e);return null==t?r:rC(r,t)},rf.curry=function e(t,r,i){r=i?n:r;var s=ne(t,8,n,n,n,n,n,r);return s.placeholder=e.placeholder,s},rf.curryRight=function e(t,r,i){r=i?n:r;var s=ne(t,16,n,n,n,n,n,r);return s.placeholder=e.placeholder,s},rf.debounce=sk,rf.defaults=as,rf.defaultsDeep=aa,rf.defer=sS,rf.delay=sE,rf.difference=nK,rf.differenceBy=nF,rf.differenceWith=nV,rf.drop=function(e,t,r){var i=null==e?0:e.length;return i?iy(e,(t=r||n===t?1:s6(t))<0?0:t,i):[]},rf.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?iy(e,0,(t=i-(t=r||n===t?1:s6(t)))<0?0:t):[]},rf.dropRightWhile=function(e,t){return e&&e.length?iA(e,np(t,3),!0,!0):[]},rf.dropWhile=function(e,t){return e&&e.length?iA(e,np(t,3),!0):[]},rf.fill=function(e,t,r,i){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&nk(e,t,r)&&(r=0,i=s),function(e,t,r,i){var s=e.length;for((r=s6(r))<0&&(r=-r>s?0:s+r),(i=n===i||i>s?s:s6(i))<0&&(i+=s),i=r>i?0:s5(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},rf.filter=function(e,t){return(sD(e)?td:rF)(e,np(t,3))},rf.flatMap=function(e,t){return rV(sf(e,t),1)},rf.flatMapDeep=function(e,t){return rV(sf(e,t),l)},rf.flatMapDepth=function(e,t,r){return r=n===r?1:s6(r),rV(sf(e,t),r)},rf.flatten=nG,rf.flattenDeep=function(e){return(null==e?0:e.length)?rV(e,l):[]},rf.flattenDepth=function(e,t){return(null==e?0:e.length)?rV(e,t=n===t?1:s6(t)):[]},rf.flip=function(e){return ne(e,512)},rf.flow=aL,rf.flowRight=aP,rf.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,i={};++t<r;){var n=e[t];i[n[0]]=n[1]}return i},rf.functions=function(e){return null==e?[]:rJ(e,ad(e))},rf.functionsIn=function(e){return null==e?[]:rJ(e,ah(e))},rf.groupBy=sp,rf.initial=function(e){return(null==e?0:e.length)?iy(e,0,-1):[]},rf.intersection=nJ,rf.intersectionBy=nW,rf.intersectionWith=nQ,rf.invert=ac,rf.invertBy=au,rf.invokeMap=sd,rf.iteratee=az,rf.keyBy=sh,rf.keys=ad,rf.keysIn=ah,rf.map=sf,rf.mapKeys=function(e,t){var r={};return t=np(t,3),rG(e,function(e,i,n){rj(r,t(e,i,n),e)}),r},rf.mapValues=function(e,t){var r={};return t=np(t,3),rG(e,function(e,i,n){rj(r,i,t(e,i,n))}),r},rf.matches=function(e){return it(rM(e,1))},rf.matchesProperty=function(e,t){return ir(e,rM(t,1))},rf.memoize=s_,rf.merge=af,rf.mergeWith=am,rf.method=aB,rf.methodOf=aK,rf.mixin=aF,rf.negate=sT,rf.nthArg=function(e){return e=s6(e),id(function(t){return is(t,e)})},rf.omit=ag,rf.omitBy=function(e,t){return av(e,sT(np(t)))},rf.once=function(e){return sb(2,e)},rf.orderBy=function(e,t,r,i){return null==e?[]:(sD(t)||(t=null==t?[]:[t]),sD(r=i?n:r)||(r=null==r?[]:[r]),ia(e,t,r))},rf.over=aq,rf.overArgs=sA,rf.overEvery=aH,rf.overSome=aG,rf.partial=sI,rf.partialRight=sO,rf.partition=sm,rf.pick=ay,rf.pickBy=av,rf.property=aY,rf.propertyOf=function(e){return function(t){return null==e?n:rW(e,t)}},rf.pull=nZ,rf.pullAll=nX,rf.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?il(e,t,np(r,2)):e},rf.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?il(e,t,n,r):e},rf.pullAt=n0,rf.range=aJ,rf.rangeRight=aW,rf.rearg=sC,rf.reject=function(e,t){return(sD(e)?td:rF)(e,sT(np(t,3)))},rf.remove=function(e,t){var r=[];if(!(e&&e.length))return r;var i=-1,n=[],s=e.length;for(t=np(t,3);++i<s;){var a=e[i];t(a,i,e)&&(r.push(a),n.push(i))}return ic(e,n),r},rf.rest=function(e,t){if("function"!=typeof e)throw new eT(s);return id(e,t=n===t?t:s6(t))},rf.reverse=n1,rf.sampleSize=function(e,t,r){return t=(r?nk(e,t,r):n===t)?1:s6(t),(sD(e)?function(e,t){return nL(iF(e),rN(t,0,e.length))}:function(e,t){var r=aw(e);return nL(r,rN(t,0,r.length))})(e,t)},rf.set=function(e,t,r){return null==e?e:ih(e,t,r)},rf.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ih(e,t,r,i)},rf.shuffle=function(e){return(sD(e)?function(e){return nL(iF(e))}:function(e){return nL(aw(e))})(e)},rf.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&nk(e,t,r)?(t=0,r=i):(t=null==t?0:s6(t),r=n===r?i:s6(r)),iy(e,t,r)):[]},rf.sortBy=sg,rf.sortedUniq=function(e){return e&&e.length?iw(e):[]},rf.sortedUniqBy=function(e,t){return e&&e.length?iw(e,np(t,2)):[]},rf.split=function(e,t,r){return(r&&"number"!=typeof r&&nk(e,t,r)&&(t=r=n),r=n===r?0xffffffff:r>>>0)?(e=s7(e))&&("string"==typeof t||null!=t&&!sQ(t))&&!(t=iS(t))&&tK(e)?iM(tY(e),0,r):e.split(t,r):[]},rf.spread=function(e,t){if("function"!=typeof e)throw new eT(s);return t=null==t?0:t2(s6(t),0),id(function(r){var i=r[t],n=iM(r,0,t);return i&&tg(n,i),tl(e,this,n)})},rf.tail=function(e){var t=null==e?0:e.length;return t?iy(e,1,t):[]},rf.take=function(e,t,r){return e&&e.length?iy(e,0,(t=r||n===t?1:s6(t))<0?0:t):[]},rf.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?iy(e,(t=i-(t=r||n===t?1:s6(t)))<0?0:t,i):[]},rf.takeRightWhile=function(e,t){return e&&e.length?iA(e,np(t,3),!1,!0):[]},rf.takeWhile=function(e,t){return e&&e.length?iA(e,np(t,3)):[]},rf.tap=function(e,t){return t(e),e},rf.throttle=function(e,t,r){var i=!0,n=!0;if("function"!=typeof e)throw new eT(s);return sH(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),sk(e,t,{leading:i,maxWait:t,trailing:n})},rf.thru=sn,rf.toArray=s3,rf.toPairs=ab,rf.toPairsIn=ax,rf.toPath=function(e){return sD(e)?tm(e,nU):sX(e)?[e]:iF(nP(s7(e)))},rf.toPlainObject=s9,rf.transform=function(e,t,r){var i=sD(e),n=i||sz(e)||s0(e);if(t=np(t,4),null==r){var s=e&&e.constructor;r=n?i?new s:[]:sH(e)&&sF(s)?rm(eV(e)):{}}return(n?tu:rG)(e,function(e,i,n){return t(r,e,i,n)}),r},rf.unary=function(e){return sv(e,1)},rf.union=n2,rf.unionBy=n3,rf.unionWith=n4,rf.uniq=function(e){return e&&e.length?iE(e):[]},rf.uniqBy=function(e,t){return e&&e.length?iE(e,np(t,2)):[]},rf.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?iE(e,n,t):[]},rf.unset=function(e,t){return null==e||i_(e,t)},rf.unzip=n6,rf.unzipWith=n5,rf.update=function(e,t,r){return null==e?e:iT(e,t,iR(r))},rf.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:iT(e,t,iR(r),i)},rf.values=aw,rf.valuesIn=function(e){return null==e?[]:tM(e,ah(e))},rf.without=n8,rf.words=aR,rf.wrap=function(e,t){return sI(iR(t),e)},rf.xor=n9,rf.xorBy=n7,rf.xorWith=se,rf.zip=st,rf.zipObject=function(e,t){return iC(e||[],t||[],rA)},rf.zipObjectDeep=function(e,t){return iC(e||[],t||[],ih)},rf.zipWith=sr,rf.entries=ab,rf.entriesIn=ax,rf.extend=at,rf.extendWith=ar,aF(rf,rf),rf.add=aZ,rf.attempt=aN,rf.camelCase=ak,rf.capitalize=aS,rf.ceil=aX,rf.clamp=function(e,t,r){return n===r&&(r=t,t=n),n!==r&&(r=(r=s8(r))==r?r:0),n!==t&&(t=(t=s8(t))==t?t:0),rN(s8(e),t,r)},rf.clone=function(e){return rM(e,4)},rf.cloneDeep=function(e){return rM(e,5)},rf.cloneDeepWith=function(e,t){return rM(e,5,t="function"==typeof t?t:n)},rf.cloneWith=function(e,t){return rM(e,4,t="function"==typeof t?t:n)},rf.conformsTo=function(e,t){return null==t||rD(e,t,ad(t))},rf.deburr=aE,rf.defaultTo=function(e,t){return null==e||e!=e?t:e},rf.divide=a0,rf.endsWith=function(e,t,r){e=s7(e),t=iS(t);var i=e.length,s=r=n===r?i:rN(s6(r),0,i);return(r-=t.length)>=0&&e.slice(r,s)==t},rf.eq=sj,rf.escape=function(e){return(e=s7(e))&&q.test(e)?e.replace(F,tz):e},rf.escapeRegExp=function(e){return(e=s7(e))&&Z.test(e)?e.replace($,"\\$&"):e},rf.every=function(e,t,r){var i=sD(e)?tp:rB;return r&&nk(e,t,r)&&(t=n),i(e,np(t,3))},rf.find=so,rf.findIndex=nq,rf.findKey=function(e,t){return tw(e,np(t,3),rG)},rf.findLast=sl,rf.findLastIndex=nH,rf.findLastKey=function(e,t){return tw(e,np(t,3),rY)},rf.floor=a1,rf.forEach=sc,rf.forEachRight=su,rf.forIn=function(e,t){return null==e?e:rq(e,np(t,3),ah)},rf.forInRight=function(e,t){return null==e?e:rH(e,np(t,3),ah)},rf.forOwn=function(e,t){return e&&rG(e,np(t,3))},rf.forOwnRight=function(e,t){return e&&rY(e,np(t,3))},rf.get=ao,rf.gt=sR,rf.gte=sN,rf.has=function(e,t){return null!=e&&nv(e,t,rX)},rf.hasIn=al,rf.head=nY,rf.identity=aU,rf.includes=function(e,t,r,i){e=sP(e)?e:aw(e),r=r&&!i?s6(r):0;var n=e.length;return r<0&&(r=t2(n+r,0)),sZ(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&tS(e,t,r)>-1},rf.indexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var n=null==r?0:s6(r);return n<0&&(n=t2(i+n,0)),tS(e,t,n)},rf.inRange=function(e,t,r){var i,s,a;return t=s4(t),n===r?(r=t,t=0):r=s4(r),(i=e=s8(e))>=t3(s=t,a=r)&&i<t2(s,a)},rf.invoke=ap,rf.isArguments=sM,rf.isArray=sD,rf.isArrayBuffer=sL,rf.isArrayLike=sP,rf.isArrayLikeObject=sU,rf.isBoolean=function(e){return!0===e||!1===e||sG(e)&&r$(e)==h},rf.isBuffer=sz,rf.isDate=sB,rf.isElement=function(e){return sG(e)&&1===e.nodeType&&!sW(e)},rf.isEmpty=function(e){if(null==e)return!0;if(sP(e)&&(sD(e)||"string"==typeof e||"function"==typeof e.splice||sz(e)||s0(e)||sM(e)))return!e.length;var t=ny(e);if(t==v||t==S)return!e.size;if(nT(e))return!r9(e).length;for(var r in e)if(eR.call(e,r))return!1;return!0},rf.isEqual=function(e,t){return r4(e,t)},rf.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return n===i?r4(e,t,n,r):!!i},rf.isError=sK,rf.isFinite=function(e){return"number"==typeof e&&tX(e)},rf.isFunction=sF,rf.isInteger=sV,rf.isLength=sq,rf.isMap=sY,rf.isMatch=function(e,t){return e===t||r6(e,t,nh(t))},rf.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,r6(e,t,nh(t),r)},rf.isNaN=function(e){return sJ(e)&&e!=+e},rf.isNative=function(e){if(n_(e))throw new ex("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r5(e)},rf.isNil=function(e){return null==e},rf.isNull=function(e){return null===e},rf.isNumber=sJ,rf.isObject=sH,rf.isObjectLike=sG,rf.isPlainObject=sW,rf.isRegExp=sQ,rf.isSafeInteger=function(e){return sV(e)&&e>=-0x1fffffffffffff&&e<=0x1fffffffffffff},rf.isSet=s$,rf.isString=sZ,rf.isSymbol=sX,rf.isTypedArray=s0,rf.isUndefined=function(e){return n===e},rf.isWeakMap=function(e){return sG(e)&&ny(e)==T},rf.isWeakSet=function(e){return sG(e)&&"[object WeakSet]"==r$(e)},rf.join=function(e,t){return null==e?"":t0.call(e,t)},rf.kebabCase=a_,rf.last=n$,rf.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var s=i;return n!==r&&(s=(s=s6(r))<0?t2(i+s,0):t3(s,i-1)),t==t?function(e,t,r){for(var i=r+1;i--&&e[i]!==t;);return i}(e,t,s):tk(e,t_,s,!0)},rf.lowerCase=aT,rf.lowerFirst=aA,rf.lt=s1,rf.lte=s2,rf.max=function(e){return e&&e.length?rK(e,aU,rZ):n},rf.maxBy=function(e,t){return e&&e.length?rK(e,np(t,2),rZ):n},rf.mean=function(e){return tT(e,aU)},rf.meanBy=function(e,t){return tT(e,np(t,2))},rf.min=function(e){return e&&e.length?rK(e,aU,r7):n},rf.minBy=function(e,t){return e&&e.length?rK(e,np(t,2),r7):n},rf.stubArray=aQ,rf.stubFalse=a$,rf.stubObject=function(){return{}},rf.stubString=function(){return""},rf.stubTrue=function(){return!0},rf.multiply=a2,rf.nth=function(e,t){return e&&e.length?is(e,s6(t)):n},rf.noConflict=function(){return e5._===this&&(e5._=eP),this},rf.noop=aV,rf.now=sy,rf.pad=function(e,t,r){e=s7(e);var i=(t=s6(t))?tG(e):0;if(!t||i>=t)return e;var n=(t-i)/2;return i3(tI(n),r)+e+i3(tx(n),r)},rf.padEnd=function(e,t,r){e=s7(e);var i=(t=s6(t))?tG(e):0;return t&&i<t?e+i3(t-i,r):e},rf.padStart=function(e,t,r){e=s7(e);var i=(t=s6(t))?tG(e):0;return t&&i<t?i3(t-i,r)+e:e},rf.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),t6(s7(e).replace(X,""),t||0)},rf.random=function(e,t,r){if(r&&"boolean"!=typeof r&&nk(e,t,r)&&(t=r=n),n===r&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),n===e&&n===t?(e=0,t=1):(e=s4(e),n===t?(t=e,e=0):t=s4(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var s=t5();return t3(e+s*(t-e+e2("1e-"+((s+"").length-1))),t)}return iu(e,t)},rf.reduce=function(e,t,r){var i=sD(e)?ty:tO,n=arguments.length<3;return i(e,np(t,4),r,n,rU)},rf.reduceRight=function(e,t,r){var i=sD(e)?tv:tO,n=arguments.length<3;return i(e,np(t,4),r,n,rz)},rf.repeat=function(e,t,r){return t=(r?nk(e,t,r):n===t)?1:s6(t),ip(s7(e),t)},rf.replace=function(){var e=arguments,t=s7(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rf.result=function(e,t,r){t=iN(t,e);var i=-1,s=t.length;for(s||(s=1,e=n);++i<s;){var a=null==e?n:e[nU(t[i])];n===a&&(i=s,a=r),e=sF(a)?a.call(e):a}return e},rf.round=a3,rf.runInContext=e,rf.sample=function(e){return(sD(e)?r_:function(e){return r_(aw(e))})(e)},rf.size=function(e){if(null==e)return 0;if(sP(e))return sZ(e)?tG(e):e.length;var t=ny(e);return t==v||t==S?e.size:r9(e).length},rf.snakeCase=aI,rf.some=function(e,t,r){var i=sD(e)?tb:iv;return r&&nk(e,t,r)&&(t=n),i(e,np(t,3))},rf.sortedIndex=function(e,t){return ib(e,t)},rf.sortedIndexBy=function(e,t,r){return ix(e,t,np(r,2))},rf.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var i=ib(e,t);if(i<r&&sj(e[i],t))return i}return -1},rf.sortedLastIndex=function(e,t){return ib(e,t,!0)},rf.sortedLastIndexBy=function(e,t,r){return ix(e,t,np(r,2),!0)},rf.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ib(e,t,!0)-1;if(sj(e[r],t))return r}return -1},rf.startCase=aO,rf.startsWith=function(e,t,r){return e=s7(e),r=null==r?0:rN(s6(r),0,e.length),t=iS(t),e.slice(r,r+t.length)==t},rf.subtract=a4,rf.sum=function(e){return e&&e.length?tC(e,aU):0},rf.sumBy=function(e,t){return e&&e.length?tC(e,np(t,2)):0},rf.template=function(e,t,r){var i=rf.templateSettings;r&&nk(e,t,r)&&(t=n),e=s7(e),t=ar({},t,i,nt);var s,a,o=ar({},t.imports,i.imports,nt),l=ad(o),c=tM(o,l),u=0,p=t.interpolate||em,d="__p += '",h=eE((t.escape||em).source+"|"+p.source+"|"+(p===Y?eo:em).source+"|"+(t.evaluate||em).source+"|$","g"),f="//# sourceURL="+(eR.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eZ+"]")+"\n";e.replace(h,function(t,r,i,n,o,l){return i||(i=n),d+=e.slice(u,l).replace(eg,tB),r&&(s=!0,d+="' +\n__e("+r+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),d+="';\n";var m=eR.call(t,"variable")&&t.variable;if(m){if(es.test(m))throw new ex("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace(z,"$1").replace(B,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=aN(function(){return ew(l,f+"return "+d).apply(n,c)});if(g.source=d,sK(g))throw g;return g},rf.times=function(e,t){if((e=s6(e))<1||e>0x1fffffffffffff)return[];var r=0xffffffff,i=t3(e,0xffffffff);t=np(t),e-=0xffffffff;for(var n=tj(i,t);++r<e;)t(r);return n},rf.toFinite=s4,rf.toInteger=s6,rf.toLength=s5,rf.toLower=function(e){return s7(e).toLowerCase()},rf.toNumber=s8,rf.toSafeInteger=function(e){return e?rN(s6(e),-0x1fffffffffffff,0x1fffffffffffff):0===e?e:0},rf.toString=s7,rf.toUpper=function(e){return s7(e).toUpperCase()},rf.trim=function(e,t,r){if((e=s7(e))&&(r||n===t))return tR(e);if(!e||!(t=iS(t)))return e;var i=tY(e),s=tY(t),a=tL(i,s),o=tP(i,s)+1;return iM(i,a,o).join("")},rf.trimEnd=function(e,t,r){if((e=s7(e))&&(r||n===t))return e.slice(0,tJ(e)+1);if(!e||!(t=iS(t)))return e;var i=tY(e),s=tP(i,tY(t))+1;return iM(i,0,s).join("")},rf.trimStart=function(e,t,r){if((e=s7(e))&&(r||n===t))return e.replace(X,"");if(!e||!(t=iS(t)))return e;var i=tY(e),s=tL(i,tY(t));return iM(i,s).join("")},rf.truncate=function(e,t){var r=30,i="...";if(sH(t)){var s="separator"in t?t.separator:s;r="length"in t?s6(t.length):r,i="omission"in t?iS(t.omission):i}var a=(e=s7(e)).length;if(tK(e)){var o=tY(e);a=o.length}if(r>=a)return e;var l=r-tG(i);if(l<1)return i;var c=o?iM(o,0,l).join(""):e.slice(0,l);if(n===s)return c+i;if(o&&(l+=c.length-l),sQ(s)){if(e.slice(l).search(s)){var u,p=c;for(s.global||(s=eE(s.source,s7(el.exec(s))+"g")),s.lastIndex=0;u=s.exec(p);)var d=u.index;c=c.slice(0,n===d?l:d)}}else if(e.indexOf(iS(s),l)!=l){var h=c.lastIndexOf(s);h>-1&&(c=c.slice(0,h))}return c+i},rf.unescape=function(e){return(e=s7(e))&&V.test(e)?e.replace(K,tW):e},rf.uniqueId=function(e){var t=++eN;return s7(e)+t},rf.upperCase=aC,rf.upperFirst=aj,rf.each=sc,rf.eachRight=su,rf.first=nY,aF(rf,(ey={},rG(rf,function(e,t){eR.call(rf.prototype,t)||(ey[t]=e)}),ey),{chain:!1}),rf.VERSION="4.17.21",tu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rf[e].placeholder=rf}),tu(["drop","take"],function(e,t){rv.prototype[e]=function(r){r=n===r?1:t2(s6(r),0);var i=this.__filtered__&&!t?new rv(this):this.clone();return i.__filtered__?i.__takeCount__=t3(r,i.__takeCount__):i.__views__.push({size:t3(r,0xffffffff),type:e+(i.__dir__<0?"Right":"")}),i},rv.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tu(["filter","map","takeWhile"],function(e,t){var r=t+1,i=1==r||3==r;rv.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:np(e,3),type:r}),t.__filtered__=t.__filtered__||i,t}}),tu(["head","last"],function(e,t){var r="take"+(t?"Right":"");rv.prototype[e]=function(){return this[r](1).value()[0]}}),tu(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");rv.prototype[e]=function(){return this.__filtered__?new rv(this):this[r](1)}}),rv.prototype.compact=function(){return this.filter(aU)},rv.prototype.find=function(e){return this.filter(e).head()},rv.prototype.findLast=function(e){return this.reverse().find(e)},rv.prototype.invokeMap=id(function(e,t){return"function"==typeof e?new rv(this):this.map(function(r){return r2(r,e,t)})}),rv.prototype.reject=function(e){return this.filter(sT(np(e)))},rv.prototype.slice=function(e,t){e=s6(e);var r=this;return r.__filtered__&&(e>0||t<0)?new rv(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(t=s6(t))<0?r.dropRight(-t):r.take(t-e)),r)},rv.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rv.prototype.toArray=function(){return this.take(0xffffffff)},rG(rv.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=rf[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);s&&(rf.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof rv,c=o[0],u=l||sD(t),p=function(e){var t=s.apply(rf,tg([e],o));return i&&d?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,h=!!this.__actions__.length,f=a&&!d,m=l&&!h;if(!a&&u){t=m?t:new rv(this);var g=e.apply(t,o);return g.__actions__.push({func:sn,args:[p],thisArg:n}),new ry(g,d)}return f&&m?e.apply(this,o):(g=this.thru(p),f?i?g.value()[0]:g.value():g)})}),tu(["pop","push","shift","sort","splice","unshift"],function(e){var t=eA[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);rf.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(sD(n)?n:[],e)}return this[r](function(r){return t.apply(sD(r)?r:[],e)})}}),rG(rv.prototype,function(e,t){var r=rf[t];if(r){var i=r.name+"";eR.call(rs,i)||(rs[i]=[]),rs[i].push({name:t,func:r})}}),rs[iX(n,2).name]=[{name:"wrapper",func:n}],rv.prototype.clone=function(){var e=new rv(this.__wrapped__);return e.__actions__=iF(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=iF(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=iF(this.__views__),e},rv.prototype.reverse=function(){if(this.__filtered__){var e=new rv(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},rv.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=sD(e),i=t<0,n=r?e.length:0,s=function(e,t,r){for(var i=-1,n=r.length;++i<n;){var s=r[i],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=t3(t,e+a);break;case"takeRight":e=t2(e,t-a)}}return{start:e,end:t}}(0,n,this.__views__),a=s.start,o=s.end,l=o-a,c=i?o:a-1,u=this.__iteratees__,p=u.length,d=0,h=t3(l,this.__takeCount__);if(!r||!i&&n==l&&h==l)return iI(e,this.__actions__);var f=[];e:for(;l--&&d<h;){for(var m=-1,g=e[c+=t];++m<p;){var y=u[m],v=y.iteratee,b=y.type,x=v(g);if(2==b)g=x;else if(!x){if(1==b)continue e;break e}}f[d++]=g}return f},rf.prototype.at=ss,rf.prototype.chain=function(){return si(this)},rf.prototype.commit=function(){return new ry(this.value(),this.__chain__)},rf.prototype.next=function(){this.__values__===n&&(this.__values__=s3(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}},rf.prototype.plant=function(e){for(var t,r=this;r instanceof rg;){var i=nB(r);i.__index__=0,i.__values__=n,t?s.__wrapped__=i:t=i;var s=i;r=r.__wrapped__}return s.__wrapped__=e,t},rf.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rv){var t=e;return this.__actions__.length&&(t=new rv(this)),(t=t.reverse()).__actions__.push({func:sn,args:[n1],thisArg:n}),new ry(t,this.__chain__)}return this.thru(n1)},rf.prototype.toJSON=rf.prototype.valueOf=rf.prototype.value=function(){return iI(this.__wrapped__,this.__actions__)},rf.prototype.first=rf.prototype.head,e4&&(rf.prototype[e4]=function(){return this}),rf}();e5._=tQ,n!==(i=(function(){return tQ}).call(t,r,t,e))&&(e.exports=i)}).call(this)},81105:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0});class i extends Error{}class n extends i{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class s extends i{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class a extends i{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class o extends i{}class l extends i{constructor(e){super(`Invalid unit ${e}`)}}class c extends i{}class u extends i{constructor(){super("Zone is an abstract class")}}let p="numeric",d="short",h="long",f={year:p,month:p,day:p},m={year:p,month:d,day:p},g={year:p,month:d,day:p,weekday:d},y={year:p,month:h,day:p},v={year:p,month:h,day:p,weekday:h},b={hour:p,minute:p},x={hour:p,minute:p,second:p},w={hour:p,minute:p,second:p,timeZoneName:d},k={hour:p,minute:p,second:p,timeZoneName:h},S={hour:p,minute:p,hourCycle:"h23"},E={hour:p,minute:p,second:p,hourCycle:"h23"},_={hour:p,minute:p,second:p,hourCycle:"h23",timeZoneName:d},T={hour:p,minute:p,second:p,hourCycle:"h23",timeZoneName:h},A={year:p,month:p,day:p,hour:p,minute:p},I={year:p,month:p,day:p,hour:p,minute:p,second:p},O={year:p,month:d,day:p,hour:p,minute:p},C={year:p,month:d,day:p,hour:p,minute:p,second:p},j={year:p,month:d,day:p,weekday:d,hour:p,minute:p},R={year:p,month:h,day:p,hour:p,minute:p,timeZoneName:d},N={year:p,month:h,day:p,hour:p,minute:p,second:p,timeZoneName:d},M={year:p,month:h,day:p,weekday:h,hour:p,minute:p,timeZoneName:h},D={year:p,month:h,day:p,weekday:h,hour:p,minute:p,second:p,timeZoneName:h};class L{get type(){throw new u}get name(){throw new u}get ianaName(){return this.name}get isUniversal(){throw new u}offsetName(e,t){throw new u}formatOffset(e,t){throw new u}offset(e){throw new u}equals(e){throw new u}get isValid(){throw new u}}let P=null;class U extends L{static get instance(){return null===P&&(P=new U),P}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return e3(e,t,r)}formatOffset(e,t){return e8(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let z=new Map,B={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},K=new Map;class F extends L{static create(e){let t=K.get(e);return void 0===t&&K.set(e,t=new F(e)),t}static resetCache(){K.clear(),z.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=F.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return e3(e,t,r,this.name)}formatOffset(e,t){return e8(this.offset(e),t)}offset(e){var t;let r;if(!this.valid)return NaN;let i=new Date(e);if(isNaN(i))return NaN;let n=(t=this.name,void 0===(r=z.get(t))&&(r=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),z.set(t,r)),r),[s,a,o,l,c,u,p]=n.formatToParts?function(e,t){let r=e.formatToParts(t),i=[];for(let e=0;e<r.length;e++){let{type:t,value:n}=r[e],s=B[t];"era"===t?i[s]=n:eL(s)||(i[s]=parseInt(n,10))}return i}(n,i):function(e,t){let r=e.format(t).replace(/\u200E/g,""),[,i,n,s,a,o,l,c]=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r);return[s,i,n,a,o,l,c]}(n,i);"BC"===l&&(s=-Math.abs(s)+1);let d=eX({year:s,month:a,day:o,hour:24===c?0:c,minute:u,second:p,millisecond:0}),h=+i,f=h%1e3;return(d-(h-=f>=0?f:1e3+f))/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let V={},q=new Map;function H(e,t={}){let r=JSON.stringify([e,t]),i=q.get(r);return void 0===i&&(i=new Intl.DateTimeFormat(e,t),q.set(r,i)),i}let G=new Map,Y=new Map,J=null,W=new Map;function Q(e){let t=W.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),W.set(e,t)),t}let $=new Map;function Z(e,t,r,i){let n=e.listingMode();return"error"===n?null:"en"===n?r(t):i(t)}class X{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:n,...s}=r;if(!t||Object.keys(s).length>0){let t={useGrouping:!1,...r};r.padTo>0&&(t.minimumIntegerDigits=r.padTo),this.inf=function(e,t={}){let r=JSON.stringify([e,t]),i=G.get(r);return void 0===i&&(i=new Intl.NumberFormat(e,t),G.set(r,i)),i}(e,t)}}format(e){if(!this.inf)return eH(this.floor?Math.floor(e):eW(e,3),this.padTo);{let t=this.floor?Math.floor(e):e;return this.inf.format(t)}}}class ee{constructor(e,t,r){let i;if(this.opts=r,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){let t=-1*(e.offset/60),r=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&F.create(r).valid?(i=r,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let n={...this.opts};n.timeZone=n.timeZone||i,this.dtf=H(t,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"!==e.type)return e;{let t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class et{constructor(e,t,r){this.opts={style:"long",...r},!t&&ez()&&(this.rtf=function(e,t={}){let{base:r,...i}=t,n=JSON.stringify([e,i]),s=Y.get(n);return void 0===s&&(s=new Intl.RelativeTimeFormat(e,t),Y.set(n,s)),s}(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,r="always",i=!1){let n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===r&&s){let r="days"===e;switch(t){case 1:return r?"tomorrow":`next ${n[e][0]}`;case -1:return r?"yesterday":`last ${n[e][0]}`;case 0:return r?"today":`this ${n[e][0]}`}}let a=Object.is(t,-0)||t<0,o=Math.abs(t),l=1===o,c=n[e],u=i?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return a?`${o} ${u} ago`:`in ${o} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}let er={firstDay:1,minimalDays:4,weekend:[6,7]};class ei{static fromOpts(e){return ei.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,n=!1){let s=e||ew.defaultLocale,a=s||(n?"en-US":J||(J=new Intl.DateTimeFormat().resolvedOptions().locale));return new ei(a,t||ew.defaultNumberingSystem,r||ew.defaultOutputCalendar,eV(i)||ew.defaultWeekSettings,s)}static resetCache(){J=null,q.clear(),G.clear(),Y.clear(),W.clear(),$.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return ei.create(e,t,r,i)}constructor(e,t,r,i,n){let[s,a,o]=function(e){let t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));let r=e.indexOf("-u-");if(-1===r)return[e];{let t,i;try{t=H(e).resolvedOptions(),i=e}catch(s){let n=e.substring(0,r);t=H(n).resolvedOptions(),i=n}let{numberingSystem:n,calendar:s}=t;return[i,n,s]}}(e);this.locale=s,this.numberingSystem=t||a||null,this.outputCalendar=r||o||null,this.weekSettings=i,this.intl=function(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=(!this.numberingSystem||"latn"===this.numberingSystem)&&("latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===Q(this.locale).numberingSystem)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?ei.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,eV(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Z(this,e,tr,()=>{let r="ja"===this.intl||this.intl.startsWith("ja-"),i=(t&=!r)?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";if(!this.monthsCache[n][e]){let t=r?e=>this.dtFormatter(e,i).format():e=>this.extract(e,i,"month");this.monthsCache[n][e]=function(e){let t=[];for(let r=1;r<=12;r++){let i=rY.utc(2009,r,1);t.push(e(i))}return t}(t)}return this.monthsCache[n][e]})}weekdays(e,t=!1){return Z(this,e,ta,()=>{let r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=function(e){let t=[];for(let r=1;r<=7;r++){let i=rY.utc(2016,11,13+r);t.push(e(i))}return t}(e=>this.extract(e,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Z(this,void 0,()=>to,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[rY.utc(2016,11,13,9),rY.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Z(this,e,tp,()=>{let t={era:e};return this.eraCache[e]||(this.eraCache[e]=[rY.utc(-40,1,1),rY.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,r){let i=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===r);return i?i.value:null}numberFormatter(e={}){return new X(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new ee(e,this.intl,t)}relFormatter(e={}){return new et(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){let r=JSON.stringify([e,t]),i=V[r];return i||(i=new Intl.ListFormat(e,t),V[r]=i),i}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||Q(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:eB()?function(e){let t=$.get(e);if(!t){let r=new Intl.Locale(e);"minimalDays"in(t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo)||(t={...er,...t}),$.set(e,t)}return t}(this.locale):er}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let en=null;class es extends L{static get utcInstance(){return null===en&&(en=new es(0)),en}static instance(e){return 0===e?es.utcInstance:new es(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new es(e4(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${e8(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${e8(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return e8(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class ea extends L{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function eo(e,t){if(eL(e)||null===e)return t;if(e instanceof L)return e;if("string"==typeof e){let r=e.toLowerCase();return"default"===r?t:"local"===r||"system"===r?U.instance:"utc"===r||"gmt"===r?es.utcInstance:es.parseSpecifier(r)||F.create(e)}return eP(e)?es.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new ea(e)}let el={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},ec={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},eu=el.hanidec.replace(/[\[|\]]/g,"").split(""),ep=new Map;function ed({numberingSystem:e},t=""){let r=e||"latn",i=ep.get(r);void 0===i&&(i=new Map,ep.set(r,i));let n=i.get(t);return void 0===n&&(n=RegExp(`${el[r]}${t}`),i.set(t,n)),n}let eh=()=>Date.now(),ef="system",em=null,eg=null,ey=null,ev=60,eb,ex=null;class ew{static get now(){return eh}static set now(e){eh=e}static set defaultZone(e){ef=e}static get defaultZone(){return eo(ef,U.instance)}static get defaultLocale(){return em}static set defaultLocale(e){em=e}static get defaultNumberingSystem(){return eg}static set defaultNumberingSystem(e){eg=e}static get defaultOutputCalendar(){return ey}static set defaultOutputCalendar(e){ey=e}static get defaultWeekSettings(){return ex}static set defaultWeekSettings(e){ex=eV(e)}static get twoDigitCutoffYear(){return ev}static set twoDigitCutoffYear(e){ev=e%100}static get throwOnInvalid(){return eb}static set throwOnInvalid(e){eb=e}static resetCaches(){ei.resetCache(),F.resetCache(),rY.resetCache(),ep.clear()}}class ek{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}let eS=[0,31,59,90,120,151,181,212,243,273,304,334],eE=[0,31,60,91,121,152,182,213,244,274,305,335];function e_(e,t){return new ek("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function eT(e,t,r){let i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);let n=i.getUTCDay();return 0===n?7:n}function eA(e,t){let r=eQ(e)?eE:eS,i=r.findIndex(e=>e<t),n=t-r[i];return{month:i+1,day:n}}function eI(e,t){return(e-t+7)%7+1}function eO(e,t=4,r=1){let{year:i,month:n,day:s}=e,a=s+(eQ(i)?eE:eS)[n-1],o=eI(eT(i,n,s),r),l=Math.floor((a-o+14-t)/7),c;return l<1?l=e1(c=i-1,t,r):l>e1(i,t,r)?(c=i+1,l=1):c=i,{weekYear:c,weekNumber:l,weekday:o,...e9(e)}}function eC(e,t=4,r=1){let{weekYear:i,weekNumber:n,weekday:s}=e,a=eI(eT(i,1,t),r),o=e$(i),l=7*n+s-a-7+t,c;l<1?l+=e$(c=i-1):l>o?(c=i+1,l-=e$(i)):c=i;let{month:u,day:p}=eA(c,l);return{year:c,month:u,day:p,...e9(e)}}function ej(e){let{year:t,month:r,day:i}=e,n=i+(eQ(t)?eE:eS)[r-1];return{year:t,ordinal:n,...e9(e)}}function eR(e){let{year:t,ordinal:r}=e,{month:i,day:n}=eA(t,r);return{year:t,month:i,day:n,...e9(e)}}function eN(e,t){if(!(!eL(e.localWeekday)||!eL(e.localWeekNumber)||!eL(e.localWeekYear)))return{minDaysInFirstWeek:4,startOfWeek:1};if(!eL(e.weekday)||!eL(e.weekNumber)||!eL(e.weekYear))throw new o("Cannot mix locale-based week fields with ISO-based week fields");return eL(e.localWeekday)||(e.weekday=e.localWeekday),eL(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),eL(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}function eM(e){let t=eU(e.year),r=eq(e.month,1,12),i=eq(e.day,1,eZ(e.year,e.month));return t?r?!i&&e_("day",e.day):e_("month",e.month):e_("year",e.year)}function eD(e){let{hour:t,minute:r,second:i,millisecond:n}=e,s=eq(t,0,23)||24===t&&0===r&&0===i&&0===n,a=eq(r,0,59),o=eq(i,0,59),l=eq(n,0,999);return s?a?o?!l&&e_("millisecond",n):e_("second",i):e_("minute",r):e_("hour",t)}function eL(e){return void 0===e}function eP(e){return"number"==typeof e}function eU(e){return"number"==typeof e&&e%1==0}function ez(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function eB(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function eK(e,t,r){if(0!==e.length)return e.reduce((e,i)=>{let n=[t(i),i];return e&&r(e[0],n[0])===e[0]?e:n},null)[1]}function eF(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function eV(e){if(null==e)return null;if("object"!=typeof e)throw new c("Week settings must be an object");if(!eq(e.firstDay,1,7)||!eq(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!eq(e,1,7)))throw new c("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function eq(e,t,r){return eU(e)&&e>=t&&e<=r}function eH(e,t=2){return e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0")}function eG(e){if(!eL(e)&&null!==e&&""!==e)return parseInt(e,10)}function eY(e){if(!eL(e)&&null!==e&&""!==e)return parseFloat(e)}function eJ(e){if(!eL(e)&&null!==e&&""!==e)return Math.floor(1e3*parseFloat("0."+e))}function eW(e,t,r="round"){let i=10**t;switch(r){case"expand":return e>0?Math.ceil(e*i)/i:Math.floor(e*i)/i;case"trunc":return Math.trunc(e*i)/i;case"round":return Math.round(e*i)/i;case"floor":return Math.floor(e*i)/i;case"ceil":return Math.ceil(e*i)/i;default:throw RangeError(`Value rounding ${r} is out of range`)}}function eQ(e){return e%4==0&&(e%100!=0||e%400==0)}function e$(e){return eQ(e)?366:365}function eZ(e,t){var r;let i=(r=t-1)-12*Math.floor(r/12)+1;return 2===i?eQ(e+(t-i)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function eX(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(e.year,e.month-1,e.day),+t}function e0(e,t,r){return-eI(eT(e,1,t),r)+t-1}function e1(e,t=4,r=1){let i=e0(e,t,r),n=e0(e+1,t,r);return(e$(e)-i+n)/7}function e2(e){return e>99?e:e>ew.twoDigitCutoffYear?1900+e:2e3+e}function e3(e,t,r,i=null){let n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);let a={timeZoneName:t,...s},o=new Intl.DateTimeFormat(r,a).formatToParts(n).find(e=>"timezonename"===e.type.toLowerCase());return o?o.value:null}function e4(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);let i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return 60*r+n}function e6(e){let t=Number(e);if("boolean"==typeof e||""===e||!Number.isFinite(t))throw new c(`Invalid unit value ${e}`);return t}function e5(e,t){let r={};for(let i in e)if(eF(e,i)){let n=e[i];if(null==n)continue;r[t(i)]=e6(n)}return r}function e8(e,t){let r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${eH(r,2)}:${eH(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${eH(r,2)}${eH(i,2)}`;default:throw RangeError(`Value format ${t} is out of range for property format`)}}function e9(e){return["hour","minute","second","millisecond"].reduce((t,r)=>(t[r]=e[r],t),{})}let e7=["January","February","March","April","May","June","July","August","September","October","November","December"],te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tt=["J","F","M","A","M","J","J","A","S","O","N","D"];function tr(e){switch(e){case"narrow":return[...tt];case"short":return[...te];case"long":return[...e7];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}let ti=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],tn=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ts=["M","T","W","T","F","S","S"];function ta(e){switch(e){case"narrow":return[...ts];case"short":return[...tn];case"long":return[...ti];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}let to=["AM","PM"],tl=["Before Christ","Anno Domini"],tc=["BC","AD"],tu=["B","A"];function tp(e){switch(e){case"narrow":return[...tu];case"short":return[...tc];case"long":return[...tl];default:return null}}function td(e,t){let r="";for(let i of e)i.literal?r+=i.val:r+=t(i.val);return r}let th={D:f,DD:m,DDD:y,DDDD:v,t:b,tt:x,ttt:w,tttt:k,T:S,TT:E,TTT:_,TTTT:T,f:A,ff:O,fff:R,ffff:M,F:I,FF:C,FFF:N,FFFF:D};class tf{static create(e,t={}){return new tf(e,t)}static parseFormat(e){let t=null,r="",i=!1,n=[];for(let s=0;s<e.length;s++){let a=e.charAt(s);"'"===a?((r.length>0||i)&&n.push({literal:i||/^\s+$/.test(r),val:""===r?"'":r}),t=null,r="",i=!i):i?r+=a:a===t?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&n.push({literal:i||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return th[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,r){if(this.opts.forceSimple)return eH(e,t);let i={...this.opts};return t>0&&(i.padTo=t),r&&(i.signDisplay=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){let r="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,n=(t,r)=>this.loc.extract(e,t,r),s=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",a=()=>r?to[e.hour<12?0:1]:n({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(t,i)=>r?tr(t)[e.month-1]:n(i?{month:t}:{month:t,day:"numeric"},"month"),l=(t,i)=>r?ta(t)[e.weekday-1]:n(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{let r=tf.macroTokenToFormatOpts(t);return r?this.formatWithSystemDefault(e,r):t},u=t=>r?tp(t)[e.year<0?0:1]:n({era:t},"era");return td(tf.parseFormat(t),t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?n({day:"numeric"},"day"):this.num(e.day);case"dd":return i?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return i?n({month:"numeric"},"month"):this.num(e.month);case"MM":return i?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return i?n({year:"numeric"},"year"):this.num(e.year);case"yy":return i?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}})}formatDurationFromString(e,t){let r="negativeLargestOnly"===this.opts.signMode?-1:1,i=e=>{switch(e[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},n=tf.parseFormat(t),s=n.reduce((e,{literal:t,val:r})=>t?e:e.concat(r),[]),a=e.shiftTo(...s.map(i).filter(e=>e)),o={isNegativeDuration:a<0,largestUnit:Object.keys(a.values)[0]};return td(n,e=>{let t=i(e);if(!t)return e;{let i;let n=o.isNegativeDuration&&t!==o.largestUnit?r:1;return i="negativeLargestOnly"===this.opts.signMode&&t!==o.largestUnit?"never":"all"===this.opts.signMode?"always":"auto",this.num(a.get(t)*n,e.length,i)}})}}let tm=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function tg(...e){let t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function ty(...e){return t=>e.reduce(([e,r,i],n)=>{let[s,a,o]=n(t,i);return[{...e,...s},a||r,o]},[{},null,1]).slice(0,2)}function tv(e,...t){if(null==e)return[null,null];for(let[r,i]of t){let t=r.exec(e);if(t)return i(t)}return[null,null]}function tb(...e){return(t,r)=>{let i;let n={};for(i=0;i<e.length;i++)n[e[i]]=eG(t[r+i]);return[n,null,r+i]}}let tx=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,tw=`(?:${tx.source}?(?:\\[(${tm.source})\\])?)?`,tk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,tS=RegExp(`${tk.source}${tw}`),tE=RegExp(`(?:[Tt]${tS.source})?`),t_=tb("weekYear","weekNumber","weekDay"),tT=tb("year","ordinal"),tA=RegExp(`${tk.source} ?(?:${tx.source}|(${tm.source}))?`),tI=RegExp(`(?: ${tA.source})?`);function tO(e,t,r){let i=e[t];return eL(i)?r:eG(i)}function tC(e,t){return[{hours:tO(e,t,0),minutes:tO(e,t+1,0),seconds:tO(e,t+2,0),milliseconds:eJ(e[t+3])},null,t+4]}function tj(e,t){let r=!e[t]&&!e[t+1],i=e4(e[t+1],e[t+2]);return[{},r?null:es.instance(i),t+3]}function tR(e,t){return[{},e[t]?F.create(e[t]):null,t+1]}let tN=RegExp(`^T?${tk.source}$`),tM=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function tD(e){let[t,r,i,n,s,a,o,l,c]=e,u="-"===t[0],p=l&&"-"===l[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(eY(r)),months:d(eY(i)),weeks:d(eY(n)),days:d(eY(s)),hours:d(eY(a)),minutes:d(eY(o)),seconds:d(eY(l),"-0"===l),milliseconds:d(eJ(c),p)}]}let tL={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function tP(e,t,r,i,n,s,a){let o={year:2===t.length?e2(eG(t)):eG(t),month:te.indexOf(r)+1,day:eG(i),hour:eG(n),minute:eG(s)};return a&&(o.second=eG(a)),e&&(o.weekday=e.length>3?ti.indexOf(e)+1:tn.indexOf(e)+1),o}let tU=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function tz(e){let[,t,r,i,n,s,a,o,l,c,u,p]=e;return[tP(t,n,i,r,s,a,o),new es(l?tL[l]:c?0:e4(u,p))]}let tB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,tK=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function tV(e){let[,t,r,i,n,s,a,o]=e;return[tP(t,n,i,r,s,a,o),es.utcInstance]}function tq(e){let[,t,r,i,n,s,a,o]=e;return[tP(t,o,r,i,n,s,a),es.utcInstance]}let tH=tg(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,tE),tG=tg(/(\d{4})-?W(\d\d)(?:-?(\d))?/,tE),tY=tg(/(\d{4})-?(\d{3})/,tE),tJ=tg(tS),tW=ty(function(e,t){return[{year:tO(e,t),month:tO(e,t+1,1),day:tO(e,t+2,1)},null,t+3]},tC,tj,tR),tQ=ty(t_,tC,tj,tR),t$=ty(tT,tC,tj,tR),tZ=ty(tC,tj,tR),tX=ty(tC),t0=tg(/(\d{4})-(\d\d)-(\d\d)/,tI),t1=tg(tA),t2=ty(tC,tj,tR),t3="Invalid Duration",t4={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},t6={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...t4},t5={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:0x1e18558,milliseconds:31556952e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238e3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...t4},t8=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],t9=t8.slice(0).reverse();function t7(e,t,r=!1){return new ri({values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix})}function re(e,t){var r;let i=null!=(r=t.milliseconds)?r:0;for(let r of t9.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function rt(e,t){let r=0>re(e,t)?-1:1;t8.reduceRight((i,n)=>{if(eL(t[n]))return i;if(i){let s=t[i]*r,a=e[n][i],o=Math.floor(s/a);t[n]+=o*r,t[i]-=o*a*r}return n},null),t8.reduce((r,i)=>{if(eL(t[i]))return r;if(r){let n=t[r]%1;t[r]-=n,t[i]+=n*e[r][i]}return i},null)}function rr(e){let t={};for(let[r,i]of Object.entries(e))0!==i&&(t[r]=i);return t}class ri{constructor(e){let t="longterm"===e.conversionAccuracy,r=t?t5:t6;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||ei.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return ri.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new c(`Duration.fromObject: argument expected to be an object, got ${null===e?"null":typeof e}`);return new ri({values:e5(e,ri.normalizeUnit),loc:ei.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(eP(e))return ri.fromMillis(e);if(ri.isDuration(e))return e;if("object"==typeof e)return ri.fromObject(e);throw new c(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[r]=tv(e,[tM,tD]);return r?ri.fromObject(r,t):ri.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[r]=tv(e,[tN,tX]);return r?ri.fromObject(r,t):ri.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Duration is invalid");let r=e instanceof ek?e:new ek(e,t);if(!ew.throwOnInvalid)return new ri({invalid:r});throw new a(r)}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new l(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let r={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?tf.create(this.loc,r).formatDurationFromString(this,e):t3}toHuman(e={}){if(!this.isValid)return t3;let t=!1!==e.showZeros,r=t8.map(r=>{let i=this.values[r];return eL(i)||0===i&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(e+=eW(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},rY.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?re(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=ri.fromDurationLike(e),r={};for(let e of t8)(eF(t.values,e)||eF(this.values,e))&&(r[e]=t.get(e)+this.get(e));return t7(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let t=ri.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let r of Object.keys(this.values))t[r]=e6(e(this.values[r],r));return t7(this,{values:t},!0)}get(e){return this[ri.normalizeUnit(e)]}set(e){return this.isValid?t7(this,{values:{...this.values,...e5(e,ri.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){return t7(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return rt(this.matrix,e),t7(this,{values:e},!0)}rescale(){return this.isValid?t7(this,{values:rr(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...e){let t;if(!this.isValid||0===e.length)return this;e=e.map(e=>ri.normalizeUnit(e));let r={},i={},n=this.toObject();for(let s of t8)if(e.indexOf(s)>=0){t=s;let e=0;for(let t in i)e+=this.matrix[t][s]*i[t],i[t]=0;eP(n[s])&&(e+=n[s]);let a=Math.trunc(e);r[s]=a,i[s]=(1e3*e-1e3*a)/1e3}else eP(n[s])&&(i[s]=n[s]);for(let e in i)0!==i[e]&&(r[t]+=e===t?i[e]:i[e]/this.matrix[t][e]);return rt(this.matrix,r),t7(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return t7(this,{values:e},!0)}removeZeros(){return this.isValid?t7(this,{values:rr(this.values)},!0):this}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;for(let i of t8){var t,r;if(t=this.values[i],r=e.values[i],void 0===t||0===t?void 0!==r&&0!==r:t!==r)return!1}return!0}}let rn="Invalid Interval";class rs{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Interval is invalid");let r=e instanceof ek?e:new ek(e,t);if(!ew.throwOnInvalid)return new rs({invalid:r});throw new s(r)}static fromDateTimes(e,t){let r=rJ(e),i=rJ(t),n=r&&r.isValid?i&&i.isValid?i<r?rs.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${i.toISO()}`):null:rs.invalid("missing or invalid end"):rs.invalid("missing or invalid start");return null==n?new rs({start:r,end:i}):n}static after(e,t){let r=ri.fromDurationLike(t),i=rJ(e);return rs.fromDateTimes(i,i.plus(r))}static before(e,t){let r=ri.fromDurationLike(t),i=rJ(e);return rs.fromDateTimes(i.minus(r),i)}static fromISO(e,t){let[r,i]=(e||"").split("/",2);if(r&&i){let e,n,s,a;try{n=(e=rY.fromISO(r,t)).isValid}catch(e){n=!1}try{a=(s=rY.fromISO(i,t)).isValid}catch(e){a=!1}if(n&&a)return rs.fromDateTimes(e,s);if(n){let r=ri.fromISO(i,t);if(r.isValid)return rs.after(e,r)}else if(a){let e=ri.fromISO(r,t);if(e.isValid)return rs.before(s,e)}}return rs.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){let r;if(!this.isValid)return NaN;let i=this.start.startOf(e,t);return Math.floor((r=(r=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:i.locale}):this.end).startOf(e,t)).diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?rs.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map(rJ).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),r=[],{s:i}=this,n=0;for(;i<this.e;){let e=t[n]||this.e,s=+e>+this.e?this.e:e;r.push(rs.fromDateTimes(i,s)),i=s,n+=1}return r}splitBy(e){let t=ri.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let{s:r}=this,i=1,n,s=[];for(;r<this.e;){let e=this.start.plus(t.mapUnits(e=>e*i));n=+e>+this.e?this.e:e,s.push(rs.fromDateTimes(r,n)),r=n,i+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!!this.isValid&&!!e.isValid&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:rs.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return rs.fromDateTimes(t,r)}static merge(e){let[t,r]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],r)=>t?t.overlaps(r)||t.abutsStart(r)?[e,t.union(r)]:[e.concat([t]),r]:[e,r],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0,i=[],n=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]);for(let e of Array.prototype.concat(...n).sort((e,t)=>e.time-t.time))1===(r+="s"===e.type?1:-1)?t=e.time:(t&&+t!=+e.time&&i.push(rs.fromDateTimes(t,e.time)),t=null);return rs.merge(i)}difference(...e){return rs.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:rn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=f,t={}){return this.isValid?tf.create(this.s.loc.clone(t),e).formatInterval(this):rn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:rn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:rn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:rn}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:rn}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):ri.invalid(this.invalidReason)}mapEndpoints(e){return rs.fromDateTimes(e(this.s),e(this.e))}}class ra{static hasDST(e=ew.defaultZone){let t=rY.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return F.isValidZone(e)}static normalizeZone(e){return eo(e,ew.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||ei.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||ei.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||ei.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:n="gregory"}={}){return(i||ei.create(t,r,n)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:n="gregory"}={}){return(i||ei.create(t,r,n)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ei.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ei.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ei.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return ei.create(t,null,"gregory").eras(e)}static features(){return{relative:ez(),localeWeek:eB()}}}function ro(e,t){let r=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(ri.fromMillis(i).as("days"))}function rl(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(!isNaN(t))return t;t="";for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(-1!==e[r].search(el.hanidec))t+=eu.indexOf(e[r]);else for(let e in ec){let[r,n]=ec[e];i>=r&&i<=n&&(t+=i-r)}}return parseInt(t,10)}(e))}}let rc=String.fromCharCode(160),ru=`[ ${rc}]`,rp=RegExp(ru,"g");function rd(e){return e.replace(/\./g,"\\.?").replace(rp,ru)}function rh(e){return e.replace(/\./g,"").replace(rp," ").toLowerCase()}function rf(e,t){return null===e?null:{regex:RegExp(e.map(rd).join("|")),deser:([r])=>e.findIndex(e=>rh(r)===rh(e))+t}}function rm(e,t){return{regex:e,deser:([,e,t])=>e4(e,t),groups:t}}function rg(e){return{regex:e,deser:([e])=>e}}let ry={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}},rv=null;function rb(e,t){return Array.prototype.concat(...e.map(e=>(function(e,t){if(e.literal)return e;let r=rk(tf.macroTokenToFormatOpts(e.val),t);return null==r||r.includes(void 0)?e:r})(e,t)))}class rx{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=rb(tf.parseFormat(t),e),this.units=this.tokens.map(t=>(function(e,t){let r=ed(t),i=ed(t,"{2}"),n=ed(t,"{3}"),s=ed(t,"{4}"),a=ed(t,"{6}"),o=ed(t,"{1,2}"),l=ed(t,"{1,3}"),c=ed(t,"{1,6}"),u=ed(t,"{1,9}"),p=ed(t,"{2,4}"),d=ed(t,"{4,6}"),h=e=>({regex:RegExp(e.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")),deser:([e])=>e,literal:!0}),f=(f=>{if(e.literal)return h(f);switch(f.val){case"G":return rf(t.eras("short"),0);case"GG":return rf(t.eras("long"),0);case"y":return rl(c);case"yy":case"kk":return rl(p,e2);case"yyyy":case"kkkk":return rl(s);case"yyyyy":return rl(d);case"yyyyyy":return rl(a);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return rl(o);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return rl(i);case"MMM":return rf(t.months("short",!0),1);case"MMMM":return rf(t.months("long",!0),1);case"LLL":return rf(t.months("short",!1),1);case"LLLL":return rf(t.months("long",!1),1);case"o":case"S":return rl(l);case"ooo":case"SSS":return rl(n);case"u":return rg(u);case"uu":return rg(o);case"uuu":case"E":case"c":return rl(r);case"a":return rf(t.meridiems(),0);case"EEE":return rf(t.weekdays("short",!1),1);case"EEEE":return rf(t.weekdays("long",!1),1);case"ccc":return rf(t.weekdays("short",!0),1);case"cccc":return rf(t.weekdays("long",!0),1);case"Z":case"ZZ":return rm(RegExp(`([+-]${o.source})(?::(${i.source}))?`),2);case"ZZZ":return rm(RegExp(`([+-]${o.source})(${i.source})?`),2);case"z":return rg(/[a-z_+-/]{1,256}?/i);case" ":return rg(/[^\S\n\r]/);default:return h(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f})(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){let[e,t]=function(e){let t=e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"");return[`^${t}$`,e]}(this.units);this.regex=RegExp(e,"i"),this.handlers=t}}explainFromTokens(e){if(!this.isValid)return{input:e,tokens:this.tokens,invalidReason:this.invalidReason};{let[t,r]=function(e,t,r){let i=e.match(t);if(!i)return[i,{}];{let e={},t=1;for(let n in r)if(eF(r,n)){let s=r[n],a=s.groups?s.groups+1:1;!s.literal&&s.token&&(e[s.token.val[0]]=s.deser(i.slice(t,t+a))),t+=a}return[i,e]}}(e,this.regex,this.handlers),[i,n,s]=r?function(e){let t;let r=e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null;return eL(e.z)||(i=F.create(e.z)),eL(e.Z)||(i||(i=new es(e.Z)),t=e.Z),eL(e.q)||(e.M=(e.q-1)*3+1),eL(e.h)||(e.h<12&&1===e.a?e.h+=12:12!==e.h||0!==e.a||(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),eL(e.u)||(e.S=eJ(e.u)),[Object.keys(e).reduce((t,i)=>{let n=r(i);return n&&(t[n]=e[i]),t},{}),i,t]}(r):[null,null,void 0];if(eF(r,"a")&&eF(r,"H"))throw new o("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:n,specificOffset:s}}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function rw(e,t,r){return new rx(e,r).explainFromTokens(t)}function rk(e,t){if(!e)return null;let r=tf.create(t,e).dtFormatter((rv||(rv=rY.fromMillis(0x16a2e5618e3)),rv)),i=r.formatToParts(),n=r.resolvedOptions();return i.map(t=>(function(e,t,r){let{type:i,value:n}=e;if("literal"===i){let e=/^\s+$/.test(n);return{literal:!e,val:e?" ":n}}let s=t[i],a=i;"hour"===i&&(a=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":r.hour12?"hour12":"hour24");let o=ry[a];if("object"==typeof o&&(o=o[s]),o)return{literal:!1,val:o}})(t,e,n))}let rS="Invalid DateTime";function rE(e){return new ek("unsupported zone",`the zone "${e.name}" is not supported`)}function r_(e){return null===e.weekData&&(e.weekData=eO(e.c)),e.weekData}function rT(e){return null===e.localWeekData&&(e.localWeekData=eO(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function rA(e,t){let r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new rY({...r,...t,old:r})}function rI(e,t,r){let i=e-6e4*t,n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*6e4;let s=r.offset(i);return n===s?[i,n]:[e-6e4*Math.min(n,s),Math.max(n,s)]}function rO(e,t){let r=new Date(e+=6e4*t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function rC(e,t){let r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),s={...e.c,year:i,month:n,day:Math.min(e.c.day,eZ(i,n))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=ri.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),[o,l]=rI(eX(s),r,e.zone);return 0!==a&&(o+=a,l=e.zone.offset(o)),{ts:o,o:l}}function rj(e,t,r,i,n,s){let{setZone:a,zone:o}=r;if((!e||0===Object.keys(e).length)&&!t)return rY.invalid(new ek("unparsable",`the input "${n}" can't be parsed as ${i}`));{let i=rY.fromObject(e,{...r,zone:t||o,specificOffset:s});return a?i:i.setZone(o)}}function rR(e,t,r=!0){return e.isValid?tf.create(ei.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function rN(e,t,r){let i=e.c.year>9999||e.c.year<0,n="";if(i&&e.c.year>=0&&(n+="+"),n+=eH(e.c.year,i?6:4),"year"===r)return n;if(t){if(n+="-",n+=eH(e.c.month),"month"===r)return n;n+="-"}else if(n+=eH(e.c.month),"month"===r)return n;return n+eH(e.c.day)}function rM(e,t,r,i,n,s,a){let o=!r||0!==e.c.millisecond||0!==e.c.second,l="";switch(a){case"day":case"month":case"year":break;default:if(l+=eH(e.c.hour),"hour"===a)break;if(t){if(l+=":",l+=eH(e.c.minute),"minute"===a)break;o&&(l+=":",l+=eH(e.c.second))}else{if(l+=eH(e.c.minute),"minute"===a)break;o&&(l+=eH(e.c.second))}if("second"===a)break;o&&(!i||0!==e.c.millisecond)&&(l+=".",l+=eH(e.c.millisecond,3))}return n&&(e.isOffsetFixed&&0===e.offset&&!s?l+="Z":e.o<0?(l+="-",l+=eH(Math.trunc(-e.o/60)),l+=":",l+=eH(Math.trunc(-e.o%60))):(l+="+",l+=eH(Math.trunc(e.o/60)),l+=":",l+=eH(Math.trunc(e.o%60)))),s&&(l+="["+e.zone.ianaName+"]"),l}let rD={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},rL={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},rP={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rU=["year","month","day","hour","minute","second","millisecond"],rz=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],rB=["year","ordinal","hour","minute","second","millisecond"];function rK(e){let t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new l(e);return t}function rF(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return rK(e)}}function rV(e,t){let i,n;let s=eo(t.zone,ew.defaultZone);if(!s.isValid)return rY.invalid(rE(s));let a=ei.fromObject(t);if(eL(e.year))i=ew.now();else{for(let t of rU)eL(e[t])&&(e[t]=rD[t]);let t=eM(e)||eD(e);if(t)return rY.invalid(t);let a=function(e){if(void 0===r&&(r=ew.now()),"iana"!==e.type)return e.offset(r);let t=e.name,i=rG.get(t);return void 0===i&&(i=e.offset(r),rG.set(t,i)),i}(s);[i,n]=rI(eX(e),a,s)}return new rY({ts:i,zone:s,loc:a,o:n})}function rq(e,t,r){let i=!!eL(r.round)||r.round,n=eL(r.rounding)?"trunc":r.rounding,s=(e,s)=>(e=eW(e,i||r.calendary?0:2,r.calendary?"round":n),t.loc.clone(r).relFormatter(r).format(e,s)),a=i=>r.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(r.unit)return s(a(r.unit),r.unit);for(let e of r.units){let t=a(e);if(Math.abs(t)>=1)return s(t,e)}return s(e>t?-0:0,r.units[r.units.length-1])}function rH(e){let t={},r;return e.length>0&&"object"==typeof e[e.length-1]?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let rG=new Map;class rY{constructor(e){let t=e.zone||ew.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new ek("invalid input"):null)||(t.isValid?null:rE(t));this.ts=eL(e.ts)?ew.now():e.ts;let i=null,n=null;if(!r){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,n]=[e.old.c,e.old.o];else{let s=eP(e.o)&&!e.old?e.o:t.offset(this.ts);i=(r=Number.isNaN((i=rO(this.ts,s)).year)?new ek("invalid input"):null)?null:i,n=r?null:s}}this._zone=t,this.loc=e.loc||ei.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=n,this.isLuxonDateTime=!0}static now(){return new rY({})}static local(){let[e,t]=rH(arguments),[r,i,n,s,a,o,l]=t;return rV({year:r,month:i,day:n,hour:s,minute:a,second:o,millisecond:l},e)}static utc(){let[e,t]=rH(arguments),[r,i,n,s,a,o,l]=t;return e.zone=es.utcInstance,rV({year:r,month:i,day:n,hour:s,minute:a,second:o,millisecond:l},e)}static fromJSDate(e,t={}){let r="[object Date]"===Object.prototype.toString.call(e)?e.valueOf():NaN;if(Number.isNaN(r))return rY.invalid("invalid input");let i=eo(t.zone,ew.defaultZone);return i.isValid?new rY({ts:r,zone:i,loc:ei.fromObject(t)}):rY.invalid(rE(i))}static fromMillis(e,t={}){if(eP(e))return e<-864e13||e>864e13?rY.invalid("Timestamp out of range"):new rY({ts:e,zone:eo(t.zone,ew.defaultZone),loc:ei.fromObject(t)});throw new c(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(eP(e))return new rY({ts:1e3*e,zone:eo(t.zone,ew.defaultZone),loc:ei.fromObject(t)});throw new c("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let r=eo(t.zone,ew.defaultZone);if(!r.isValid)return rY.invalid(rE(r));let i=ei.fromObject(t),n=e5(e,rF),{minDaysInFirstWeek:s,startOfWeek:a}=eN(n,i),l=ew.now(),c=eL(t.specificOffset)?r.offset(l):t.specificOffset,u=!eL(n.ordinal),p=!eL(n.year),d=!eL(n.month)||!eL(n.day),h=p||d,f=n.weekYear||n.weekNumber;if((h||u)&&f)throw new o("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new o("Can't mix ordinal dates with month/day");let m=f||n.weekday&&!h,g,y,v=rO(l,c);m?(g=rz,y=rL,v=eO(v,s,a)):u?(g=rB,y=rP,v=ej(v)):(g=rU,y=rD);let b=!1;for(let e of g)eL(n[e])?b?n[e]=y[e]:n[e]=v[e]:b=!0;let x=(m?function(e,t=4,r=1){let i=eU(e.weekYear),n=eq(e.weekNumber,1,e1(e.weekYear,t,r)),s=eq(e.weekday,1,7);return i?n?!s&&e_("weekday",e.weekday):e_("week",e.weekNumber):e_("weekYear",e.weekYear)}(n,s,a):u?function(e){let t=eU(e.year),r=eq(e.ordinal,1,e$(e.year));return t?!r&&e_("ordinal",e.ordinal):e_("year",e.year)}(n):eM(n))||eD(n);if(x)return rY.invalid(x);let[w,k]=rI(eX(m?eC(n,s,a):u?eR(n):n),c,r),S=new rY({ts:w,zone:r,o:k,loc:i});return n.weekday&&h&&e.weekday!==S.weekday?rY.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${S.toISO()}`):S.isValid?S:rY.invalid(S.invalid)}static fromISO(e,t={}){let[r,i]=tv(e,[tH,tW],[tG,tQ],[tY,t$],[tJ,tZ]);return rj(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[r,i]=tv(e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[tU,tz]);return rj(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[r,i]=tv(e,[tB,tV],[tK,tV],[tF,tq]);return rj(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(eL(e)||eL(t))throw new c("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:n=null}=r,[s,a,o,l]=function(e,t,r){let{result:i,zone:n,specificOffset:s,invalidReason:a}=rw(e,t,r);return[i,n,s,a]}(ei.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0}),e,t);return l?rY.invalid(l):rj(s,a,r,`format ${t}`,e,o)}static fromString(e,t,r={}){return rY.fromFormat(e,t,r)}static fromSQL(e,t={}){let[r,i]=tv(e,[t0,tW],[t1,t2]);return rj(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the DateTime is invalid");let r=e instanceof ek?e:new ek(e,t);if(!ew.throwOnInvalid)return new rY({invalid:r});throw new n(r)}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let r=rk(e,ei.fromObject(t));return r?r.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return rb(tf.parseFormat(e),ei.fromObject(t)).map(e=>e.val).join("")}static resetCache(){r=void 0,rG.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?r_(this).weekYear:NaN}get weekNumber(){return this.isValid?r_(this).weekNumber:NaN}get weekday(){return this.isValid?r_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?rT(this).weekday:NaN}get localWeekNumber(){return this.isValid?rT(this).weekNumber:NaN}get localWeekYear(){return this.isValid?rT(this).weekYear:NaN}get ordinal(){return this.isValid?ej(this.c).ordinal:NaN}get monthShort(){return this.isValid?ra.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ra.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ra.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ra.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=eX(this.c),t=this.zone.offset(e-864e5),r=this.zone.offset(e+864e5),i=this.zone.offset(e-6e4*t),n=this.zone.offset(e-6e4*r);if(i===n)return[this];let s=e-6e4*i,a=e-6e4*n,o=rO(s,i),l=rO(a,n);return o.hour===l.hour&&o.minute===l.minute&&o.second===l.second&&o.millisecond===l.millisecond?[rA(this,{ts:s}),rA(this,{ts:a})]:[this]}get isInLeapYear(){return eQ(this.year)}get daysInMonth(){return eZ(this.year,this.month)}get daysInYear(){return this.isValid?e$(this.year):NaN}get weeksInWeekYear(){return this.isValid?e1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?e1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:r,calendar:i}=tf.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(es.instance(e),t)}toLocal(){return this.setZone(ew.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if((e=eo(e,ew.defaultZone)).equals(this.zone))return this;if(!e.isValid)return rY.invalid(rE(e));{let n=this.ts;if(t||r){var i;let t=e.offset(this.ts),r=this.toObject();[n]=(i=e,rI(eX(r),t,i))}return rA(this,{ts:n,zone:e})}}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){return rA(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r})})}setLocale(e){return this.reconfigure({locale:e})}set(e){var t,r,i;let n;if(!this.isValid)return this;let s=e5(e,rF),{minDaysInFirstWeek:a,startOfWeek:l}=eN(s,this.loc),c=!eL(s.weekYear)||!eL(s.weekNumber)||!eL(s.weekday),u=!eL(s.ordinal),p=!eL(s.year),d=!eL(s.month)||!eL(s.day),h=s.weekYear||s.weekNumber;if((p||d||u)&&h)throw new o("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new o("Can't mix ordinal dates with month/day");c?n=eC({...eO(this.c,a,l),...s},a,l):eL(s.ordinal)?(n={...this.toObject(),...s},eL(s.day)&&(n.day=Math.min(eZ(n.year,n.month),n.day))):n=eR({...ej(this.c),...s});let[f,m]=(t=n,r=this.o,i=this.zone,rI(eX(t),r,i));return rA(this,{ts:f,o:m})}plus(e){return this.isValid?rA(this,rC(this,ri.fromDurationLike(e))):this}minus(e){return this.isValid?rA(this,rC(this,ri.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;let r={},i=ri.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0}if("weeks"===i){if(t){let e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(r.weekNumber=this.weekNumber-1),r.weekday=e}else r.weekday=1}if("quarters"===i){let e=Math.ceil(this.month/3);r.month=(e-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?tf.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):rS}toLocaleString(e=f,t={}){return this.isValid?tf.create(this.loc.clone(t),e).formatDateTime(this):rS}toLocaleParts(e={}){return this.isValid?tf.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:n=!1,precision:s="milliseconds"}={}){if(!this.isValid)return null;s=rK(s);let a="extended"===e,o=rN(this,a,s);return rU.indexOf(s)>=3&&(o+="T"),o+=rM(this,a,t,r,i,n,s)}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?rN(this,"extended"===e,rK(t)):null}toISOWeekDate(){return rR(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:n=!1,format:s="extended",precision:a="milliseconds"}={}){return this.isValid?(a=rK(a),(i&&rU.indexOf(a)>=3?"T":"")+rM(this,"extended"===s,t,e,r,n,a)):null}toRFC2822(){return rR(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return rR(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?rN(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),rR(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():rS}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return ri.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=(Array.isArray(t)?t:[t]).map(ri.normalizeUnit),s=e.valueOf()>this.valueOf(),a=function(e,t,r,i){let[n,s,a,o]=function(e,t,r){let i,n;let s={},a=e;for(let[o,l]of[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+(t.year-e.year)*4],["months",(e,t)=>t.month-e.month+(t.year-e.year)*12],["weeks",(e,t)=>{let r=ro(e,t);return(r-r%7)/7}],["days",ro]])r.indexOf(o)>=0&&(i=o,s[o]=l(e,t),(n=a.plus(s))>t?(s[o]--,(e=a.plus(s))>t&&(n=e,s[o]--,e=a.plus(s))):e=n);return[e,s,n,i]}(e,t,r),l=t-n,c=r.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===c.length&&(a<t&&(a=n.plus({[o]:1})),a!==n&&(s[o]=(s[o]||0)+l/(a-n)));let u=ri.fromObject(s,i);return c.length>0?ri.fromMillis(l,i).shiftTo(...c).plus(u):u}(s?this:e,s?e:this,n,i);return s?a.negate():a}diffNow(e="milliseconds",t={}){return this.diff(rY.now(),e,t)}until(e){return this.isValid?rs.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;let i=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(t,r)<=i&&i<=n.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||rY.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(i=e.unit,n=void 0),rq(t,this.plus(r),{...e,numeric:"always",units:i,unit:n})}toRelativeCalendar(e={}){return this.isValid?rq(e.base||rY.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(rY.isDateTime))throw new c("min requires all arguments be DateTimes");return eK(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(rY.isDateTime))throw new c("max requires all arguments be DateTimes");return eK(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){let{locale:i=null,numberingSystem:n=null}=r;return rw(ei.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,r={}){return rY.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){let{locale:r=null,numberingSystem:i=null}=t;return new rx(ei.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),e)}static fromFormatParser(e,t,r={}){if(eL(e)||eL(t))throw new c("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:n=null}=r,s=ei.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});if(!s.equals(t.locale))throw new c(`fromFormatParser called with a locale of ${s}, but the format parser was created for ${t.locale}`);let{result:a,zone:o,specificOffset:l,invalidReason:u}=t.explainFromTokens(e);return u?rY.invalid(u):rj(a,o,r,`format ${t.format}`,e,l)}static get DATE_SHORT(){return f}static get DATE_MED(){return m}static get DATE_MED_WITH_WEEKDAY(){return g}static get DATE_FULL(){return y}static get DATE_HUGE(){return v}static get TIME_SIMPLE(){return b}static get TIME_WITH_SECONDS(){return x}static get TIME_WITH_SHORT_OFFSET(){return w}static get TIME_WITH_LONG_OFFSET(){return k}static get TIME_24_SIMPLE(){return S}static get TIME_24_WITH_SECONDS(){return E}static get TIME_24_WITH_SHORT_OFFSET(){return _}static get TIME_24_WITH_LONG_OFFSET(){return T}static get DATETIME_SHORT(){return A}static get DATETIME_SHORT_WITH_SECONDS(){return I}static get DATETIME_MED(){return O}static get DATETIME_MED_WITH_SECONDS(){return C}static get DATETIME_MED_WITH_WEEKDAY(){return j}static get DATETIME_FULL(){return R}static get DATETIME_FULL_WITH_SECONDS(){return N}static get DATETIME_HUGE(){return M}static get DATETIME_HUGE_WITH_SECONDS(){return D}}function rJ(e){if(rY.isDateTime(e))return e;if(e&&e.valueOf&&eP(e.valueOf()))return rY.fromJSDate(e);if(e&&"object"==typeof e)return rY.fromObject(e);throw new c(`Unknown datetime argument: ${e}, of type ${typeof e}`)}t.DateTime=rY,t.Duration=ri,t.FixedOffsetZone=es,t.IANAZone=F,t.Info=ra,t.Interval=rs,t.InvalidZone=ea,t.Settings=ew,t.SystemZone=U,t.VERSION="3.7.1",t.Zone=L},89127:(e,t,r)=>{e.exports=r(9146)(__dirname)},42706:(e,t,r)=>{"use strict";e.exports=r(44870)},9146:(e,t,r)=>{let i=require;"function"==typeof i.addon?e.exports=i.addon.bind(i):e.exports=r(53856)},53856:(e,t,r)=>{var i=r(29021),n=r(33873),s=r(79551),a=r(21820),o=require,l=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,u=process.versions,p=u.modules;(u.deno||process.isBun)&&(p="unsupported");var d=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",h=process.env.npm_config_arch||a.arch(),f=process.env.npm_config_platform||a.platform(),m=process.env.LIBC||(!function(e){if("linux"!==e)return!1;let{familySync:t,MUSL:i}=r(2787);return t()===i}(f)?"glibc":"musl"),g=process.env.ARM_VERSION||("arm64"===h?"8":l.arm_version)||"",y=(u.uv||"").split(".")[0];function v(e){return o(v.resolve(e))}function b(e){try{return i.readdirSync(e)}catch(e){return[]}}function x(e,t){var r=b(e).filter(t);return r[0]&&n.join(e,r[0])}function w(e){return/\.node$/.test(e)}function k(e){var t=e.split("-");if(2===t.length){var r=t[0],i=t[1].split("+");if(r&&i.length&&i.every(Boolean))return{name:e,platform:r,architectures:i}}}function S(e,t){return function(r){return null!=r&&r.platform===e&&r.architectures.includes(t)}}function E(e,t){return e.architectures.length-t.architectures.length}function _(e){var t=e.split("."),r=t.pop(),i={file:e,specificity:0};if("node"===r){for(var n=0;n<t.length;n++){var s=t[n];if("node"===s||"electron"===s||"node-webkit"===s)i.runtime=s;else if("napi"===s)i.napi=!0;else if("abi"===s.slice(0,3))i.abi=s.slice(3);else if("uv"===s.slice(0,2))i.uv=s.slice(2);else if("armv"===s.slice(0,4))i.armv=s.slice(4);else{if("glibc"!==s&&"musl"!==s)continue;i.libc=s}i.specificity++}return i}}function T(e,t){return function(r){return null!=r&&(r.runtime===e||!!("node"===r.runtime&&r.napi))&&(r.abi===t||!!r.napi)&&(!r.uv||r.uv===y)&&(!r.armv||r.armv===g)&&(!r.libc||r.libc===m)}}function A(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}e.exports=v,v.resolve=v.path=function(e){e=n.resolve(e||".");var t,i,a="";try{var l=(a=o(n.join(e,"package.json")).name).toUpperCase().replace(/-/g,"_");process.env[l+"_PREBUILD"]&&(e=process.env[l+"_PREBUILD"])}catch(e){t=e}if(!c){var u=x(n.join(e,"build/Release"),w);if(u)return u;var v=x(n.join(e,"build/Debug"),w);if(v)return v}var I=N(e);if(I)return I;var O=N(n.dirname(process.execPath));if(O)return O;var C=("@"==a[0]?"":"@"+a+"/")+a+"-"+f+"-"+h;try{var j=n.dirname(r(8086).createRequire(s.pathToFileURL(n.join(e,"package.json"))).resolve(C));return M(j)}catch(e){i=e}let R="No native build was found for "+["platform="+f,"arch="+h,"runtime="+d,"abi="+p,"uv="+y,g?"armv="+g:"","libc="+m,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ")+"\n    attempted loading from: "+e+" and package: "+C+"\n";throw t&&(R+="Error finding package.json: "+t.message+"\n"),i&&(R+="Error resolving package: "+i.message+"\n"),Error(R);function N(e){var t=b(n.join(e,"prebuilds")).map(k).filter(S(f,h)).sort(E)[0];if(t)return M(n.join(e,"prebuilds",t.name))}function M(e){var t=b(e).map(_).filter(T(d,p)).sort(A(d))[0];if(t)return n.join(e,t.file)}},v.parseTags=_,v.matchTags=T,v.compareTags=A,v.parseTuple=k,v.matchTuple=S,v.compareTuples=E},90525:e=>{"use strict";class t{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e=[];for(let e=0,t=this.str.length;e<t;e++){let r=this.str.charAt(e),i=e<t-1?this.str.charAt(e+1):null;this.checkChar(r,i)}return this.list.forEach(t=>{t.value=(t.value||"").toString().trim(),t.value&&e.push(t)}),e}checkChar(e,t){if(this.escaped);else if(e===this.operatorExpecting){this.node={type:"operator",value:e},t&&![" ","	","\r","\n",",",";"].includes(t)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&e in this.operators){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&"\\"===e){this.escaped=!0;return}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),"\n"===e&&(e=" "),(e.charCodeAt(0)>=33||[" ","	"].includes(e))&&(this.node.value+=e),this.escaped=!1}}e.exports=function e(r,i){i=i||{};let n=new t(r).tokenize(),s=[],a=[],o=[];if(n.forEach(e=>{"operator"===e.type&&(","===e.value||";"===e.value)?(a.length&&s.push(a),a=[]):a.push(e)}),a.length&&s.push(a),s.forEach(t=>{(t=function(t){let r,i,n,s=!1,a="text",o=[],l={address:[],comment:[],group:[],text:[]};for(i=0,n=t.length;i<n;i++){let e=t[i],r=i?t[i-1]:null;if("operator"===e.type)switch(e.value){case"<":a="address";break;case"(":a="comment";break;case":":a="group",s=!0;break;default:a="text"}else e.value&&("address"===a&&(e.value=e.value.replace(/^[^<]*<\s*/,"")),r&&r.noBreak&&l[a].length?l[a][l[a].length-1]+=e.value:l[a].push(e.value))}if(!l.text.length&&l.comment.length&&(l.text=l.comment,l.comment=[]),s)l.text=l.text.join(" "),o.push({name:l.text||r&&r.name,group:l.group.length?e(l.group.join(",")):[]});else{if(!l.address.length&&l.text.length){for(i=l.text.length-1;i>=0;i--)if(l.text[i].match(/^[^@\s]+@[^@\s]+$/)){l.address=l.text.splice(i,1);break}let e=function(e){return l.address.length?e:(l.address=[e.trim()]," ")};if(!l.address.length)for(i=l.text.length-1;i>=0&&(l.text[i]=l.text[i].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,e).trim(),!l.address.length);i--);}if(!l.text.length&&l.comment.length&&(l.text=l.comment,l.comment=[]),l.address.length>1&&(l.text=l.text.concat(l.address.splice(1))),l.text=l.text.join(" "),l.address=l.address.join(" "),!l.address&&s)return[];(r={address:l.address||l.text||"",name:l.text||l.address||""}).address===r.name&&((r.address||"").match(/@/)?r.name="":r.address=""),o.push(r)}return o}(t)).length&&(o=o.concat(t))}),i.flatten){let e=[],t=r=>{r.forEach(r=>{if(r.group)return t(r.group);e.push(r)})};return t(o),e}return o}},20301:(e,t,r)=>{"use strict";let i=r(27910).Transform;function n(e){return"string"==typeof e&&(e=Buffer.from(e,"utf-8")),e.toString("base64")}function s(e,t){if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let r=[],i=0,n=1024*t;for(;i<e.length;){let s=e.substr(i,n).replace(RegExp(".{"+t+"}","g"),"$&\r\n").trim();r.push(s),i+=n}return r.join("\r\n").trim()}class a extends i{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,t,r){if("buffer"!==t&&(e=Buffer.from(e,t)),!e||!e.length)return setImmediate(r);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let i=this._curLine+n(e);if(this.options.lineLength){let e=(i=s(i,this.options.lineLength)).lastIndexOf("\n");e<0?(this._curLine=i,i=""):e===i.length-1?this._curLine="":(this._curLine=i.substr(e+1),i=i.substr(0,e+1))}i&&(this.outputBytes+=i.length,this.push(Buffer.from(i,"ascii"))),setImmediate(r)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=n(this._remainingBytes)),this._curLine&&(this._curLine=s(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}}e.exports={encode:n,wrap:s,Encoder:a}},88041:(e,t,r)=>{"use strict";let i=r(39952),n=r(71179),s=r(69540),a=r(27910).PassThrough,o=r(29021),l=r(33873),c=r(55511);class u{constructor(e,t,r,i){this.options=e||{},this.keys=t,this.cacheTreshold=Number(this.options.cacheTreshold)||131072,this.hashAlgo=this.options.hashAlgo||"sha256",this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=!!this.cacheDir&&l.join(this.cacheDir,"message."+Date.now()+"-"+c.randomBytes(14).toString("hex")),this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=r,this.output=i,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",e=>{this.hasErrored=!0,this.cleanup(),i.emit("error",e)})}cleanup(){this.cache&&this.cachePath&&o.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=o.createReadStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.output.emit("error",e)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(!1===this.output.write(e))return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let e=0,t=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let r=this.keys[e++],i=s(this.headers,this.hashAlgo,this.bodyHash,{domainName:r.domainName,keySelector:r.keySelector,privateKey:r.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return i&&this.output.write(Buffer.from(i+"\r\n")),setImmediate(t)};if(this.bodyHash&&this.headers)return t();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=o.createWriteStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;null!==this.relaxedBody.read(););}),this.hasErrored=!0,this.output.emit("error",e)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new i,this.relaxedBody=new n({hashAlgo:this.hashAlgo}),this.parser.on("headers",e=>{this.headers=e}),this.relaxedBody.on("hash",e=>{this.bodyHash=e}),this.relaxedBody.on("readable",()=>{let e;if(!this.cache){for(;null!==(e=this.relaxedBody.read());)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}}class p{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,t){let r=new a,i=e,n=!1;Buffer.isBuffer(e)?(n=e,i=new a):"string"==typeof e&&(n=Buffer.from(e),i=new a);let s=this.options;t&&Object.keys(t).length&&(s={},Object.keys(this.options||{}).forEach(e=>{s[e]=this.options[e]}),Object.keys(t||{}).forEach(e=>{e in s||(s[e]=t[e])}));let o=new u(s,this.keys,i,r);return setImmediate(()=>{o.signStream(),n&&setImmediate(()=>{i.end(n)})}),r}}e.exports=p},39952:(e,t,r)=>{"use strict";let i=r(27910).Transform;class n extends i{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let t=this.lastBytes.length,r=Math.min(e.length,t);for(let e=0,i=t-r;e<i;e++)this.lastBytes[e]=this.lastBytes[e+r];for(let i=1;i<=r;i++)this.lastBytes[t-i]=e[e.length-i]}checkHeaders(e){if(this.headersParsed)return!0;let t=this.lastBytes.length,r=0;this.curLinePos=0;for(let i=0,n=this.lastBytes.length+e.length;i<n;i++)if(10===(i<t?this.lastBytes[i]:e[i-t])&&i){let n=i-1<t?this.lastBytes[i-1]:e[i-1-t],s=i>1&&(i-2<t?this.lastBytes[i-2]:e[i-2-t]);if(10===n||13===n&&10===s){this.headersParsed=!0,r=i-t+1,this.headerBytes+=r;break}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,r)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>r){let t=e.slice(r);this.bodySize+=t.length,setImmediate(()=>this.push(t))}return!1}return this.headerBytes+=e.length,this.headerChunks.push(e),this.updateLastBytes(e),!1}_transform(e,t,r){let i;if(!e||!e.length)return r();"string"==typeof e&&(e=Buffer.from(e,t));try{i=this.checkHeaders(e)}catch(e){return r(e)}i&&(this.bodySize+=e.length,this.push(e)),setImmediate(r)}_flush(e){if(this.headerChunks){let e=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=e.length,this.push(e),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let t=e.length-1;t>0;t--)/^\s/.test(e[t])&&(e[t-1]+="\n"+e[t],e.splice(t,1));return e.filter(e=>e.trim()).map(e=>({key:e.substr(0,e.indexOf(":")).trim().toLowerCase(),line:e}))}}e.exports=n},71179:(e,t,r)=>{"use strict";let i=r(27910).Transform,n=r(55511);class s extends i{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=n.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=!!e.debug&&[]}updateHash(e){let t;let r="",i="file";for(let t=e.length-1;t>=0;t--){let n=e[t];if("file"===i&&(10===n||13===n));else if("file"===i&&(9===n||32===n))i="line";else if("line"===i&&(9===n||32===n));else if(("file"===i||"line"===i)&&(i="body",t===e.length-1))break;if(0===t){if("file"===i&&(!this.remainder||/[\r\n]$/.test(this.remainder))||"line"===i&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=e.toString("binary");return}if("line"===i||"file"===i){r=e.toString("binary"),e=!1;break}}if("body"===i){r=e.slice(t+1).toString("binary"),e=e.slice(0,t+1);break}}let n=!!this.remainder;if(e&&!n)for(let t=0,r=e.length;t<r;t++){if(t&&10===e[t]&&13!==e[t-1]||t&&13===e[t]&&32===e[t-1]){n=!0;break}if(t&&32===e[t]&&32===e[t-1]){n=!0;break}if(9===e[t]){n=!0;break}}n?(t=this.remainder+(e?e.toString("binary"):""),this.remainder=r,t=t.replace(/\r?\n/g,"\n").replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,"\r\n"),e=Buffer.from(t,"binary")):r&&(this.remainder=r),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,t,r){if(!e||!e.length)return r();"string"==typeof e&&(e=Buffer.from(e,t)),this.updateHash(e),this.byteLength+=e.length,this.push(e),r()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from("\r\n")),this.byteLength||this.push(Buffer.from("\r\n")),this.emit("hash",this.bodyHash.digest("base64"),!!this.debug&&Buffer.concat(this._debugBody)),e()}}e.exports=s},69540:(e,t,r)=>{"use strict";let i=r(94897),n=r(93740),s=r(55511);function a(e,t,r){let i=new Set,n=new Set,s=new Map;(r||"").toLowerCase().split(":").forEach(e=>{n.add(e.trim())}),(t||"").toLowerCase().split(":").filter(e=>!n.has(e.trim())).forEach(e=>{i.add(e.trim())});for(let t=e.length-1;t>=0;t--){let r=e[t];i.has(r.key)&&!s.has(r.key)&&s.set(r.key,o(r.line))}let a=[],l=[];return i.forEach(e=>{s.has(e)&&(l.push(e),a.push(e+":"+s.get(e)))}),{headers:a.join("\r\n")+"\r\n",fieldNames:l.join(":")}}function o(e){return e.substr(e.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}e.exports=(e,t,r,l)=>{let c,u;let p=a(e,(l=l||{}).headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",l.skipFields),d=function(e,t,r,s,a){let o=["v=1","a=rsa-"+s,"c=relaxed/relaxed","d="+i.toASCII(e),"q=dns/txt","s="+t,"bh="+a,"h="+r].join("; ");return n.foldLines("DKIM-Signature: "+o,76)+";\r\n b="}(l.domainName,l.keySelector,p.fieldNames,t,r);p.headers+="dkim-signature:"+o(d),(c=s.createSign(("rsa-"+t).toUpperCase())).update(p.headers);try{u=c.sign(l.privateKey,"base64")}catch(e){return!1}return d+u.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,"$&\r\n ").trim()},e.exports.relaxedHeaders=a},42653:(e,t,r)=>{"use strict";let i=r(79551);class n{constructor(e){this.options=e||{},this.cookies=[]}set(e,t){let r,n=i.parse(t||""),s=this.parse(e);return s.domain?(r=s.domain.replace(/^\./,""),(n.hostname.length<r.length||("."+n.hostname).substr(-r.length+1)!=="."+r)&&(s.domain=n.hostname)):s.domain=n.hostname,s.path||(s.path=this.getPath(n.pathname)),s.expires||(s.expires=new Date(Date.now()+1e3*(Number(this.options.sessionTimeout||1800)||1800))),this.add(s)}get(e){return this.list(e).map(e=>e.name+"="+e.value).join("; ")}list(e){let t,r,i=[];for(t=this.cookies.length-1;t>=0;t--){if(r=this.cookies[t],this.isExpired(r)){this.cookies.splice(t,t);continue}this.match(r,e)&&i.unshift(r)}return i}parse(e){let t={};return(e||"").toString().split(";").forEach(e=>{let r,i=e.split("="),n=i.shift().trim().toLowerCase(),s=i.join("=").trim();if(n)switch(n){case"expires":"Invalid Date"!==(s=new Date(s)).toString()&&(t.expires=s);break;case"path":t.path=s;break;case"domain":(r=s.toLowerCase()).length&&"."!==r.charAt(0)&&(r="."+r),t.domain=r;break;case"max-age":t.expires=new Date(Date.now()+1e3*(Number(s)||0));break;case"secure":t.secure=!0;break;case"httponly":t.httponly=!0;break;default:t.name||(t.name=n,t.value=s)}}),t}match(e,t){let r=i.parse(t||"");return(r.hostname===e.domain||"."===e.domain.charAt(0)&&("."+r.hostname).substr(-e.domain.length)===e.domain)&&this.getPath(r.pathname).substr(0,e.path.length)===e.path&&(!e.secure||"https:"===r.protocol)}add(e){let t,r;if(!e||!e.name)return!1;for(t=0,r=this.cookies.length;t<r;t++)if(this.compare(this.cookies[t],e)){if(this.isExpired(e))return this.cookies.splice(t,1),!1;return this.cookies[t]=e,!0}return this.isExpired(e)||this.cookies.push(e),!0}compare(e,t){return e.name===t.name&&e.path===t.path&&e.domain===t.domain&&e.secure===t.secure&&e.httponly==e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let t=(e||"/").split("/");return t.pop(),"/"!==(t=t.join("/").trim()).charAt(0)&&(t="/"+t),"/"!==t.substr(-1)&&(t+="/"),t}}e.exports=n},29974:(e,t,r)=>{"use strict";let i=r(81630),n=r(55591),s=r(79551),a=r(74075),o=r(27910).PassThrough,l=r(42653),c=r(49074),u=r(91645);e.exports=function(e,t){return function e(t,r){let p,d,h;(r=r||{}).fetchRes=r.fetchRes||new o,r.cookies=r.cookies||new l,r.redirects=r.redirects||0,r.maxRedirects=isNaN(r.maxRedirects)?5:r.maxRedirects,r.cookie&&([].concat(r.cookie||[]).forEach(e=>{r.cookies.set(e,t)}),r.cookie=!1);let f=r.fetchRes,m=s.parse(t),g=(r.method||"").toString().trim().toUpperCase()||"GET",y=!1,v="https:"===m.protocol?n:i,b={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+c.version};if(Object.keys(r.headers||{}).forEach(e=>{b[e.toLowerCase().trim()]=r.headers[e]}),r.userAgent&&(b["user-agent"]=r.userAgent),m.auth&&(b.Authorization="Basic "+Buffer.from(m.auth).toString("base64")),(p=r.cookies.get(t))&&(b.cookie=p),r.body){if(!1!==r.contentType&&(b["Content-Type"]=r.contentType||"application/x-www-form-urlencoded"),"function"==typeof r.body.pipe)b["Transfer-Encoding"]="chunked",(d=r.body).on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e))});else{if(r.body instanceof Buffer)d=r.body;else if("object"==typeof r.body)try{d=Buffer.from(Object.keys(r.body).map(e=>{let t=r.body[e].toString().trim();return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"))}catch(e){if(y)return;y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e);return}else d=Buffer.from(r.body.toString().trim());b["Content-Type"]=r.contentType||"application/x-www-form-urlencoded",b["Content-Length"]=d.length}g=(r.method||"").toString().trim().toUpperCase()||"POST"}let x={method:g,host:m.hostname,path:m.path,port:m.port?m.port:"https:"===m.protocol?443:80,headers:b,rejectUnauthorized:!1,agent:!1};r.tls&&Object.keys(r.tls).forEach(e=>{x[e]=r.tls[e]}),"https:"!==m.protocol||!m.hostname||m.hostname===x.host||u.isIP(m.hostname)||x.servername||(x.servername=m.hostname);try{h=v.request(x)}catch(e){return y=!0,setImmediate(()=>{e.type="FETCH",e.sourceUrl=t,f.emit("error",e)}),f}return r.timeout&&h.setTimeout(r.timeout,()=>{if(y)return;y=!0,h.abort();let e=Error("Request Timeout");e.type="FETCH",e.sourceUrl=t,f.emit("error",e)}),h.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e))}),h.on("response",i=>{let n;if(!y){switch(i.headers["content-encoding"]){case"gzip":case"deflate":n=a.createUnzip()}if(i.headers["set-cookie"]&&[].concat(i.headers["set-cookie"]||[]).forEach(e=>{r.cookies.set(e,t)}),[301,302,303,307,308].includes(i.statusCode)&&i.headers.location){if(r.redirects++,r.redirects>r.maxRedirects){y=!0;let e=Error("Maximum redirect count exceeded");e.type="FETCH",e.sourceUrl=t,f.emit("error",e),h.abort();return}return r.method="GET",r.body=!1,e(s.resolve(t,i.headers.location),r)}if(f.statusCode=i.statusCode,f.headers=i.headers,i.statusCode>=300&&!r.allowErrorResponse){y=!0;let e=Error("Invalid status code "+i.statusCode);e.type="FETCH",e.sourceUrl=t,f.emit("error",e),h.abort();return}i.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e),h.abort())}),n?(i.pipe(n).pipe(f),n.on("error",e=>{y||(y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e),h.abort())})):i.pipe(f)}}),setImmediate(()=>{if(d)try{if("function"==typeof d.pipe)return d.pipe(h);h.write(d)}catch(e){y=!0,e.type="FETCH",e.sourceUrl=t,f.emit("error",e);return}h.end()}),f}(e,t)},e.exports.Cookies=l},54976:(e,t,r)=>{"use strict";let i=r(49074),n=r(19919);class s{constructor(e){e=e||{},this.options=e||{},this.name="JSONTransport",this.version=i.version,this.logger=n.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,t){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),i=e.message.messageId(),n=[].concat(r.to||[]);n.length>3&&n.push("...and "+n.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Composing JSON structure of %s to <%s>",i,n.join(", ")),setImmediate(()=>{e.normalize((e,n)=>e?(this.logger.error({err:e,tnx:"send",messageId:i},"Failed building JSON structure for %s. %s",i,e.message),t(e)):(delete n.envelope,delete n.normalizedHeaders,t(null,{envelope:r,messageId:i,message:this.options.skipEncoding?n:JSON.stringify(n)})))})}}e.exports=s},80670:(e,t,r)=>{"use strict";let i=r(11221),n=r(93740),s=r(19919).parseDataURI;class a{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(e=>/^text\/html\b/i.test(e.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&1===this._attachments.attached.length,this.mail.raw?this.message=new i("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(e=>{let t=e.replace(/-(\w)/g,(e,t)=>t.toUpperCase());this.mail[t]&&this.message.setHeader(e,this.mail[t])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let t,r;let i=[].concat(this.mail.attachments||[]).map((e,t)=>{let r;let i=/^message\//i.test(e.contentType);/^data:/i.test(e.path||e.href)&&(e=this._processDataUrl(e));let s=e.contentType||n.detectMimeType(e.filename||e.path||e.href||"bin"),a=/^image\//i.test(s);return r={contentType:s,contentDisposition:e.contentDisposition||(i||a&&e.cid?"inline":"attachment"),contentTransferEncoding:"contentTransferEncoding"in e?e.contentTransferEncoding:"base64"},e.filename?r.filename=e.filename:!i&&!1!==e.filename&&(r.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(t+1),0>r.filename.indexOf(".")&&(r.filename+="."+n.detectExtension(r.contentType))),/^https?:\/\//i.test(e.path)&&(e.href=e.path,e.path=void 0),e.cid&&(r.cid=e.cid),e.raw?r.raw=e.raw:e.path?r.content={path:e.path}:e.href?r.content={href:e.href,httpHeaders:e.httpHeaders}:r.content=e.content||"",e.encoding&&(r.encoding=e.encoding),e.headers&&(r.headers=e.headers),r});return(this.mail.icalEvent&&(t="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},r={},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.contentType="application/ics",r.headers||(r.headers={}),r.filename=r.filename||"invite.ics",r.headers["Content-Disposition"]="attachment",r.headers["Content-Transfer-Encoding"]="base64"),e)?{attached:i.filter(e=>!e.cid).concat(r||[]),related:i.filter(e=>!!e.cid)}:{attached:i.concat(r||[]),related:[]}}getAlternatives(){let e=[],t,r,i,s,a,o;return this.mail.text&&((t="object"==typeof this.mail.text&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?this.mail.text:{content:this.mail.text}).contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&((i="object"==typeof this.mail.watchHtml&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?this.mail.watchHtml:{content:this.mail.watchHtml}).contentType="text/watch-html; charset=utf-8"),this.mail.amp&&((s="object"==typeof this.mail.amp&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?this.mail.amp:{content:this.mail.amp}).contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(a="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},o={},Object.keys(a).forEach(e=>{o[e]=a[e]}),o.content&&"object"==typeof o.content&&(o.content._resolve=!0),o.filename=!1,o.contentType="text/calendar; charset=utf-8; method="+(o.method||"PUBLISH").toString().trim().toUpperCase(),o.headers||(o.headers={})),this.mail.html&&((r="object"==typeof this.mail.html&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?this.mail.html:{content:this.mail.html}).contentType="text/html; charset=utf-8"),[].concat(t||[]).concat(i||[]).concat(s||[]).concat(r||[]).concat(o||[]).concat(this.mail.alternatives||[]).forEach(t=>{let r;/^data:/i.test(t.path||t.href)&&(t=this._processDataUrl(t)),r={contentType:t.contentType||n.detectMimeType(t.filename||t.path||t.href||"txt"),contentTransferEncoding:t.contentTransferEncoding},t.filename&&(r.filename=t.filename),/^https?:\/\//i.test(t.path)&&(t.href=t.path,t.path=void 0),t.raw?r.raw=t.raw:t.path?r.content={path:t.path}:t.href?r.content={href:t.href}:r.content=t.content||"",t.encoding&&(r.encoding=t.encoding),t.headers&&(r.headers=t.headers),e.push(r)}),e}_createMixed(e){let t;return t=e?e.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new i("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(t):this._useRelated&&this._createRelated(t),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(e=>{this._useRelated&&e===this._htmlNode||this._createContentNode(t,e)}),t}_createAlternative(e){let t;return t=e?e.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new i("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(e=>{this._useRelated&&this._htmlNode===e?this._createRelated(t):this._createContentNode(t,e)}),t}_createRelated(e){let t;return t=e?e.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new i('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(t,this._htmlNode),this._attachments.related.forEach(e=>this._createContentNode(t,e)),t}_createContentNode(e,t){let r;(t=t||{}).content=t.content||"";let n=(t.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return r=e?e.createChild(t.contentType,{filename:t.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new i(t.contentType,{filename:t.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),t.headers&&r.addHeader(t.headers),t.cid&&r.setHeader("Content-Id","<"+t.cid.replace(/[<>]/g,"")+">"),t.contentTransferEncoding?r.setHeader("Content-Transfer-Encoding",t.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(t.contentType)&&r.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(t.contentType)||t.contentDisposition)&&r.setHeader("Content-Disposition",t.contentDisposition||(t.cid&&/^image\//i.test(t.contentType)?"inline":"attachment")),"string"!=typeof t.content||["utf8","usascii","ascii"].includes(n)||(t.content=Buffer.from(t.content,n)),t.raw?r.setRaw(t.raw):r.setContent(t.content),r}_processDataUrl(e){let t;return(e.path||e.href).match(/^data:/)&&(t=s(e.path||e.href)),t&&(e.content=t.data,e.contentType=e.contentType||t.contentType,"path"in e&&(e.path=!1),"href"in e&&(e.href=!1)),e}}e.exports=a},95570:(e,t,r)=>{"use strict";let i=r(94735),n=r(19919),s=r(25194),a=r(80670),o=r(88041),l=r(7802),c=r(28354),u=r(79551),p=r(49074),d=r(23305),h=r(91645),f=r(14985),m=r(55511);class g extends i{constructor(e,t,r){super(),this.options=t||{},this._defaults=r||{},this._defaultPlugins={compile:[(...e)=>this._convertDataImages(...e)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=!!this.options.dkim&&new o(this.options.dkim),this.transporter=e,this.transporter.mailer=this,this.logger=n.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),"function"==typeof this.transporter.on&&(this.transporter.on("log",e=>{this.logger.debug({tnx:"transport"},"%s: %s",e.type,e.message)}),this.transporter.on("error",e=>{this.logger.error({err:e,tnx:"transport"},"Transport Error: %s",e.message),this.emit("error",e)}),this.transporter.on("idle",(...e)=>{this.emit("idle",...e)})),["close","isIdle","verify"].forEach(e=>{this[e]=(...t)=>"function"==typeof this.transporter[e]?("verify"===e&&"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[e](...t)):(this.logger.warn({tnx:"transport",methodName:e},"Non existing method %s called for transport",e),!1)}),this.options.proxy&&"string"==typeof this.options.proxy&&this.setupProxy(this.options.proxy)}use(e,t){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(t):this._userPlugins[e]=[t],this}sendMail(e,t=null){let r;t||(r=new Promise((e,r)=>{t=n.callbackPromise(e,r)})),"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let i=new d(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",i,e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",e.message),t(e);i.message=new a(i.data).compile(),i.setMailerHeader(),i.setPriorityHeaders(),i.setListHeaders(),this._processPlugins("stream",i,e=>{if(e)return this.logger.error({err:e,tnx:"plugin",action:"stream"},"PluginStream Error: %s",e.message),t(e);(i.data.dkim||this.dkim)&&i.message.processFunc(e=>{let t=i.data.dkim?new o(i.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:i.message.messageId(),dkimDomains:t.keys.map(e=>e.keySelector+"."+e.domainName).join(", ")},"Signing outgoing message with %s keys",t.keys.length),t.sign(e,i.data._dkim)}),this.transporter.send(i,(...e)=>{e[0]&&this.logger.error({err:e[0],tnx:"transport",action:"send"},"Send Error: %s",e[0].message),t(...e)})})}),r}getVersionString(){return c.format("%s (%s; +%s; %s/%s)",p.name,p.version,p.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,t,r){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return r();let i=this._userPlugins[e]||[],n=this._defaultPlugins[e]||[];if(i.length&&this.logger.debug({tnx:"transaction",pluginCount:i.length,step:e},"Using %s plugins for %s",i.length,e),i.length+n.length===0)return r();let s=0,a="default",o=()=>{let e="default"===a?n:i;if(s>=e.length){if("default"!==a||!i.length)return r();a="user",s=0,e=i}(0,e[s++])(t,e=>{if(e)return r(e);o()})};o()}setupProxy(e){let t=u.parse(e);this.getSocket=(e,r)=>{let i=t.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+i))return this.meta.get("proxy_handler_"+i)(t,e,r);switch(i){case"http":case"https":l(t.href,e.port,e.host,(e,t)=>e?r(e):r(null,{connection:t}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return r(Error("Socks module not loaded"));let i=i=>{let n=!!this.meta.get("proxy_socks_module").SocksClient,s=n?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),a=Number(t.protocol.replace(/\D/g,""))||5,o={proxy:{ipaddress:i,port:Number(t.port),type:a},[n?"destination":"target"]:{host:e.host,port:e.port},command:"connect"};if(t.auth){let e=decodeURIComponent(t.auth.split(":").shift()),r=decodeURIComponent(t.auth.split(":").pop());n?(o.proxy.userId=e,o.proxy.password=r):4===a?o.userid=e:o.authentication={username:e,password:r}}s.createConnection(o,(e,t)=>e?r(e):r(null,{connection:t.socket||t}))};if(h.isIP(t.hostname))return i(t.hostname);return f.resolve(t.hostname,(e,t)=>{if(e)return r(e);i(Array.isArray(t)?t[0]:t)})}}r(Error("Unknown proxy configuration"))}}_convertDataImages(e,t){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return t();e.resolveContent(e.data,"html",(r,i)=>{if(r)return t(r);let n=0;i=(i||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(t,r,i,a)=>{let o=m.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:i,cid:o,filename:"image-"+ ++n+"."+s.detectExtension(a)}),r+"cid:"+o}),e.data.html=i,t()})}set(e,t){return this.meta.set(e,t)}get(e){return this.meta.get(e)}}e.exports=g},23305:(e,t,r)=>{"use strict";let i=r(19919),n=r(11221),s=r(93740);class a{constructor(e,t){this.mailer=e,this.data={},this.message=null,t=t||{};let r=e.options||{},i=e._defaults||{};Object.keys(t).forEach(e=>{this.data[e]=t[e]}),this.data.headers=this.data.headers||{},Object.keys(i).forEach(e=>{e in this.data?"headers"===e&&Object.keys(i.headers).forEach(e=>{e in this.data.headers||(this.data.headers[e]=i.headers[e])}):this.data[e]=i[e]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(e=>{e in r&&(this.data[e]=r[e])})}resolveContent(...e){return i.resolveContent(...e)}resolveAll(e){let t=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((e,r)=>{t.push([this.data.alternatives,r])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((e,r)=>{!e.filename&&(e.filename=(e.path||e.href||"").split("/").pop().split("?").shift()||"attachment-"+(r+1),0>e.filename.indexOf(".")&&(e.filename+="."+s.detectExtension(e.contentType))),e.contentType||(e.contentType=s.detectMimeType(e.filename||e.path||e.href||"bin")),t.push([this.data.attachments,r])});let r=new n;["from","to","cc","bcc","sender","replyTo"].forEach(e=>{let t;this.message?t=[].concat(r._parseAddresses(this.message.getHeader("replyTo"===e?"reply-to":e))||[]):this.data[e]&&(t=[].concat(r._parseAddresses(this.data[e])||[])),t&&t.length?this.data[e]=t:e in this.data&&(this.data[e]=null)}),["from","sender"].forEach(e=>{this.data[e]&&(this.data[e]=this.data[e].shift())});let a=0,o=()=>{if(a>=t.length)return e(null,this.data);let r=t[a++];if(!r[0]||!r[0][r[1]])return o();i.resolveContent(...r,(t,i)=>{if(t)return e(t);let n={content:i};r[0][r[1]]&&"object"==typeof r[0][r[1]]&&!Buffer.isBuffer(r[0][r[1]])&&Object.keys(r[0][r[1]]).forEach(e=>{e in n||["content","path","href","raw"].includes(e)||(n[e]=r[0][r[1]][e])}),r[0][r[1]]=n,o()})};setImmediate(()=>o())}normalize(e){let t=this.data.envelope||this.message.getEnvelope(),r=this.message.messageId();this.resolveAll((i,n)=>i?e(i):(n.envelope=t,n.messageId=r,["html","text","watchHtml","amp"].forEach(e=>{n[e]&&n[e].content&&("string"==typeof n[e].content?n[e]=n[e].content:Buffer.isBuffer(n[e].content)&&(n[e]=n[e].content.toString()))}),n.icalEvent&&Buffer.isBuffer(n.icalEvent.content)&&(n.icalEvent.content=n.icalEvent.content.toString("base64"),n.icalEvent.encoding="base64"),n.alternatives&&n.alternatives.length&&n.alternatives.forEach(e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")}),n.attachments&&n.attachments.length&&n.attachments.forEach(e=>{e&&e.content&&Buffer.isBuffer(e.content)&&(e.content=e.content.toString("base64"),e.encoding="base64")}),n.normalizedHeaders={},Object.keys(n.headers||{}).forEach(e=>{let t=[].concat(n.headers[e]||[]).shift();(t=t&&t.value||t)&&(["references","in-reply-to","message-id","content-id"].includes(e)&&(t=this.message._encodeHeaderValue(e,t)),n.normalizedHeaders[e]=t)}),n.list&&"object"==typeof n.list&&this._getListHeaders(n.list).forEach(e=>{n.normalizedHeaders[e.key]=e.value.map(e=>e&&e.value||e).join(", ")}),n.references&&(n.normalizedHeaders.references=this.message._encodeHeaderValue("references",n.references)),n.inReplyTo&&(n.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",n.inReplyTo)),e(null,n)))}setMailerHeader(){this.message&&this.data.xMailer&&this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(this.message&&this.data.priority)switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low")}}setListHeaders(){this.message&&this.data.list&&"object"==typeof this.data.list&&this.data.list&&"object"==typeof this.data.list&&this._getListHeaders(this.data.list).forEach(e=>{e.value.forEach(t=>{this.message.addHeader(e.key,t)})})}_getListHeaders(e){return Object.keys(e).map(t=>({key:"list-"+t.toLowerCase().trim(),value:[].concat(e[t]||[]).map(e=>({prepared:!0,foldLines:!0,value:[].concat(e||[]).map(e=>{if("string"==typeof e&&(e={url:e}),e&&e.url){if("id"===t.toLowerCase().trim()){let t=e.comment||"";return t=s.isPlainText(t)?'"'+t+'"':s.encodeWord(t),(e.comment?t+" ":"")+this._formatListUrl(e.url).replace(/^<[^:]+\/{,2}/,"")}let r=e.comment||"";return s.isPlainText(r)||(r=s.encodeWord(r)),this._formatListUrl(e.url)+(e.comment?" ("+r+")":"")}return""}).filter(e=>e).join(", ")}))}))}_formatListUrl(e){return(e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e))?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}}e.exports=a},93740:(e,t,r)=>{"use strict";let i=r(20301),n=r(52947),s=r(25194);e.exports={isPlainText:(e,t)=>!("string"!=typeof e||(t?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(e)),hasLongerLines:(e,t)=>e.length>131072||RegExp("^.{"+(t+1)+",}","m").test(e),encodeWord(e,t,r){let s;t=(t||"Q").toString().toUpperCase().trim().charAt(0);let a="UTF-8";if((r=r||0)&&r>7+a.length&&(r-=7+a.length),"Q"===t?s=n.encode(e).replace(/[^a-z0-9!*+\-/=]/gi,e=>{let t=e.charCodeAt(0).toString(16).toUpperCase();return" "===e?"_":"="+(1===t.length?"0"+t:t)}):"B"===t&&(s="string"==typeof e?e:i.encode(e),r=r?Math.max(3,(r-r%4)/4*3):0),r&&("B"!==t?s:i.encode(e)).length>r){if("Q"===t)s=this.splitMimeEncodedString(s,r).join("?= =?"+a+"?"+t+"?");else{let e=[],n="";for(let t=0,a=s.length;t<a;t++){let o=s.charAt(t);/[\ud83c\ud83d\ud83e]/.test(o)&&t<a-1&&(o+=s.charAt(++t)),Buffer.byteLength(n+o)<=r||0===t?n+=o:(e.push(i.encode(n)),n=o)}n&&e.push(i.encode(n)),s=e.length>1?e.join("?= =?"+a+"?"+t+"?"):e.join("")}}else"B"===t&&(s=i.encode(e));return"=?"+a+"?"+t+"?"+s+("?="===s.substr(-2)?"":"?=")},encodeWords(e,t,r,i){r=r||0;let n=e.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!n)return e;if(i)return this.encodeWord(e,t,r);let s=e.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!s)return e;let a=n.index+(n[0].match(/[^\s]/)||{index:0}).index,o=s.index+(s[1]||"").length;return(a?e.substr(0,a):"")+this.encodeWord(e.substring(a,o),t||"Q",r)+(o<e.length?e.substr(o):"")},buildHeaderValue(e){let t=[];return Object.keys(e.params||{}).forEach(r=>{let i=e.params[r];!this.isPlainText(i,!0)||i.length>=75?this.buildHeaderParam(r,i,50).forEach(e=>{/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(e.value)&&"*"!==e.key.substr(-1)?t.push(e.key+"="+JSON.stringify(e.value)):t.push(e.key+"="+e.value)}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(i)?t.push(r+"="+JSON.stringify(i)):t.push(r+"="+i)}),e.value+(t.length?"; "+t.join("; "):"")},buildHeaderParam(e,t,r){let i,n,s,a,o,l,c=[],u="string"==typeof t?t:(t||"").toString(),p=0;if(r=r||50,this.isPlainText(t,!0)){if(u.length<=r)return[{key:e,value:u}];(u=u.replace(RegExp(".{"+r+"}","g"),e=>(c.push({line:e}),"")))&&c.push({line:u})}else{if(/[\uD800-\uDBFF]/.test(u)){for(o=0,i=[],l=u.length;o<l;o++)(s=(n=u.charAt(o)).charCodeAt(0))>=55296&&s<=56319&&o<l-1?(n+=u.charAt(o+1),i.push(n),o++):i.push(n);u=i}a="utf-8''";let e=!0;for(o=0,p=0,l=u.length;o<l;o++){if(n=u[o],e)n=this.safeEncodeURIComponent(n);else if((n=" "===n?n:this.safeEncodeURIComponent(n))!==u[o]){if((this.safeEncodeURIComponent(a)+n).length>=r)c.push({line:a,encoded:e}),a="",p=o-1;else{e=!0,o=p,a="";continue}}(a+n).length>=r?(c.push({line:a,encoded:e}),a=n=" "===u[o]?" ":this.safeEncodeURIComponent(u[o]),n===u[o]?(e=!1,p=o-1):e=!0):a+=n}a&&c.push({line:a,encoded:e})}return c.map((t,r)=>({key:e+"*"+r+(t.encoded?"*":""),value:t.line}))},parseHeaderValue(e){let t,r={value:!1,params:{}},i=!1,n="",s="value",a=!1,o=!1;for(let l=0,c=e.length;l<c;l++)if(t=e.charAt(l),"key"===s){if("="===t){i=n.trim().toLowerCase(),s="value",n="";continue}n+=t}else{if(o)n+=t;else if("\\"===t){o=!0;continue}else a&&t===a?a=!1:a||'"'!==t?a||";"!==t?n+=t:(!1===i?r.value=n.trim():r.params[i]=n.trim(),s="key",n=""):a=t;o=!1}return"value"===s?!1===i?r.value=n.trim():r.params[i]=n.trim():n.trim()&&(r.params[n.trim().toLowerCase()]=""),Object.keys(r.params).forEach(e=>{let t,i,n,s;(n=e.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(t=e.substr(0,n.index),i=Number(n[2]||n[3])||0,r.params[t]&&"object"==typeof r.params[t]||(r.params[t]={charset:!1,values:[]}),s=r.params[e],0===i&&"*"===n[0].substr(-1)&&(n=s.match(/^([^']*)'[^']*'(.*)$/))&&(r.params[t].charset=n[1]||"iso-8859-1",s=n[2]),r.params[t].values[i]=s,delete r.params[e])}),Object.keys(r.params).forEach(e=>{let t;r.params[e]&&Array.isArray(r.params[e].values)&&(t=r.params[e].values.map(e=>e||"").join(""),r.params[e].charset?r.params[e]="=?"+r.params[e].charset+"?Q?"+t.replace(/[=?_\s]/g,e=>{let t=e.charCodeAt(0).toString(16);return" "===e?"_":"%"+(t.length<2?"0":"")+t}).replace(/%/g,"=")+"?=":r.params[e]=t)}),r},detectExtension:e=>s.detectExtension(e),detectMimeType:e=>s.detectMimeType(e),foldLines(e,t,r){e=(e||"").toString(),t=t||76;let i=0,n=e.length,s="",a,o;for(;i<n;){if((a=e.substr(i,t)).length<t){s+=a;break}if(o=a.match(/^[^\n\r]*(\r?\n|\r)/)){s+=a=o[0],i+=a.length;continue}(o=a.match(/(\s+)[^\s]*$/))&&o[0].length-(r?(o[1]||"").length:0)<a.length?a=a.substr(0,a.length-(o[0].length-(r?(o[1]||"").length:0))):(o=e.substr(i+a.length).match(/^[^\s]+(\s*)/))&&(a+=o[0].substr(0,o[0].length-(r?0:(o[1]||"").length))),s+=a,(i+=a.length)<n&&(s+="\r\n")}return s},splitMimeEncodedString:(e,t)=>{let r,i,n,s,a=[];for(t=Math.max(t||0,12);e.length;){for((i=(r=e.substr(0,t)).match(/[=][0-9A-F]?$/i))&&(r=r.substr(0,i.index)),s=!1;!s;)s=!0,(i=e.substr(r.length).match(/^[=]([0-9A-F]{2})/i))&&(n=parseInt(i[1],16))<194&&n>127&&(r=r.substr(0,r.length-3),s=!1);r.length&&a.push(r),e=e.substr(r.length)}return a},encodeURICharComponent:e=>{let t="",r=e.charCodeAt(0).toString(16).toUpperCase();if(r.length%2&&(r="0"+r),r.length>2)for(let e=0,i=r.length/2;e<i;e++)t+="%"+r.substr(e,2);else t+="%"+r;return t},safeEncodeURIComponent(e){e=(e||"").toString();try{e=encodeURIComponent(e)}catch(t){return e.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return e.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,e=>this.encodeURICharComponent(e))}}},25194:(e,t,r)=>{"use strict";let i=r(33873),n="application/octet-stream",s=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),a=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);e.exports={detectMimeType(e){if(!e)return n;let t=i.parse(e),r=(t.ext.substr(1)||t.name||"").split("?").shift().trim().toLowerCase(),s=n;return(a.has(r)&&(s=a.get(r)),Array.isArray(s))?s[0]:s},detectExtension(e){if(!e)return"bin";let t=(e||"").toLowerCase().trim().split("/"),r=t.shift().trim(),i=t.join("/").trim();if(s.has(r+"/"+i)){let e=s.get(r+"/"+i);return Array.isArray(e)?e[0]:e}return"text"===r?"txt":"bin"}}},11221:(e,t,r)=>{"use strict";let i=r(55511),n=r(29021),s=r(94897),a=r(27910).PassThrough,o=r(19919),l=r(93740),c=r(52947),u=r(20301),p=r(90525),d=r(29974),h=r(11184),f=r(29414),m=r(83137);class g{constructor(e,t){this.nodeCounter=0,t=t||{},this.baseBoundary=t.baseBoundary||i.randomBytes(8).toString("hex"),this.boundaryPrefix=t.boundaryPrefix||"--_NmP",this.disableFileAccess=!!t.disableFileAccess,this.disableUrlAccess=!!t.disableUrlAccess,this.normalizeHeaderKey=t.normalizeHeaderKey,this.date=new Date,this.rootNode=t.rootNode||this,this.keepBcc=!!t.keepBcc,t.filename&&(this.filename=t.filename,e||(e=l.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(t.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=t.parentNode,this.hostname=t.hostname,this.newline=t.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],e&&this.setHeader("Content-Type",e)}createChild(e,t){t||"object"!=typeof e||(t=e,e=void 0);let r=new g(e,t);return this.appendChild(r),r}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach((t,r)=>{t===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[r]=e)}),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,t){let r=!1,i;if(!t&&e&&"object"==typeof e)return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach(e=>{this.setHeader(e.key,e.value)}):Object.keys(e).forEach(t=>{this.setHeader(t,e[t])}),this;i={key:e=this._normalizeHeaderKey(e),value:t};for(let t=0,n=this._headers.length;t<n;t++)this._headers[t].key===e&&(r?(this._headers.splice(t,1),t--,n--):(this._headers[t]=i,r=!0));return r||this._headers.push(i),this}addHeader(e,t){return!t&&e&&"object"==typeof e?e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach(e=>{this.addHeader(e.key,e.value)}):Object.keys(e).forEach(t=>{this.addHeader(t,e[t])}):Array.isArray(t)?t.forEach(t=>{this.addHeader(e,t)}):this._headers.push({key:this._normalizeHeaderKey(e),value:t}),this}getHeader(e){e=this._normalizeHeaderKey(e);for(let t=0,r=this._headers.length;t<r;t++)if(this._headers[t].key===e)return this._headers[t].value}setContent(e){return this.content=e,"function"==typeof this.content.pipe?(this._contentErrorHandler=e=>{this.content.removeListener("error",this._contentErrorHandler),this.content=e},this.content.once("error",this._contentErrorHandler)):"string"==typeof this.content&&(this._isPlainText=l.isPlainText(this.content),this._isPlainText&&l.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let t;e||(t=new Promise((t,r)=>{e=o.callbackPromise(t,r)}));let r=this.createReadStream(),i=[],n=0,s=!1;return r.on("readable",()=>{let e;for(;null!==(e=r.read());)i.push(e),n+=e.length}),r.once("error",t=>{if(!s)return s=!0,e(t)}),r.once("end",t=>{if(!s)return s=!0,t&&t.length&&(i.push(t),n+=t.length),e(null,Buffer.concat(i,n))}),t}getTransferEncoding(){let e=!1,t=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return!this.content||(e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim())&&["base64","quoted-printable"].includes(e)||(/^text\//i.test(t)?this._isPlainText&&!this._hasLongLines?e="7bit":"string"==typeof this.content||this.content instanceof Buffer?e="Q"===this._getTextEncoding(this.content)?"quoted-printable":"base64":e="B"===this.textEncoding?"base64":"quoted-printable":/^(multipart|message)\//i.test(t)||(e=e||"base64")),e}buildHeaders(){let e=this.getTransferEncoding(),t=[];if(e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let e=this._headers.length-2;e>=0;e--){let t=this._headers[e];"Content-Type"===t.key&&(this._headers.splice(e,1),this._headers.push(t))}}return this._headers.forEach(e=>{let r,i,n=e.key,s=e.value,a={};if(!s||"object"!=typeof s||["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(n)||(Object.keys(s).forEach(e=>{"value"!==e&&(a[e]=s[e])}),(s=(s.value||"").toString()).trim())){if(a.prepared){a.foldLines?t.push(l.foldLines(n+": "+s)):t.push(n+": "+s);return}switch(e.key){case"Content-Disposition":r=l.parseHeaderValue(s),this.filename&&(r.params.filename=this.filename),s=l.buildHeaderValue(r);break;case"Content-Type":r=l.parseHeaderValue(s),this._handleContentType(r),r.value.match(/^text\/plain\b/)&&"string"==typeof this.content&&/[\u0080-\uFFFF]/.test(this.content)&&(r.params.charset="utf-8"),s=l.buildHeaderValue(r),this.filename&&(((i=this._encodeWords(this.filename))!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(i))&&(i='"'+i+'"'),s+="; name="+i);break;case"Bcc":if(!this.keepBcc)return}if(((s=this._encodeHeaderValue(n,s))||"").toString().trim()){if("function"==typeof this.normalizeHeaderKey){let e=this.normalizeHeaderKey(n,s);e&&"string"==typeof e&&e.length&&(n=e)}t.push(l.foldLines(n+": "+s,76))}}}),t.join("\r\n")}createReadStream(e){let t;let r=new a(e=e||{}),i=r;this.stream(r,e,e=>{if(e){i.emit("error",e);return}r.end()});for(let e=0,r=this._transforms.length;e<r;e++)t="function"==typeof this._transforms[e]?this._transforms[e]():this._transforms[e],i.once("error",e=>{t.emit("error",e)}),i=i.pipe(t);t=new h,i.once("error",e=>{t.emit("error",e)}),i=i.pipe(t);for(let e=0,r=this._processFuncs.length;e<r;e++)i=(t=this._processFuncs[e])(i);if(this.newline){let e=["win","windows","dos","\r\n"].includes(this.newline.toString().toLowerCase())?new f:new m,t=i.pipe(e);return i.on("error",e=>t.emit("error",e)),t}return i}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,t,r){let i,n,s=this.getTransferEncoding(),a=!1,o=e=>{a||(a=!0,r(e))},l=()=>{let r=0,i=()=>{if(r>=this.childNodes.length)return e.write("\r\n--"+this.boundary+"--\r\n"),o();let n=this.childNodes[r++];e.write((r>1?"\r\n":"")+"--"+this.boundary+"\r\n"),n.stream(e,t,e=>{if(e)return o(e);setImmediate(i)})};if(!this.multipart)return o();setImmediate(i)};this._raw?setImmediate(()=>{if("[object Error]"===Object.prototype.toString.call(this._raw))return o(this._raw);"function"==typeof this._raw.pipe&&this._raw.removeListener("error",this._contentErrorHandler);let t=this._getStream(this._raw);t.pipe(e,{end:!1}),t.on("error",t=>e.emit("error",t)),t.on("end",l)}):(e.write(this.buildHeaders()+"\r\n\r\n"),setImmediate(()=>{if(!this.content)return setImmediate(l);{if("[object Error]"===Object.prototype.toString.call(this.content))return o(this.content);"function"==typeof this.content.pipe&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=e=>o(e),this.content.once("error",this._contentErrorHandler));let r=()=>{["quoted-printable","base64"].includes(s)?((i=new("base64"===s?u:c).Encoder(t)).pipe(e,{end:!1}),i.once("end",l),i.once("error",e=>o(e)),(n=this._getStream(this.content)).pipe(i)):((n=this._getStream(this.content)).pipe(e,{end:!1}),n.once("end",l)),n.once("error",e=>o(e))};if(this.content._resolve){let e=[],t=0,i=!1,n=this._getStream(this.content);n.on("error",e=>{i||(i=!0,o(e))}),n.on("readable",()=>{let r;for(;null!==(r=n.read());)e.push(r),t+=r.length}),n.on("end",()=>{i||(i=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(e,t),setImmediate(r))})}else setImmediate(r);return}}))}setEnvelope(e){let t;this._envelope={from:!1,to:[]},e.from&&(t=[],this._convertAddresses(this._parseAddresses(e.from),t),(t=t.filter(e=>e&&e.address)).length&&t[0]&&(this._envelope.from=t[0].address)),["to","cc","bcc"].forEach(t=>{e[t]&&this._convertAddresses(this._parseAddresses(e[t]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(e=>e.address).filter(e=>e);let r=["to","cc","bcc","from"];return Object.keys(e).forEach(t=>{r.includes(t)||(this._envelope[t]=e[t])}),this}getAddresses(){let e={};return this._headers.forEach(t=>{let r=t.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(r)&&(Array.isArray(e[r])||(e[r]=[]),this._convertAddresses(this._parseAddresses(t.value),e[r]))}),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach(t=>{let r=[];"From"===t.key||!e.from&&["Reply-To","Sender"].includes(t.key)?(this._convertAddresses(this._parseAddresses(t.value),r),r.length&&r[0]&&(e.from=r[0].address)):["To","Cc","Bcc"].includes(t.key)&&this._convertAddresses(this._parseAddresses(t.value),e.to)}),e.to=e.to.map(e=>e.address),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&"function"==typeof this._raw.pipe&&(this._contentErrorHandler=e=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=e},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let t;return e._resolvedValue?(t=new a,setImmediate(()=>{try{t.end(e._resolvedValue)}catch(e){t.emit("error",e)}}),t):"function"==typeof e.pipe?e:e&&"string"==typeof e.path&&!e.href?this.disableFileAccess?(t=new a,setImmediate(()=>t.emit("error",Error("File access rejected for "+e.path))),t):n.createReadStream(e.path):e&&"string"==typeof e.href?this.disableUrlAccess?(t=new a,setImmediate(()=>t.emit("error",Error("Url access rejected for "+e.href))),t):d(e.href,{headers:e.httpHeaders}):(t=new a,setImmediate(()=>{try{t.end(e||"")}catch(e){t.emit("error",e)}}),t)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map(e=>e&&e.address?(e.address=this._normalizeAddress(e.address),e.name=e.name||"",[e]):p(e)))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,e=>e.toUpperCase()).replace(/^Content-Features$/i,"Content-features")}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=!!/^multipart\//i.test(this.contentType)&&this.contentType.substr(this.contentType.indexOf("/")+1),this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,t){switch(e=this._normalizeHeaderKey(e)){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(t));case"Message-ID":case"In-Reply-To":case"Content-Id":return"<"!==(t=(t||"").toString().replace(/\r?\n|\r/g," ")).charAt(0)&&(t="<"+t),">"!==t.charAt(t.length-1)&&(t+=">"),t;case"References":return(t=[].concat.apply([],[].concat(t||"").map(e=>(e=(e||"").toString().replace(/\r?\n|\r/g," ").trim()).replace(/<[^>]*>/g,e=>e.replace(/\s/g,"")).split(/\s+/))).map(e=>("<"!==e.charAt(0)&&(e="<"+e),">"!==e.charAt(e.length-1)&&(e+=">"),e))).join(" ").trim();case"Date":if("[object Date]"===Object.prototype.toString.call(t))return t.toUTCString().replace(/GMT/,"+0000");return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t);case"Content-Type":case"Content-Disposition":return(t||"").toString().replace(/\r?\n|\r/g," ");default:return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t)}}_convertAddresses(e,t){let r=[];return t=t||[],[].concat(e||[]).forEach(e=>{if(e.address)e.address=this._normalizeAddress(e.address),e.name?e.name&&r.push(`${this._encodeAddressName(e.name)} <${e.address}>`):r.push(e.address.indexOf(" ")>=0?`<${e.address}>`:`${e.address}`),e.address&&!t.filter(t=>t.address===e.address).length&&t.push(e);else if(e.group){let i=(e.group.length?this._convertAddresses(e.group,t):"").trim();r.push(`${this._encodeAddressName(e.name)}:${i};`)}}),r.join(", ")}_normalizeAddress(e){let t;let r=(e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim()).lastIndexOf("@");if(r<0)return e;let i=e.substr(0,r),n=e.substr(r+1);try{t=s.toASCII(n.toLowerCase())}catch(e){}return i.indexOf(" ")>=0&&('"'!==i.charAt(0)&&(i='"'+i),'"'!==i.substr(-1)&&(i+='"')),`${i}@${t}`}_encodeAddressName(e){return/^[\w ]*$/.test(e)?e:/^[\x20-\x7e]*$/.test(e)?'"'+e.replace(/([\\"])/g,"\\$1")+'"':l.encodeWord(e,this._getTextEncoding(e),52)}_encodeWords(e){return l.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let t=this.textEncoding;return t||(t=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length<(e.match(/[a-z]/gi)||[]).length?"Q":"B"),t}_generateMessageId(){return"<"+[2,2,2,6].reduce((e,t)=>e+"-"+i.randomBytes(t).toString("hex"),i.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}}e.exports=g},11184:(e,t,r)=>{"use strict";let i=r(27910).Transform;class n extends i{constructor(){super(),this.lastByte=!1}_transform(e,t,r){e.length&&(this.lastByte=e[e.length-1]),this.push(e),r()}_flush(e){return 10===this.lastByte||(13===this.lastByte?this.push(Buffer.from("\n")):this.push(Buffer.from("\r\n"))),e()}}e.exports=n},83137:(e,t,r)=>{"use strict";let i=r(27910).Transform;class n extends i{constructor(e){super(e),this.options=e||{}}_transform(e,t,r){let i;let n=0;for(let t=0,r=e.length;t<r;t++)13===e[t]&&(i=e.slice(n,t),n=t+1,this.push(i));n&&n<e.length?(i=e.slice(n),this.push(i)):n||this.push(e),r()}}e.exports=n},29414:(e,t,r)=>{"use strict";let i=r(27910).Transform;class n extends i{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,t,r){let i;let n=0;for(let t=0,r=e.length;t<r;t++)10===e[t]&&(t&&13!==e[t-1]||!t&&13!==this.lastByte)&&(t>n&&(i=e.slice(n,t),this.push(i)),this.push(Buffer.from("\r\n")),n=t+1);n&&n<e.length?(i=e.slice(n),this.push(i)):n||this.push(e),this.lastByte=e[e.length-1],r()}}e.exports=n},98721:(e,t,r)=>{"use strict";let i=r(95570),n=r(19919),s=r(9023),a=r(18662),o=r(60691),l=r(77138),c=r(54976),u=r(20511),p=r(29974),d=r(49074),h=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),f=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),m=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,g=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),y=!1;e.exports.createTransport=function(e,t){let r,p;return("object"==typeof e&&"function"!=typeof e.send||"string"==typeof e&&/^(smtps?|direct):/i.test(e))&&(e=(p=(r="string"==typeof e?e:e.url)?n.parseConnectionUrl(r):e).pool?new s(p):p.sendmail?new o(p):p.streamTransport?new l(p):p.jsonTransport?new c(p):p.SES?new u(p):new a(p)),new i(e,p,t)},e.exports.createTestAccount=function(e,t){let r;if(t||"function"!=typeof e||(t=e,e=!1),t||(r=new Promise((e,r)=>{t=n.callbackPromise(e,r)})),g&&y)return setImmediate(()=>t(null,y)),r;e=e||h;let i=[],s=0,a={},o={requestor:d.name,version:d.version};m&&(a.Authorization="Bearer "+m);let l=p(e+"/user",{contentType:"application/json",method:"POST",headers:a,body:Buffer.from(JSON.stringify(o))});return l.on("readable",()=>{let e;for(;null!==(e=l.read());)i.push(e),s+=e.length}),l.once("error",e=>t(e)),l.once("end",()=>{let e,r,n=Buffer.concat(i,s);try{e=JSON.parse(n.toString())}catch(e){r=e}return r?t(r):"success"!==e.status||e.error?t(Error(e.error||"Request failed")):void(delete e.status,t(null,y=e))}),r},e.exports.getTestMessageUrl=function(e){if(!e||!e.response)return!1;let t=new Map;return e.response.replace(/\[([^\]]+)\]$/,(e,r)=>{r.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(e,r,i)=>{t.set(r,i)})}),!!(t.has("STATUS")&&t.has("MSGID"))&&(y.web||f)+"/message/"+t.get("MSGID")}},94897:e=>{"use strict";let t=/^xn--/,r=/[^\0-\x7F]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s=Math.floor,a=String.fromCharCode;function o(e){throw RangeError(n[e])}function l(e,t){let r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+(function(e,t){let r=[],i=e.length;for(;i--;)r[i]=t(e[i]);return r})((e=e.replace(i,".")).split("."),t).join(".")}function c(e){let t=[],r=0,i=e.length;for(;r<i;){let n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){let i=e.charCodeAt(r++);(64512&i)==56320?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),r--)}else t.push(n)}return t}let u=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},p=function(e,t,r){let i=0;for(e=r?s(e/700):e>>1,e+=s(e/t);e>455;i+=36)e=s(e/35);return s(i+36*e/(e+38))},d=function(e){let t=[],r=e.length,i=0,n=128,a=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let r=0;r<l;++r)e.charCodeAt(r)>=128&&o("not-basic"),t.push(e.charCodeAt(r));for(let u=l>0?l+1:0;u<r;){let l=i;for(let t=1,n=36;;n+=36){var c;u>=r&&o("invalid-input");let l=(c=e.charCodeAt(u++))>=48&&c<58?26+(c-48):c>=65&&c<91?c-65:c>=97&&c<123?c-97:36;l>=36&&o("invalid-input"),l>s((0x7fffffff-i)/t)&&o("overflow"),i+=l*t;let p=n<=a?1:n>=a+26?26:n-a;if(l<p)break;let d=36-p;t>s(0x7fffffff/d)&&o("overflow"),t*=d}let d=t.length+1;a=p(i-l,d,0==l),s(i/d)>0x7fffffff-n&&o("overflow"),n+=s(i/d),i%=d,t.splice(i++,0,n)}return String.fromCodePoint(...t)},h=function(e){let t=[],r=(e=c(e)).length,i=128,n=0,l=72;for(let r of e)r<128&&t.push(a(r));let d=t.length,h=d;for(d&&t.push("-");h<r;){let r=0x7fffffff;for(let t of e)t>=i&&t<r&&(r=t);let c=h+1;for(let f of(r-i>s((0x7fffffff-n)/c)&&o("overflow"),n+=(r-i)*c,i=r,e))if(f<i&&++n>0x7fffffff&&o("overflow"),f===i){let e=n;for(let r=36;;r+=36){let i=r<=l?1:r>=l+26?26:r-l;if(e<i)break;let n=e-i,o=36-i;t.push(a(u(i+n%o,0))),e=s(n/o)}t.push(a(u(e,0))),l=p(n,c,h===d),n=0,++h}++n,++i}return t.join("")};e.exports={version:"2.3.1",ucs2:{decode:c,encode:e=>String.fromCodePoint(...e)},decode:d,encode:h,toASCII:function(e){return l(e,function(e){return r.test(e)?"xn--"+h(e):e})},toUnicode:function(e){return l(e,function(e){return t.test(e)?d(e.slice(4).toLowerCase()):e})}}},52947:(e,t,r)=>{"use strict";let i=r(27910).Transform;function n(e){let t;"string"==typeof e&&(e=Buffer.from(e,"utf-8"));let r=[[9],[10],[13],[32,60],[62,126]],i="";for(let n=0,s=e.length;n<s;n++){if(function(e,t){for(let r=t.length-1;r>=0;r--)if(t[r].length&&(1===t[r].length&&e===t[r][0]||2===t[r].length&&e>=t[r][0]&&e<=t[r][1]))return!0;return!1}(t=e[n],r)&&!((32===t||9===t)&&(n===s-1||10===e[n+1]||13===e[n+1]))){i+=String.fromCharCode(t);continue}i+="="+(t<16?"0":"")+t.toString(16).toUpperCase()}return i}function s(e,t){let r,i,n;if(e=(e||"").toString(),t=t||76,e.length<=t)return e;let s=0,a=e.length,o=Math.floor(t/3),l="";for(;s<a;){if(r=(n=e.substr(s,t)).match(/\r\n/)){l+=n=n.substr(0,r.index+r[0].length),s+=n.length;continue}if("\n"===n.substr(-1)){l+=n,s+=n.length;continue}if(r=n.substr(-o).match(/\n.*?$/)){l+=n=n.substr(0,n.length-(r[0].length-1)),s+=n.length;continue}if(n.length>t-o&&(r=n.substr(-o).match(/[ \t.,!?][^ \t.,!?]*$/)))n=n.substr(0,n.length-(r[0].length-1));else if(n.match(/[=][\da-f]{0,2}$/i))for((r=n.match(/[=][\da-f]{0,1}$/i))&&(n=n.substr(0,n.length-r[0].length));n.length>3&&n.length<a-s&&!n.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(r=n.match(/[=][\da-f]{2}$/gi))&&!((i=parseInt(r[0].substr(1,2),16))<128)&&(n=n.substr(0,n.length-3),!(i>=192)););s+n.length<a&&"\n"!==n.substr(-1)?(n.length===t&&n.match(/[=][\da-f]{2}$/i)?n=n.substr(0,n.length-3):n.length===t&&(n=n.substr(0,n.length-1)),s+=n.length,n+="=\r\n"):s+=n.length,l+=n}return l}class a extends i{constructor(e){super(),this.options=e||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,t,r){let i;if("buffer"!==t&&(e=Buffer.from(e,t)),!e||!e.length)return r();this.inputBytes+=e.length,this.options.lineLength?(i=(i=s(i=this._curLine+n(e),this.options.lineLength)).replace(/(^|\n)([^\n]*)$/,(e,t,r)=>(this._curLine=r,t)))&&(this.outputBytes+=i.length,this.push(i)):(i=n(e),this.outputBytes+=i.length,this.push(i,"ascii")),r()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}}e.exports={encode:n,wrap:s,Encoder:a}},60691:(e,t,r)=>{"use strict";let i=r(79646).spawn,n=r(49074),s=r(19919);class a{constructor(e){e=e||{},this._spawn=i,this.options=e||{},this.name="Sendmail",this.version=n.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=s.getLogger(this.options,{component:this.options.component||"sendmail"}),e&&("string"==typeof e?this.path=e:"object"==typeof e&&(e.path&&(this.path=e.path),Array.isArray(e.args)&&(this.args=e.args),this.winbreak=["win","windows","dos","\r\n"].includes((e.newline||"").toString().toLowerCase())))}send(e,t){let r,i,n;e.message.keepBcc=!0;let s=e.data.envelope||e.message.getEnvelope(),a=e.message.messageId();if([].concat(s.from||[]).concat(s.to||[]).some(e=>/^-/.test(e)))return t(Error("Can not send mail. Invalid envelope addresses."));r=this.args?["-i"].concat(this.args).concat(s.to):["-i"].concat(s.from?["-f",s.from]:[]).concat(s.to);let o=r=>{if(!n&&(n=!0,"function"==typeof t))return r?t(r):t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:a,response:"Messages queued for delivery"})};try{i=this._spawn(this.path,r)}catch(e){return this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred while spawning sendmail. %s",e.message),o(e)}if(!i)return o(Error("sendmail was not found"));{i.on("error",e=>{this.logger.error({err:e,tnx:"spawn",messageId:a},"Error occurred when sending message %s. %s",a,e.message),o(e)}),i.once("exit",e=>{let t;if(!e)return o();t=127===e?Error("Sendmail command not found, process exited with code "+e):Error("Sendmail exited with code "+e),this.logger.error({err:t,tnx:"stdin",messageId:a},"Error sending message %s to sendmail. %s",a,t.message),o(t)}),i.once("close",o),i.stdin.on("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when piping message %s to sendmail. %s",a,e.message),o(e)});let t=[].concat(s.to||[]);t.length>3&&t.push("...and "+t.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a},"Sending message %s to <%s>",a,t.join(", "));let r=e.message.createReadStream();r.once("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:a},"Error occurred when generating message %s. %s",a,e.message),i.kill("SIGINT"),o(e)}),r.pipe(i.stdin)}}}e.exports=a},20511:(e,t,r)=>{"use strict";let i=r(94735),n=r(49074),s=r(19919),a=r(29414);class o extends i{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=n.version,this.logger=s.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(e,t){if(this.connections>=this.maxConnections||!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:e,callback:t});this._send(e,(...e)=>{setImmediate(()=>t(...e)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let e=this.pending.shift();this._send(e.mail,(...t)=>{setImmediate(()=>e.callback(...t)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),t=!1;for(let r=this.rateMessages.length-1;r>=0;r--)this.rateMessages[r].ts>=e-this.rateInterval&&(!t||this.rateMessages[r].ts<t)&&(t=this.rateMessages[r].ts),this.rateMessages[r].ts<e-this.rateInterval&&!this.rateMessages[r].pending&&this.rateMessages.splice(r,1);if(this.rateMessages.length<this.sendingRate)return!0;let r=Math.max(t+1001,e+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),e-r);try{this.sendingRateTTL.unref()}catch(e){}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,t){let r={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(r);let i=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),s=[].concat(i.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s>",n,s.join(", "));let o=t=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&"string"==typeof e.data._dkim.skipFields?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let r=e.message.createReadStream(),i=r.pipe(new a),n=[],s=0;i.on("readable",()=>{let e;for(;null!==(e=i.read());)n.push(e),s+=e.length}),r.once("error",e=>i.emit("error",e)),i.once("error",e=>{t(e)}),i.once("end",()=>t(null,Buffer.concat(n,s)))};setImmediate(()=>o((s,a)=>{var o;if(s)return this.logger.error({err:s,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,s.message),r.pending=!1,t(s);let l={RawMessage:{Data:a},Source:i.from,Destinations:i.to};Object.keys(e.data.ses||{}).forEach(t=>{l[t]=e.data.ses[t]});let c=(this.ses.aws?this.ses.ses:this.ses)||{},u=this.ses.aws||{};o=(e,s)=>{(e||!s)&&(s="us-east-1"),("function"==typeof c.send&&u.SendRawEmailCommand?c.send(new u.SendRawEmailCommand(l)):c.sendRawEmail(l).promise()).then(e=>{"us-east-1"===s&&(s="email"),r.pending=!1,t(null,{envelope:{from:i.from,to:i.to},messageId:"<"+e.MessageId+(/@/.test(e.MessageId)?"":"@"+s+".amazonses.com")+">",response:e.MessageId,raw:a})}).catch(e=>{this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",n,e.message),r.pending=!1,t(e)})},c.config&&"function"==typeof c.config.region?c.config.region().then(e=>o(null,e)).catch(e=>o(e)):o(null,c.config&&c.config.region||"us-east-1")}))}verify(e){let t;let r=(this.ses.aws?this.ses.ses:this.ses)||{},i=this.ses.aws||{},n={RawMessage:{Data:"From: invalid@invalid\r\nTo: invalid@invalid\r\n Subject: Invalid\r\n\r\nInvalid"},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(t=new Promise((t,r)=>{e=s.callbackPromise(t,r)}));let a=t=>t&&"InvalidParameterValue"!==(t.code||t.Code)?e(t):e(null,!0);return"function"==typeof r.send&&i.SendRawEmailCommand?(n.RawMessage.Data=Buffer.from(n.RawMessage.Data),r.send(new i.SendRawEmailCommand(n),a)):r.sendRawEmail(n,a),t}}e.exports=o},19919:(e,t,r)=>{"use strict";let i;let n=r(79551),s=r(28354),a=r(29021),o=r(29974),l=r(14985),c=r(91645),u=r(21820);try{i=u.networkInterfaces()}catch(e){}e.exports.networkInterfaces=i;let p=(t,r)=>{let i=e.exports.networkInterfaces;return!i||Object.keys(i).map(e=>i[e]).reduce((e,t)=>e.concat(t),[]).filter(e=>!e.internal||r).filter(e=>e.family==="IPv"+t||e.family===t).length>0},d=(e,t,r,i)=>{if(!p(e,(r=r||{}).allowInternalNetworkInterfaces))return i(null,[]);(l.Resolver?new l.Resolver(r):l)["resolve"+e](t,(e,t)=>{if(e){switch(e.code){case l.NODATA:case l.NOTFOUND:case l.NOTIMP:case l.SERVFAIL:case l.CONNREFUSED:case l.REFUSED:case"EAI_AGAIN":return i(null,[])}return i(e)}return i(null,Array.isArray(t)?t:[].concat(t||[]))})},h=e.exports.dnsCache=new Map,f=(e,t)=>e?Object.assign({servername:e.servername,host:e.addresses&&e.addresses.length?1===e.addresses.length?e.addresses[0]:e.addresses[Math.floor(Math.random()*e.addresses.length)]:null},t||{}):Object.assign({},t||{});function m(e,t){let r=!1,i=[],n=0;e.on("error",e=>{r||(r=!0,t(e))}),e.on("readable",()=>{let t;for(;null!==(t=e.read());)i.push(t),n+=t.length}),e.on("end",()=>{let e;if(!r){r=!0;try{e=Buffer.concat(i,n)}catch(e){return t(e)}t(null,e)}})}e.exports.resolveHostname=(e,t)=>{let r;return(!(e=e||{}).host&&e.servername&&(e.host=e.servername),!e.host||c.isIP(e.host))?t(null,f({addresses:[e.host],servername:e.servername||!1},{cached:!1})):h.has(e.host)&&(!(r=h.get(e.host)).expires||r.expires>=Date.now())?t(null,f(r.value,{cached:!0})):void d(4,e.host,e,(i,n)=>{if(i)return r?t(null,f(r.value,{cached:!0,error:i})):t(i);if(n&&n.length){let r={addresses:n,servername:e.servername||e.host};return h.set(e.host,{value:r,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,f(r,{cached:!1}))}d(6,e.host,e,(i,n)=>{if(i)return r?t(null,f(r.value,{cached:!0,error:i})):t(i);if(n&&n.length){let r={addresses:n,servername:e.servername||e.host};return h.set(e.host,{value:r,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,f(r,{cached:!1}))}try{l.lookup(e.host,{all:!0},(i,n)=>{if(i)return r?t(null,f(r.value,{cached:!0,error:i})):t(i);let s=!!n&&n.filter(e=>p(e.family)).map(e=>e.address).shift();if(n&&n.length&&!s&&console.warn(`Failed to resolve IPv${n[0].family} addresses with current network`),!s&&r)return t(null,f(r.value,{cached:!0}));let a={addresses:s?[s]:[e.host],servername:e.servername||e.host};return h.set(e.host,{value:a,expires:Date.now()+(e.dnsTtl||3e5)}),t(null,f(a,{cached:!1}))})}catch(e){if(r)return t(null,f(r.value,{cached:!0,error:e}));return t(e)}})})},e.exports.parseConnectionUrl=e=>{e=e||"";let t={};return[n.parse(e,!0)].forEach(e=>{let r;switch(e.protocol){case"smtp:":t.secure=!1;break;case"smtps:":t.secure=!0;break;case"direct:":t.direct=!0}!isNaN(e.port)&&Number(e.port)&&(t.port=Number(e.port)),e.hostname&&(t.host=e.hostname),e.auth&&(r=e.auth.split(":"),t.auth||(t.auth={}),t.auth.user=r.shift(),t.auth.pass=r.join(":")),Object.keys(e.query||{}).forEach(r=>{let i=t,n=r,s=e.query[r];switch(isNaN(s)||(s=Number(s)),s){case"true":s=!0;break;case"false":s=!1}if(0===r.indexOf("tls."))n=r.substr(4),t.tls||(t.tls={}),i=t.tls;else if(r.indexOf(".")>=0)return;n in i||(i[n]=s)})}),t},e.exports._logFunc=(e,t,r,i,n,...s)=>{let a={};Object.keys(r||{}).forEach(e=>{"level"!==e&&(a[e]=r[e])}),Object.keys(i||{}).forEach(e=>{"level"!==e&&(a[e]=i[e])}),e[t](a,n,...s)},e.exports.getLogger=(t,r)=>{let i={},n=["trace","debug","info","warn","error","fatal"];if(!(t=t||{}).logger)return n.forEach(e=>{i[e]=()=>!1}),i;let a=t.logger;return!0===t.logger&&(a=function(e){let t=0,r=new Map;e.forEach(e=>{e.length>t&&(t=e.length)}),e.forEach(e=>{let i=e.toUpperCase();i.length<t&&(i+=" ".repeat(t-i.length)),r.set(e,i)});let i=(e,t,i,...n)=>{let a="";t&&("server"===t.tnx?a="S: ":"client"===t.tnx&&(a="C: "),t.sid&&(a="["+t.sid+"] "+a),t.cid&&(a="[#"+t.cid+"] "+a)),(i=s.format(i,...n)).split(/\r?\n/).forEach(t=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),r.get(e),a+t)})},n={};return e.forEach(e=>{n[e]=i.bind(null,e)}),n}(n)),n.forEach(t=>{i[t]=(i,n,...s)=>{e.exports._logFunc(a,t,r,i,n,...s)}}),i},e.exports.callbackPromise=(e,t)=>function(){let r=Array.from(arguments),i=r.shift();i?t(i):e(...r)},e.exports.parseDataURI=e=>{let t;let r=e.indexOf(",");if(!r)return e;let i=e.substring(r+1),n=e.substring(5,r).split(";"),s=n.length>1&&n[n.length-1];s&&0>s.indexOf("=")&&(t=s.toLowerCase(),n.pop());let a=n.shift()||"application/octet-stream",o={};for(let e of n){let t=e.indexOf("=");if(t>=0){let r=e.substring(0,t),i=e.substring(t+1);o[r]=i}}switch(t){case"base64":i=Buffer.from(i,"base64");break;case"utf8":i=Buffer.from(i);break;default:try{i=Buffer.from(decodeURIComponent(i))}catch(e){i=Buffer.from(i)}i=Buffer.from(i)}return{data:i,encoding:t,contentType:a,params:o}},e.exports.resolveContent=(t,r,i)=>{let n;i||(n=new Promise((t,r)=>{i=e.exports.callbackPromise(t,r)}));let s=t&&t[r]&&t[r].content||t[r],l=("object"==typeof t[r]&&t[r].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!s)return i(null,s);if("object"==typeof s){if("function"==typeof s.pipe)return m(s,(e,n)=>{if(e)return i(e);t[r].content?t[r].content=n:t[r]=n,i(null,n)});if(/^https?:\/\//i.test(s.path||s.href))return m(o(s.path||s.href),i);if(/^data:/i.test(s.path||s.href)){let t=e.exports.parseDataURI(s.path||s.href);return t&&t.data?i(null,t.data):i(null,Buffer.from(0))}if(s.path)return m(a.createReadStream(s.path),i)}return"string"!=typeof t[r].content||["utf8","usascii","ascii"].includes(l)||(s=Buffer.from(t[r].content,l)),setImmediate(()=>i(null,s)),n},e.exports.assign=function(){let e=Array.from(arguments),t=e.shift()||{};return e.forEach(e=>{Object.keys(e||{}).forEach(r=>{["tls","auth"].includes(r)&&e[r]&&"object"==typeof e[r]?(t[r]||(t[r]={}),Object.keys(e[r]).forEach(i=>{t[r][i]=e[r][i]})):t[r]=e[r]})}),t},e.exports.encodeXText=e=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(e))return e;let t=Buffer.from(e),r="";for(let e=0,i=t.length;e<i;e++){let i=t[e];i<33||i>126||43===i||61===i?r+="+"+(i<16?"0":"")+i.toString(16).toUpperCase():r+=String.fromCharCode(i)}return r}},93750:(e,t,r)=>{"use strict";let i=r(27910).Transform;class n extends i{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,t,r){let i,n=[],s=0,a,o,l=0;if(!e||!e.length)return r();for("string"==typeof e&&(e=Buffer.from(e)),this.inByteCount+=e.length,a=0,o=e.length;a<o;a++)46===e[a]?(!a||10!==e[a-1])&&(a||this.lastByte&&10!==this.lastByte)||(i=e.slice(l,a+1),n.push(i),n.push(Buffer.from(".")),s+=i.length+1,l=a+1):10===e[a]&&(a&&13!==e[a-1]||!a&&13!==this.lastByte)&&(a>l?(i=e.slice(l,a),n.push(i),s+=i.length+2):s+=2,n.push(Buffer.from("\r\n")),l=a+1);s?(l<e.length&&(i=e.slice(l),n.push(i),s+=i.length),this.outByteCount+=s,this.push(Buffer.concat(n,s))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],r()}_flush(e){let t;t=10===this.lastByte?Buffer.from(".\r\n"):13===this.lastByte?Buffer.from("\n.\r\n"):Buffer.from("\r\n.\r\n"),this.outByteCount+=t.length,this.push(t),e()}}e.exports=n},7802:(e,t,r)=>{"use strict";let i=r(91645),n=r(34631),s=r(79551);e.exports=function e(t,r,a,o){let l,c,u,p=s.parse(t);l={host:p.hostname,port:Number(p.port)?Number(p.port):"https:"===p.protocol?443:80},"https:"===p.protocol?(l.rejectUnauthorized=!1,c=n.connect.bind(n)):c=i.connect.bind(i);let d=!1,h=e=>{if(!d){d=!0;try{u.destroy()}catch(e){}o(e)}},f=()=>{let e=Error("Proxy socket timed out");e.code="ETIMEDOUT",h(e)};(u=c(l,()=>{if(d)return;let e={Host:a+":"+r,Connection:"close"};p.auth&&(e["Proxy-Authorization"]="Basic "+Buffer.from(p.auth).toString("base64")),u.write("CONNECT "+a+":"+r+" HTTP/1.1\r\n"+Object.keys(e).map(t=>t+": "+e[t]).join("\r\n")+"\r\n\r\n");let t="",i=e=>{let r,n;if(!d&&(t+=e.toString("binary"),r=t.match(/\r\n\r\n/))){if(u.removeListener("data",i),n=t.substr(r.index+r[0].length),t=t.substr(0,r.index),n&&u.unshift(Buffer.from(n,"binary")),d=!0,!(r=t.match(/^HTTP\/\d+\.\d+ (\d+)/i))||"2"!==(r[1]||"").charAt(0)){try{u.destroy()}catch(e){}return o(Error("Invalid response from proxy"+(r&&": "+r[1]||"")))}return u.removeListener("error",h),u.removeListener("timeout",f),u.setTimeout(0),o(null,u)}};u.on("data",i)})).setTimeout(e.timeout||3e4),u.on("timeout",f),u.once("error",h)}},72821:(e,t,r)=>{"use strict";let i=r(49074),n=r(94735).EventEmitter,s=r(91645),a=r(34631),o=r(21820),l=r(55511),c=r(93750),u=r(27910).PassThrough,p=r(19919);class d extends n{constructor(e){super(e),this.id=l.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=e||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:!s.isIP(this.host)&&this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,void 0===this.options.secure&&465===this.port&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=p.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(e=>{let t=(e||"").toString().trim().toUpperCase();t&&this.customAuth.set(t,this.options.customAuth[e])}),this.version=i.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=e=>this._onData(e),this._onSocketError=e=>this._onError(e,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if("function"==typeof e){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()});let t=this._isDestroyedMessage("connect");if(t)return e(this._formatError(t,"ECONNECTION",!1,"CONN"))}let t={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||3e4};this.options.localAddress&&(t.localAddress=this.options.localAddress);let r=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||12e4),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,r(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(e=>{if(e){this._onError(Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}return this.options.socket?(this._socket=this.options.socket,p.resolveHostname(t,(e,i)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:i.host,cached:!!i.cached},"Resolved %s as %s [cache %s]",t.host,i.host,i.cached?"hit":"miss"),Object.keys(i).forEach(e=>{"_"!==e.charAt(0)&&i[e]&&(t[e]=i[e])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(e=>{t[e]=this.options.tls[e]}),this.servername&&!t.servername&&(t.servername=this.servername),p.resolveHostname(t,(e,i)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:i.host,cached:!!i.cached},"Resolved %s as %s [cache %s]",t.host,i.host,i.cached?"hit":"miss"),Object.keys(i).forEach(e=>{"_"!==e.charAt(0)&&i[e]&&(t[e]=i[e])});try{this._socket=a.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})):p.resolveHostname(t,(e,i)=>{if(e)return setImmediate(()=>this._onError(e,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:i.host,cached:!!i.cached},"Resolved %s as %s [cache %s]",t.host,i.host,i.cached?"hit":"miss"),Object.keys(i).forEach(e=>{"_"!==e.charAt(0)&&i[e]&&(t[e]=i[e])});try{this._socket=s.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(e){return setImmediate(()=>this._onError(e,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";"init"===this.stage&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let t=this._socket&&this._socket.socket||this._socket;if(t&&!t.destroyed)try{t[e]()}catch(e){}this._destroy()}login(e,t){let r=this._isDestroyedMessage("login");if(r)return t(this._formatError(r,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,this._authMethod||!this._auth.oauth2||this._auth.credentials?this._authMethod&&("XOAUTH2"!==this._authMethod||this._auth.oauth2)||(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()):this._authMethod="XOAUTH2","XOAUTH2"!==this._authMethod&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass)){if(!(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod)))return t(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options}}if(this.customAuth.has(this._authMethod)){let e,r=this.customAuth.get(this._authMethod),i=!1,n=()=>{i||(i=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0))},s=r=>{i||(i=!0,t(this._formatError(r,"EAUTH",e,"AUTH "+this._authMethod)))},a=r({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(t,r)=>{let i;return r||(i=new Promise((e,t)=>{r=p.callbackPromise(e,t)})),this._responseActions.push(i=>{e=i;let n=i.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),s={command:t,response:i};n?(s.status=Number(n[1])||0,n[2]&&(s.code=n[2]),s.text=i.substr(n[0].length)):(s.text=i,s.status=0),r(null,s)}),setImmediate(()=>this._sendCommand(t)),i},resolve:n,reject:s});a&&"function"==typeof a.catch&&a.then(n).catch(s);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,t);return;case"LOGIN":this._responseActions.push(e=>{this._actionAUTH_LOGIN_USER(e,t)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(e=>{this._actionAUTHComplete(e,t)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(e=>{this._actionAUTH_CRAM_MD5(e,t)}),this._sendCommand("AUTH CRAM-MD5");return}return t(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(e,t,r){if(!t)return r(this._formatError("Empty message","EMESSAGE",!1,"API"));let i=this._isDestroyedMessage("send message");if(i)return r(this._formatError(i,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate(()=>{r(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let n=!1,s=function(){n||(n=!0,r(...arguments))};"function"==typeof t.on&&t.on("error",e=>s(this._formatError(e,"ESTREAM",!1,"API")));let a=Date.now();this._setEnvelope(e,(e,r)=>{if(e){let r=new u;return"function"==typeof t.pipe?t.pipe(r):(r.write(t),r.end()),s(e)}let i=Date.now(),n=this._createSendStream((e,t)=>e?s(e):(r.envelopeTime=i-a,r.messageTime=Date.now()-i,r.messageSize=n.outByteCount,r.response=t,s(null,r)));"function"==typeof t.pipe?t.pipe(n):(n.write(t),n.end())})}reset(e){this._sendCommand("RSET"),this._responseActions.push(t=>"2"!==t.charAt(0)?e(this._formatError("Could not reset session state. response="+t,"EPROTOCOL",t,"RSET")):(this._envelope=!1,e(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||3e4),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(e){let t;if(this._destroyed||!e||!e.length)return;let r=(e||"").toString("binary"),i=(this._remainder+r).split(/\r?\n/);this._remainder=i.pop();for(let e=0,r=i.length;e<r;e++){if(this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))){this._responseQueue[this._responseQueue.length-1]+="\n"+i[e];continue}this._responseQueue.push(i[e])}this._responseQueue.length&&(t=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(t.split("\n").pop()))||this._processResponse()}_onError(e,t,r,i){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._destroyed||(e=this._formatError(e,t,r,i),this.logger.error(r,e.message),this.emit("error",e),this.close())}_formatError(e,t,r,i){let n;n=/Error\]$/i.test(Object.prototype.toString.call(e))?e:Error(e),t&&"Error"!==t&&(n.code=t),r&&(n.response=r,n.message+=": "+r);let s="string"==typeof r&&Number((r.match(/^\d+/)||[])[0])||!1;return s&&(n.responseCode=s),i&&(n.command=i),n}_onClose(){let e=!1;return(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)?this._onError(Error("Connection closed unexpectedly"),"ETLS",e,"CONN"):![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed||/^[45]\d{2}\b/.test(e)?this._onError(Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN"):void this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let t=this._socket,r={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(e=>{r[e]=this.options.tls[e]}),this.servername&&!r.servername&&(r.servername=this.servername),this.upgrading=!0;try{this._socket=a.connect(r,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),t.removeListener("close",this._onSocketClose),t.removeListener("end",this._onSocketEnd),e(null,!0)))}catch(t){return e(t)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),t.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split("\n").pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate(()=>this._processResponse());let t=this._responseActions.shift();if("function"!=typeof t)return this._onError(Error("Unexpected Response"),"EPROTOCOL",e,"CONN");t.call(this,e),setImmediate(()=>this._processResponse())}_sendCommand(e,t){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(t||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+"\r\n","utf-8"))}}_setEnvelope(e,t){let r=[],i=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(e=>(e&&e.address||e||"").toString().trim()),!this._envelope.to.length)return t(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return t(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(i=!0);for(let e=0,r=this._envelope.to.length;e<r;e++){if(!this._envelope.to[e]||/[\r\n<>]/.test(this._envelope.to[e]))return t(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[e]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[e])&&(i=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(e){return t(this._formatError("Invalid DSN "+e.message,"EENVELOPE",!1,"API"))}this._responseActions.push(e=>{this._actionMAIL(e,t)}),i&&this._supportedExtensions.includes("SMTPUTF8")&&(r.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(r.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&r.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&r.push("RET="+p.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&r.push("ENVID="+p.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(r.length?" "+r.join(" "):""))}_setDsnEnvelope(e){let t=(e.ret||e.return||"").toString().toUpperCase()||null;if(t)switch(t){case"HDRS":case"HEADERS":t="HDRS";break;case"FULL":case"BODY":t="FULL"}if(t&&!["FULL","HDRS"].includes(t))throw Error("ret: "+JSON.stringify(t));let r=(e.envid||e.id||"").toString()||null,i=e.notify||null;if(i){"string"==typeof i&&(i=i.split(","));let e=["NEVER","SUCCESS","FAILURE","DELAY"];if((i=i.map(e=>e.trim().toUpperCase())).filter(t=>!e.includes(t)).length||i.length>1&&i.includes("NEVER"))throw Error("notify: "+JSON.stringify(i.join(",")));i=i.join(",")}let n=(e.recipient||e.orcpt||"").toString()||null;return n&&0>n.indexOf(";")&&(n="rfc822;"+n),{ret:t,envid:r,notify:i,orcpt:n}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+p.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+p.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let t,r=new c;return this.options.lmtp?this._envelope.accepted.forEach((t,r)=>{let i=r===this._envelope.accepted.length-1;this._responseActions.push(r=>{this._actionLMTPStream(t,i,r,e)})}):this._responseActions.push(t=>{this._actionSMTPStream(t,e)}),r.pipe(this._socket,{end:!1}),this.options.debug&&((t=new u).on("readable",()=>{let e;for(;e=t.read();)this.logger.debug({tnx:"message"},e.toString("binary").replace(/\r?\n$/,""))}),r.pipe(t)),r.once("end",()=>{this.logger.info({tnx:"message",inByteCount:r.inByteCount,outByteCount:r.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",r.outByteCount,r.inByteCount)}),r}_actionGreeting(e){if(clearTimeout(this._greetingTimeout),"220"!==e.substr(0,3)){this._onError(Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(e){if("2"!==e.charAt(0)){this._onError(Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO");return}this._actionEHLO(e)}_actionEHLO(e){let t;if("421"===e.substr(0,3)){this._onError(Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO");return}if("2"!==e.charAt(0)){if(this.options.requireTLS){this._onError(Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=e.split(/\r?\n/).map(e=>e.replace(/^\d+[ -]/,"").trim()).filter(e=>e).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(t=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(t[1])||0),this.emit("connect")}_actionHELO(e){if("2"!==e.charAt(0)){this._onError(Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(e){if("2"!==e.charAt(0))return this.options.opportunisticTLS?(this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect")):void this._onError(Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");this._upgradeConnection((e,t)=>{if(e){this._onError(Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),t?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(e,t){if(!/^334[ -]/.test(e)){t(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"));return}this._responseActions.push(e=>{this._actionAUTH_LOGIN_PASS(e,t)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(e,t){let r=e.match(/^334\s+(.+)$/),i="";if(!r)return t(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));i=r[1];let n=Buffer.from(i,"base64").toString("ascii"),s=l.createHmac("md5",this._auth.credentials.pass);s.update(n);let a=this._auth.credentials.user+" "+s.digest("hex");this._responseActions.push(e=>{this._actionAUTH_CRAM_MD5_PASS(e,t)}),this._sendCommand(Buffer.from(a).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,t){if(!e.match(/^235\s+/))return t(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0)}_actionAUTH_LOGIN_PASS(e,t){if(!/^334[ -]/.test(e))return t(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(e=>{this._actionAUTHComplete(e,t)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,t,r){if(r||"function"!=typeof t||(r=t,t=!1),"334"===e.substr(0,3)){this._responseActions.push(e=>{t||"XOAUTH2"!==this._authMethod?this._actionAUTHComplete(e,!0,r):setImmediate(()=>this._handleXOauth2Token(!0,r))}),this._sendCommand("");return}if("2"!==e.charAt(0))return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),r(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0)}_actionMAIL(e,t){let r,i;if(2!==Number(e.charAt(0)))return r=this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?"Internationalized mailbox name not allowed":"Mail command failed",t(this._formatError(r,"EENVELOPE",e,"MAIL FROM"));if(!this._envelope.rcptQueue.length)return t(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"));if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)i=this._envelope.rcptQueue.shift(),this._recipientQueue.push(i),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+i+">"+this._getDsnRcptToArgs());else i=this._envelope.rcptQueue.shift(),this._recipientQueue.push(i),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+i+">"+this._getDsnRcptToArgs())}_actionRCPT(e,t){let r,i,n=this._recipientQueue.shift();if(2!==Number(e.charAt(0))?(r=this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(n)?"Internationalized mailbox name not allowed":"Recipient command failed",this._envelope.rejected.push(n),(i=this._formatError(r,"EENVELOPE",e,"RCPT TO")).recipient=n,this._envelope.rejectedErrors.push(i)):this._envelope.accepted.push(n),this._envelope.rcptQueue.length||this._recipientQueue.length)this._envelope.rcptQueue.length&&(n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push(e=>{this._actionRCPT(e,t)}),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs()));else{if(!(this._envelope.rejected.length<this._envelope.to.length))return(i=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO")).rejected=this._envelope.rejected,i.rejectedErrors=this._envelope.rejectedErrors,t(i);this._responseActions.push(e=>{this._actionDATA(e,t)}),this._sendCommand("DATA")}}_actionDATA(e,t){if(!/^[23]/.test(e))return t(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let r={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(r.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(r.rejectedErrors=this._envelope.rejectedErrors),t(null,r)}_actionSMTPStream(e,t){return 2!==Number(e.charAt(0))?t(this._formatError("Message failed","EMESSAGE",e,"DATA")):t(null,e)}_actionLMTPStream(e,t,r,i){let n;if(2!==Number(r.charAt(0))){(n=this._formatError("Message failed for recipient "+e,"EMESSAGE",r,"DATA")).recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(n);for(let t=0,r=this._envelope.accepted.length;t<r;t++)this._envelope.accepted[t]===e&&this._envelope.accepted.splice(t,1)}if(t)return i(null,r)}_handleXOauth2Token(e,t){this._auth.oauth2.getToken(e,(r,i)=>{if(r)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),t(this._formatError(r,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(r=>{this._actionAUTHComplete(r,e,t)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(i),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=o.hostname()||""}catch(t){e="localhost"}return(!e||0>e.indexOf("."))&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}}e.exports=d},9023:(e,t,r)=>{"use strict";let i=r(94735),n=r(38926),s=r(72821),a=r(97504),o=r(19919),l=r(49074);class c extends i{constructor(e){let t;super(),"string"==typeof(e=e||{})&&(e={url:e});let r=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(t=o.parseConnectionUrl(e.url),r=r||t.service),this.options=o.assign(!1,e,t,r&&a(r)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=o.getLogger(this.options,{component:this.options.component||"smtp-pool"});let i=new s(this.options);this.name="SMTP (pool)",this.version=l.version+"[client:"+i.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(e,t){return setImmediate(()=>t(null,!1))}send(e,t){return!this._closed&&(this._queue.push({mail:e,requeueAttempts:0,callback:t}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let e;let t=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!t&&!this._queue.length)return;for(let r=t-1;r>=0;r--)this._connections[r]&&this._connections[r].available&&((e=this._connections[r]).close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(t&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let r=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let t=this._queue.shift();if(t&&"function"==typeof t.callback)try{t.callback(Error("Connection pool was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}setImmediate(r)};setImmediate(r)}_processMessages(){let e,t,r;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(t=0,r=this._connections.length;t<r;t++)if(this._connections[t].available){e=this._connections[t];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let i=e.queueEntry=this._queue.shift();i.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:i.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",i.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(i.mail,(t,r)=>{if(i===e.queueEntry){try{i.callback(t,r)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}})}_createConnection(){let e=new n(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()}),e.once("error",t=>{if("EMAXLIMIT"!==t.code?this.logger.error({err:t,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,t.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(t)}catch(t){this.logger.error({err:t,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()}),e.once("close",()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout(()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return void 0===this.options.maxRequeues||this.options.maxRequeues<0||e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(Error("Reached maximum number of retries after connection was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(e){let t=this._connections.indexOf(e);-1!==t&&this._connections.splice(t,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let t=Date.now();return this._rateLimit.counter<this._rateLimit.limit?e():(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=t-this._rateLimit.delta)?this._clearRateLimit():void(this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(t-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=t))}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;)setImmediate(this._rateLimit.waiting.shift())}isIdle(){return this.idling}verify(e){let t;e||(t=new Promise((t,r)=>{e=o.callbackPromise(t,r)}));let r=new n(this).auth;return this.getSocket(this.options,(t,i)=>{if(t)return e(t);let n=this.options;i&&i.connection&&(this.logger.info({tnx:"proxy",remoteAddress:i.connection.remoteAddress,remotePort:i.connection.remotePort,destHost:n.host||"",destPort:n.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",i.connection.remoteAddress,i.connection.remotePort,n.host||"",n.port||""),n=o.assign(!1,n),Object.keys(i).forEach(e=>{n[e]=i[e]}));let a=new s(n),l=!1;a.once("error",t=>{if(!l)return l=!0,a.close(),e(t)}),a.once("end",()=>{if(!l)return l=!0,e(Error("Connection closed"))});let c=()=>{if(!l)return l=!0,a.quit(),e(null,!0)};a.connect(()=>{if(!l){if(r&&(a.allowsAuth||n.forceAuth))a.login(r,t=>{if(!l){if(t)return l=!0,a.close(),e(t);c()}});else if(!r&&a.allowsAuth&&n.forceAuth){let t=Error("Authentication info was not provided");return t.code="NoAuth",l=!0,a.close(),e(t)}else c()}})}),t}}e.exports=c},38926:(e,t,r)=>{"use strict";let i=r(72821),n=r(19919).assign,s=r(7797),a=r(94735);class o extends a{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let e=new s(this.options.auth,this.logger);e.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||e.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:e,method:"XOAUTH2"},e.on("token",e=>this.pool.mailer.emit("token",e)),e.on("error",e=>this.emit("error",e));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(e){this.pool.getSocket(this.options,(t,r)=>{if(t)return e(t);let s=!1,a=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,a.host||"",a.port||""),a=n(!1,a),Object.keys(r).forEach(e=>{a[e]=r[e]})),this.connection=new i(a),this.connection.once("error",t=>{if(this.emit("error",t),!s)return s=!0,e(t)}),this.connection.once("end",()=>{if(this.close(),s)return;s=!0;let t=setTimeout(()=>{if(s)return;let t=Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(t.code="ETLS"),e(t)},1e3);try{t.unref()}catch(e){}}),this.connection.connect(()=>{if(!s){if(!this.auth||!this.connection.allowsAuth&&!a.forceAuth)return s=!0,this._connected=!0,e(null,!0);this.connection.login(this.auth,t=>{if(!s){if(s=!0,t)return this.connection.close(),this.emit("error",t),e(t);this._connected=!0,e(null,!0)}})}})})}send(e,t){if(!this._connected)return this.connect(r=>r?t(r):this.send(e,t));let r=e.message.getEnvelope(),i=e.message.messageId(),n=[].concat(r.to||[]);n.length>3&&n.push("...and "+n.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i,cid:this.id},"Sending message %s using #%s to <%s>",i,this.id,n.join(", ")),e.data.dsn&&(r.dsn=e.data.dsn),this.connection.send(r,e.message.createReadStream(),(e,n)=>{if(this.messages++,e)return this.connection.close(),this.emit("error",e),t(e);n.envelope={from:r.from,to:r.to},n.messageId=i,setImmediate(()=>{let e;this.messages>=this.options.maxMessages?((e=Error("Resource exhausted")).code="EMAXLIMIT",this.connection.close(),this.emit("error",e)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),t(null,n)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}}e.exports=o},18662:(e,t,r)=>{"use strict";let i=r(94735),n=r(72821),s=r(97504),a=r(19919),o=r(7797),l=r(49074);class c extends i{constructor(e){let t;super(),"string"==typeof(e=e||{})&&(e={url:e});let r=e.service;"function"==typeof e.getSocket&&(this.getSocket=e.getSocket),e.url&&(t=a.parseConnectionUrl(e.url),r=r||t.service),this.options=a.assign(!1,e,t,r&&s(r)),this.logger=a.getLogger(this.options,{component:this.options.component||"smtp-transport"});let i=new n(this.options);this.name="SMTP",this.version=l.version+"[client:"+i.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,t){return setImmediate(()=>t(null,!1))}getAuth(e){if(!e)return this.auth;let t=!1,r={};if(this.options.auth&&"object"==typeof this.options.auth&&Object.keys(this.options.auth).forEach(e=>{t=!0,r[e]=this.options.auth[e]}),e&&"object"==typeof e&&Object.keys(e).forEach(i=>{t=!0,r[i]=e[i]}),!t)return!1;if("OAUTH2"===(r.type||"").toString().toUpperCase()){if(!r.service&&!r.user)return!1;let e=new o(r,this.logger);return e.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||e.provisionCallback,e.on("token",e=>this.mailer.emit("token",e)),e.on("error",e=>this.emit("error",e)),{type:"OAUTH2",user:r.user,oauth2:e,method:"XOAUTH2"}}return{type:(r.type||"").toString().toUpperCase()||"LOGIN",user:r.user,credentials:{user:r.user||"",pass:r.pass,options:r.options},method:(r.method||"").trim().toUpperCase()||this.options.authMethod||!1}}send(e,t){this.getSocket(this.options,(r,i)=>{if(r)return t(r);let s=!1,o=this.options;i&&i.connection&&(this.logger.info({tnx:"proxy",remoteAddress:i.connection.remoteAddress,remotePort:i.connection.remotePort,destHost:o.host||"",destPort:o.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",i.connection.remoteAddress,i.connection.remotePort,o.host||"",o.port||""),o=a.assign(!1,o),Object.keys(i).forEach(e=>{o[e]=i[e]}));let l=new n(o);l.once("error",e=>{if(!s)return s=!0,l.close(),t(e)}),l.once("end",()=>{if(s)return;let e=setTimeout(()=>{if(s)return;s=!0;let e=Error("Unexpected socket close");l&&l._socket&&l._socket.upgrading&&(e.code="ETLS"),t(e)},1e3);try{e.unref()}catch(e){}});let c=()=>{let r=e.message.getEnvelope(),i=e.message.messageId(),n=[].concat(r.to||[]);n.length>3&&n.push("...and "+n.splice(2).length+" more"),e.data.dsn&&(r.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:i},"Sending message %s to <%s>",i,n.join(", ")),l.send(r,e.message.createReadStream(),(e,n)=>{if(s=!0,l.close(),e)return this.logger.error({err:e,tnx:"send"},"Send error for %s: %s",i,e.message),t(e);n.envelope={from:r.from,to:r.to},n.messageId=i;try{return t(null,n)}catch(e){this.logger.error({err:e,tnx:"callback"},"Callback error for %s: %s",i,e.message)}})};l.connect(()=>{if(s)return;let r=this.getAuth(e.data.auth);r&&(l.allowsAuth||o.forceAuth)?l.login(r,e=>{if(r&&r!==this.auth&&r.oauth2&&r.oauth2.removeAllListeners(),!s){if(e)return s=!0,l.close(),t(e);c()}}):c()})})}verify(e){let t;return e||(t=new Promise((t,r)=>{e=a.callbackPromise(t,r)})),this.getSocket(this.options,(t,r)=>{if(t)return e(t);let i=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:i.host||"",destPort:i.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,i.host||"",i.port||""),i=a.assign(!1,i),Object.keys(r).forEach(e=>{i[e]=r[e]}));let s=new n(i),o=!1;s.once("error",t=>{if(!o)return o=!0,s.close(),e(t)}),s.once("end",()=>{if(!o)return o=!0,e(Error("Connection closed"))});let l=()=>{if(!o)return o=!0,s.quit(),e(null,!0)};s.connect(()=>{if(o)return;let t=this.getAuth({});if(t&&(s.allowsAuth||i.forceAuth))s.login(t,t=>{if(!o){if(t)return o=!0,s.close(),e(t);l()}});else if(!t&&s.allowsAuth&&i.forceAuth){let t=Error("Authentication info was not provided");return t.code="NoAuth",o=!0,s.close(),e(t)}else l()})}),t}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}}e.exports=c},77138:(e,t,r)=>{"use strict";let i=r(49074),n=r(19919);class s{constructor(e){e=e||{},this.options=e||{},this.name="StreamTransport",this.version=i.version,this.logger=n.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos","\r\n"].includes((e.newline||"").toString().toLowerCase())}send(e,t){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),i=e.message.messageId(),n=[].concat(r.to||[]);n.length>3&&n.push("...and "+n.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Sending message %s to <%s> using %s line breaks",i,n.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let r;try{r=e.message.createReadStream()}catch(e){return this.logger.error({err:e,tnx:"send",messageId:i},"Creating send stream failed for %s. %s",i,e.message),t(e)}if(!this.options.buffer)return r.once("error",e=>{this.logger.error({err:e,tnx:"send",messageId:i},"Failed creating message for %s. %s",i,e.message)}),t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:i,message:r});let n=[],s=0;r.on("readable",()=>{let e;for(;null!==(e=r.read());)n.push(e),s+=e.length}),r.once("error",e=>(this.logger.error({err:e,tnx:"send",messageId:i},"Failed creating message for %s. %s",i,e.message),t(e))),r.on("end",()=>t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:i,message:Buffer.concat(n,s)}))})}}e.exports=s},97504:(e,t,r)=>{"use strict";let i=r(58417),n={};function s(e){return e.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function a(e){let t=["domains","aliases"],r={};return Object.keys(e).forEach(i=>{0>t.indexOf(i)&&(r[i]=e[i])}),r}Object.keys(i).forEach(e=>{let t=i[e];n[s(e)]=a(t),[].concat(t.aliases||[]).forEach(e=>{n[s(e)]=a(t)}),[].concat(t.domains||[]).forEach(e=>{n[s(e)]=a(t)})}),e.exports=function(e){return n[e=s(e.split("@").pop())]||!1}},7797:(e,t,r)=>{"use strict";let i=r(27910).Stream,n=r(29974),s=r(55511),a=r(19919);class o extends i{constructor(e,t){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user){setImmediate(()=>this.emit("error",Error('Options "privateKey" and "user" are required for service account!')));return}let t=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=t||300}if(this.logger=a.getLogger({logger:t},{component:this.options.component||"OAuth2"}),this.provisionCallback="function"==typeof this.options.provisionCallback&&this.options.provisionCallback,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let e=Math.max(Number(this.options.timeout)||0,0);this.expires=e&&Date.now()+1e3*e||0}}getToken(e,t){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return t(null,this.accessToken);let r=(...e)=>{e[0]?this.logger.error({err:e[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),t(...e)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,(e,t,i)=>{!e&&t&&(this.accessToken=t,this.expires=i||0),r(e,t)}):this.generateToken(r)}updateToken(e,t){this.accessToken=e,t=Math.max(Number(t)||0,0),this.expires=t&&Date.now()+1e3*t||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let t,r;if(this.options.serviceClient){let i,n=Math.floor(Date.now()/1e3),s={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:n,exp:n+this.options.serviceRequestTimeout};try{i=this.jwtSignRS256(s)}catch(t){return e(Error("Can't generate token. Check your auth options"))}t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},r={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:s}}else{if(!this.options.refreshToken)return e(Error("Can't create new access token for user"));t={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},r={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(e=>{t[e]=this.options.customParams[e],r[e]=this.options.customParams[e]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(r)),this.postRequest(this.options.accessUrl,t,this.options,(t,r)=>{let i;if(t)return e(t);try{i=JSON.parse(r.toString())}catch(t){return e(t)}if(!i||"object"!=typeof i)return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(r||"").toString()),e(Error("Invalid authentication response"));let n={};if(Object.keys(i).forEach(e=>{"access_token"!==e?n[e]=i[e]:n[e]=(i[e]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(n)),i.error){let t=i.error;return i.error_description&&(t+=": "+i.error_description),i.error_uri&&(t+=" ("+i.error_uri+")"),e(Error(t))}return i.access_token?(this.updateToken(i.access_token,i.expires_in),e(null,this.accessToken)):e(Error("No access token"))})}buildXOAuth2Token(e){let t=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(t.join("\x01"),"utf-8").toString("base64")}postRequest(e,t,r,i){let s=!1,a=[],o=0,l=n(e,{method:"post",headers:r.customHeaders,body:t,allowErrorResponse:!0});l.on("readable",()=>{let e;for(;null!==(e=l.read());)a.push(e),o+=e.length}),l.once("error",e=>{if(!s)return s=!0,i(e)}),l.once("end",()=>{if(!s)return s=!0,i(null,Buffer.concat(a,o))})}toBase64URL(e){return"string"==typeof e&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map(e=>this.toBase64URL(e)).join(".");let t=s.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(t)}}e.exports=o},90560:(e,t,r)=>{"use strict";let i=55>process.version.charCodeAt(1)&&46===process.version.charCodeAt(2)?r(11645):r(66769);e.exports=i},66769:(e,t,r)=>{"use strict";let i=r(12412);class n extends Error{get name(){return this.constructor.name}}class s extends n{constructor(e,t,r){i(t),i.strictEqual(typeof r,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=n,this.offset=r,this.buffer=t}get name(){return this.constructor.name}}class a extends n{constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}}class o extends n{get name(){return this.constructor.name}}class l extends o{get name(){return this.constructor.name}}e.exports={RedisError:n,ParserError:s,ReplyError:a,AbortError:o,InterruptError:l}},11645:(e,t,r)=>{"use strict";let i=r(12412),n=r(28354);function s(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function a(e,t,r){i(t),i.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=t}function o(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function l(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function c(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}n.inherits(s,Error),Object.defineProperty(s.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),n.inherits(a,s),Object.defineProperty(a.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),n.inherits(o,s),Object.defineProperty(o.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),n.inherits(l,s),Object.defineProperty(l.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),n.inherits(c,l),Object.defineProperty(c.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),e.exports={RedisError:s,ParserError:a,ReplyError:o,AbortError:l,InterruptError:c}},79244:(e,t,r)=>{"use strict";e.exports=r(50549)},50549:(e,t,r)=>{"use strict";let i=r(79428).Buffer,n=new(r(41204)).StringDecoder,s=r(90560),a=s.ReplyError,o=s.ParserError;var l=i.allocUnsafe(32768),c=0,u=null,p=0,d=0;function h(e){let t=e.offset,r=e.buffer,i=r.length-1;for(var n=t;n<i;)if(13===r[n++]){if(e.offset=n+1,!0===e.optionReturnBuffers)return e.buffer.slice(t,n-1);return e.buffer.toString("utf8",t,n-1)}}function f(e){let t=e.buffer.length-1;for(var r=e.offset,i=0;r<t;){let t=e.buffer[r++];if(13===t)return e.offset=r+1,i;i=10*i+(t-48)}}function m(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function g(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let i=g(e);if(void 0===i){m(e,t,r);return}t[r++]=i}return y(e,t,r)}function y(e,t,r){let i=e.buffer.length;for(;r<t.length;){let n=e.offset;if(e.offset>=i){m(e,t,r);return}let s=v(e,e.buffer[e.offset++]);if(void 0===s){e.arrayCache.length||e.bufferCache.length||(e.offset=n),m(e,t,r);return}t[r]=s,r++}return t}function v(e,t){switch(t){case 36:return function(e){let t=f(e);if(void 0===t)return;if(t<0)return null;let r=e.offset+t;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return(e.offset=r+2,!0===e.optionReturnBuffers)?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r)}(e);case 43:return h(e);case 42:return function(e){let t=f(e);return void 0===t?void 0:t<0?null:y(e,Array(t),0)}(e);case 58:return!0===e.optionStringNumbers?function(e){let t=e.buffer.length-1;var r=e.offset,i=0,n="";for(45===e.buffer[r]&&(n+="-",r++);r<t;){var s=e.buffer[r++];if(13===s)return e.offset=r+1,0!==i&&(n+=i),n;i>0x19999998?(n+=10*i+(s-48),i=0):48===s&&0===i?n+=0:i=10*i+(s-48)}}(e):function(e){let t=e.buffer.length-1;var r=e.offset,i=0,n=1;for(45===e.buffer[r]&&(n=-1,r++);r<t;){let t=e.buffer[r++];if(13===t)return e.offset=r+1,n*i;i=10*i+(t-48)}}(e);case 45:return function(e){var t=h(e);if(void 0!==t)return!0===e.optionReturnBuffers&&(t=t.toString()),new a(t)}(e);default:return function(e,t){let r=new o("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(r)}(e,t)}}function b(){if(l.length>51200){if(1===p||d>2*p){let e=Math.floor(l.length/10),t=e<c?c:e;c=0,l=l.slice(t,l.length)}else d++,p--}else clearInterval(u),p=0,d=0,u=null}class x{constructor(e){if(!e)throw TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){let t=this.buffer.length,r=t-this.offset,n=i.allocUnsafe(r+e.length);if(this.buffer.copy(n,0,this.offset,t),e.copy(n,r,0,e.length),this.buffer=n,this.offset=0,this.arrayCache.length){let e=g(this);if(void 0===e)return;this.returnReply(e)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?function(e){let t=e.bufferCache,r=e.offset,n=e.bigStrSize-r-2;var s=t.length,a=e.bigStrSize-e.totalChunkSize;if(e.offset=a,a<=2){if(2===s)return t[0].slice(r,t[0].length+a-2);s--,a=t[t.length-2].length+a}l.length<n+c&&(c>0x6f00000&&(c=0x3200000),l=i.allocUnsafe(n*(n>0x4b00000?2:3)+c),c=0,p++,null===u&&(u=setInterval(b,50)));let o=c;t[0].copy(l,o,r,t[0].length),c+=t[0].length-r;for(var d=1;d<s-1;d++)t[d].copy(l,c),c+=t[d].length;return t[d].copy(l,c,0,a-2),c+=a-2,l.slice(o,c)}(this):function(e){let t=e.bufferCache,r=e.offset;var i=t.length,s=e.bigStrSize-e.totalChunkSize;if(e.offset=s,s<=2){if(2===i)return t[0].toString("utf8",r,t[0].length+s-2);i--,s=t[t.length-2].length+s}for(var a=n.write(t[0].slice(r)),o=1;o<i-1;o++)a+=n.write(t[o]);return a+n.end(t[o].slice(0,s-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=g(this))))return;this.returnReply(t)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let e=this.offset,t=this.buffer[this.offset++],r=v(this,t);if(void 0===r){this.arrayCache.length||this.bufferCache.length||(this.offset=e);return}45===t?this.returnError(r):this.returnReply(r)}this.buffer=null}}e.exports=x},86763:function(e){var t;t=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xa2":"cent","\xa3":"pound","\xa4":"currency","\xa5":"yen","\xa9":"(c)","\xaa":"a","\xae":"(r)","\xba":"o","\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xfe":"th","\xff":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E\'","":"Y\'","":"T\'","":"JH","":"I","":"L","":"X","":"C\'","":"K","":"H","":"D\'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R\'","":"S","":"V","":"T","":"R","":"C","":"P\'","":"Q\'","":"O\'\'","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"\'","":"\'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}'),t=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"\xc4":"AE","\xe4":"ae","\xd6":"OE","\xf6":"oe","\xdc":"UE","\xfc":"ue","\xdf":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xa2":"centavos","\xa3":"libras","\xa4":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xa2":"centime","\xa3":"livre","\xa4":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xa2":"centavo","":"soma","\xa3":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"\xd8":"OE","\xf8":"oe","\xc5":"AA","\xe5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xf8rre end"},"nb":{"&":"og","\xc5":"AA","\xc6":"AE","\xd8":"OE","\xe5":"aa","\xe6":"ae","\xf8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xc5":"AA","\xc4":"AE","\xd6":"OE","\xe5":"aa","\xe4":"ae","\xf6":"oe"}}');function r(r,i){if("string"!=typeof r)throw Error("slugify: string argument expected");var n=t[(i="string"==typeof i?{replacement:i}:i||{}).locale]||{},s=void 0===i.replacement?"-":i.replacement,a=void 0===i.trim||i.trim,o=r.normalize().split("").reduce(function(t,r){var a=n[r];return void 0===a&&(a=e[r]),void 0===a&&(a=r),a===s&&(a=" "),t+a.replace(i.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return i.strict&&(o=o.replace(/[^A-Za-z0-9\s]/g,"")),a&&(o=o.trim()),o=o.replace(/\s+/g,s),i.lower&&(o=o.toLowerCase()),o}return r.extend=function(t){Object.assign(e,t)},r},e.exports=t(),e.exports.default=t()},84542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(11815);function n(e){setTimeout(function(){throw e},0)}t.default=function(e,t,r){return"function"==typeof t&&e.then(e=>{let s;(s=void 0!==r&&Object(r).spread&&Array.isArray(e)?i.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?i.tryCatch(t)(null):i.tryCatch(t)(null,e))===i.errorObj&&n(s.e)},e=>{if(!e){let t=Error(e+"");Object.assign(t,{cause:e}),e=t}let r=i.tryCatch(t)(e);r===i.errorObj&&n(r.e)}),e}},11815:(e,t)=>{"use strict";let r;function i(e,i){try{let e=r;return r=null,e.apply(this,arguments)}catch(e){return t.errorObj.e=e,t.errorObj}}Object.defineProperty(t,"__esModule",{value:!0}),t.tryCatch=t.errorObj=void 0,t.errorObj={e:{}},t.tryCatch=function(e){return r=e,i}},23203:(e,t,r)=>{"use strict";let i;let n=r(21820),s=r(83997),a=r(58684),{env:o}=process;function l(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function c(e,t){if(0===i)return 0;if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2;if(e&&!t&&void 0===i)return 0;let r=i||0;if("dumb"===o.TERM)return r;if("win32"===process.platform){let e=n.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in o)||"codeship"===o.CI_NAME?1:r;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){let e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:r}a("no-color")||a("no-colors")||a("color=false")||a("color=never")?i=0:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(i=1),"FORCE_COLOR"in o&&(i="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return l(c(e,e&&e.isTTY))},stdout:l(c(!0,s.isatty(1))),stderr:l(c(!0,s.isatty(2)))}},37702:(e,t,r)=>{"use strict";r.d(t,{$u:()=>y,DY:()=>v,dk:()=>m,lx:()=>g});var i=r(34926),n=r(43008),s=r.n(n),a=r(95164),o=r(45997),l=r(80672),c=r(96330);let u=process.env.JWT_SECRET??"your-secret-key-change-in-production";async function p(e,t){return i.Ay.compare(e,t)}async function d(e){let t=new TextEncoder().encode(u);return await new a.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(t)}async function h(e){try{let t=new TextEncoder().encode(u),{payload:r}=await (0,o.V)(e,t);return r}catch{return null}}async function f(e,t,r){let i=await d({userId:e,email:t,role:r}),n=new Date(Date.now()+6048e5);return await l.prisma.session.create({data:{userId:e,token:i,expiresAt:n}}),i}async function m(e){try{let t=await h(e);if(!t?.userId)return null;let r=await l.prisma.session.findUnique({where:{token:e},include:{user:{select:{id:!0,email:!0,name:!0,role:!0,avatar:!0}}}});if(!r||r.expiresAt<new Date)return r&&await l.prisma.session.delete({where:{id:r.id}}),null;return{id:r.user.id,email:r.user.email,name:r.user.name,role:r.user.role,avatar:r.user.avatar}}catch(e){return console.error("Erro ao validar sess\xe3o:",e),null}}async function g(e){try{await l.prisma.session.delete({where:{token:e}})}catch(e){console.error("Erro ao encerrar sess\xe3o:",e)}}async function y(e,t){try{let r=await l.prisma.user.findUnique({where:{email:e.toLowerCase()}});if(!r||!await p(t,r.password))return null;let i=await f(r.id,r.email,r.role);return{user:{id:r.id,email:r.email,name:r.name,role:r.role,avatar:r.avatar},token:i}}catch(e){return console.error("Erro na autentica\xe7\xe3o:",e),null}}async function v(e,t,r,n=c.Role.USER){try{if(await l.prisma.user.findUnique({where:{email:e}}))return{error:"E-mail j\xe1 est\xe1 cadastrado"};let a=await i.Ay.hash(t,12),o=await l.prisma.user.create({data:{email:e,password:a,name:r,role:n,isVerified:!0}}),c=s().sign({id:o.id,email:o.email,role:o.role},u,{expiresIn:"7d"});return await l.prisma.session.create({data:{userId:o.id,token:c,expiresAt:new Date(Date.now()+6048e5)}}),{user:{id:o.id,email:o.email,name:o.name,role:o.role,avatar:o.avatar},token:c}}catch(e){return console.error("Erro no registro:",e),{error:"Erro interno do servidor"}}}},80672:(e,t,r)=>{"use strict";r.d(t,{prisma:()=>i});let i=new(r(96330)).PrismaClient},38675:(e,t,r)=>{"use strict";let i,n,s,a,o,l,c,u,p,d,h,f;var m,g,y,v,b,x,w,k,S,E,_,T,A,I,O,C,j=r(27910);r(8086);try{x=new TextDecoder}catch(e){}var R=0;let N=[];var M=N,D=0,L={},P=0,U=0,z=[],B={useRecords:!1,mapsAsObjects:!0};class K{}let F=new K;F.name="MessagePack 0xC1";var V=!1,q=2;try{Function("")}catch(e){q=1/0}class H{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),!e.sequential||!1===e.trusted||(e.trusted=!0,e.structures||!1==e.useRecords||(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(w)return ex(()=>(ew(),this?this.unpack(e,t):H.prototype.unpack.call(B,e,t)));e.buffer||e.constructor!==ArrayBuffer||(e="undefined"!=typeof Buffer?Buffer.from(e):new Uint8Array(e)),"object"==typeof t?(k=t.end||e.length,R=t.start||0):(R=0,k=t>-1?t:e.length),D=0,U=0,E=null,M=N,_=null,w=e;try{A=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(w=null,e instanceof Uint8Array)throw t;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}return this instanceof H?(L=this,this.structures?S=this.structures:(!S||S.length>0)&&(S=[])):(L=B,(!S||S.length>0)&&(S=[])),G(t)}unpackMultiple(e,t){let r,i=0;try{V=!0;let n=e.length,s=this?this.unpack(e,n):eS.unpack(e,n);if(t){if(!1===t(s,i,R))return;for(;R<n;)if(i=R,!1===t(G(),i,R))return}else{for(r=[s];R<n;)i=R,r.push(G());return r}}catch(e){throw e.lastPosition=i,e.values=r,e}finally{V=!1,ew()}}_mergeStructures(e,t){O&&(e=O.call(this,e)),Object.isFrozen(e=e||[])&&(e=e.map(e=>e.slice(0)));for(let t=0,r=e.length;t<r;t++){let r=e[t];r&&(r.isShared=!0,t>=32&&(r.highByte=t-32>>5))}for(let r in e.sharedLength=e.length,t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function G(e){try{let t;if(!L.trusted&&!V){let e=S.sharedLength||0;e<S.length&&(S.length=e)}if(L.randomAccessStructure&&w[R]<64&&w[R]>=32&&I?(t=I(w,R,k,L),w=null,!(e&&e.lazy)&&t&&(t=t.toJSON()),R=k):t=J(),_&&(R=_.postBundlePosition,_=null),V&&(S.restoreStructures=null),R==k)S&&S.restoreStructures&&Y(),S=null,w=null,T&&(T=null);else if(R>k)throw Error("Unexpected end of MessagePack data");else if(!V){let e;try{e=JSON.stringify(t,(e,t)=>"bigint"==typeof t?`${t}n`:t).slice(0,100)}catch(t){e="(JSON view not available "+t+")"}throw Error("Data read, but end of buffer not reached "+e)}return t}catch(e){throw S&&S.restoreStructures&&Y(),ew(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||R>k)&&(e.incomplete=!0),e}}function Y(){for(let e in S.restoreStructures)S[e]=S.restoreStructures[e];S.restoreStructures=null}function J(){let e=w[R++];if(e<160){if(e<128){if(e<64)return e;{let t=S[63&e]||L.getStructures&&Z()[63&e];return t?(t.read||(t.read=Q(t,63&e)),t.read()):e}}if(e<144){if(e-=128,L.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=eh();"__proto__"===e&&(e="__proto_"),t[e]=J()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(J(),J());return t}}{let t=Array(e-=144);for(let r=0;r<e;r++)t[r]=J();return L.freezeData?Object.freeze(t):t}}if(e<192){let t=e-160;if(U>=R)return E.slice(R-P,(R+=t)-P);if(0==U&&k<140){let e=t<16?el(t):eo(t);if(null!=e)return e}return X(t)}{let t;switch(e){case 192:return null;case 193:if(_){if((t=J())>0)return _[1].slice(_.position1,_.position1+=t);return _[0].slice(_.position0,_.position0-=t)}return F;case 194:return!1;case 195:return!0;case 196:if(void 0===(t=w[R++]))throw Error("Unexpected end of buffer");return eu(t);case 197:return t=A.getUint16(R),R+=2,eu(t);case 198:return t=A.getUint32(R),R+=4,eu(t);case 199:return ep(w[R++]);case 200:return t=A.getUint16(R),R+=2,ep(t);case 201:return t=A.getUint32(R),R+=4,ep(t);case 202:if(t=A.getFloat32(R),L.useFloat32>2){let e=ek[(127&w[R])<<1|w[R+1]>>7];return R+=4,(e*t+(t>0?.5:-.5)>>0)/e}return R+=4,t;case 203:return t=A.getFloat64(R),R+=8,t;case 204:return w[R++];case 205:return t=A.getUint16(R),R+=2,t;case 206:return t=A.getUint32(R),R+=4,t;case 207:return"number"===L.int64AsType?t=0x100000000*A.getUint32(R)+A.getUint32(R+4):"string"===L.int64AsType?t=A.getBigUint64(R).toString():"auto"===L.int64AsType?(t=A.getBigUint64(R))<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=A.getBigUint64(R),R+=8,t;case 208:return A.getInt8(R++);case 209:return t=A.getInt16(R),R+=2,t;case 210:return t=A.getInt32(R),R+=4,t;case 211:return"number"===L.int64AsType?t=0x100000000*A.getInt32(R)+A.getUint32(R+4):"string"===L.int64AsType?t=A.getBigInt64(R).toString():"auto"===L.int64AsType?(t=A.getBigInt64(R))>=BigInt(-2)<<BigInt(52)&&t<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=A.getBigInt64(R),R+=8,t;case 212:if(114==(t=w[R++]))return em(63&w[R++]);{let e=z[t];if(e){if(e.read)return R++,e.read(J());if(e.noBuffer)return R++,e();return e(w.subarray(R,++R))}throw Error("Unknown extension "+t)}case 213:if(114==(t=w[R]))return R++,em(63&w[R++],w[R++]);return ep(2);case 214:return ep(4);case 215:return ep(8);case 216:return ep(16);case 217:if(t=w[R++],U>=R)return E.slice(R-P,(R+=t)-P);return ee(t);case 218:if(t=A.getUint16(R),R+=2,U>=R)return E.slice(R-P,(R+=t)-P);return et(t);case 219:if(t=A.getUint32(R),R+=4,U>=R)return E.slice(R-P,(R+=t)-P);return er(t);case 220:return t=A.getUint16(R),R+=2,en(t);case 221:return t=A.getUint32(R),R+=4,en(t);case 222:return t=A.getUint16(R),R+=2,es(t);case 223:return t=A.getUint32(R),R+=4,es(t);default:if(e>=224)return e-256;if(void 0===e){let e=Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw Error("Unknown MessagePack token "+e)}}}let W=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Q(e,t){function r(){if(r.count++>q){let r=e.read=Function("r","return function(){return "+(L.freezeData?"Object.freeze":"")+"({"+e.map(e=>"__proto__"===e?"__proto_:r()":W.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"})}")(J);return 0===e.highByte&&(e.read=$(t,e.read)),r()}let i={};for(let t=0,r=e.length;t<r;t++){let r=e[t];"__proto__"===r&&(r="__proto_"),i[r]=J()}return L.freezeData?Object.freeze(i):i}return(r.count=0,0===e.highByte)?$(t,r):r}let $=(e,t)=>function(){let r=w[R++];if(0===r)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=S[i]||Z()[i];if(!n)throw Error("Record id is not defined for "+i);return n.read||(n.read=Q(n,e)),n.read()};function Z(){let e=ex(()=>(w=null,L.getStructures()));return S=L._mergeStructures(e,S)}var X=ei,ee=ei,et=ei,er=ei;function ei(e){let t;if(e<16&&(t=el(e)))return t;if(e>64&&x)return x.decode(w.subarray(R,R+=e));let r=R+e,i=[];for(t="";R<r;){let e=w[R++];if((128&e)==0)i.push(e);else if((224&e)==192){let t=63&w[R++];i.push((31&e)<<6|t)}else if((240&e)==224){let t=63&w[R++],r=63&w[R++];i.push((31&e)<<12|t<<6|r)}else if((248&e)==240){let t=(7&e)<<18|(63&w[R++])<<12|(63&w[R++])<<6|63&w[R++];t>65535&&(t-=65536,i.push(t>>>10&1023|55296),t=56320|1023&t),i.push(t)}else i.push(e);i.length>=4096&&(t+=ea.apply(String,i),i.length=0)}return i.length>0&&(t+=ea.apply(String,i)),t}function en(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=J();return L.freezeData?Object.freeze(t):t}function es(e){if(L.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=eh();"__proto__"===e&&(e="__proto_"),t[e]=J()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(J(),J());return t}}t.isNativeAccelerationEnabled=!1;var ea=String.fromCharCode;function eo(e){let t=R,r=Array(e);for(let i=0;i<e;i++){let e=w[R++];if((128&e)>0){R=t;return}r[i]=e}return ea.apply(String,r)}function el(e){if(e<4){if(e<2){if(0===e)return"";{let e=w[R++];if((128&e)>1){R-=1;return}return ea(e)}}{let t=w[R++],r=w[R++];if((128&t)>0||(128&r)>0){R-=2;return}if(e<3)return ea(t,r);let i=w[R++];if((128&i)>0){R-=3;return}return ea(t,r,i)}}{let t=w[R++],r=w[R++],i=w[R++],n=w[R++];if((128&t)>0||(128&r)>0||(128&i)>0||(128&n)>0){R-=4;return}if(e<6){if(4===e)return ea(t,r,i,n);{let e=w[R++];if((128&e)>0){R-=5;return}return ea(t,r,i,n,e)}}if(e<8){let s=w[R++],a=w[R++];if((128&s)>0||(128&a)>0){R-=6;return}if(e<7)return ea(t,r,i,n,s,a);let o=w[R++];if((128&o)>0){R-=7;return}return ea(t,r,i,n,s,a,o)}{let s=w[R++],a=w[R++],o=w[R++],l=w[R++];if((128&s)>0||(128&a)>0||(128&o)>0||(128&l)>0){R-=8;return}if(e<10){if(8===e)return ea(t,r,i,n,s,a,o,l);{let e=w[R++];if((128&e)>0){R-=9;return}return ea(t,r,i,n,s,a,o,l,e)}}if(e<12){let c=w[R++],u=w[R++];if((128&c)>0||(128&u)>0){R-=10;return}if(e<11)return ea(t,r,i,n,s,a,o,l,c,u);let p=w[R++];if((128&p)>0){R-=11;return}return ea(t,r,i,n,s,a,o,l,c,u,p)}{let c=w[R++],u=w[R++],p=w[R++],d=w[R++];if((128&c)>0||(128&u)>0||(128&p)>0||(128&d)>0){R-=12;return}if(e<14){if(12===e)return ea(t,r,i,n,s,a,o,l,c,u,p,d);{let e=w[R++];if((128&e)>0){R-=13;return}return ea(t,r,i,n,s,a,o,l,c,u,p,d,e)}}{let h=w[R++],f=w[R++];if((128&h)>0||(128&f)>0){R-=14;return}if(e<15)return ea(t,r,i,n,s,a,o,l,c,u,p,d,h,f);let m=w[R++];if((128&m)>0){R-=15;return}return ea(t,r,i,n,s,a,o,l,c,u,p,d,h,f,m)}}}}}function ec(){let e,t=w[R++];if(t<192)e=t-160;else switch(t){case 217:e=w[R++];break;case 218:e=A.getUint16(R),R+=2;break;case 219:e=A.getUint32(R),R+=4;break;default:throw Error("Expected string")}return ei(e)}function eu(e){return L.copyBuffers?Uint8Array.prototype.slice.call(w,R,R+=e):w.subarray(R,R+=e)}function ep(e){let t=w[R++];if(z[t]){let r;return z[t](w.subarray(R,r=R+=e),e=>{R=e;try{return J()}finally{R=r}})}throw Error("Unknown extension type "+t)}var ed=Array(4096);function eh(){let e,t=w[R++];if(!(t>=160)||!(t<192))return R--,ef(J());if(t-=160,U>=R)return E.slice(R-P,(R+=t)-P);if(!(0==U&&k<180))return X(t);let r=(t<<5^(t>1?A.getUint16(R):t>0?w[R]:0))&4095,i=ed[r],n=R,s=R+t-3,a=0;if(i&&i.bytes==t){for(;n<s;){if((e=A.getUint32(n))!=i[a++]){n=0x70000000;break}n+=4}for(s+=3;n<s;)if((e=w[n++])!=i[a++]){n=0x70000000;break}if(n===s)return R=n,i.string;s-=3,n=R}for(i=[],ed[r]=i,i.bytes=t;n<s;)e=A.getUint32(n),i.push(e),n+=4;for(s+=3;n<s;)e=w[n++],i.push(e);let o=t<16?el(t):eo(t);return null!=o?i.string=o:i.string=X(t)}function ef(e){if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return e.toString();if(null==e)return e+"";if(L.allowArraysInMapKeys&&Array.isArray(e)&&e.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return e.flat().toString();throw Error(`Invalid property type for record: ${typeof e}`)}let em=(e,t)=>{let r=J().map(ef),i=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=S[e];return n&&(n.isShared||V)&&((S.restoreStructures||(S.restoreStructures=[]))[e]=n),S[e]=r,r.read=Q(r,i),r.read()};z[0]=()=>{},z[0].noBuffer=!0,z[66]=e=>{let t=e.byteLength%8||8,r=BigInt(128&e[0]?e[0]-256:e[0]);for(let i=1;i<t;i++)r<<=BigInt(8),r+=BigInt(e[i]);if(e.byteLength!==t){let i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=(e,t)=>{let r=t-e;if(r<=40){let r=i.getBigUint64(e);for(let n=e+8;n<t;n+=8)r<<=BigInt(64n),r|=i.getBigUint64(n);return r}let s=e+(r>>4<<3),a=n(e,s),o=n(s,t);return a<<BigInt((t-s)*8)|o};r=r<<BigInt((i.byteLength-t)*8)|n(t,i.byteLength)}return r};let eg={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:"function"==typeof AggregateError?AggregateError:null};z[101]=()=>{let e=J();if(!eg[e[0]]){let t=Error(e[1],{cause:e[2]});return t.name=e[0],t}return eg[e[0]](e[1],{cause:e[2]})},z[105]=e=>{let t;if(!1===L.structuredClone)throw Error("Structured clone extension is disabled");let r=A.getUint32(R-4);T||(T=new Map);let i=w[R],n={target:t=i>=144&&i<160||220==i||221==i?[]:i>=128&&i<144||222==i||223==i?new Map:(i>=199&&i<=201||i>=212&&i<=216)&&115===w[R+1]?new Set:{}};T.set(r,n);let s=J();if(!n.used)return n.target=s;if(Object.assign(t,s),t instanceof Map)for(let[e,r]of s.entries())t.set(e,r);if(t instanceof Set)for(let e of Array.from(s))t.add(e);return t},z[112]=e=>{if(!1===L.structuredClone)throw Error("Structured clone extension is disabled");let t=A.getUint32(R-4),r=T.get(t);return r.used=!0,r.target},z[115]=()=>new Set(J());let ey=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array"),ev="object"==typeof globalThis?globalThis:window;z[116]=e=>{let t=e[0],r=Uint8Array.prototype.slice.call(e,1).buffer,i=ey[t];if(!i){if(16===t)return r;if(17===t)return new DataView(r);throw Error("Could not find typed array for code "+t)}return new ev[i](r)},z[120]=()=>{let e=J();return new RegExp(e[0],e[1])};let eb=[];function ex(e){C&&C();let t=k,r=R,i=D,n=P,s=U,a=E,o=M,l=T,c=_,u=new Uint8Array(w.slice(0,k)),p=S,d=S.slice(0,S.length),h=L,f=V,m=e();return k=t,R=r,D=i,P=n,U=s,E=a,M=o,T=l,_=c,w=u,V=f,(S=p).splice(0,S.length,...d),L=h,A=new DataView(w.buffer,w.byteOffset,w.byteLength),m}function ew(){w=null,T=null,S=null}z[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=R;return R+=t-e.length,_=eb,(_=[ec(),ec()]).position0=0,_.position1=0,_.postBundlePosition=R,R=r,J()},z[255]=e=>new Date(4==e.length?(0x1000000*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])*1e3:8==e.length?((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((3&e[3])*0x100000000+0x1000000*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])*1e3:12==e.length?((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((128&e[4]?-0x1000000000000:0)+0x10000000000*e[6]+0x100000000*e[7]+0x1000000*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])*1e3:"invalid");let ek=Array(147);for(let e=0;e<256;e++)ek[e]=+("1e"+Math.floor(45.15-.30103*e));var eS=new H({useRecords:!1});let eE=eS.unpack,e_=eS.unpackMultiple,eT=eS.unpack,eA={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},eI=new Float32Array(1),eO=new Uint8Array(eI.buffer,0,4);try{i=new TextEncoder}catch(e){}let eC="undefined"!=typeof Buffer,ej=eC?function(e){return Buffer.allocUnsafeSlow(e)}:Uint8Array,eR=eC?Buffer:Uint8Array,eN=eC?0x100000000:0x7fd00000,eM=0,eD=null,eL=/[\u0080-\uFFFF]/,eP=Symbol("record-id");class eU extends H{constructor(e){let t,r,p,d;super(e),this.offset=0;let h=eR.prototype.utf8Write?function(e,t){return a.utf8Write(e,t,a.byteLength-t)}:!!i&&!!i.encodeInto&&function(e,t){return i.encodeInto(e,a.subarray(t)).written},f=this;e||(e={});let m=e&&e.sequential,g=e.structures||e.saveStructures,y=e.maxSharedStructures;if(null==y&&(y=g?32:0),y>8160)throw Error("Maximum maxSharedStructure is 8160");e.structuredClone&&void 0==e.moreTypes&&(this.moreTypes=!0);let v=e.maxOwnStructures;null==v&&(v=g?32:64),this.structures||!1==e.useRecords||(this.structures=[]);let b=y>32||v+y>64,x=y+64,w=y+v+64;if(w>8256)throw Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let k=[],S=0,E=0;this.pack=this.encode=function(e,i){let n;if(a||(l=(a=new ej(8192)).dataView||(a.dataView=new DataView(a.buffer,0,8192)),eM=0),(c=a.length-10)-eM<2048?(l=(a=new ej(a.length)).dataView||(a.dataView=new DataView(a.buffer,0,a.length)),c=a.length-10,eM=0):eM=eM+7&0x7ffffff8,t=eM,i&eX&&(eM+=255&i),d=f.structuredClone?new Map:null,f.bundleStrings&&"string"!=typeof e?(eD=[]).size=1/0:eD=null,p=f.structures){p.uninitialized&&(p=f._mergeStructures(f.getStructures()));let e=p.sharedLength||0;if(e>y)throw Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+p.sharedLength);if(!p.transitions){p.transitions=Object.create(null);for(let t=0;t<e;t++){let e=p[t];if(!e)continue;let r,i=p.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];(r=i[n])||(r=i[n]=Object.create(null)),i=r}i[eP]=t+64}this.lastNamedStructuresLength=e}m||(p.nextId=e+64)}r&&(r=!1);try{f.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?D(e):A(e);let r=eD;if(eD&&eF(t,A,0),d&&d.idsToInsert){let e=d.idsToInsert.sort((e,t)=>e.offset>t.offset?1:-1),i=e.length,n=-1;for(;r&&i>0;){let s=e[--i].offset+t;s<r.stringsPosition+t&&-1===n&&(n=0),s>r.position+t?n>=0&&(n+=6):(n>=0&&(l.setUint32(r.position+t,l.getUint32(r.position+t)+n),n=-1),r=r.previous,i++)}n>=0&&r&&l.setUint32(r.position+t,l.getUint32(r.position+t)+n),(eM+=6*e.length)>c&&R(eM),f.offset=eM;let s=function(e,t){let r;let i=6*t.length,n=e.length-i;for(;r=t.pop();){let t=r.offset,s=r.id;e.copyWithin(t+i,t,n);let a=t+(i-=6);e[a++]=214,e[a++]=105,e[a++]=s>>24,e[a++]=s>>16&255,e[a++]=s>>8&255,e[a++]=255&s,n=t}return e}(a.subarray(t,eM),e);return d=null,s}if(f.offset=eM,i&e$)return a.start=t,a.end=eM,a;return a.subarray(t,eM)}catch(e){throw n=e,e}finally{if(p&&(_(),r&&f.saveStructures)){let r=p.sharedLength||0,s=a.subarray(t,eM),o=eV(p,f);if(!n){if(!1===f.saveStructures(o,o.isCompatible))return f.pack(e,i);return f.lastNamedStructuresLength=r,a.length>0x40000000&&(a=null),s}}a.length>0x40000000&&(a=null),i&eZ&&(eM=t)}};let _=()=>{E<10&&E++;let e=p.sharedLength||0;if(p.length>e&&!m&&(p.length=e),S>1e4)p.transitions=null,E=0,S=0,k.length>0&&(k=[]);else if(k.length>0&&!m){for(let e=0,t=k.length;e<t;e++)k[e][eP]=0;k=[]}},T=e=>{var t=e.length;t<16?a[eM++]=144|t:t<65536?(a[eM++]=220,a[eM++]=t>>8,a[eM++]=255&t):(a[eM++]=221,l.setUint32(eM,t),eM+=4);for(let r=0;r<t;r++)A(e[r])},A=e=>{eM>c&&(a=R(eM));var r,i=typeof e;if("string"===i){let i,n=e.length;if(eD&&n>=4&&n<4096){if((eD.size+=n)>21760){let e,r;let i=(eD[0]?3*eD[0].length+eD[1].length:0)+10;eM+i>c&&(a=R(eM+i)),eD.position?(r=eD,a[eM]=200,eM+=3,a[eM++]=98,e=eM-t,eM+=4,eF(t,A,0),l.setUint16(e+t-3,eM-t-e)):(a[eM++]=214,a[eM++]=98,e=eM-t,eM+=4),(eD=["",""]).previous=r,eD.size=0,eD.position=e}let r=eL.test(e);eD[r?0:1]+=e,a[eM++]=193,A(r?-n:n);return}i=n<32?1:n<256?2:n<65536?3:5;let s=3*n;if(eM+s>c&&(a=R(eM+s)),n<64||!h){let t,s,o,l=eM+i;for(t=0;t<n;t++)(s=e.charCodeAt(t))<128?a[l++]=s:(s<2048?a[l++]=s>>6|192:((64512&s)==55296&&(64512&(o=e.charCodeAt(t+1)))==56320?(s=65536+((1023&s)<<10)+(1023&o),t++,a[l++]=s>>18|240,a[l++]=s>>12&63|128):a[l++]=s>>12|224,a[l++]=s>>6&63|128),a[l++]=63&s|128);r=l-eM-i}else r=h(e,eM+i);r<32?a[eM++]=160|r:r<256?(i<2&&a.copyWithin(eM+2,eM+1,eM+1+r),a[eM++]=217,a[eM++]=r):r<65536?(i<3&&a.copyWithin(eM+3,eM+2,eM+2+r),a[eM++]=218,a[eM++]=r>>8,a[eM++]=255&r):(i<5&&a.copyWithin(eM+5,eM+3,eM+3+r),a[eM++]=219,l.setUint32(eM,r),eM+=4),eM+=r}else if("number"===i){if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?a[eM++]=e:e<256?(a[eM++]=204,a[eM++]=e):e<65536?(a[eM++]=205,a[eM++]=e>>8,a[eM++]=255&e):(a[eM++]=206,l.setUint32(eM,e),eM+=4);else if(e>>0===e)e>=-32?a[eM++]=256+e:e>=-128?(a[eM++]=208,a[eM++]=e+256):e>=-32768?(a[eM++]=209,l.setInt16(eM,e),eM+=2):(a[eM++]=210,l.setInt32(eM,e),eM+=4);else{let t;if((t=this.useFloat32)>0&&e<0x100000000&&e>=-0x80000000){let r;if(a[eM++]=202,l.setFloat32(eM,e),t<4||(r=e*ek[(127&a[eM])<<1|a[eM+1]>>7])>>0===r){eM+=4;return}eM--}a[eM++]=203,l.setFloat64(eM,e),eM+=8}}else if("object"===i||"function"===i){if(e){if(d){let r=d.get(e);if(r){if(!r.id){let e=d.idsToInsert||(d.idsToInsert=[]);r.id=e.push(r)}a[eM++]=214,a[eM++]=112,l.setUint32(eM,r.id),eM+=4;return}d.set(e,{offset:eM-t})}let o=e.constructor;if(o===Object)j(e);else if(o===Array)T(e);else if(o===Map){if(this.mapAsEmptyObject)a[eM++]=128;else for(let[t,i]of((r=e.size)<16?a[eM++]=128|r:r<65536?(a[eM++]=222,a[eM++]=r>>8,a[eM++]=255&r):(a[eM++]=223,l.setUint32(eM,r),eM+=4),e))A(t),A(i)}else{for(let t=0,r=n.length;t<r;t++)if(e instanceof s[t]){let r,i=n[t];if(i.write){i.type&&(a[eM++]=212,a[eM++]=i.type,a[eM++]=0);let t=i.write.call(this,e);t===e?Array.isArray(e)?T(e):j(e):A(t);return}let s=a,o=l,u=eM;a=null;try{r=i.pack.call(this,e,e=>(a=s,s=null,(eM+=e)>c&&R(eM),{target:a,targetView:l,position:eM-e}),A)}finally{s&&(a=s,l=o,eM=u,c=a.length-10)}r&&(r.length+eM>c&&R(r.length+eM),eM=eK(r,a,eM,i.type));return}if(Array.isArray(e))T(e);else{if(e.toJSON){let t=e.toJSON();if(t!==e)return A(t)}if("function"===i)return A(this.writeFunction&&this.writeFunction(e));j(e)}}}else a[eM++]=192}else if("boolean"===i)a[eM++]=e?195:194;else if("bigint"===i){if(e<0x8000000000000000&&e>=-0x8000000000000000)a[eM++]=211,l.setBigInt64(eM,e);else if(e<0xffffffffffffffff&&e>0)a[eM++]=207,l.setBigUint64(eM,e);else if(this.largeBigIntToFloat)a[eM++]=203,l.setFloat64(eM,Number(e));else if(this.largeBigIntToString)return A(e.toString());else if(this.useBigIntExtension||this.moreTypes){let t,r=e<0?BigInt(-1):BigInt(0);if(e>>BigInt(65536)===r){let i=BigInt(0xffffffffffffffff)-BigInt(1),n=[];for(;n.push(e&i),e>>BigInt(63)!==r;)e>>=BigInt(64);(t=new Uint8Array(new BigUint64Array(n).buffer)).reverse()}else{let r=e<0,i=(r?~e:e).toString(16);if(i.length%2?i="0"+i:parseInt(i.charAt(0),16)>=8&&(i="00"+i),eC)t=Buffer.from(i,"hex");else{t=new Uint8Array(i.length/2);for(let e=0;e<t.length;e++)t[e]=parseInt(i.slice(2*e,2*e+2),16)}if(r)for(let e=0;e<t.length;e++)t[e]=~t[e]}t.length+eM>c&&R(t.length+eM),eM=eK(t,a,eM,66);return}else throw RangeError(e+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string");eM+=8}else if("undefined"===i)this.encodeUndefinedAsNil?a[eM++]=192:(a[eM++]=212,a[eM++]=0,a[eM++]=0);else throw Error("Unknown type: "+i)},I=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?e=>{let t,r;if(this.skipValues)for(let r in t=[],e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(r))&&!this.skipValues.includes(e[r])&&t.push(r);else t=Object.keys(e);let i=t.length;if(i<16?a[eM++]=128|i:i<65536?(a[eM++]=222,a[eM++]=i>>8,a[eM++]=255&i):(a[eM++]=223,l.setUint32(eM,i),eM+=4),this.coercibleKeyAsNumber)for(let n=0;n<i;n++){let i=Number(r=t[n]);A(isNaN(i)?r:i),A(e[r])}else for(let n=0;n<i;n++)A(r=t[n]),A(e[r])}:e=>{a[eM++]=222;let r=eM-t;eM+=2;let i=0;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(A(t),A(e[t]),i++);if(i>65535)throw Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');a[r+++t]=i>>8,a[r+t]=255&i},O=!1===this.useRecords?I:e.progressiveRecords&&!b?e=>{let r,i,n=p.transitions||(p.transitions=Object.create(null)),s=eM++-t;for(let a in e)if("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(a)){if(i=n[a])n=i;else{let o=Object.keys(e),l=n;n=p.transitions;let c=0;for(let e=0,t=o.length;e<t;e++){let t=o[e];!(i=n[t])&&(i=n[t]=Object.create(null),c++),n=i}s+t+1==eM?(eM--,N(n,o,c)):M(n,o,s,c),r=!0,n=l[a]}A(e[a])}if(!r){let r=n[eP];r?a[s+t]=r:M(n,Object.keys(e),s,0)}}:e=>{let t,r=p.transitions||(p.transitions=Object.create(null)),i=0;for(let n in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(n))&&(!(t=r[n])&&(t=r[n]=Object.create(null),i++),r=t);let n=r[eP];for(let t in n?n>=96&&b?(a[eM++]=(31&(n-=96))+96,a[eM++]=n>>5):a[eM++]=n:N(r,r.__keys__||Object.keys(e),i),e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&A(e[t])},C="function"==typeof this.useRecords&&this.useRecords,j=C?e=>{C(e)?O(e):I(e)}:O,R=e=>{let r;if(e>0x1000000){if(e-t>eN)throw Error("Packed buffer would be larger than maximum buffer size");r=Math.min(eN,4096*Math.round(Math.max((e-t)*(e>0x4000000?1.25:2),4194304)/4096))}else r=(Math.max(e-t<<2,a.length-1)>>12)+1<<12;let i=new ej(r);return l=i.dataView||(i.dataView=new DataView(i.buffer,0,r)),e=Math.min(e,a.length),a.copy?a.copy(i,0,t,e):i.set(a.slice(t,e)),eM-=t,t=0,c=i.length-10,a=i},N=(e,t,i)=>{let n=p.nextId;n||(n=64),n<x&&this.shouldShareStructure&&!this.shouldShareStructure(t)?((n=p.nextOwnId)<w||(n=x),p.nextOwnId=n+1):(n>=w&&(n=x),p.nextId=n+1);let s=t.highByte=n>=96&&b?n-96>>5:-1;e[eP]=n,e.__keys__=t,p[n-64]=t,n<x?(t.isShared=!0,p.sharedLength=n-63,r=!0,s>=0?(a[eM++]=(31&n)+96,a[eM++]=s):a[eM++]=n):(s>=0?(a[eM++]=213,a[eM++]=114,a[eM++]=(31&n)+96,a[eM++]=s):(a[eM++]=212,a[eM++]=114,a[eM++]=n),i&&(S+=E*i),k.length>=v&&(k.shift()[eP]=0),k.push(e),A(t))},M=(e,r,i,n)=>{let s=a,l=eM,u=c,p=t;eM=0,t=0,(a=o)||(o=a=new ej(8192)),c=a.length-10,N(e,r,n),o=a;let d=eM;if(a=s,eM=l,c=u,t=p,d>1){let e=eM+d-1;e>c&&R(e);let r=i+t;a.copyWithin(r+d,r+1,eM),a.set(o.slice(0,d),r),eM=e}else a[i+t]=o[0]},D=e=>{let i=u(e,a,t,eM,p,R,(e,t,i)=>{if(i)return r=!0;eM=t;let n=a;return(A(e),_(),n!==a)?{position:eM,targetView:l,target:a}:eM},this);if(0===i)return j(e);eM=i}}useBuffer(e){(a=e).dataView||(a.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength)),l=a.dataView,eM=0}set position(e){eM=e}get position(){return eM}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function ez(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=r(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=r(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=r(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,e.buffer||(e=new Uint8Array(e)),s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function eB(e,t){let r=e.byteLength;if(r<256){var i,n,{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=255&r}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function eK(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):(n<65536?(t[r++]=200,t[r++]=n>>8):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255),t[r++]=255&n)}return t[r++]=i,t.set(e,r),r+=n}function eF(e,t,r){if(eD.length>0){l.setUint32(eD.position+e,eM+r-eD.position-e),eD.stringsPosition=eM-e;let i=eD;eD=null,t(i[0]),t(i[1])}}function eV(e,t){return e.isCompatible=e=>{let r=!e||(t.lastNamedStructuresLength||0)===e.length;return r||t._mergeStructures(e),r},e}s=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,K],n=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&i>=0&&i<0x100000000){let{target:e,targetView:r,position:n}=t(6);e[n++]=214,e[n++]=255,r.setUint32(n,i)}else if(i>0&&i<0x100000000){let{target:r,targetView:n,position:s}=t(10);r[s++]=215,r[s++]=255,n.setUint32(s,4e6*e.getMilliseconds()+(i/1e3/0x100000000>>0)),n.setUint32(s+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:e,targetView:i,position:n}=t(3);e[n++]=212,e[n++]=255,e[n++]=255}else{let{target:r,targetView:n,position:s}=t(15);r[s++]=199,r[s++]=12,r[s++]=255,n.setUint32(s,1e6*e.getMilliseconds()),n.setBigInt64(s+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){if(this.setAsEmptyObject)return t(0),r({});let i=Array.from(e),{target:n,position:s}=t(this.moreTypes?3:0);this.moreTypes&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message,e.cause])}},{pack(e,t,r){let{target:i,position:n}=t(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.moreTypes?ez(e,16,t):eB(eC?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==eR&&this.moreTypes?ez(e,ey.indexOf(r.name),t):eB(e,t)}},{pack(e,t){this.moreTypes?ez(e,17,t):eB(eC?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];let eq=new eU({useRecords:!1}),eH=eq.pack,eG=eq.pack,{NEVER:eY,ALWAYS:eJ,DECIMAL_ROUND:eW,DECIMAL_FIT:eQ}=eA,e$=512,eZ=1024,eX=2048,e0=["num","object","string","ascii"];e0[16]="date";let e1=[!1,!0,!0,!1,!1,!0,!0,!1];try{Function(""),p=!0}catch(e){}let e2="undefined"!=typeof Buffer;try{h=new TextEncoder}catch(e){}let e3=e2?function(e,t,r){return e.utf8Write(t,r,e.byteLength-r)}:!!h&&!!h.encodeInto&&function(e,t,r){return h.encodeInto(t,e.subarray(r)).written};function e4(e,t,r,i){let n;return(n=e.ascii8||e.num8)?(r.setInt8(t,i,!0),d=t+1,n):(n=e.string16||e.object16)?(r.setInt16(t,i,!0),d=t+2,n):(n=e.num32)?(r.setUint32(t,0xe0000100+i,!0),d=t+4,n):(n=e.num64)?(r.setFloat64(t,NaN,!0),r.setInt8(t,i),d=t+8,n):void(d=t)}function e6(e,t,r){let i=e0[t]+(r<<3),n=e[i]||(e[i]=Object.create(null));return n.__type=t,n.__size=r,n.__parent=e,n}m=function e(t,r,i,n,s,a,o,l){let c,u=l.typedStructs||(l.typedStructs=[]),p=r.dataView,h=(u.lastStringStart||100)+n,f=r.length-10,m=n;n>f&&(p=(r=a(n)).dataView,n-=i,m-=i,h-=i,i=0,f=r.length-10);let g,y=h,v=u.transitions||(u.transitions=Object.create(null)),b=u.nextId||u.length,x=b<15?1:b<240?2:b<61440?3:b<0xf00000?4:0;if(0===x)return 0;n+=x;let w=[],k=0;for(let e in t){let s=t[e],l=v[e];switch(l||(v[e]=l={key:e,parent:v,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),n>f&&(p=(r=a(n)).dataView,n-=i,m-=i,h-=i,y-=i,i=0,f=r.length-10),typeof s){case"number":if(b<200||!l.num64){if(s>>0===s&&s<0x20000000&&s>-0x1f000000){s<246&&s>=0&&(l.num8&&!(b>200&&l.num32)||s<32&&!l.num32)?(v=l.num8||e6(l,0,1),r[n++]=s):(v=l.num32||e6(l,0,4),p.setUint32(n,s,!0),n+=4);break}if(s<0x100000000&&s>=-0x80000000&&(p.setFloat32(n,s,!0),e1[r[n+3]>>>5])){let e;if((e=s*ek[(127&r[n+3])<<1|r[n+2]>>7])>>0===e){v=l.num32||e6(l,0,4),n+=4;break}}}v=l.num64||e6(l,0,8),p.setFloat64(n,s,!0),n+=8;break;case"string":let x,S=s.length;if(g=y-h,(S<<2)+y>f&&(p=(r=a((S<<2)+y)).dataView,n-=i,m-=i,h-=i,y-=i,i=0,f=r.length-10),S>65280+g>>2){w.push(e,s,n-m);break}let E=y;if(S<64){let e,t,i;for(e=0;e<S;e++)(t=s.charCodeAt(e))<128?r[y++]=t:(t<2048?(x=!0,r[y++]=t>>6|192):((64512&t)==55296&&(64512&(i=s.charCodeAt(e+1)))==56320?(x=!0,t=65536+((1023&t)<<10)+(1023&i),e++,r[y++]=t>>18|240,r[y++]=t>>12&63|128):(x=!0,r[y++]=t>>12|224),r[y++]=t>>6&63|128),r[y++]=63&t|128)}else y+=e3(r,s,y),x=y-E>S;if(g<160||g<246&&(l.ascii8||l.string8)){if(x)(v=l.string8)||(u.length>10&&(v=l.ascii8)?(v.__type=2,l.ascii8=null,l.string8=v,o(null,0,!0)):v=e6(l,2,1));else if(0!==g||c)(v=l.ascii8)||u.length>10&&(v=l.string8)||(v=e6(l,3,1));else{c=!0,v=l.ascii0||e6(l,3,0);break}r[n++]=g}else v=l.string16||e6(l,2,2),p.setUint16(n,g,!0),n+=2;break;case"object":s?s.constructor===Date?(v=l.date64||e6(l,16,8),p.setFloat64(n,s.getTime(),!0),n+=8):w.push(e,s,k):(l=e4(l,n,p,-10))?(v=l,n=d):w.push(e,s,k);break;case"boolean":v=l.num8||l.ascii8||e6(l,0,1),r[n++]=s?249:248;break;case"undefined":(l=e4(l,n,p,-9))?(v=l,n=d):w.push(e,s,k);break;default:w.push(e,s,k)}k++}for(let e=0,t=w.length;e<t;){let t,s=w[e++],a=w[e++],l=w[e++],c=v[s];if(c||(v[s]=c={key:s,parent:v,enumerationOffset:l-k,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null}),a){let e;(g=y-h)<65280?(v=c.object16)?e=2:(v=c.object32)?e=4:(v=e6(c,1,2),e=2):(v=c.object32||e6(c,1,4),e=4),"object"==typeof(t=o(a,y))?(y=t.position,p=t.targetView,r=t.target,h-=i,n-=i,m-=i,i=0):y=t,2===e?(p.setUint16(n,g,!0),n+=2):(p.setUint32(n,g,!0),n+=4)}else v=c.object16||e6(c,1,2),p.setInt16(n,null===a?-10:-9,!0),n+=2;k++}let S=v[eP];if(null==S){let e;S=l.typedStructs.length;let t=[],r=v;for(;void 0!==(e=r.__type);){let i=[e,r.__size,(r=r.__parent).key];r.enumerationOffset&&i.push(r.enumerationOffset),t.push(i),r=r.parent}t.reverse(),v[eP]=S,l.typedStructs[S]=t,o(null,0,!0)}switch(x){case 1:if(S>=16)return 0;r[m]=S+32;break;case 2:if(S>=256)return 0;r[m]=56,r[m+1]=S;break;case 3:if(S>=65536)return 0;r[m]=57,p.setUint16(m+1,S,!0);break;case 4:if(S>=0x1000000)return 0;p.setUint32(m,(S<<8)+58,!0)}if(n<h){if(h===y)return n;r.copyWithin(n,h,y),y+=n-h,u.lastStringStart=n-m}else if(n>h)return h===y?n:(u.lastStringStart=n-m,e(t,r,i,m,s,a,o,l));return y},g=function(e,t){if(t.typedStructs){let r=new Map;r.set("named",e),r.set("typed",t.typedStructs),e=r}let r=t.lastTypedStructuresLength||0;return e.isCompatible=e=>{let i=!0;return e instanceof Map?((e.get("named")||[]).length!==(t.lastNamedStructuresLength||0)&&(i=!1),(e.get("typed")||[]).length!==r&&(i=!1)):(e instanceof Array||Array.isArray(e))&&e.length!==(t.lastNamedStructuresLength||0)&&(i=!1),i||t._mergeStructures(e),i},t.lastTypedStructuresLength=t.typedStructs&&t.typedStructs.length,e},u=m,eV=g;var e5=Symbol.for("source");function e8(e){switch(e){case 246:return null;case 247:return;case 248:return!1;case 249:return!0}throw Error("Unknown constant")}y=function(e,t,r,i){let n=e[t++]-32;if(n>=24)switch(n){case 24:n=e[t++];break;case 25:n=e[t++]+(e[t++]<<8);break;case 26:n=e[t++]+(e[t++]<<8)+(e[t++]<<16);break;case 27:n=e[t++]+(e[t++]<<8)+(e[t++]<<16)+(e[t++]<<24)}let s=i.typedStructs&&i.typedStructs[n];if(!s){if(e=Uint8Array.prototype.slice.call(e,t,r),r-=t,t=0,!i.getStructures)throw Error(`Reference to shared structure ${n} without getStructures method`);if(i._mergeStructures(i.getStructures()),!i.typedStructs)throw Error("Could not find any shared typed structures");if(i.lastTypedStructuresLength=i.typedStructs.length,!(s=i.typedStructs[n]))throw Error("Could not find typed structure "+n)}var a=s.construct,o=s.fullConstruct;if(!a){let e;a=s.construct=function(){},(o=s.fullConstruct=function(){}).prototype=i.structPrototype||{};var l=a.prototype=i.structPrototype?Object.create(i.structPrototype):{};let t=[],r=0;for(let n=0,a=s.length;n<a;n++){let a,o;let[l,c,u,p]=s[n];"__proto__"===u&&(u="__proto_");let d={key:u,offset:r};switch(p?t.splice(n+p,0,d):t.push(d),c){case 0:a=()=>0;break;case 1:a=(e,t)=>{let r=e.bytes[t+d.offset];return r>=246?e8(r):r};break;case 2:a=(e,t)=>{let r=e.bytes,i=(r.dataView||(r.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength))).getUint16(t+d.offset,!0);return i>=65280?e8(255&i):i};break;case 4:a=(e,t)=>{let r=e.bytes,i=(r.dataView||(r.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength))).getUint32(t+d.offset,!0);return i>=0xffffff00?e8(255&i):i}}switch(d.getRef=a,r+=c,l){case 3:e&&!e.next&&(e.next=d),e=d,d.multiGetCount=0,o=function(e){let t=e.bytes,i=e.position,n=r+i,s=a(e,i);if("number"!=typeof s)return s;let o,l=d.next;for(;l&&"number"!=typeof(o=l.getRef(e,i));)o=null,l=l.next;return(null==o&&(o=e.bytesEnd-n),e.srcString)?e.srcString.slice(s,o):function(e,t,r){let i=w;w=e,R=t;try{return ei(r)}finally{w=i}}(t,s+n,o-s)};break;case 2:case 1:e&&!e.next&&(e.next=d),e=d,o=function(e){let t=e.position,n=r+t,s=a(e,t);if("number"!=typeof s)return s;let o=e.bytes,c,u=d.next;for(;u&&"number"!=typeof(c=u.getRef(e,t));)c=null,u=u.next;if(null==c&&(c=e.bytesEnd-n),2===l)return o.toString("utf8",s+n,c+n);f=e;try{return i.unpack(o,{start:s+n,end:c+n})}finally{f=null}};break;case 0:switch(c){case 4:o=function(e){let t=e.bytes,r=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength)),i=e.position+d.offset,n=r.getInt32(i,!0);if(n<0x20000000){if(n>-0x1f000000)return n;if(n>-0x20000000)return e8(255&n)}let s=r.getFloat32(i,!0),a=ek[(127&t[i+3])<<1|t[i+2]>>7];return(a*s+(s>0?.5:-.5)>>0)/a};break;case 8:o=function(e){let t=e.bytes,r=(t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))).getFloat64(e.position+d.offset,!0);if(isNaN(r)){let r=t[e.position+d.offset];if(r>=246)return e8(r)}return r};break;case 1:o=function(e){let t=e.bytes[e.position+d.offset];return t<246?t:e8(t)}}break;case 16:o=function(e){let t=e.bytes;return new Date((t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))).getFloat64(e.position+d.offset,!0))}}d.get=o}if(p){let e,r=[],n=[],s=0;for(let a of t){if(i.alwaysLazyProperty&&i.alwaysLazyProperty(a.key)){e=!0;continue}Object.defineProperty(l,a.key,{get:function(e){return function(){return e(this[e5])}}(a.get),enumerable:!0});let t="v"+s++;n.push(t),r.push("o["+JSON.stringify(a.key)+"]="+t+"(s)")}e&&r.push("__proto__:this");let a=Function(...n,"var c=this;return function(s){var o=new c();"+r.join(";")+";return o;}").apply(o,t.map(e=>e.get));Object.defineProperty(l,"toJSON",{value(e){return a.call(this,this[e5])}})}else Object.defineProperty(l,"toJSON",{value(e){let r={};for(let e=0,i=t.length;e<i;e++){let i=t[e].key;r[i]=this[i]}return r}})}var c=new a;return c[e5]={bytes:e,position:t,srcString:"",bytesEnd:r},c},v=function(e){if(!(e instanceof Map))return e;let t=e.get("typed")||[];Object.isFrozen(t)&&(t=t.map(e=>e.slice(0)));let r=e.get("named"),i=Object.create(null);for(let e=0,r=t.length;e<r;e++){let r=t[e],n=i;for(let[e,t,i]of r){let r=n[i];r||(n[i]=r={key:i,parent:n,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),n=e6(r,e,t)}n[eP]=e}return t.transitions=i,this.typedStructs=t,this.lastTypedStructuresLength=t.length,r},b=function(){f&&(f.bytes=Uint8Array.prototype.slice.call(f.bytes,f.position,f.bytesEnd),f.position=0,f.bytesEnd=f.bytes.length)},I=y,O=v,C=b;class e9 extends j.Transform{constructor(e){e||(e={}),e.writableObjectMode=!0,super(e),e.sequential=!0,this.packr=e.packr||new eU(e)}_transform(e,t,r){this.push(this.packr.pack(e)),r()}}class e7 extends j.Transform{constructor(e){e||(e={}),e.objectMode=!0,super(e),e.structures=[],this.unpackr=e.unpackr||new H(e)}_transform(e,t,r){let i;this.incompleteBuffer&&(e=Buffer.concat([this.incompleteBuffer,e]),this.incompleteBuffer=null);try{i=this.unpackr.unpackMultiple(e)}catch(t){if(t.incomplete)this.incompleteBuffer=e.slice(t.lastPosition),i=t.values;else throw t}finally{for(let e of i||[])null===e&&(e=this.getNullValue()),this.push(e)}r&&r()}getNullValue(){return Symbol.for(null)}}async function*te(e,t){let r=new eU(t);for await(let t of e)yield r.pack(t)}if(!(void 0!==process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED&&"true"===process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase())){let e;try{(e=r(89127))&&function(e){function r(t){return function(r){let i=M[D++];if(null==i){if(_)return ei(r);let n=w.byteOffset,s=e(R-t+n,k+n,w.buffer);if("string"==typeof s)i=s,M=N;else if(D=1,U=1,void 0===(i=(M=s)[0]))throw Error("Unexpected end of buffer")}let n=i.length;return n<=r?(R+=r,i):(E=i,P=R,U=R+n,R+=r,i.slice(0,r))}}t.isNativeAccelerationEnabled=!0,X=r(1),ee=r(2),et=r(3),er=r(5)}(e.extractStrings)}catch(e){}}t.ALWAYS=eJ,t.C1=F,t.DECIMAL_FIT=eQ,t.DECIMAL_ROUND=eW,t.Decoder=H,t.DecoderStream=e7,t.Encoder=eU,t.EncoderStream=e9,t.FLOAT32_OPTIONS=eA,t.NEVER=eY,t.Packr=eU,t.PackrStream=e9,t.Unpackr=H,t.UnpackrStream=e7,t.addExtension=function(e){if(e.Class){if(!e.pack&&!e.write)throw Error("Extension has no pack or write function");if(e.pack&&!e.type)throw Error("Extension has no type (numeric code to identify the extension)");s.unshift(e.Class),n.unshift(e)}e.unpack?z[e.type]=e.unpack:z[e.type]=e},t.clearSource=ew,t.decode=eT,t.decodeIter=function(e,t={}){let r;if(!e||"object"!=typeof e)throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let i=new H(t),n=e=>{let t;r&&(e=Buffer.concat([r,e]),r=void 0);try{t=i.unpackMultiple(e)}catch(i){if(i.incomplete)r=e.slice(i.lastPosition),t=i.values;else throw i}return t};return"function"==typeof e[Symbol.iterator]?function*(){for(let t of e)yield*n(t)}():"function"==typeof e[Symbol.asyncIterator]?async function*(){for await(let t of e)yield*n(t)}():void 0},t.encode=eG,t.encodeIter=function(e,t={}){if(e&&"object"==typeof e){if("function"==typeof e[Symbol.iterator])return function*(e,t){let r=new eU(t);for(let t of e)yield r.pack(t)}(e,t);if("function"==typeof e.then||"function"==typeof e[Symbol.asyncIterator])return te(e,t);throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}throw Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")},t.mapsAsObjects=!0,t.pack=eH,t.roundFloat32=function(e){eI[0]=e;let t=ek[(127&eO[3])<<1|eO[2]>>7];return(t*e+(e>0?.5:-.5)>>0)/t},t.unpack=eE,t.unpackMultiple=e_,t.useRecords=!1},48957:e=>{"use strict";e.exports=JSON.parse('{"acl":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"append":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"asking":{"arity":1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"auth":{"arity":-2,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"bgrewriteaof":{"arity":1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bgsave":{"arity":-1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bitcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"bitfield":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"bitfield_ro":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"bitop":{"arity":-4,"flags":["write","denyoom"],"keyStart":2,"keyStop":-1,"step":1},"bitpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"blmove":{"arity":6,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"blmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"blpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpoplpush":{"arity":4,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"bzmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"bzpopmax":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"bzpopmin":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"client":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"cluster":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"command":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"config":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"copy":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"dbsize":{"arity":1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"debug":{"arity":-2,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"decr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"decrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"del":{"arity":-2,"flags":["write"],"keyStart":1,"keyStop":-1,"step":1},"discard":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"dump":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"echo":{"arity":2,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"eval":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"eval_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"exec":{"arity":1,"flags":["noscript","loading","stale","skip_slowlog"],"keyStart":0,"keyStop":0,"step":0},"exists":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"expire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"failover":{"arity":-1,"flags":["admin","noscript","stale"],"keyStart":0,"keyStop":0,"step":0},"fcall":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"fcall_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"flushall":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"flushdb":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"function":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"geoadd":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"geodist":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geohash":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geopos":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadius":{"arity":-6,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadius_ro":{"arity":-6,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember":{"arity":-5,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember_ro":{"arity":-5,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearch":{"arity":-7,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearchstore":{"arity":-8,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"get":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getbit":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getdel":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getex":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"getset":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"hello":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"hexists":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hexpire":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"hget":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hgetall":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hincrbyfloat":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hkeys":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmget":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hrandfield":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hsetnx":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hstrlen":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hvals":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"incr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrbyfloat":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"info":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"keys":{"arity":2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"lastsave":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"latency":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"lcs":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":2,"step":1},"lindex":{"arity":3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"linsert":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"llen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"lmove":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"lmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"lolwut":{"arity":-1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"lpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"lpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lrem":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"lset":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"ltrim":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"memory":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"mget":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"migrate":{"arity":-6,"flags":["write","movablekeys"],"keyStart":3,"keyStop":3,"step":1},"module":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"monitor":{"arity":1,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"move":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"mset":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"msetnx":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"multi":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"object":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"persist":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"pfadd":{"arity":-2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"pfcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"pfdebug":{"arity":3,"flags":["write","denyoom","admin"],"keyStart":2,"keyStop":2,"step":1},"pfmerge":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"pfselftest":{"arity":1,"flags":["admin"],"keyStart":0,"keyStop":0,"step":0},"ping":{"arity":-1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"psetex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"psubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"psync":{"arity":-3,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"pttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"publish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"pubsub":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"punsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"quit":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"randomkey":{"arity":1,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"readonly":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"readwrite":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rename":{"arity":3,"flags":["write"],"keyStart":1,"keyStop":2,"step":1},"renamenx":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"replconf":{"arity":-1,"flags":["admin","noscript","loading","stale","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"replicaof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"reset":{"arity":1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"restore":{"arity":-4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"restore-asking":{"arity":-4,"flags":["write","denyoom","asking"],"keyStart":1,"keyStop":1,"step":1},"role":{"arity":1,"flags":["noscript","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"rpoplpush":{"arity":3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"rpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"rpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"sadd":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"save":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"scan":{"arity":-2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"scard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"script":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"sdiff":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sdiffstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"select":{"arity":2,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"set":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setbit":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setnx":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"setrange":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"shutdown":{"arity":-1,"flags":["admin","noscript","loading","stale","no_multi","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"sinter":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"sinterstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sismember":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"slaveof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"slowlog":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"smembers":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"smismember":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"smove":{"arity":4,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"sort":{"arity":-2,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"sort_ro":{"arity":-2,"flags":["readonly","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"spop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"spublish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":1,"keyStop":1,"step":1},"srandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"srem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"sscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"ssubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"strlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"subscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"substr":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"sunion":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sunionstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sunsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"swapdb":{"arity":3,"flags":["write","fast"],"keyStart":0,"keyStop":0,"step":0},"sync":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"time":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"touch":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"ttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"type":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"unlink":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":-1,"step":1},"unsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"unwatch":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"wait":{"arity":3,"flags":["noscript"],"keyStart":0,"keyStop":0,"step":0},"watch":{"arity":-2,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":1,"keyStop":-1,"step":1},"xack":{"arity":-4,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xadd":{"arity":-5,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xautoclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xgroup":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xinfo":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"xpending":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xread":{"arity":-4,"flags":["readonly","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xreadgroup":{"arity":-7,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xsetid":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xtrim":{"arity":-4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zadd":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zcard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zdiff":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zdiffstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zinter":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zinterstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zlexcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zmscore":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmax":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmin":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zrandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangestore":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"zrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zrem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zremrangebylex":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyrank":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyscore":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zscore":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zunion":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zunionstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1}}')},58417:e=>{"use strict";e.exports=JSON.parse('{"126":{"host":"smtp.126.com","port":465,"secure":true},"163":{"host":"smtp.163.com","port":465,"secure":true},"1und1":{"host":"smtp.1und1.de","port":465,"secure":true,"authMethod":"LOGIN"},"Aliyun":{"domains":["aliyun.com"],"host":"smtp.aliyun.com","port":465,"secure":true},"AOL":{"domains":["aol.com"],"host":"smtp.aol.com","port":587},"Bluewin":{"host":"smtpauths.bluewin.ch","domains":["bluewin.ch"],"port":465},"DebugMail":{"host":"debugmail.io","port":25},"DynectEmail":{"aliases":["Dynect"],"host":"smtp.dynect.net","port":25},"Ethereal":{"aliases":["ethereal.email"],"host":"smtp.ethereal.email","port":587},"FastMail":{"domains":["fastmail.fm"],"host":"smtp.fastmail.com","port":465,"secure":true},"Forward Email":{"aliases":["FE","ForwardEmail"],"domains":["forwardemail.net"],"host":"smtp.forwardemail.net","port":465,"secure":true},"Feishu Mail":{"aliases":["Feishu","FeishuMail"],"domains":["www.feishu.cn"],"host":"smtp.feishu.cn","port":465,"secure":true},"GandiMail":{"aliases":["Gandi","Gandi Mail"],"host":"mail.gandi.net","port":587},"Gmail":{"aliases":["Google Mail"],"domains":["gmail.com","googlemail.com"],"host":"smtp.gmail.com","port":465,"secure":true},"Godaddy":{"host":"smtpout.secureserver.net","port":25},"GodaddyAsia":{"host":"smtp.asia.secureserver.net","port":25},"GodaddyEurope":{"host":"smtp.europe.secureserver.net","port":25},"hot.ee":{"host":"mail.hot.ee"},"Hotmail":{"aliases":["Outlook","Outlook.com","Hotmail.com"],"domains":["hotmail.com","outlook.com"],"host":"smtp-mail.outlook.com","port":587},"iCloud":{"aliases":["Me","Mac"],"domains":["me.com","mac.com"],"host":"smtp.mail.me.com","port":587},"Infomaniak":{"host":"mail.infomaniak.com","domains":["ik.me","ikmail.com","etik.com"],"port":587},"Loopia":{"host":"mailcluster.loopia.se","port":465},"mail.ee":{"host":"smtp.mail.ee"},"Mail.ru":{"host":"smtp.mail.ru","port":465,"secure":true},"Mailcatch.app":{"host":"sandbox-smtp.mailcatch.app","port":2525},"Maildev":{"port":1025,"ignoreTLS":true},"Mailgun":{"host":"smtp.mailgun.org","port":465,"secure":true},"Mailjet":{"host":"in.mailjet.com","port":587},"Mailosaur":{"host":"mailosaur.io","port":25},"Mailtrap":{"host":"live.smtp.mailtrap.io","port":587},"Mandrill":{"host":"smtp.mandrillapp.com","port":587},"Naver":{"host":"smtp.naver.com","port":587},"One":{"host":"send.one.com","port":465,"secure":true},"OpenMailBox":{"aliases":["OMB","openmailbox.org"],"host":"smtp.openmailbox.org","port":465,"secure":true},"Outlook365":{"host":"smtp.office365.com","port":587,"secure":false},"OhMySMTP":{"host":"smtp.ohmysmtp.com","port":587,"secure":false},"Postmark":{"aliases":["PostmarkApp"],"host":"smtp.postmarkapp.com","port":2525},"Proton":{"aliases":["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],"domains":["proton.me","protonmail.com","pm.me","protonmail.ch"],"host":"smtp.protonmail.ch","port":587,"requireTLS":true},"qiye.aliyun":{"host":"smtp.mxhichina.com","port":"465","secure":true},"QQ":{"domains":["qq.com"],"host":"smtp.qq.com","port":465,"secure":true},"QQex":{"aliases":["QQ Enterprise"],"domains":["exmail.qq.com"],"host":"smtp.exmail.qq.com","port":465,"secure":true},"SendCloud":{"host":"smtp.sendcloud.net","port":2525},"SendGrid":{"host":"smtp.sendgrid.net","port":587},"SendinBlue":{"aliases":["Brevo"],"host":"smtp-relay.brevo.com","port":587},"SendPulse":{"host":"smtp-pulse.com","port":465,"secure":true},"SES":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-EAST-1":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-WEST-2":{"host":"email-smtp.us-west-2.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-1":{"host":"email-smtp.eu-west-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTH-1":{"host":"email-smtp.ap-south-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-1":{"host":"email-smtp.ap-northeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-2":{"host":"email-smtp.ap-northeast-2.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-3":{"host":"email-smtp.ap-northeast-3.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-1":{"host":"email-smtp.ap-southeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-2":{"host":"email-smtp.ap-southeast-2.amazonaws.com","port":465,"secure":true},"Seznam":{"aliases":["Seznam Email"],"domains":["seznam.cz","email.cz","post.cz","spoluzaci.cz"],"host":"smtp.seznam.cz","port":465,"secure":true},"Sparkpost":{"aliases":["SparkPost","SparkPost Mail"],"domains":["sparkpost.com"],"host":"smtp.sparkpostmail.com","port":587,"secure":false},"Tipimail":{"host":"smtp.tipimail.com","port":587},"Yahoo":{"domains":["yahoo.com"],"host":"smtp.mail.yahoo.com","port":465,"secure":true},"Yandex":{"domains":["yandex.ru"],"host":"smtp.yandex.ru","port":465,"secure":true},"Zoho":{"host":"smtp.zoho.com","port":465,"secure":true,"authMethod":"LOGIN"}}')},49074:e=>{"use strict";e.exports=JSON.parse('{"name":"nodemailer","version":"6.10.1","description":"Easy as cake e-mail sending from your Node.js applications","main":"lib/nodemailer.js","scripts":{"test":"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","lint":"eslint .","update":"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},"repository":{"type":"git","url":"https://github.com/nodemailer/nodemailer.git"},"keywords":["Nodemailer"],"author":"Andris Reinman","license":"MIT-0","bugs":{"url":"https://github.com/nodemailer/nodemailer/issues"},"homepage":"https://nodemailer.com/","devDependencies":{"@aws-sdk/client-ses":"3.731.1","bunyan":"1.8.15","c8":"10.1.3","eslint":"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0","libbase64":"1.3.0","libmime":"5.3.6","libqp":"2.1.1","nodemailer-ntlm-auth":"1.0.4","proxy":"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},"engines":{"node":">=6.0.0"}}')}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[994,882,379],()=>r(58929));module.exports=i})();