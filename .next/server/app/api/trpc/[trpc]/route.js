(()=>{var e={};e.id=841,e.ids=[841],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},95257:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>rL,routeModule:()=>rM,serverHooks:()=>rB,workAsyncStorage:()=>rq,workUnitAsyncStorage:()=>rC});var n,o,a,s={};t.r(s),t.d(s,{GET:()=>rz,POST:()=>rz});var i=t(42706),l=t(28203),u=t(45994);function c(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function d(e,r){let t=(function(e,r){let t=null,n=()=>{t?.unsubscribe(),t=null,r.removeEventListener("abort",n)};return new ReadableStream({start(o){t=e.subscribe({next(e){o.enqueue({ok:!0,value:e})},error(e){o.enqueue({ok:!1,error:e}),o.close()},complete(){o.close()}}),r.aborted?n():r.addEventListener("abort",n,{once:!0})},cancel(){n()}})})(e,r).getReader(),n={async next(){let e=await t.read();if(e.done)return{value:void 0,done:!0};let{value:r}=e;if(!r.ok)throw r.error;return{value:r.value,done:!1}},return:async()=>(await t.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>n}}let p={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},f={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"},y=Symbol();function h(e,...r){let t=Object.assign(Object.create(null),e);for(let e of r)for(let r in e){if(r in t&&t[r]!==e[r])throw Error(`Duplicate key ${r}`);t[r]=e[r]}return t}function m(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function w(e){return"function"==typeof e}function E(e){return Object.assign(Object.create(null),e)}let g="function"==typeof Symbol&&!!Symbol.asyncIterator;function b(e){return g&&m(e)&&Symbol.asyncIterator in e}let v=e=>e();function O(e){return e}let S={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function A(e){let{path:r,error:t,config:n}=e,{code:o}=e.error,a={message:t.message,code:p[o],data:{code:o,httpStatus:S[t.code]??500}};return n.isDev&&"string"==typeof e.error.stack&&(a.data.stack=e.error.stack),"string"==typeof r&&(a.data.path=r),n.errorFormatter({...e,shape:a})}function T(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class _ extends Error{}function R(e){if(e instanceof P||e instanceof Error&&"TRPCError"===e.name)return e;let r=new P({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(r.stack=e.stack),r}class P extends Error{constructor(e){let r=function(e){if(e instanceof Error)return e;let r=typeof e;if("undefined"!==r&&"function"!==r&&null!==e){if("object"!==r)return Error(String(e));if(m(e)){let r=new _;for(let t in e)r[t]=e[t];return r}}}(e.cause);super(e.message??r?.message??e.code,{cause:r}),T(this,"cause",void 0),T(this,"code",void 0),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=r)}}function I(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}let D=new WeakMap,k=()=>{};n=Symbol.toStringTag;class j{subscribe(){let e,r;let{settlement:t}=this;if(null===t){let t,n;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let o={promise:new Promise((e,r)=>{t=e,n=r}),resolve:t,reject:n};this.subscribers=[...this.subscribers,o],e=o.promise,r=()=>{null!==this.subscribers&&(this.subscribers=function(e,r){let t=e.indexOf(r);return -1!==t?[...e.slice(0,t),...e.slice(t+1)]:e}(this.subscribers,o))}}else{let{status:n}=t;e="fulfilled"===n?Promise.resolve(t.value):Promise.reject(t.reason),r=k}return Object.assign(e,{unsubscribe:r})}then(e,r){let t=this.subscribe(),{unsubscribe:n}=t;return Object.assign(t.then(e,r),{unsubscribe:n})}catch(e){let r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.catch(e),{unsubscribe:t})}finally(e){let r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.finally(e),{unsubscribe:t})}static proxy(e){let r=j.getSubscribablePromise(e);return void 0!==r?r:j.createSubscribablePromise(e)}static createSubscribablePromise(e){let r=new j(e);return D.set(e,r),D.set(r,r),r}static getSubscribablePromise(e){return D.get(e)}static resolve(e){let r="object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e);return j.proxy(r).subscribe()}static async any(e){let r=(Array.isArray(e)?e:[...e]).map(j.resolve);try{return await Promise.any(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async race(e){let r=(Array.isArray(e)?e:[...e]).map(j.resolve);try{return await Promise.race(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let r=e.map(N);try{return await Promise.race(r)}finally{for(let e of r)e.unsubscribe()}}constructor(e){I(this,"promise",void 0),I(this,"subscribers",[]),I(this,"settlement",null),I(this,n,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;let r=this.promise.then(e=>{let{subscribers:r}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},r?.forEach(({resolve:r})=>{r(e)})});"catch"in r&&r.catch(e=>{let{subscribers:r}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},r?.forEach(({reject:r})=>{r(e)})})}}function N(e){return j.proxy(e).then(()=>[e])}function U(e="AbortError"){throw new DOMException(e,"AbortError")}function x(e,r){let t=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await r(),await t?.()},e}(o=Symbol).dispose??(o.dispose=Symbol()),(a=Symbol).asyncDispose??(a.asyncDispose=Symbol());let z=Symbol();function M(e){let r=null;return function(e,r){let t=e[Symbol.dispose];return e[Symbol.dispose]=()=>{r(),t?.()},e}({start(){if(r)throw Error("Timer already started");return new Promise(t=>{r=setTimeout(()=>t(z),e)})}},()=>{r&&clearTimeout(r)})}function q(e,r,t){if(null!=r){var n,o;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function C(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(C=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(a).then(r,function(e){return t(e),r()})}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function B(e){let r=e[Symbol.asyncIterator]();return x(r,async()=>{await r.return?.()})}async function*L(e,r){let t={stack:[],error:void 0,hasError:!1};try{let n;let o=q(t,B(e),!0),a=q(t,M(r.maxDurationMs),!1).start();for(;;){if((n=await j.race([o.next(),a]))===z&&U(),n.done)return n;yield n.value,n=null}}catch(e){t.error=e,t.hasError=!0}finally{let e=C(t);e&&await e}}async function*Y(e,r){let t={stack:[],error:void 0,hasError:!1};try{let n;let o=q(t,B(e),!0),a=q(t,M(r.gracePeriodMs),!1),s=r.count,i=new Promise(()=>{});for(;;){if((n=await j.race([o.next(),i]))===z&&U(),n.done)return n.value;yield n.value,0==--s&&(i=a.start()),n=null}}catch(e){t.error=e,t.hasError=!0}finally{let e=C(t);e&&await e}}function V(){let e,r;return{promise:new Promise((t,n)=>{e=t,r=n}),resolve:e,reject:r}}function F(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(F=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(a).then(r,function(e){return t(e),r()})}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function H(e){let r=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await r.return?.()},async pull(e){let t=await r.next();if(t.done){e.close();return}e.enqueue(t.value)}})}function J(e,r,t){if(null!=r){var n,o;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function $(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return($=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(a).then(r,function(e){return t(e),r()})}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}let G=Symbol("ping");async function*W(e,r){let t={stack:[],error:void 0,hasError:!1};try{let n;let o=J(t,B(e),!0),a=o.next();for(;;){let e={stack:[],error:void 0,hasError:!1};try{let t=J(e,M(r),!1);if((n=await j.race([a,t.start()]))===z){yield G;continue}if(n.done)return n.value;a=o.next(),yield n.value,n=null}catch(r){e.error=r,e.hasError=!0}finally{$(e)}}}catch(e){t.error=e,t.hasError=!0}finally{let e=$(t);e&&await e}}function Q(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(Q=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(a).then(r,function(e){return t(e),r()})}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function K(e){return(m(e)||w(e))&&"function"==typeof e?.then&&"function"==typeof e?.catch}class Z extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),function(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}(this,"path",void 0),this.path=e}}async function*X(e){let{data:r}=e,t=0,n=function(){let e="idle",r=V(),t=[],n=new Set,o=[];function a(t){if("pending"!==e)return;let a=function(e,r){let t=e[Symbol.asyncIterator](),n="idle";function o(){n="done",r=()=>{}}return{pull:function(){"idle"===n&&(n="pending",t.next().then(e=>{if(e.done){n="done",r({status:"return",value:e.value}),o();return}n="idle",r({status:"yield",value:e.value})}).catch(e=>{r({status:"error",error:e}),o()}))},destroy:async()=>{o(),await t.return?.()}}}(t,t=>{if("pending"===e){switch(t.status){case"yield":o.push([a,t]);break;case"return":n.delete(a);break;case"error":o.push([a,t]),n.delete(a)}r.resolve()}});n.add(a),a.pull()}return{add(r){switch(e){case"idle":t.push(r);break;case"pending":a(r)}},async *[Symbol.asyncIterator](){let s={stack:[],error:void 0,hasError:!1};try{if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",function(e,r,t){if(null!=r){var n,o;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");if(void 0===(n=r[Symbol.asyncDispose])){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");o=n=r[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else e.stack.push({async:!0})}(s,x({},async()=>{e="done";let t=[];if(await Promise.all(Array.from(n.values()).map(async e=>{try{await e.destroy()}catch(e){t.push(e)}})),o.length=0,n.clear(),r.resolve(),t.length>0)throw AggregateError(t)}),!0);t.length>0;)a(t.shift());for(;n.size>0;){for(await r.promise;o.length>0;){let[e,r]=o.shift();switch(r.status){case"yield":yield r.value,e.pull();break;case"error":throw r.error}}r=V()}}catch(e){s.error=e,s.hasError=!0}finally{let e=F(s);e&&await e}}}}();function o(e){let r=t++,o=e(r);return n.add(o),r}function a(r){return e.maxDepth&&r.length>e.maxDepth?new Z(r):null}function s(r,t){var n;if(K(r))return[0,(n=r,o(async function*(r){let o=a(t);o&&(n.catch(r=>{e.onError?.({error:r,path:t})}),n=Promise.reject(o));try{let e=await n;yield[r,0,i(e,t)]}catch(n){e.onError?.({error:n,path:t}),yield[r,1,e.formatError?.({error:n,path:t})]}}))];if(b(r)){if(e.maxDepth&&t.length>=e.maxDepth)throw Error("Max depth reached");return[1,o(async function*(n){let o={stack:[],error:void 0,hasError:!1};try{let s=a(t);if(s)throw s;let l=function(e,r,t){if(null!=r){var n,o;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}(o,B(r),!0);try{for(;;){let e=await l.next();if(e.done){yield[n,0,i(e.value,t)];break}yield[n,1,i(e.value,t)]}}catch(r){e.onError?.({error:r,path:t}),yield[n,2,e.formatError?.({error:r,path:t})]}}catch(e){o.error=e,o.hasError=!0}finally{let e=Q(o);e&&await e}})]}return null}function i(e,r){if(void 0===e)return[[]];let t=s(e,r);if(t)return[[0],[null,...t]];if("[object Object]"!==Object.prototype.toString.call(e))return[[e]];let n={},o=[];for(let[t,a]of Object.entries(e)){let e=s(a,[...r,t]);if(!e){n[t]=a;continue}n[t]=0,o.push([t,...e])}return[[n],...o]}let l={};for(let[e,t]of Object.entries(r))l[e]=i(t,[e]);yield l;let u=n;for await(let r of(e.pingMs&&(u=W(n,e.pingMs)),u))yield r}let ee=Symbol(),er={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"},et={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function en(e,r){return"error"in r?{...r,error:e.transformer.output.serialize(r.error)}:"data"in r.result?{...r,result:{...r.result,data:e.transformer.output.serialize(r.result.data)}}:r}function eo(e,r){return Array.isArray(r)?r.map(r=>en(e,r)):en(e,r)}let ea=()=>{},es=e=>{Object.freeze&&Object.freeze(e)},ei=e=>(function e(r,t,n){let o=t.join(".");return n[o]??(n[o]=new Proxy(ea,{get(o,a){if("string"==typeof a&&"then"!==a)return e(r,[...t,a],n)},apply(e,n,o){let a=t[t.length-1],s={args:o,path:t};return"call"===a?s={args:o.length>=2?[o[1]]:[],path:t.slice(0,-1)}:"apply"===a&&(s={args:o.length>=2?o[1]:[],path:t.slice(0,-1)}),es(s.args),es(s.path),r(s)}})),n[o]})(e,[],Object.create(null)),el=({shape:e})=>e,eu=Symbol("lazy"),ec={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:el,transformer:et},ed=["then","call","apply"];function ep(e){return function(r){let t=new Set(Object.keys(r).filter(e=>ed.includes(e)));if(t.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(t).join(", "));let n=E({}),o=E({}),a=function e(r,t=[]){let a=E({});for(let[s,i]of Object.entries(r??{})){if("function"==typeof i&&eu in i){o[[...t,s].join(".")]=function r(t){return{ref:t.ref,load:function(e){let r=Symbol(),t=r;return()=>(t===r&&(t=e()),t)}(async()=>{let n=await t.ref(),a=[...t.path,t.key],s=a.join(".");for(let[i,l]of(t.aggregate[t.key]=e(n._def.record,a),delete o[s],Object.entries(n._def.lazy)))o[[...a,i].join(".")]=r({ref:l.ref,path:a,key:i,aggregate:t.aggregate[t.key]})})}}({path:t,ref:i,key:s,aggregate:a});continue}if(m(i)&&m(i._def)&&"router"in i._def){a[s]=e(i._def.record,[...t,s]);continue}if("function"!=typeof i){a[s]=e(i,[...t,s]);continue}let r=[...t,s].join(".");if(n[r])throw Error(`Duplicate key: ${r}`);n[r]=i,a[s]=i}return a}(r),s={_config:e,router:!0,procedures:n,lazy:o,...ec,record:a};return{...a,_def:s,createCaller:ey()({_def:s})}}}async function ef(e,r){let{_def:t}=e,n=t.procedures[r];for(;!n;){let e=Object.keys(t.lazy).find(e=>r.startsWith(e));if(!e)return null;let o=t.lazy[e];await o.load(),n=t.procedures[r]}return n}function ey(){return function(e){let{_def:r}=e;return function(t,n){return ei(async({path:o,args:a})=>{let s;let i=o.join(".");if(1===o.length&&"_def"===o[0])return r;let l=await ef(e,i);try{if(!l)throw new P({code:"NOT_FOUND",message:`No procedure found on path "${o}"`});return s=w(t)?await Promise.resolve(t()):t,await l({path:i,getRawInput:async()=>a[0],ctx:s,type:l._def.type,signal:n?.signal})}catch(e){throw n?.onError?.({ctx:s,error:R(e),input:a[0],path:i,type:l?._def.type??"unknown"}),e}})}}}function eh(...e){let r=h({},...e.map(e=>e._def.record));return ep({errorFormatter:e.reduce((e,r)=>{if(r._def._config.errorFormatter&&r._def._config.errorFormatter!==el){if(e!==el&&e!==r._def._config.errorFormatter)throw Error("You seem to have several error formatters");return r._def._config.errorFormatter}return e},el),transformer:e.reduce((e,r)=>{if(r._def._config.transformer&&r._def._config.transformer!==et){if(e!==et&&e!==r._def._config.transformer)throw Error("You seem to have several transformers");return r._def._config.transformer}return e},et),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(r)}function em(e){let r=null,t=y;return{read:async()=>(t!==y||(null===r&&(r=e().catch(e=>{if(e instanceof P)throw e;throw new P({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),t=await r,r=null),t),result:()=>t!==y?t:void 0}}let ew={isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/json"),async parse(e){let{req:r}=e,t="1"===e.searchParams.get("batch"),n=t?e.path.split(","):[e.path],o=em(async()=>{let o;if("GET"===r.method){let r=e.searchParams.get("input");r&&(o=JSON.parse(r))}else o=await r.json();if(void 0===o)return{};if(!t)return{0:e.router._def._config.transformer.input.deserialize(o)};if(!m(o))throw new P({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let a={};for(let r of n.keys()){let t=o[r];void 0!==t&&(a[r]=e.router._def._config.transformer.input.deserialize(t))}return a}),a=await Promise.all(n.map(async(r,t)=>{let n=await ef(e.router,r);return{path:r,procedure:n,getRawInput:async()=>{let r=(await o.read())[t];if(n?._def.type==="subscription"){let t=e.headers.get("last-event-id")??e.searchParams.get("lastEventId")??e.searchParams.get("Last-Event-Id");t&&(m(r)?r={...r,lastEventId:t}:r??(r={lastEventId:t}))}return r},result:()=>o.result()?.[t]}})),s=new Set(a.map(e=>e.procedure?._def.type).filter(Boolean));if(s.size>1)throw new P({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(s).join(", ")}`});let i=s.values().next().value??"unknown",l=e.searchParams.get("connectionParams");return{isBatchCall:t,accept:r.headers.get("trpc-accept"),calls:a,type:i,connectionParams:null===l?null:function(e){let r;try{r=JSON.parse(e)}catch(e){throw new P({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}return function(e){try{if(null===e)return null;if(!m(e))throw Error("Expected object");let r=Object.entries(e).filter(([e,r])=>"string"!=typeof r);if(r.length>0)throw Error(`Expected connectionParams to be string values. Got ${r.map(([e,r])=>`${e}: ${typeof r}`).join(", ")}`);return e}catch(e){throw new P({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}(r)}(l),signal:r.signal,url:e.url}}},eE=[ew,{isMatch:e=>!!e.headers.get("content-type")?.startsWith("multipart/form-data"),async parse(e){let{req:r}=e;if("POST"!==r.method)throw new P({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let t=em(async()=>await r.formData()),n=await ef(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:n}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}},{isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/octet-stream"),async parse(e){let{req:r}=e;if("POST"!==r.method)throw new P({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let t=em(async()=>r.body);return{calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:await ef(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}}];async function eg(e){let r=function(e){let r=eE.find(r=>r.isMatch(e));if(r)return r;if(!r&&"GET"===e.method)return ew;throw new P({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await r.parse(e)}function eb(e){return v(async function*(){throw e})}let ev={mutation:["POST"],query:["GET"],subscription:["GET"]},eO={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function eS(e){let{ctx:r,info:t,responseMeta:n,untransformedJSON:o,errors:a=[],headers:s}=e,i=o?function(e){let r=new Set((Array.isArray(e)?e:[e]).map(e=>"error"in e&&m(e.error.data)?"number"==typeof e.error.data?.httpStatus?e.error.data.httpStatus:S[f[e.error.code]]??500:200));return 1!==r.size?207:r.values().next().value}(o):200,l=!o,u=l?[]:Array.isArray(o)?o:[o],c=n?.({ctx:r,info:t,paths:t?.calls.map(e=>e.path),data:u,errors:a,eagerGeneration:l,type:t?.calls.find(e=>e.procedure?._def.type)?.procedure?._def.type??"unknown"})??{};if(c.headers){if(c.headers instanceof Headers)for(let[e,r]of c.headers.entries())s.append(e,r);else for(let[e,r]of Object.entries(c.headers))if(Array.isArray(r))for(let t of r)s.append(e,t);else"string"==typeof r&&s.set(e,r)}return c.status&&(i=c.status),{status:i}}function eA(e){return!!m(e)&&(!!b(e)||Object.values(e).some(K)||Object.values(e).some(b))}async function eT(e){let{router:r,req:t}=e,n=new Headers([["vary","trpc-accept"]]),o=r._def._config,a=new URL(t.url);if("HEAD"===t.method)return new Response(null,{status:204});let s=e.allowBatching??e.batching?.enabled??!0,i=(e.allowMethodOverride??!1)&&"POST"===t.method,l=await v(async()=>{try{return[void 0,await eg({req:t,path:decodeURIComponent(e.path),router:r,searchParams:a.searchParams,headers:e.req.headers,url:a})]}catch(e){return[R(e),void 0]}}),u=v(()=>{let r;return{valueOrUndefined:()=>{if(r)return r[1]},value:()=>{let[e,t]=r;if(e)throw e;return t},create:async t=>{if(r)throw Error("This should only be called once - report a bug in tRPC");try{let n=await e.createContext({info:t});r=[void 0,n]}catch(e){r=[R(e),void 0]}}}}),p=i?eO:ev,f="application/jsonl"===t.headers.get("trpc-accept"),y=o.sse?.enabled??!0;try{let[r,a]=l;if(r)throw r;if(a.isBatchCall&&!s)throw new P({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(f&&!a.isBatchCall)throw new P({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await u.create(a);let i=a.calls.map(async r=>{let n=r.procedure;try{if(e.error)throw e.error;if(!n)throw new P({code:"NOT_FOUND",message:`No procedure found on path "${r.path}"`});if(!p[n._def.type].includes(t.method))throw new P({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${t.method}-request to ${n._def.type} procedure at path "${r.path}"`});if("subscription"===n._def.type&&a.isBatchCall)throw new P({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});let o=await n({path:r.path,getRawInput:r.getRawInput,ctx:u.value(),type:n._def.type,signal:e.req.signal});return[void 0,{data:o}]}catch(o){let t=R(o),n=r.result();return e.onError?.({error:t,path:r.path,input:n,ctx:u.valueOrUndefined(),type:r.procedure?._def.type??"unknown",req:e.req}),[t,void 0]}});if(!a.isBatchCall){let[r]=a.calls,[t,s]=await i[0];switch(a.type){case"unknown":case"mutation":case"query":{if(n.set("content-type","application/json"),eA(s?.data))throw new P({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let i=t?{error:A({config:o,ctx:u.valueOrUndefined(),error:t,input:r.result(),path:r.path,type:a.type})}:{result:{data:s.data}},l=eS({ctx:u.valueOrUndefined(),info:a,responseMeta:e.responseMeta,errors:t?[t]:[],headers:n,untransformedJSON:[i]});return new Response(JSON.stringify(eo(o,i)),{status:l.status,headers:n})}case"subscription":{let i=v(()=>t?eb(t):y?c(s.data)||b(s.data)?c(s.data)?d(s.data,e.req.signal):s.data:eb(new P({message:`Subscription ${r.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):eb(new P({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'}))),l=function(e){let{serialize:r=O}=e,t={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},n=e.client??{};if(t.enabled&&n.reconnectAfterInactivityMs&&t.intervalMs>n.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${t.intervalMs} client.reconnectAfterInactivityMs: ${n.reconnectAfterInactivityMs}`);async function*o(){let o,a;yield{event:"connected",data:JSON.stringify(n)};let s=e.data;for await(o of(e.emitAndEndImmediately&&(s=Y(s,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(s=L(s,{maxDurationMs:e.maxDurationMs})),t.enabled&&t.intervalMs!==1/0&&t.intervalMs>0&&(s=W(s,t.intervalMs)),s)){var i;if(o===G){yield{event:"ping",data:""};continue}(a=Array.isArray(i=o)&&i[2]===ee?{id:o[0],data:o[1]}:{data:o}).data=JSON.stringify(r(a.data)),yield a,o=null,a=null}}return H(async function*(){try{yield*o(),yield{event:"return",data:""}}catch(o){if(m(o)&&"AbortError"===o.name)return;let t=R(o),n=e.formatError?.({error:t})??null;yield{event:"serialized-error",data:JSON.stringify(r(n))}}}()).pipeThrough(new TransformStream({transform(e,r){"event"in e&&r.enqueue(`event: ${e.event}
`),"data"in e&&r.enqueue(`data: ${e.data}
`),"id"in e&&r.enqueue(`id: ${e.id}
`),"comment"in e&&r.enqueue(`: ${e.comment}
`),r.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}({...o.sse,data:i,serialize:e=>o.transformer.output.serialize(e),formatError(t){let n=R(t.error),a=r?.result(),s=r?.path,i=r?.procedure?._def.type??"unknown";return e.onError?.({error:n,path:s,input:a,ctx:u.valueOrUndefined(),req:e.req,type:i}),A({config:o,ctx:u.valueOrUndefined(),error:n,input:a,path:s,type:i})}});for(let[e,r]of Object.entries(er))n.set(e,r);let p=eS({ctx:u.valueOrUndefined(),info:a,responseMeta:e.responseMeta,errors:[],headers:n,untransformedJSON:null});return new Response(l,{headers:n,status:p.status})}}}if("application/jsonl"===a.accept){n.set("content-type","application/json"),n.set("transfer-encoding","chunked");let r=eS({ctx:u.valueOrUndefined(),info:a,responseMeta:e.responseMeta,errors:[],headers:n,untransformedJSON:null}),t=function(e){let r=H(X(e)),{serialize:t}=e;return t&&(r=r.pipeThrough(new TransformStream({transform(e,r){e===G?r.enqueue(G):r.enqueue(t(e))}}))),r.pipeThrough(new TransformStream({transform(e,r){e===G?r.enqueue(" "):r.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}({...o.jsonl,maxDepth:1/0,data:i.map(async r=>{let[t,n]=await r,s=a.calls[0];if(t)return{error:A({config:o,ctx:u.valueOrUndefined(),error:t,input:s.result(),path:s.path,type:s.procedure?._def.type??"unknown"})};let i=c(n.data)?d(n.data,e.req.signal):Promise.resolve(n.data);return{result:Promise.resolve({data:i})}}),serialize:o.transformer.output.serialize,onError:r=>{e.onError?.({error:R(r),path:void 0,input:void 0,ctx:u.valueOrUndefined(),req:e.req,type:a?.type??"unknown"})},formatError(e){let r=a?.calls[e.path[0]],t=R(e.error),n=r?.result(),s=r?.path,i=r?.procedure?._def.type??"unknown";return A({config:o,ctx:u.valueOrUndefined(),error:t,input:n,path:s,type:i})}});return new Response(t,{headers:n,status:r.status})}n.set("content-type","application/json");let h=(await Promise.all(i)).map(e=>{let[r,t]=e;return r?e:eA(t.data)?[new P({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),w=h.map(([e,r],t)=>{let n=a.calls[t];return e?{error:A({config:o,ctx:u.valueOrUndefined(),error:e,input:n.result(),path:n.path,type:n.procedure?._def.type??"unknown"})}:{result:{data:r.data}}}),E=h.map(([e])=>e).filter(Boolean),g=eS({ctx:u.valueOrUndefined(),info:a,responseMeta:e.responseMeta,untransformedJSON:w,errors:E,headers:n});return new Response(JSON.stringify(eo(o,w)),{status:g.status,headers:n})}catch(c){let[r,t]=l,o=u.valueOrUndefined(),{error:a,untransformedJSON:s,body:i}=function(e,r){let{router:t,req:n,onError:o}=r.opts,a=R(e);o?.({error:a,path:r.path,input:r.input,ctx:r.ctx,type:r.type,req:n});let s={error:A({config:t._def._config,error:a,type:r.type,path:r.path,input:r.input,ctx:r.ctx})},i=JSON.stringify(eo(t._def._config,s));return{error:a,untransformedJSON:s,body:i}}(c,{opts:e,ctx:u.valueOrUndefined(),type:t?.type??"unknown"});return new Response(i,{status:eS({ctx:o,info:t,responseMeta:e.responseMeta,untransformedJSON:s,errors:[a],headers:n}).status,headers:n})}}let e_="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID,eR=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function eP(e){let r=new Headers,t=async t=>e.createContext?.({req:e.req,resHeaders:r,...t}),n=eR(new URL(e.req.url).pathname),o=eR(e.endpoint),a=eR(n.slice(o.length));return await eT({...e,req:e.req,createContext:t,path:a,error:null,onError(r){e?.onError?.({...r,req:e.req})},responseMeta(t){let n=e.responseMeta?.(t);if(n?.headers){if(n.headers instanceof Headers)for(let[e,t]of n.headers.entries())r.append(e,t);else for(let[e,t]of Object.entries(n.headers))if(Array.isArray(t))for(let n of t)r.append(e,n);else"string"==typeof t&&r.set(e,t)}return{headers:r,status:n?.status}}})}let eI="middlewareMarker";class eD extends Error{constructor(e){super(e[0]?.message),function(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}(this,"issues",void 0),this.name="SchemaError",this.issues=e}}function ek(e){if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return r=>(e.assert(r),r);if("~standard"in e)return async r=>{let t=await e["~standard"].validate(r);if(t.issues)throw new eD(t.issues);return t.value};throw Error("Could not find a validator fn")}function ej(e,r){let{middlewares:t=[],inputs:n,meta:o,...a}=r;return eN({...h(e,a),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...t],meta:e.meta&&o?{...e.meta,...o}:o??e.meta})}function eN(e={}){let r={procedure:!0,inputs:[],middlewares:[],...e};return{_def:r,input(e){let t=ek(e);return ej(r,{inputs:[e],middlewares:[function(e){let r=async function(r){let t;let n=await r.getRawInput();try{t=await e(n)}catch(e){throw new P({code:"BAD_REQUEST",cause:e})}let o=m(r.input)&&m(t)?{...r.input,...t}:t;return r.next({input:o})};return r._type="input",r}(t)]})},output(e){let t=ek(e);return ej(r,{output:e,middlewares:[function(e){let r=async function({next:r}){let t=await r();if(!t.ok)return t;try{let r=await e(t.data);return{...t,data:r}}catch(e){throw new P({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return r._type="output",r}(t)]})},meta:e=>ej(r,{meta:e}),use:e=>ej(r,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>ej(r,e._def),query:e=>eU({...r,type:"query"},e),mutation:e=>eU({...r,type:"mutation"},e),subscription:e=>eU({...r,type:"subscription"},e),experimental_caller:e=>ej(r,{caller:e})}}function eU(e,r){let t=ej(e,{resolver:r,middlewares:[async function(e){return{marker:eI,ok:!0,data:await r(e),ctx:e.ctx}}]}),n={...t._def,type:e.type,experimental_caller:!!t._def.caller,meta:t._def.meta,$types:null},o=function(e){async function r(r){if(!r||!("getRawInput"in r))throw Error(ex);let t=await ez(0,e,r);if(!t)throw new P({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!t.ok)throw t.error;return t.data}return r._def=e,r.procedure=!0,r}(t._def),a=t._def.caller;if(!a)return o;let s=async(...e)=>await a({args:e,invoke:o,_def:n});return s._def=n,s}let ex=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function ez(e,r,t){try{let n=r.middlewares[e];return await n({...t,meta:r.meta,input:t.input,next:n=>ez(e+1,r,{...t,ctx:n?.ctx?{...t.ctx,...n.ctx}:t.ctx,input:n&&"input"in n?n.input:t.input,getRawInput:n?.getRawInput??t.getRawInput})})}catch(e){return{ok:!1,error:R(e),marker:eI}}}class eM{context(){return new eM}meta(){return new eM}create(e){var r;let t={...e,transformer:"input"in(r=e?.transformer??et)?r:{input:r,output:r},isDev:e?.isDev??globalThis.process?.env.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??el,isServer:e?.isServer??e_,$types:null};if(!(e?.isServer??e_)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:t,procedure:eN({meta:e?.defaultMeta}),middleware:function(e){return function e(r){return{_middlewares:r,unstable_pipe:t=>e([...r,..."_middlewares"in t?t._middlewares:[t]])}}([e])},router:ep(t),mergeRouters:eh,createCallerFactory:ey()}}}let eq=new eM;class eC{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,r){this.keyToValue.set(e,r),this.valueToKey.set(r,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class eB{constructor(e){this.generateIdentifier=e,this.kv=new eC}register(e,r){this.kv.getByValue(e)||(r||(r=this.generateIdentifier(e)),this.kv.set(r,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class eL extends eB{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,r){"object"==typeof r?(r.allowProps&&this.classToAllowedProps.set(e,r.allowProps),super.register(e,r.identifier)):super.register(e,r)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function eY(e,r){Object.entries(e).forEach(([e,t])=>r(t,e))}function eV(e,r){return -1!==e.indexOf(r)}function eF(e,r){for(let t=0;t<e.length;t++){let n=e[t];if(r(n))return n}}class eH{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,r){let t=function(e){if("values"in Object)return Object.values(e);let r=[];for(let t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r}(e);if("find"in t)return t.find(r);for(let e=0;e<t.length;e++){let n=t[e];if(r(n))return n}}(this.transfomers,r=>r.isApplicable(e))}findByName(e){return this.transfomers[e]}}let eJ=e=>Object.prototype.toString.call(e).slice(8,-1),e$=e=>void 0===e,eG=e=>null===e,eW=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),eQ=e=>eW(e)&&0===Object.keys(e).length,eK=e=>Array.isArray(e),eZ=e=>"string"==typeof e,eX=e=>"number"==typeof e&&!isNaN(e),e0=e=>"boolean"==typeof e,e1=e=>e instanceof Map,e2=e=>e instanceof Set,e3=e=>"Symbol"===eJ(e),e4=e=>"number"==typeof e&&isNaN(e),e5=e=>e0(e)||eG(e)||e$(e)||eX(e)||eZ(e)||e3(e),e9=e=>e===1/0||e===-1/0,e6=e=>e.replace(/\./g,"\\."),e7=e=>e.map(String).map(e6).join("."),e8=e=>{let r=[],t="";for(let n=0;n<e.length;n++){let o=e.charAt(n);if("\\"===o&&"."===e.charAt(n+1)){t+=".",n++;continue}if("."===o){r.push(t),t="";continue}t+=o}let n=t;return r.push(n),r};function re(e,r,t,n){return{isApplicable:e,annotation:r,transform:t,untransform:n}}let rr=[re(e$,"undefined",()=>null,()=>void 0),re(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),re(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),re(e=>e instanceof Error,"Error",(e,r)=>{let t={name:e.name,message:e.message};return r.allowedErrorProps.forEach(r=>{t[r]=e[r]}),t},(e,r)=>{let t=Error(e.message);return t.name=e.name,t.stack=e.stack,r.allowedErrorProps.forEach(r=>{t[r]=e[r]}),t}),re(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),re(e2,"set",e=>[...e.values()],e=>new Set(e)),re(e1,"map",e=>[...e.entries()],e=>new Map(e)),re(e=>e4(e)||e9(e),"number",e=>e4(e)?"NaN":e>0?"Infinity":"-Infinity",Number),re(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),re(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function rt(e,r,t,n){return{isApplicable:e,annotation:r,transform:t,untransform:n}}let rn=rt((e,r)=>!!e3(e)&&!!r.symbolRegistry.getIdentifier(e),(e,r)=>["symbol",r.symbolRegistry.getIdentifier(e)],e=>e.description,(e,r,t)=>{let n=t.symbolRegistry.getValue(r[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),ro=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,r)=>(e[r.name]=r,e),{}),ra=rt(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,r)=>{let t=ro[r[1]];if(!t)throw Error("Trying to deserialize unknown typed array");return new t(e)});function rs(e,r){return!!e?.constructor&&!!r.classRegistry.getIdentifier(e.constructor)}let ri=rt(rs,(e,r)=>["class",r.classRegistry.getIdentifier(e.constructor)],(e,r)=>{let t=r.classRegistry.getAllowedProps(e.constructor);if(!t)return{...e};let n={};return t.forEach(r=>{n[r]=e[r]}),n},(e,r,t)=>{let n=t.classRegistry.getValue(r[1]);if(!n)throw Error(`Trying to deserialize unknown class '${r[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),rl=rt((e,r)=>!!r.customTransformerRegistry.findApplicable(e),(e,r)=>["custom",r.customTransformerRegistry.findApplicable(e).name],(e,r)=>r.customTransformerRegistry.findApplicable(e).serialize(e),(e,r,t)=>{let n=t.customTransformerRegistry.findByName(r[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),ru=[ri,rn,rl,ra],rc=(e,r)=>{let t=eF(ru,t=>t.isApplicable(e,r));if(t)return{value:t.transform(e,r),type:t.annotation(e,r)};let n=eF(rr,t=>t.isApplicable(e,r));if(n)return{value:n.transform(e,r),type:n.annotation}},rd={};rr.forEach(e=>{rd[e.annotation]=e});let rp=(e,r,t)=>{if(eK(r))switch(r[0]){case"symbol":return rn.untransform(e,r,t);case"class":return ri.untransform(e,r,t);case"custom":return rl.untransform(e,r,t);case"typed-array":return ra.untransform(e,r,t);default:throw Error("Unknown transformation: "+r)}else{let n=rd[r];if(!n)throw Error("Unknown transformation: "+r);return n.untransform(e,t)}},rf=(e,r)=>{if(r>e.size)throw Error("index out of bounds");let t=e.keys();for(;r>0;)t.next(),r--;return t.next().value};function ry(e){if(eV(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(eV(e,"prototype"))throw Error("prototype is not allowed as a property");if(eV(e,"constructor"))throw Error("constructor is not allowed as a property")}let rh=(e,r)=>{ry(r);for(let t=0;t<r.length;t++){let n=r[t];if(e2(e))e=rf(e,+n);else if(e1(e)){let o=+n,a=0==+r[++t]?"key":"value",s=rf(e,o);switch(a){case"key":e=s;break;case"value":e=e.get(s)}}else e=e[n]}return e},rm=(e,r,t)=>{if(ry(r),0===r.length)return t(e);let n=e;for(let e=0;e<r.length-1;e++){let t=r[e];if(eK(n))n=n[+t];else if(eW(n))n=n[t];else if(e2(n))n=rf(n,+t);else if(e1(n)){if(e===r.length-2)break;let o=+t,a=0==+r[++e]?"key":"value",s=rf(n,o);switch(a){case"key":n=s;break;case"value":n=n.get(s)}}}let o=r[r.length-1];if(eK(n)?n[+o]=t(n[+o]):eW(n)&&(n[o]=t(n[o])),e2(n)){let e=rf(n,+o),r=t(e);e!==r&&(n.delete(e),n.add(r))}if(e1(n)){let e=rf(n,+r[r.length-2]);switch(0==+o?"key":"value"){case"key":{let r=t(e);n.set(r,n.get(e)),r!==e&&n.delete(e);break}case"value":n.set(e,t(n.get(e)))}}return e},rw=(e,r)=>eW(e)||eK(e)||e1(e)||e2(e)||rs(e,r),rE=(e,r,t,n,o=[],a=[],s=new Map)=>{let i=e5(e);if(!i){!function(e,r,t){let n=t.get(e);n?n.push(r):t.set(e,[r])}(e,o,r);let t=s.get(e);if(t)return n?{transformedValue:null}:t}if(!rw(e,t)){let r=rc(e,t),n=r?{transformedValue:r.value,annotations:[r.type]}:{transformedValue:e};return i||s.set(e,n),n}if(eV(a,e))return{transformedValue:null};let l=rc(e,t),u=l?.value??e,c=eK(u)?[]:{},d={};eY(u,(i,l)=>{if("__proto__"===l||"constructor"===l||"prototype"===l)throw Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);let u=rE(i,r,t,n,[...o,l],[...a,e],s);c[l]=u.transformedValue,eK(u.annotations)?d[l]=u.annotations:eW(u.annotations)&&eY(u.annotations,(e,r)=>{d[e6(l)+"."+r]=e})});let p=eQ(d)?{transformedValue:c,annotations:l?[l.type]:void 0}:{transformedValue:c,annotations:l?[l.type,d]:d};return i||s.set(e,p),p};function rg(e){return Object.prototype.toString.call(e).slice(8,-1)}function rb(e){return"Array"===rg(e)}class rv{constructor({dedupe:e=!1}={}){this.classRegistry=new eL,this.symbolRegistry=new eB(e=>e.description??""),this.customTransformerRegistry=new eH,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let r=new Map,t=rE(e,r,this,this.dedupe),n={json:t.transformedValue};t.annotations&&(n.meta={...n.meta,values:t.annotations});let o=function(e,r){let t;let n={};return(e.forEach(e=>{if(e.length<=1)return;r||(e=e.map(e=>e.map(String)).sort((e,r)=>e.length-r.length));let[o,...a]=e;0===o.length?t=a.map(e7):n[e7(o)]=a.map(e7)}),t)?eQ(n)?[t]:[t,n]:eQ(n)?void 0:n}(r,this.dedupe);return o&&(n.meta={...n.meta,referentialEqualities:o}),n}deserialize(e){let{json:r,meta:t}=e,n=function e(r,t={}){return rb(r)?r.map(r=>e(r,t)):!function(e){if("Object"!==rg(e))return!1;let r=Object.getPrototypeOf(e);return!!r&&r.constructor===Object&&r===Object.prototype}(r)?r:[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)].reduce((n,o)=>{if(rb(t.props)&&!t.props.includes(o))return n;let a=e(r[o],t);return function(e,r,t,n,o){let a=({}).propertyIsEnumerable.call(n,r)?"enumerable":"nonenumerable";"enumerable"===a&&(e[r]=t),o&&"nonenumerable"===a&&Object.defineProperty(e,r,{value:t,enumerable:!1,writable:!0,configurable:!0})}(n,o,a,r,t.nonenumerable),n},{})}(r);if(t?.values){var o,a,s;o=n,a=t.values,s=this,function e(r,t,n=[]){if(!r)return;if(!eK(r)){eY(r,(r,o)=>e(r,t,[...n,...e8(o)]));return}let[o,a]=r;a&&eY(a,(r,o)=>{e(r,t,[...n,...e8(o)])}),t(o,n)}(a,(e,r)=>{o=rm(o,r,r=>rp(r,e,s))}),n=o}return t?.referentialEqualities&&(n=function(e,r){function t(r,t){let n=rh(e,e8(t));r.map(e8).forEach(r=>{e=rm(e,r,()=>n)})}if(eK(r)){let[n,o]=r;n.forEach(r=>{e=rm(e,e8(r),()=>e)}),o&&eY(o,t)}else eY(r,t);return e}(n,t.referentialEqualities)),n}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,r){this.classRegistry.register(e,r)}registerSymbol(e,r){this.symbolRegistry.register(e,r)}registerCustom(e,r){this.customTransformerRegistry.register({name:r,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}rv.defaultInstance=new rv,rv.serialize=rv.defaultInstance.serialize.bind(rv.defaultInstance),rv.deserialize=rv.defaultInstance.deserialize.bind(rv.defaultInstance),rv.stringify=rv.defaultInstance.stringify.bind(rv.defaultInstance),rv.parse=rv.defaultInstance.parse.bind(rv.defaultInstance),rv.registerClass=rv.defaultInstance.registerClass.bind(rv.defaultInstance),rv.registerSymbol=rv.defaultInstance.registerSymbol.bind(rv.defaultInstance),rv.registerCustom=rv.defaultInstance.registerCustom.bind(rv.defaultInstance),rv.allowErrorProps=rv.defaultInstance.allowErrorProps.bind(rv.defaultInstance),rv.serialize,rv.deserialize,rv.stringify,rv.parse,rv.registerClass,rv.registerCustom,rv.registerSymbol,rv.allowErrorProps;var rO=t(80672),rS=t(37702);let rA=async({req:e})=>{let r=null;e.headers instanceof Headers?r=e.headers.get("cookie"):e.headers&&"function"==typeof e.headers.get&&(r=e.headers.get("cookie"));let t=r?.split(";").find(e=>e.trim().startsWith("session="))?.split("=")[1],n=null;return t&&(n=await (0,rS.dk)(t)),{db:rO.z,session:n}},rT=eq.context().create({transformer:rv,errorFormatter:({shape:e})=>e}),r_=rT.router,rR=rT.procedure;rT.middleware;let rP=rT.middleware(({ctx:e,next:r})=>{if(!e.session)throw new P({code:"UNAUTHORIZED"});return r({ctx:{session:e.session}})}),rI=rT.procedure.use(rP);var rD=t(30379),rk=t(86763),rj=t.n(rk);let rN=r_({all:rR.query(async()=>{try{return console.log("\uD83D\uDCE1 Recebida requisi\xe7\xe3o para buscar posts..."),await rO.z.post.findMany({orderBy:{createdAt:"desc"},select:{id:!0,title:!0,content:!0,imageUrl:!0,slug:!0,viewCount:!0,published:!0,createdAt:!0}})}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar posts:",e),Error("Erro ao buscar posts")}}),getLatest:rR.query(async()=>{try{return await rO.z.post.findFirst({orderBy:{createdAt:"desc"}})}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar o post mais recente:",e),Error("Erro ao buscar post mais recente")}}),byId:rR.input(rD.z.string()).query(async({input:e})=>{try{let r=await rO.z.post.findUnique({where:{id:e}});if(!r)throw Error("Post n\xe3o encontrado");return await rO.z.post.update({where:{id:e},data:{viewCount:{increment:1}}}),r}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar post:",e),Error("Erro ao buscar post")}}),bySlug:rR.input(rD.z.string()).query(async({input:e})=>{try{let r=await rO.z.post.findUnique({where:{slug:e}});if(!r)throw Error("Post n\xe3o encontrado");return await rO.z.post.update({where:{slug:e},data:{viewCount:{increment:1}}}),r}catch(e){throw console.error("\uD83D\uDD25 Erro ao buscar post:",e),Error("Erro ao buscar post")}}),create:rI.input(rD.z.object({title:rD.z.string().min(5),content:rD.z.string().min(10),imageUrl:rD.z.string().optional()})).mutation(async({ctx:e,input:r})=>{if(console.log("\uD83D\uDD0D Dados recebidos para criar post:",{input:r,session:{id:e.session.id,email:e.session.email,role:e.session.role}}),"rbcr4z1@gmail.com"!==e.session.email&&"ADMIN"!==e.session.role)throw console.error("❌ Usu\xe1rio n\xe3o autorizado:",{email:e.session.email,role:e.session.role}),Error("Apenas o administrador pode criar posts");try{let t=rj()(r.title,{lower:!0,strict:!0});if(console.log("\uD83D\uDD17 Slug gerado:",t),await rO.z.post.findUnique({where:{slug:t}}))throw console.error("❌ Slug j\xe1 existe:",t),Error("T\xedtulo j\xe1 est\xe1 em uso.");let n={title:r.title,content:r.content,slug:t,imageUrl:r.imageUrl,authorId:e.session.id,published:!1};console.log("\uD83D\uDCBE Criando post no banco:",n);let o=await rO.z.post.create({data:n});return console.log("✅ Post criado com sucesso:",o),o}catch(t){if(console.error("\uD83D\uDD25 Erro detalhado ao criar post:",{error:t instanceof Error?t.message:t,stack:t instanceof Error?t.stack:void 0,input:r,session:e.session}),t instanceof Error)throw t;throw Error("Erro desconhecido ao criar post")}}),update:rI.input(rD.z.object({id:rD.z.string(),title:rD.z.string().min(5),content:rD.z.string().min(5),imageUrl:rD.z.string().optional()})).mutation(async({ctx:e,input:r})=>{if("rbcr4z1@gmail.com"!==e.session.email)throw Error("Apenas o administrador pode editar posts");try{let e=rj()(r.title,{lower:!0,strict:!0}),t=await rO.z.post.update({where:{id:r.id},data:{title:r.title,content:r.content,imageUrl:r.imageUrl,slug:e}});return console.log("\uD83D\uDCDD Post atualizado:",t),t}catch(e){throw console.error("\uD83D\uDD25 Erro ao atualizar post:",e),Error("Erro ao atualizar post")}}),delete:rI.input(rD.z.object({id:rD.z.string()})).mutation(async({ctx:e,input:r})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.delete({where:{id:r.id}})}),search:rR.input(rD.z.object({query:rD.z.string().min(3)})).query(async({input:e})=>{let r=e.query.trim(),t=r.split(/\s+/).filter(e=>e.length>2);return await rO.z.post.findMany({where:{AND:[{published:!0},{OR:[{title:{contains:r,mode:"insensitive"}},{content:{contains:r,mode:"insensitive"}},...t.map(e=>({title:{contains:e,mode:"insensitive"}})),...t.map(e=>({content:{contains:e,mode:"insensitive"}}))]}]},orderBy:[{createdAt:"desc"}],take:10})}),recent:rR.query(async()=>await rO.z.post.findMany({orderBy:{createdAt:"desc"},take:5})),mostRead:rR.query(async()=>await rO.z.post.findMany({orderBy:{viewCount:"desc"},take:5})),trending:rR.query(async()=>{let e=new Date;return e.setDate(e.getDate()-7),await rO.z.post.findMany({where:{createdAt:{gte:e}},orderBy:{viewCount:"desc"},take:5})}),getAll:rI.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.findMany({orderBy:{createdAt:"desc"}})}),togglePublished:rI.input(rD.z.object({id:rD.z.string(),published:rD.z.boolean()})).mutation(async({ctx:e,input:r})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.post.update({where:{id:r.id},data:{published:r.published}})})}),rU=r_({getByPostId:rR.input(rD.z.object({postId:rD.z.string()})).query(async({ctx:e,input:r})=>e.db.comment.findMany({where:{postId:r.postId,isDeleted:!1},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}},orderBy:{createdAt:"desc"}})),create:rI.input(rD.z.object({content:rD.z.string().min(1,"Coment\xe1rio n\xe3o pode estar vazio").max(500,"Coment\xe1rio muito longo"),postId:rD.z.string()})).mutation(async({ctx:e,input:r})=>e.db.comment.create({data:{content:r.content,postId:r.postId,authorId:e.session.id},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}}})),update:rI.input(rD.z.object({id:rD.z.string(),content:rD.z.string().min(1,"Coment\xe1rio n\xe3o pode estar vazio").max(500,"Coment\xe1rio muito longo")})).mutation(async({ctx:e,input:r})=>{let t=await e.db.comment.findUnique({where:{id:r.id},select:{authorId:!0}});if(!t)throw Error("Coment\xe1rio n\xe3o encontrado");let n=t.authorId===e.session.id,o="ADMIN"===e.session.role;if(!n&&!o)throw Error("Voc\xea n\xe3o tem permiss\xe3o para editar este coment\xe1rio");return e.db.comment.update({where:{id:r.id},data:{content:r.content},include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}}}})}),delete:rI.input(rD.z.object({id:rD.z.string()})).mutation(async({ctx:e,input:r})=>{let t=await e.db.comment.findUnique({where:{id:r.id},select:{authorId:!0}});if(!t)throw Error("Coment\xe1rio n\xe3o encontrado");let n=t.authorId===e.session.id,o="ADMIN"===e.session.role;if(!n&&!o)throw Error("Voc\xea n\xe3o tem permiss\xe3o para deletar este coment\xe1rio");return e.db.comment.update({where:{id:r.id},data:{isDeleted:!0}})}),getAll:rI.query(async({ctx:e})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.comment.findMany({include:{author:{select:{id:!0,name:!0,email:!0,avatar:!0}},post:{select:{id:!0,title:!0,slug:!0}}},orderBy:{createdAt:"desc"}})}),restore:rI.input(rD.z.object({id:rD.z.string()})).mutation(async({ctx:e,input:r})=>{if("ADMIN"!==e.session.role)throw Error("Acesso negado");return e.db.comment.update({where:{id:r.id},data:{isDeleted:!1}})})}),rx=r_({post:rN,comment:rU}),rz=e=>eP({endpoint:"/api/trpc",req:e,router:rx,createContext:()=>rA({req:{headers:e.headers}})}),rM=new i.AppRouteRouteModule({definition:{kind:l.RouteKind.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:"app/api/trpc/[trpc]/route"},resolvedPagePath:"/home/rbxyz/dev/blog/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:rq,workUnitAsyncStorage:rC,serverHooks:rB}=rM;function rL(){return(0,u.patchFetch)({workAsyncStorage:rq,workUnitAsyncStorage:rC})}},96487:()=>{},78335:()=>{},42706:(e,r,t)=>{"use strict";e.exports=t(44870)},86763:function(e){var r;r=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xa2":"cent","\xa3":"pound","\xa4":"currency","\xa5":"yen","\xa9":"(c)","\xaa":"a","\xae":"(r)","\xba":"o","\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xc6":"AE","\xc7":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xde":"TH","\xdf":"ss","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xfe":"th","\xff":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E\'","Ը":"Y\'","Թ":"T\'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C\'","Կ":"K","Հ":"H","Ձ":"D\'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R\'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P\'","Ք":"Q\'","Օ":"O\'\'","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"\'","’":"\'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}'),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"\xc4":"AE","\xe4":"ae","\xd6":"OE","\xf6":"oe","\xdc":"UE","\xfc":"ue","\xdf":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xa2":"centavos","\xa3":"libras","\xa4":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xa2":"centime","\xa3":"livre","\xa4":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xa2":"centavo","∑":"soma","\xa3":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"\xd8":"OE","\xf8":"oe","\xc5":"AA","\xe5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xf8rre end"},"nb":{"&":"og","\xc5":"AA","\xc6":"AE","\xd8":"OE","\xe5":"aa","\xe6":"ae","\xf8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xc5":"AA","\xc4":"AE","\xd6":"OE","\xe5":"aa","\xe4":"ae","\xf6":"oe"}}');function t(t,n){if("string"!=typeof t)throw Error("slugify: string argument expected");var o=r[(n="string"==typeof n?{replacement:n}:n||{}).locale]||{},a=void 0===n.replacement?"-":n.replacement,s=void 0===n.trim||n.trim,i=t.normalize().split("").reduce(function(r,t){var s=o[t];return void 0===s&&(s=e[t]),void 0===s&&(s=t),s===a&&(s=" "),r+s.replace(n.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return n.strict&&(i=i.replace(/[^A-Za-z0-9\s]/g,"")),s&&(i=i.trim()),i=i.replace(/\s+/g,a),n.lower&&(i=i.toLowerCase()),i}return t.extend=function(r){Object.assign(e,r)},t},e.exports=r(),e.exports.default=r()},37702:(e,r,t)=>{"use strict";t.d(r,{$u:()=>w,DY:()=>E,dk:()=>h,lx:()=>m});var n=t(34926),o=t(43008),a=t.n(o),s=t(95164),i=t(45997),l=t(80672),u=t(96330);let c=process.env.JWT_SECRET??"your-secret-key-change-in-production";async function d(e,r){return n.Ay.compare(e,r)}async function p(e){let r=new TextEncoder().encode(c);return await new s.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(r)}async function f(e){try{let r=new TextEncoder().encode(c),{payload:t}=await (0,i.V)(e,r);return t}catch{return null}}async function y(e,r,t){let n=await p({userId:e,email:r,role:t}),o=new Date(Date.now()+6048e5);return await l.z.session.create({data:{userId:e,token:n,expiresAt:o}}),n}async function h(e){try{let r=await f(e);if(!r?.userId)return null;let t=await l.z.session.findUnique({where:{token:e},include:{user:{select:{id:!0,email:!0,name:!0,role:!0,avatar:!0}}}});if(!t||t.expiresAt<new Date)return t&&await l.z.session.delete({where:{id:t.id}}),null;return{id:t.user.id,email:t.user.email,name:t.user.name,role:t.user.role,avatar:t.user.avatar}}catch(e){return console.error("Erro ao validar sess\xe3o:",e),null}}async function m(e){try{await l.z.session.delete({where:{token:e}})}catch(e){console.error("Erro ao encerrar sess\xe3o:",e)}}async function w(e,r){try{let t=await l.z.user.findUnique({where:{email:e.toLowerCase()}});if(!t||!await d(r,t.password))return null;let n=await y(t.id,t.email,t.role);return{user:{id:t.id,email:t.email,name:t.name,role:t.role,avatar:t.avatar},token:n}}catch(e){return console.error("Erro na autentica\xe7\xe3o:",e),null}}async function E(e,r,t,o=u.Role.USER){try{if(await l.z.user.findUnique({where:{email:e}}))return{error:"E-mail j\xe1 est\xe1 cadastrado"};let s=await n.Ay.hash(r,12),i=await l.z.user.create({data:{email:e,password:s,name:t,role:o,isVerified:!0}}),u=a().sign({id:i.id,email:i.email,role:i.role},c,{expiresIn:"7d"});return await l.z.session.create({data:{userId:i.id,token:u,expiresAt:new Date(Date.now()+6048e5)}}),{user:{id:i.id,email:i.email,name:i.name,role:i.role,avatar:i.avatar},token:u}}catch(e){return console.error("Erro no registro:",e),{error:"Erro interno do servidor"}}}},80672:(e,r,t)=>{"use strict";t.d(r,{z:()=>n});let n=new(t(96330)).PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[994,882,379],()=>t(95257));module.exports=n})();